{"version":3,"sources":["chui.js"],"names":["Stack","args","array","length","type","document","Array","isArray","i","len","prototype","slice","apply","arguments","forEach","ctx","idx","index","ret","temp","push","data","objectType","concat","pop","$","unshift","shift","callback","value","call","splice","filter","map","node","nodeType","indexOf","el","parentNode","querySelector","collection","self","constructor","toString","match","item","reverse","sort","a","b","selector","context","matches","querySelectorAll","children","arg","__is","nodes","elements","getIndex","result","findIndex","is","siblings","__siblings","pos","parent","newPos","console","log","p","trim","closest","undefined","property","pixelRE","postFix","testForPixelSupport","key","hasOwnProperty","style","camelize","defaultView","getComputedStyle","eq","getPropertyValue","toLowerCase","content","__before","h","size","insertBefore","__after","lastChild","appendChild","nextSibling","element","insertAdjacentHTML","firstChild","textContent","replace","newElement","targetElement","newEl","targEl","off","replaceChild","removeChild","string","innerText","markup","innerHTML","dataset","display","css","window","readyRE","getNode","test","readyState","body","addEventListener","err","extend","obj","prop","Object","keys","defineProperty","writable","enumerable","configurable","fn","object","version","noop","uuid","d","Date","now","performance","charset","split","randomLetter","Math","floor","random","c","r","then","escapeHTML","tagsToReplace","str","JSON","stringify","replaceTag","tag","safe_tags_replace","parse","letter","toUpperCase","hyphenate","subscriptions","publish","subscription","payload","hasProp","subscribe","handler","run","unsubscribe","delay","milliseconds","Promise","resolve","setTimeout","template","createElement","frag","createDocumentFragment","childNodes","html","literals","raw","sub","lit","safe","normalize","join","String","app","navigator","userAgent","classList","add","theme","dir","unique","arrayItem","arrayItemValue","val","eventStart","eventEnd","eventMove","eventCancel","gestureLength","pointerEnabled","msPointerEnabled","ChuiEventCache","bind","event","capturePhase","id","deleteFromEventStack","toDelete","evtStck","unbind","eventStack","deleteOrder","evt","removeEventListener","delegate","delegateElement","on","e","target","find","ancestor","undelegate","events","trigger","createEvent","evtObj","initEvent","dispatchEvent","touch","touchTimeout","swipeTimeout","tapTimeout","longTapDelay","singleTapDelay","isAndroid","longTapTimeout","parentIfText","swipeDirection","x1","x2","y1","y2","abs","longTap","last","cancelLongTap","clearTimeout","cancelAll","delta","twoTouches","originalEvent","nodeName","pageX","pageY","touches","targetTouches","isDoubleTap","method","Component","options","elm","origElement","renderFnc","render","state","boundComponents","actions","styles","substr","chuiStyle","sharedSheet","unitlessProps","columnCount","fillOpacity","flex","flexGrow","flexShrink","fontWeight","lineClamp","lineHeight","opacity","order","orphans","widows","zIndex","zoom","flatten","flat","createStyleSheet","prefix","unit","_sheet","_prefix","createSheet","rules","rulesFromStyles","set","addUnit","insertRules","head","Error","sheet","block","isPlainObject","combineSelectors","$0","rule","pairs","rulez","insertRule","child","pseudoRe","parents","part","separator","isNaN","stylesheets","handleEvents","bubble","append","get","empty","dataStore","State","create","substring","paused","component","renderComponents","position","start","end","startFrom","_len","_key","compareFunction","props","orderBy","sortByProperty","sortOrder","numberOfProperties","isiPhone","isiPad","isiPod","isiOS","isTouchEnabled","isStandalone","standalone","isWebkit","isDesktop","isMobile","isSafari","isChrome","isNativeAndroid","userAgentHTC"],"mappings":"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","file":"chui.min.js","sourcesContent":["class Stack {\n  constructor(args) {\n    this.array = [];\n    this.length = 0\n    this.type = 'stack'\n    if (args && args === document) {\n      this.array[0] = document\n      this[0] = document;\n    } else if (Array.isArray(args)) {\n      let i = -1\n      const len = args.length\n      while (++i < len) {\n        this.array[i] = args[i]\n      }\n    } else {\n      const array = Array.prototype.slice.apply(arguments);\n      array.forEach(function(ctx, idx) {\n        this.array[idx] = ctx\n      })\n    }\n  }\n\n  eq(index) {\n    const ret = new Stack()\n    if (!this.array.length) return ret\n    let temp;\n    if (index < 0) {\n      temp = this.array[this.array.length + index]\n      ret.push(temp)\n    } else {\n      if (index >= this.array.length) return new Stack()\n      temp = this.array[index]\n      ret.push(temp)\n    }\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  push(data) {\n    if (data && data.objectType === 'Stack') {\n      this.array = this.array.concat(data.array)\n      this[0] = this.array\n    } else {\n      this.array.push(data)\n    }\n  }\n\n  pop() {\n    let ret = this.array.pop()\n    ret = $(ret)\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  unshift(data) {\n    if (data && data.objectType === 'Stack') {\n      this.array.unshift(data.array[0])\n      this[0] = this.array[0]\n    } else {\n      this.array.unshift(data)\n      this[0] = this.array[0]\n    }\n  }\n\n  shift() {\n    let ret = this.array.shift()\n    ret = $(ret)\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  forEach(callback) {\n    let value\n    let i = 0\n    const len = this.array.length\n    for (; i < len; i++) {\n      value = callback.call(this.array[i], this.array[i], i)\n      if (value === false) {\n        break\n      }\n    }\n  }\n\n  slice(...args) {\n    let ret = new Stack()\n    ret.concat(this.array.slice.apply(this.array, args))\n    ret = $(ret)\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  splice(...args) {\n    let ret = new Stack()\n    ret.concat(this.array.splice.apply(this.array, args))\n    ret = $(ret)\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  filter(...args) {\n    let ret = new Stack()\n    ret.concat(this.array.filter.apply(this.array, args))\n    ret[0] = ret.array[0]\n    ret = $(ret)\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  map(...args) {\n    let ret = new Stack()\n    ret.concat(this.array.map.apply(this.array, args))\n    ret[0] = ret.array[0]\n    ret = $(ret)\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  indexOf(node) {\n    if (!node) return -1\n    if (node.nodeType && node.nodeType === 1) {\n      return this.array.indexOf(node)\n    } else if (node && node.objectType === 'Stack') {\n      return this.array.indexOf(node[0])\n    } else if (node && Array.isArray(node)) {\n      return this.array.indexOf(node[0])\n    } else if (node && $.type(node) === 'string') {\n      const el = this[0].parentNode.querySelector(node)\n      return this.array.indexOf(el)\n    }\n  }\n\n  concat(collection) {\n    const self = this\n    if (collection && Array.isArray(collection.array)) {\n      this.array = this.array.concat(collection.array)\n    } else if (collection && collection.constructor.toString().match(/HTMLLIElement/)) {\n      this.array.push(collection)\n    } else if (collection && Array.isArray(collection)) {\n      collection.forEach(function(item) {\n        self.array.push(item)\n      })\n    }\n  }\n\n  reverse(...args) {\n    this.array.reverse.apply(this.array, args)\n    this[0] = this.array[0]\n  }\n\n  unique() {\n    const ret = []\n    const sort = this.array.sort()\n    sort.forEach((ctx) => {\n      if (ret.indexOf(ctx) === -1) {\n        ret.push(ctx)\n      }\n    });\n    ret.sort(function(a, b) {\n      return a - b\n    });\n    this.array.splice(0)\n    const self = this.array\n    ret.forEach(function(node) {\n      self.push(node)\n    });\n  }\n\n  purge() {\n    this.array.length = 0\n  }\n\n  find(selector, context) {\n    let ret = new Stack()\n    let matches\n    if (!this.array.length)\n      return ret;\n    if (context) {\n      $(context).forEach(function() {\n        matches = Array.prototype.slice.apply(context.querySelectorAll(selector))\n        matches.forEach(function(node) {\n          ret.array.push(node)\n        });\n      });\n    } else {\n      this.forEach(function(ctx) {\n        if (ctx && ctx.children && ctx.children.length) {\n          matches = Array.prototype.slice.apply(ctx.querySelectorAll(selector))\n          matches.forEach(function(node) {\n            ret.array.push(node)\n          })\n        }\n      });\n    }\n    ret[0] = ret.array[0]\n    return ret;\n  }\n\n  is(arg) {\n    let ret = false;\n    if (!this.array.length || !arg) return;\n    if (!this.array.length) return\n    const self = this;\n    const __is = function(node, arg) {\n      if (typeof arg === 'string') {\n        let nodes;\n        if (node.parentNode) nodes = node.parentNode.querySelectorAll(arg);\n        let elements;\n        if (nodes && nodes.length) {\n          elements = Array.prototype.slice.apply(node.parentNode.querySelectorAll(arg));\n        }\n        if (elements && elements.length) {\n          if (elements.indexOf(node) >= 0) {\n            ret = true;\n          }\n        }\n      } else if (typeof arg === 'function') {\n        if (arg.call(self)) {\n          ret = true;\n        }\n      } else if (arg && arg.type && arg.type === 'Stack') {\n        if (node === arg[0]) {\n          ret = true;\n        }\n      } else if (arg && arg.length) {\n        if (this.slice.apply(arg).indexOf(node) !== -1) {\n          ret = true;\n        }\n      } else if (arg.nodeType === 1) {\n        if (node === arg) {\n          ret = true;\n        }\n      } else {\n        return;\n      }\n      return ret;\n    };\n    this.forEach(function(item) {\n      if (__is(item, arg)) {\n        ret = true;\n      }\n    });\n    return ret;\n  }\n\n  index(selector) {\n    const self = this.array;\n    if (!this.array.length) {\n      return;\n    }\n\n    function getIndex() {\n      const result = self.findIndex(function(el) {\n        return $(el).is(selector);\n      })\n      return result\n    }\n\n    if (selector && typeof selector === 'string') {\n      return getIndex(selector);\n\n    } else if (selector && selector.type && selector.type === 'Stack') {\n      return getIndex(selector[0]);\n\n    } else if (selector && selector.nodeType && selector.nodeType === 1) {\n      return getIndex(selector);\n\n    } else {\n      if (self.length > 1) {\n        return 0;\n      }\n      const siblings = Array.prototype.slice.apply(self[0].parentNode.children);\n      return siblings.findIndex(function(el) {\n        return el === self[0];\n      })\n    }\n  }\n\n  siblings(selector) {\n    if (!this.array.length)\n      return new Stack()\n    let __siblings\n    let ret = new Stack()\n    const self = this\n    const pos =  this.index()\n    let parent\n    const children = Array.prototype.slice.apply(self.array[0].parentNode.children);\n    if (selector && typeof selector === 'string') {\n      parent = this.array[0].parentNode\n      __siblings = Array.prototype.slice.apply(parent.querySelectorAll(selector))\n      const newPos = __siblings.indexOf(self.array[0])\n      __siblings.splice(newPos, 1)\n      ret.concat(__siblings)\n      ret[0] = ret.array[0]\n      return ret\n    } else {\n      children.splice(pos, 1)\n      ret.array = children\n      ret[0] = ret.array[0]\n      return ret\n    }\n  }\n\n  closest(selector) {\n    if (!this.array.length) {\n      console.log('nothing to find here')\n      return new Stack()\n    }\n    const ret = new Stack()\n    if (typeof selector === 'undefined') {\n      return new Stack()\n    }\n    let p\n    if (this.array[0]) {\n      p = this.array[0].parentNode;\n    }\n    if (!p) {\n      return new Stack()\n    }\n    if (typeof selector === 'string') {\n      selector.trim()\n      if (p && $(p).is(selector)) {\n        ret.array.push(p)\n      } else {\n        ret.array.push($(p).closest(selector).array[0])\n      }\n    }\n    if (ret.array[0] === undefined) {\n      ret.splice(0)\n    }\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  css(property, value) {\n    if (!this.array.length) return new Stack();\n    const pixelRE = /top|bottom|left|right|margin|padding/img\n    let postFix = ''\n    const ret = new Stack()\n    const testForPixelSupport = function(value, property) {\n      if (value === 'number' && property.match(pixelRE)) {\n        postFix = 'px'\n      }\n    };\n    if (!property) return new Stack()\n    if (!value && typeof property === 'object' && !Array.isArray(property)) {\n      this.forEach(function(node) {\n        for (let key in property) {\n          if (property.hasOwnProperty(key)) {\n            testForPixelSupport(property[key], key)\n            node.style[$.camelize(key)] = property[key] + postFix\n          }\n        }\n        ret.push(node)\n      });\n    } else if (!value && typeof property === 'string') {\n      if (!this.array.length)\n        return;\n      return document.defaultView.getComputedStyle(this.eq(0).array[0], null).getPropertyValue(property.toLowerCase())\n    } else if (!!value) {\n      this.forEach(function(node) {\n        testForPixelSupport(value, property)\n        node.style[$.camelize(property)] = value + postFix\n        ret.push(node)\n      });\n    }\n    ret[0] = ret.array[0]\n    return ret;\n  }\n\n  before(content) {\n    if (!this.array || !this.array.length) {\n      return new Stack()\n    }\n    const self = this\n    const __before = function(node, content) {\n      if (typeof content === 'string' || typeof content === 'number') {\n        content = $.h(content)\n      }\n      if (content && content.type && content.type === 'Stack') {\n        const len = content.size()\n        let i = 0\n        while (i < len) {\n          node.parentNode.insertBefore(content.array[i], node)\n          i++\n        }\n      } else if (content && content.nodeType === 1) {\n        node.parentNode.insertBefore(content, node)\n      } else if (content && content.nodeType == 11) {\n      self.forEach(function() {\n        node.parentNode.insertBefore(content, node)\n      })\n    }\n      self[0] = self.array[0]\n      return self\n    };\n    self.forEach(function(node) {\n      return __before(node, content)\n    });\n    self[0] = self.array[0]\n    return this\n  }\n\n  after(content) {\n    if (!this.array || !this.array.length) return new Stack();\n    const self = this\n    const __after = function(node, content) {\n      const parent = node.parentNode\n      if (typeof content === 'string' || typeof content === 'number') {\n        content = $.h(content)\n      }\n      if (content && content.type && content.type === 'Stack') {\n        let i = 0,\n          len = content.size()\n        while (i < len) {\n          if (node === parent.lastChild) {\n            parent.appendChild(content.array[i])\n          } else {\n            parent.insertBefore(content.array[i], node.nextSibling)\n          }\n          i++\n        }\n      } else if (content && content.nodeType === 1) {\n        parent.appendChild(content)\n      } else if (content && content.nodeType == 11) {\n        self.forEach(function(p) {\n          p.appendChild(content)\n        })\n      }\n      self[0] = self.array[0]\n      return self\n    };\n    self.forEach(function(node) {\n      return __after(node, content)\n    });\n    self[0] = this.array[0]\n    return self\n  }\n\n  prepend(content) {\n    if (!this.array.length) return new Stack();\n\n    if (typeof content === 'string' || typeof content === 'number') {\n      this.forEach(function(element) {\n        element.insertAdjacentHTML('afterbegin', content);\n      });\n    } else if (content && content.type && content.type === 'Stack') {\n      this.forEach(function(element) {\n        content.forEach(function(node) {\n          element.insertBefore(node, element.firstChild);\n        });\n      });\n    } else if (content && content.nodeType === 1) {\n      this.forEach(function(element) {\n        element.insertBefore(content, element.firstChild);\n      });\n    } else if (content && content.nodeType == 11) {\n      this.forEach(function(element) {\n        element.appendChild(content)\n      })\n    }\n    this[0] = this.array[0]\n    return this;\n  }\n\n  append(content) {\n    if (!this.array.length) return new Stack();\n\n    if (typeof content === 'string' || typeof content === 'number') {\n      this.forEach(function(element) {\n        element.insertAdjacentHTML('beforeend', content);\n      });\n    } else if (content && content.type && content.type === 'Stack') {\n      this.forEach(function(element) {\n        content.forEach(function(node) {\n          element.insertBefore(node, null);\n        })\n      })\n\n    } else if (content && content.nodeType === 1) {\n      this.forEach(function(element) {\n        element.insertBefore(content, null);\n      })\n    } else if (content && content.nodeType == 11) {\n      this.forEach(function(element) {\n        element.appendChild(content)\n      })\n    }\n    this[0] = this.array[0]\n    return this;\n  }\n\n  empty() {\n    if (!this.array.length) return new Stack()\n    const ret = new Stack()\n    this.array.forEach(function(ctx) {\n      ctx.textContent = ''\n      ret.push(ctx)\n    });\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  replaceWith(content) {\n    function replace(newElement, targetElement) {\n      if (!newElement || !targetElement) return;\n      let newEl;\n      let targEl;\n      if (typeof newElement === 'string') {\n        newEl = $.h(newElement);\n      } else if (newElement.type && newElement.type === 'stack') {\n        newEl = newElement.array[0];\n      } else if (newElement.nodeType === 1 || newElement.nodeType === 11) {\n        newEl = newElement;\n      }\n      if (typeof targetElement === 'string') {\n        targEl = $(targetElement).array[0];\n      } else if (targetElement.type && targetElement.type === 'stack') {\n        targEl = targetElement.array[0];\n      } else if (targetElement.nodeType === 1) {\n        targEl = targetElement;\n      }\n      /**\n       * Remove target's bound events:\n       */\n      $(targEl).off();\n      targEl.parentNode.replaceChild(newEl, targEl);\n    }\n    if (content && content.nodeType && content.nodeType === 1) {\n      $(content).off()\n    } else if (content && content.type && content.type === 'stack') {\n      content.off()\n    }\n    this.forEach(function(node) {\n      $(node).off()\n        replace(content, node)\n    });\n  }\n\n  remove() {\n    if (!this.array.length) return new Stack();\n    this.forEach(function(node) {\n      $(node).off()\n      if (node.parentNode) node.parentNode.removeChild(node)\n    });\n  }\n\n  text(string) {\n    let ret = ''\n    if (!this.array.length) return new Stack()\n    if (!!string || string === 0) {\n      this.forEach(function(element) {\n        element.innerText = string\n      });\n      return this\n    } else {\n      this.forEach(function(element) {\n        ret += element.innerText\n        ret.trim()\n      });\n      return ret\n    }\n  }\n\n  html(markup) {\n    if (!this.array.length) return new Stack();\n    if (markup === '') {\n      this.array.forEach(node => {\n        node.innerHTML = '';\n      });\n      return this;\n    } else if (markup) {\n      this.array.forEach(node => {\n        node.innerHTML = markup;\n      });\n      return this;\n    } else if (!markup) {\n      return this.array[0].innerHTML.trim();\n    }\n  }\n\n  val(value) {\n    if (!this.array.length) return new Stack()\n    if (value || value === '') {\n      this.array[0].value = value\n      this[0] = this.array[0]\n      return this\n    } else {\n      if (this.array[0] && this.array[0].value) {\n        return this.array[0].value\n      }\n    }\n  }\n\n  hide() {\n    if (this.array.length) {\n      this.array[0].dataset.display = this.css('display')\n      this.css('display', 'none')\n    }\n  }\n\n  show() {\n    if (this.array.length) {\n      const display = this.array[0].dataset.display\n      if (display) {\n        this.css('display', display)\n      } else {\n        this.css('display', 'block')\n      }\n    }\n  }\n}\n\nwindow.Stack = Stack\n\n\nfunction $(selector) {\n  const readyRE = /complete|loaded|interactive/;\n  let temp;\n\n  const slice = function(elements) {\n    temp = new Stack([].slice.apply(elements));\n    temp[0] = temp.array[0];\n    return temp;\n  };\n\n  const getNode = function(selector) {\n    if (typeof selector === 'string') {\n      selector = selector.trim();\n      temp = slice(document.querySelectorAll(selector));\n      return temp;\n    }\n  };\n\n  if (selector && selector.type && selector.type === 'Stack') {\n    return selector;\n  }\n\n  if (selector === document) {\n    return new Stack(document);\n  }\n\n  if (selector === null) {\n    return new Stack();\n  }\n\n  if (typeof selector === 'function') {\n    if (readyRE.test(document.readyState) && document.body) {\n      selector.call(selector);\n    } else {\n      document.addEventListener(\"DOMContentLoaded\", function() {\n        return selector.call(selector);\n      });\n    }\n\n  } else if (selector && selector.nodeType === 1) {\n    temp = new Stack();\n    temp[0] = selector;\n    temp.length = temp.array.length;\n    temp.push(selector);\n    return temp;\n\n  } else if (typeof selector === 'string') {\n    if (selector === '') return new Stack();\n    try {\n      return getNode(selector) ? getNode(selector) : new Stack();\n    } catch (err) {\n      return new Stack();\n    }\n\n  } else if (Array.isArray(selector)) {\n    return new Stack(selector);\n\n  } else if (selector === window) {\n    temp = new Stack();\n    temp[0] = window;\n    temp.length = temp.array.length;\n    return temp;\n\n  } else {\n    return new Stack();\n  }\n\n  return new Stack();\n}\nwindow.$ = $\n\n$.extend = function(obj, prop) {\n  if (!prop) {\n    prop = obj;\n    obj = $;\n  }\n  Object.keys(prop).forEach(function(p) {\n    if (prop.hasOwnProperty(p)) {\n      Object.defineProperty(obj, p, {\n        value: prop[p],\n        writable: true,\n        enumerable: false,\n        configurable: true\n      });\n    }\n  });\n}\n\n$.fn = {\n  extend: function(object) {\n   $.extend(Stack.prototype, object)\n  }\n};\n\n$.extend({\n\n  version: 'VERSION_NUMBER',\n\n  noop: function() {\n    return\n  },\n\n  uuid: function() {\n    let d = Date.now();\n    d += performance.now();\n    const charset = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".split('');\n    const randomLetter = charset[Math.floor(Math.random() * charset.length)];\n    return randomLetter + 'xxxxxxxxxxxxxxx'.replace(/[x]/g, function(c) {\n      const r = (d + Math.random() * 16) % 16 | 0;\n      d = Math.floor(d / 16);\n      return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n    });\n  },\n\n  type: function(type) {\n    switch (typeof type) {\n      case 'boolean':\n        return 'boolean';\n      case 'number':\n        return 'number';\n      case 'string':\n        return 'string';\n      case 'function':\n        return 'function';\n      case 'object':\n        if (Array.isArray(type)) {\n          return 'array';\n        } else if (Object.prototype.toString.call(type) === '[object Date]') {\n          return 'date';\n        } else if (Object.prototype.toString.call(type) === '[object Error]') {\n          return 'error';\n        } else if (Object.prototype.toString.call(type) === '[object RegExp]') {\n          return 'regexp';\n        } else if (Object.prototype.toString.call(type) === '[object Object]') {\n            if (type.objectType && type.objectType === 'domstack') {\n              return 'domstack';\n              /* If Promise polyfill, then should support `then`. */\n            } else if (type.then) {\n              return 'promise';\n              /* Otherwise we got a normal object here. */\n            } else {\n              return 'object';\n            }\n        } else if (Object.prototype.toString.call(type) === '[object Number]') {\n          return 'number';\n        } else if (Object.prototype.toString.call(type) === '[object String]') {\n          return 'string';\n        } else if (Object.prototype.toString.call(type) === '[object Promise]') {\n          return 'promise';\n        } else if (Object.prototype.toString.call(type) === '[object Boolean]') {\n          return 'boolean';\n        }\n    }\n  },\n\n  escapeHTML: function(data) {\n    const tagsToReplace = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '(': '%28',\n      ')': '%29'\n    }\n\n    let str = JSON.stringify(data)\n\n    const replaceTag = function(tag) {\n      return tagsToReplace[tag] || tag\n    }\n\n    const safe_tags_replace = function(str) {\n      return str.replace(/[&<>\\(\\)]/g, replaceTag)\n    }\n\n    str = safe_tags_replace(str)\n    return JSON.parse(str)\n  },\n\n  camelize: function(string) {\n    if (typeof string !== 'string')\n      return;\n    return string.replace(/\\-(.)/g, function(match, letter) {\n      return letter.toUpperCase();\n    });\n  },\n\n  hyphenate: function(string) {\n    if (typeof string !== 'string')\n      return;\n    return string.replace(/([A-Z])/g, '-$1').toLowerCase();\n  },\n\n  subscriptions: {},\n\n  publish: function(subscription, payload) {\n    const hasProp = $.subscriptions.hasOwnProperty\n    if (!hasProp.call($.subscriptions, subscription)) return\n\n    $.subscriptions[subscription].forEach(function(item) {\n      item(payload != undefined ? payload : {})\n    })\n  },\n\n  subscribe: function(subscription, handler) {\n    if (!$.subscriptions.hasOwnProperty.call($.subscriptions, subscription)) $.subscriptions[subscription] = []\n    const index = $.subscriptions[subscription].push(handler) -1\n    return {\n      off: function() {\n        delete $.subscriptions[subscription][index]\n      },\n\n      run: function(data) {\n        if ($.subscriptions[subscription]) {\n          try {\n            $.subscriptions[subscription][index](data)\n          } catch(err) {}\n        }\n      }\n    }\n  },\n\n  unsubscribe: function(subscription) {\n    delete $.subscriptions[subscription]\n  },\n\n  delay: function(milliseconds) {\n    return new Promise(function(resolve) {\n      setTimeout(resolve, milliseconds)\n    })\n  },\n\n  h: function(template) {\n    const temp = document.createElement('div')\n    temp.innerHTML = template\n    const frag = document.createDocumentFragment()\n    // Use childNodes to allow creating element nodes or text nodes:\n    const children = Array.prototype.slice.apply(temp.childNodes)\n    children.map(function(el) {\n     frag.appendChild(el)\n    })\n    return frag\n  }\n})\n\nfunction html(literals) {\n  const raw = literals.raw\n  let result = ''\n  let i\n  let len\n  let sub\n  let lit\n  let safe\n\n  /**\n   * Function that normalizes interpolation substitions.\n   * It flattens arrays while ignoring falsey values.\n   * All other values are converted to strings.\n   */\n  function normalize (value, safe) {\n    return (\n      value == null ? ''\n      : value === false ? ''\n      : Array.isArray(value) ? value.map(normalize).join('')\n      : safe === false ? $.escapeHTML(value)\n      : String(value)\n    )\n  }\n\n  for (i = 1, len = arguments.length; i < len; i++) {\n    lit = raw[i - 1]\n    /**\n     * Allow safe html by prefixing interpolation with an exclamation mark.\n     */\n    safe = lit[lit.length - 1] === '!'\n    sub = normalize(arguments[i], safe)\n    if (safe) lit = lit.slice(0, -1)\n\n    result += lit + sub\n  }\n\n  // Take care of last literal section.\n  result += raw[raw.length - 1]\n\n  return result\n}\nwindow.html = html\n\nfunction app(callback) {\n  $(function() {\n    callback()\n  })\n}\nwindow.app = app\n\n$(function() {\n    if (!/(mobile)|(ios)|(android)/img.test(navigator.userAgent)) {\n        document.body.classList.add('isDesktop');\n    }\n    if ($('link[href*=ios]')[0]) {\n        document.body.classList.add('themeIsiOS');\n        $.theme = 'ios';\n    } else if ($('link[href*=android]')[0]) {\n        document.body.classList.add('themeIsAndroid');\n        $.theme = 'android';\n    }\n    $.dir = 'ltr';\n    if (document.dir === 'rtl') {\n        $.dir = 'rtl';\n    }\n\n\n  if (!Array.prototype.unique) {\n    $.extend(Array.prototype, {\n      unique: function() {\n        const len = this.length;\n        const obj = {};\n        const ret = [];\n        for (let i = 0; i < len; i++) {\n          const arrayItem = JSON.stringify(this[i]);\n          const arrayItemValue = this[i];\n          if (obj[arrayItem] === undefined) {\n            ret.push(arrayItemValue);\n            obj[arrayItem] = 1;\n          } else {\n            obj[arrayItem]++;\n          }\n        }\n        this.length = 0;\n        const self = this;\n        ret.forEach(function(item) {\n          self.push(item);\n        })\n      }\n    })\n  }\n});\n\n\n\nfunction html(literals) {\n  let raw = literals.raw\n  let result = ''\n  let i\n  let len\n  let sub\n  let lit\n  let safe\n\n  /**\n   * Function that normalizes interpolation substitions.\n   * It flattens arrays while ignoring falsey values.\n   * All other values are converted to strings.\n   */\n  function normalize (val, safe) {\n    return (\n      val == null ? ''\n      : val === false ? ''\n      : Array.isArray(val) ? val.map(normalize).join('')\n      : safe === false ? $.escapeHTML(val)\n      : String(val)\n    )\n  }\n\n  for (i = 1, len = arguments.length; i < len; i++) {\n    lit = raw[i - 1]\n    /**\n     * Allow safe html by prefixing interpolation with an exclamation mark.\n     */\n    safe = lit[lit.length - 1] === '!'\n    sub = normalize(arguments[i], safe)\n    if (safe) lit = lit.slice(0, -1)\n\n    result += lit + sub\n  }\n\n  // Take care of last literal section.\n  result += raw[raw.length - 1]\n\n  return result\n}\n\n\n$.extend({\n  eventStart : null,\n  eventEnd : null,\n  eventMove : null,\n  eventCancel : null,\n  gestureLength : 30\n});\n\n$(function() {\n  /* Setup Event Variables */\n  /* Pointer events for IE10 and WP8: */\n  if (window.navigator.pointerEnabled) {\n    $.eventStart = 'pointerdown'\n    $.eventEnd = 'pointerup'\n    $.eventMove = 'pointermove'\n    $.eventCancel = 'pointercancel'\n  /* Pointer events for IE10 and WP8: */\n  } else if (window.navigator.msPointerEnabled) {\n    $.eventStart = 'MSPointerDown'\n    $.eventEnd = 'MSPointerUp'\n    $.eventMove = 'MSPointerMove'\n    $.eventCancel = 'MSPointerCancel'\n  /* Touch events for iOS & Android: */\n  } else if ('ontouchstart' in window && /mobile/img.test(navigator.userAgent)) {\n    $.eventStart = 'touchstart'\n    $.eventEnd = 'touchend'\n    $.eventMove = 'touchmove'\n    $.eventCancel = 'touchcancel'\n  /* Mouse events for desktop: */\n  } else {\n    $.eventStart = 'mousedown'\n    $.eventEnd = 'click'\n    $.eventMove = 'mousemove'\n    $.eventCancel = 'mouseout'\n  }\n});\n\n(function() {\n\n  var ChuiEventCache = {\n    elements: {}\n  }\n\n  /**\n   * Private method to set events on ChuiEventCache\n   */\n  const bind = function(element, event, callback, capturePhase) {\n    if (!element.id) element.id = $.uuid()\n    if (!ChuiEventCache.elements[element.id]) {\n      ChuiEventCache.elements[element.id] = []\n    }\n    ChuiEventCache.elements[element.id].push({\n      event: event,\n      callback: callback\n    })\n    element.addEventListener(event, callback, capturePhase)\n  }\n\n  /**\n   * Delete items from event stack:\n   */\n  const deleteFromEventStack = function(toDelete, evtStck) {\n    let len = toDelete.length\n    for (let i = 0; len > i; len--) {\n      evtStck.splice(toDelete[len - 1], 1)\n    }\n  }\n\n  /**\n   * Private method to unbind events on ChuiEventCache\n   */\n  const unbind = function(element, event, callback) {\n\n    const eventStack = ChuiEventCache.elements[element.id]\n    if (!eventStack) return\n    let deleteOrder = []\n\n    if (!event) {\n      deleteOrder = []\n      eventStack.forEach(function(evt, idx) {\n        element.removeEventListener(evt.event, evt.callback, evt.capturePhase)\n        deleteOrder.push(idx)\n      })\n\n      deleteFromEventStack(deleteOrder, eventStack)\n\n    } else if (!!event && !callback) {\n      deleteOrder = []\n      eventStack.forEach(function(evt, idx) {\n        if (evt.event === event) {\n          element.removeEventListener(evt.event, evt.callback, evt.capturePhase)\n          deleteOrder.push(idx)\n        }\n      })\n\n      deleteFromEventStack(deleteOrder, eventStack)\n\n    } else if (callback) {\n      deleteOrder = []\n      eventStack.forEach(function(evt, idx) {\n        if (callback === evt.callback) {\n          element.removeEventListener(evt.event, evt.callback, evt.capturePhase)\n          deleteOrder.push(idx)\n        }\n      })\n      deleteFromEventStack(deleteOrder, eventStack)\n    }\n  }\n\n  /**\n   * Set delegated events on ChuiEventCache\n   */\n  const delegate = function(element, selector, event, callback, capturePhase) {\n    const delegateElement = $(element).array[0]\n    $(element).forEach(function(ctx) {\n      $(ctx).on(event, function(e) {\n        let target = e.target\n        if (e.target.nodeType === 3) {\n          target = e.target.parentNode\n        }\n        $(ctx).find(selector).forEach(function(delegateElement) {\n          if (delegateElement === target) {\n            callback.call(delegateElement, e)\n          } else {\n            try {\n              const ancestor = $(target).closest(selector)\n              if (delegateElement === ancestor.array[0]) {\n                callback.call(delegateElement, e)\n              }\n            } catch (err) {}\n          }\n        })\n      }, capturePhase)\n    })\n  }\n\n\n  /**\n   * Method to remove delegated events from ChuiEventCache:\n   */\n  const undelegate = function(element, selector, event, callback, capturePhase) {\n\n    unbind($(element).array[0], event, callback, capturePhase)\n  }\n\n  $.fn.extend({\n    on: function(event, selector, callback, capturePhase) {\n      if (!event) {\n        return\n      }\n      if (!selector) {\n        return\n      }\n      if (!selector && /Object/img.test(event.constructor.toString())) {\n        this.forEach(function(element) {\n          for (let key in event) {\n            if (event.hasOwnProperty(key)) {\n              $(element).on(key, event[key])\n            }\n          }\n        })\n      }\n      let ret = []\n      let events\n      if (typeof event === 'string') {\n        event = event.trim()\n        if (/\\s/.test(event)) {\n          events = event.split(' ')\n          this.forEach(function(ctx) {\n            events.forEach(function(evt) {\n              if (typeof selector === 'function') {\n                bind(ctx, evt, selector, callback)\n                ret.push(ctx)\n              } else {\n                delegate(ctx, selector, evt, callback, capturePhase)\n              }\n            })\n          })\n        }\n      }\n      this.forEach(function(ctx) {\n        if (typeof selector === 'function') {\n          return bind(ctx, event, selector, callback)\n        } else {\n          delegate(ctx, selector, event, callback, capturePhase)\n        }\n      })\n      return this\n    },\n\n    off: function(event, selector, callback, capturePhase) {\n      const ret = new Stack()\n      if (!this.array.length) return ret\n\n      this.forEach(function(ctx) {\n        if (typeof event === 'undefined') {\n          ret.push(ctx)\n          unbind(ctx)\n          return ret\n        } else if (typeof selector === 'function' || !selector) {\n          unbind(ctx, event, selector, callback, capturePhase)\n          return this\n        } else {\n          undelegate(ctx, selector, event, callback, capturePhase)\n          return this\n        }\n      })\n    },\n\n    trigger: function(event, data) {\n      if (!event) {\n        return\n      }\n      if (!this.array.length) return new Stack()\n      this.forEach(function(ctx) {\n        if (document.createEvent) {\n          const evtObj = document.createEvent('Events')\n          evtObj.initEvent(event, true, false)\n          evtObj.data = data\n          ctx.dispatchEvent(evtObj)\n        }\n      })\n    }\n  })\n})();\n\n\n(function() {\n  \"use strict\";\n  let touch = {}\n  let touchTimeout\n  let swipeTimeout\n  let tapTimeout\n  const longTapDelay = 750\n  let singleTapDelay = 150\n  const gestureLength = 50\n  if ($.isAndroid) singleTapDelay = 200\n  let longTapTimeout\n\n  function parentIfText(node) {\n    return 'tagName' in node ? node : node.parentNode\n  }\n\n  function swipeDirection(x1, x2, y1, y2) {\n    return Math.abs(x1 - x2) >=\n      Math.abs(y1 - y2) ? (x1 - x2 > 0 ? 'left' : 'right') : (y1 - y2 > 0 ? 'up' : 'down')\n  }\n\n  function longTap() {\n    longTapTimeout = null\n    if (touch.last) {\n      try {\n        if (touch && touch.el) {\n          touch.el.trigger('longtap')\n          touch = {}\n        }\n      } catch (err) {}\n    }\n  }\n\n  function cancelLongTap() {\n    if (longTapTimeout) clearTimeout(longTapTimeout)\n    longTapTimeout = null\n  }\n\n  function cancelAll() {\n    if (touchTimeout) clearTimeout(touchTimeout)\n    if (tapTimeout) clearTimeout(tapTimeout)\n    if (swipeTimeout) clearTimeout(swipeTimeout)\n    if (longTapTimeout) clearTimeout(longTapTimeout)\n    touchTimeout = tapTimeout = swipeTimeout = longTapTimeout = null\n    touch = {}\n  }\n\n  $(function() {\n    let now\n    let delta\n    let body = document.body\n    let twoTouches = false\n\n    body.addEventListener($.eventStart, function(e) {\n      now = Date.now()\n      delta = now - (touch.last || now)\n      if (e.originalEvent) e = e.originalEvent\n\n      if ($.eventStart === 'mousedown') {\n        touch.el = $(parentIfText(e.target))\n        if (e.target.nodeName === 'ripple') {\n          touch.el = $(el.target.parentNode)\n        }\n        touchTimeout && clearTimeout(touchTimeout)\n        touch.x1 = e.pageX\n        touch.y1 = e.pageY\n        twoTouches = false\n\n      } else {\n        if (e.touches.length === 1) {\n          touch.el = $(parentIfText(e.touches[0].target))\n          touchTimeout && clearTimeout(touchTimeout)\n          touch.x1 = e.touches[0].pageX\n          touch.y1 = e.touches[0].pageY\n          if (e.targetTouches.length === 2) {\n            twoTouches = true\n          } else {\n            twoTouches = false\n          }\n        }\n      }\n\n      if (delta > 0 && delta <= 250) {\n        touch.isDoubleTap = true\n      }\n      touch.last = now\n      longTapTimeout = setTimeout(longTap, longTapDelay)\n    })\n\n    body.addEventListener($.eventMove, function(e) {\n      if (e.originalEvent) e = e.originalEvent\n      cancelLongTap()\n      if ($.eventMove === 'mousemove') {\n        touch.x2 = e.pageX\n        touch.y2 = e.pageY\n      } else {\n\n        if (e.touches.length === 1) {\n          touch.x2 = e.touches[0].pageX\n          touch.y2 = e.touches[0].pageY\n        }\n      }\n    })\n\n    body.addEventListener($.eventEnd, function() {\n\n      cancelLongTap()\n      if (!!touch.el) {\n        if ((touch.x2 && Math.abs(touch.x1 - touch.x2) > gestureLength) ||\n          (touch.y2 && Math.abs(touch.y1 - touch.y2) > gestureLength)) {\n          swipeTimeout = setTimeout(function() {\n            if (touch && touch.el) {\n              touch.el.trigger('swipe')\n              touch.el.trigger('swipe' + (swipeDirection(touch.x1, touch.x2, touch.y1, touch.y2)))\n              touch = {}\n            }\n          }, 0)\n        } else if ('last' in touch) {\n          tapTimeout = setTimeout(function() {\n            if (touch && touch.isDoubleTap) {\n              if (touch && touch.el) {\n                touch.el.trigger('dbltap')\n                touch = {}\n              }\n\n            } else {\n              touchTimeout = setTimeout(function() {\n                touchTimeout = null\n                if (touch && touch.el) {\n                  touch.el.trigger('tap')\n                  touch = {}\n                  return false\n                }\n              }, singleTapDelay)\n            }\n          }, 0)\n        }\n\n      } else {\n        return\n      }\n    })\n    body.addEventListener('touchcancel', cancelAll)\n  });\n\n  ['tap', 'dbltap', 'longtap', 'swipeleft', 'swiperight', 'swipeup', 'swipedown'].forEach(function(method) {\n    $.fn.extend({\n      method: function(callback) {\n        return this.on(method, callback)\n      }\n    })\n  })\n})()\n\nclass Component {\n  constructor(options) {\n    if (!options) return\n    if (typeof options.element === 'string') {\n      this.elm = $(options.element)\n    } else if (options.element && options.element.nodeType) {\n      this.elm = $(options.element)\n    } else {\n      this.elm = options.element\n    }\n    this.origElement = options.element\n    this.renderFnc = options.render\n    this.state = options.state\n    if (this.state) {\n      this.state.boundComponents.push(this)\n    }\n    this.actions = options.actions\n    this.styles = options.styles\n    this.id = options.id || Math.random().toString(16).substr(2, 10)\n\n    this.chuiStyle = function() {\n      let sharedSheet = null\n\n      const unitlessProps = {\n        columnCount: true,\n        fillOpacity: true,\n        flex: true,\n        flexGrow: true,\n        flexShrink: true,\n        fontWeight: true,\n        lineClamp: true,\n        lineHeight: true,\n        opacity: true,\n        order: true,\n        orphans: true,\n        widows: true,\n        zIndex: true,\n        zoom: true\n      }\n\n      function flatten(array) {\n        const flat = Array.prototype.concat(array)\n        for (let i = 0; i < flat.length; i++) {\n          if (Array.isArray(flat[i])) {\n            flat.splice(i, 1, flat[i--])\n          }\n        }\n        return flat\n      }\n\n      function createStyleSheet(options) {\n        if (!(this instanceof createStyleSheet)) {\n          return new createStyleSheet(options)\n        }\n        options || (options = {})\n        options.prefix = !options.hasOwnProperty(\"prefix\") ? true : !!options.prefix\n        options.unit = options.hasOwnProperty(\"unit\") ? options.unit : \"px\"\n\n        this._sheet = null\n        this._prefix = null\n\n        this.css = function (element, styles, selector) {\n          if (styles == null) return \"\"\n          if (this._sheet == null) {\n            this._sheet = sharedSheet = (sharedSheet || createSheet())\n          }\n          selector = element\n\n          const rules = rulesFromStyles(selector, styles)\n          if (options.prefix || options.unit !== \"\") {\n            rules.forEach(function(set) {\n              if (options.unit !== \"\") {\n                addUnit(set[1], options.unit)\n              }\n            })\n          }\n          insertRules(rules, this._sheet)\n        }\n\n      }\n\n      function createSheet() {\n        if (document.head == null) {\n          throw new Error(\"Can't add stylesheet before <head> is available. Make sure your document has a head element.\")\n        }\n        const style = document.createElement(\"style\")\n        style.id = \"styles_\" + Math.random().toString(16).slice(2, 8)\n        document.head.appendChild(style)\n        return style.sheet\n      }\n\n      function rulesFromStyles(selector, styles) {\n        if (!Array.isArray(styles)) styles = [styles]\n        const style = {}\n        let rules = []\n        styles = flatten(styles)\n        styles.forEach(function(block) {\n          for (let prop in block) {\n            let value = block[prop]\n            if (isPlainObject(value) || Array.isArray(value)) {\n              rules = rules.concat(\n                rulesFromStyles(combineSelectors(selector, prop), value)\n              )\n            } else {\n              if (prop === \"content\") value = \"'\"+value+\"'\"\n              style[prop] = value\n            }\n          }\n        })\n        rules.push([ selector, style ])\n        return rules\n      }\n\n      function insertRules(rules, sheet) {\n        window.sheet = sheet\n        function hyphenate(str) {\n          return str.replace(/[A-Z]/g, function($0) { return '-'+$0.toLowerCase() })\n        }\n        rules.forEach(function(rule) {\n          const pairs = []\n          for (let prop in rule[1]) {\n            pairs.push(hyphenate(prop) + \":\" + rule[1][prop])\n          }\n          if (pairs.length > 0) {\n            const rulez = rule[0] ? rule[0] : ''\n            sheet.insertRule(rulez + \"{\" + pairs.join(\";\") + \"}\", 0)\n          }\n        })\n      }\n\n      function combineSelectors(parent, child) {\n        const pseudoRe = /^[:\\[]/\n        const parents = parent.split(\",\"), children = child.split(\",\")\n        return parents.map(function(parent) {\n          return children.map(function(part) {\n            const separator = pseudoRe.test(part) ? \"\" : \" \"\n            return parent + separator + part\n          }).join(\",\")\n        }).join(\",\")\n      }\n\n      function addUnit(style, unit) {\n        for (let prop in style) {\n          let value = style[prop] + \"\"\n          if (!isNaN(value) && !unitlessProps[prop]) {\n            value = value + unit\n          }\n          style[prop] = value\n        }\n        return style\n      }\n\n      function isPlainObject(obj) {\n        return obj === Object(obj) && Object.prototype.toString === obj.toString\n      }\n\n      const stylesheets = {}\n      stylesheets.css = createStyleSheet().css\n      return stylesheets\n    }\n\n    this.handleEvents = function() {\n      if (!this.actions) return\n      const self = this\n      let bubble = false\n      if (this.actions.length) {\n        this.actions.forEach(function(item) {\n          bubble = item.bubble\n          if (item && item.element === 'self' || item && !item.element) {\n            self.elm.on(item.event, item.callback, bubble)\n          } else {\n            self.elm.on(item.event, item.element, item.callback, bubble)\n          }\n        })\n      } else if ($.type(this.actions) === 'object') {\n        bubble = this.actions.bubble || false\n        if (!this.actions.element || this.actions.element === 'self') {\n          self.elm.on(this.actions.event, this.actions.callback, bubble)\n        } else {\n          self.elm.on(this.actions.event, this.actions.element, this.actions.callback, bubble)\n        }\n      }\n    }\n\n    if (this.actions) {\n      this.handleEvents(this.actions)\n    }\n  }\n\n  setTemplate(template) {\n    if (template) this.renderFnc = template\n  }\n\n  setState(state) {\n    if (state) {\n      state.boundComponents.push(this)\n      this.state = state\n    }\n  }\n\n  render(data, append) {\n    const self = this\n    if (!self.renderFnc) {\n      return\n    }\n    let temp = ''\n    if (!this.elm.array[0]) {\n      return\n    }\n    if (!data && this.state) {\n      data = this.state.get()\n    }\n\n    if (Array.isArray(data)) {\n      data.map(function(item, idx) {\n        temp += self.renderFnc(item, idx)\n      }).join('')\n    } else {\n      temp = self.renderFnc(data)\n    }\n\n    if (this.styles && (this.elm && this.elm.array[0])) {\n      const styles = this.chuiStyle()\n      if (typeof this.styles !== 'object') return\n      styles.css(this.origElement, this.styles)\n    }\n\n    if (append) {\n      self.elm.append(temp)\n    } else {\n      this.elm.array[0].textContent = ''\n      self.elm.empty()\n      self.elm.append(temp)\n    }\n  }\n\n  empty() {\n    if (this.elm.array[0]) {\n      this.elm.empty()\n    }\n  }\n\n  mount() {\n    this.elm = $(this.origElement)\n    this.handleEvents()\n    const styles = this.chuiStyle()\n    styles.css(this.origElement, this.styles)\n  }\n}\n\n\nconst dataStore = {\n  id: new Date()\n}\nclass State {\n  constructor(data) {\n    let d\n    if ($.type(data) === 'array') {\n      d = data.slice()\n    } else if ($.type(data) === 'object') {\n      d = Object.create(data)\n    } else {\n      d = data\n    }\n\n    this[dataStore] = d\n    this.id = (((1+Math.random())*0x10000)|0).toString(16).substring(1) + (((1+Math.random())*0x10000)|0).toString(16).substring(1)\n    this[dataStore] = d\n    this.events = {}\n    this.paused = false\n    this.boundComponents = []\n  }\n\n  renderComponents() {\n    if (!this.boundComponents || !this.boundComponents.length || this.paused) {\n      return\n    }\n    this.boundComponents.forEach(function(component) {\n      component.render()\n    })\n  }\n\n  get(property) {\n    if (property && $.type(this[dataStore]) === 'object') {\n      return this[dataStore][property]\n    } else {\n      return this[dataStore]\n    }\n  }\n\n  set(property, data) {\n    if (property === '' || property === false) {\n      this[dataStore][property] = property\n      console.log('Setting property to:')\n      console.log(property)\n      this.renderComponents()\n    } else if (!property) {\n      return\n    } else if (data && $.type(this[dataStore]) === 'object') {\n      this[dataStore][property] = data\n      this.renderComponents()\n    } else if (!data && ($.type(this[dataStore]) !== 'object' || $.type(this[dataStore]) !== 'array')) {\n      this[dataStore] = property\n      this.renderComponents()\n    }\n  }\n\n  purge() {\n    if ($.type(this[dataStore]) === 'object') {\n      this[dataStore] = {}\n    } else if ($.type(this[dataStore]) === 'array') {\n      this[dataStore] = []\n    } else {\n      this[dataStore]\n    }\n  }\n\n  merge(obj) {\n    if (!obj || typeof obj !== 'object') {\n      return\n    } else if (typeof this[dataStore] === 'object') {\n      for (let key in obj) {\n        this[dataStore][key] = obj[key]\n      }\n      this.renderComponents()\n    }\n  }\n\n  mixin(data) {\n    if (!data) {\n      return\n    }\n    if ($.type(this[dataStore]) === 'object') {\n      for (let key in data) {\n\n        if (!(key in this[dataStore])) {\n          this[dataStore][key] = data[key]\n          this.renderComponents()\n        }\n      }\n    } else if ($.type(this[dataStore]) === 'array') {\n      this[dataStore] = this[dataStore].concat(data).unique()\n      this.renderComponents()\n    }\n  }\n\n  replace(data) {\n    if (data) {\n    let d\n    if ($.type(data) === 'array') {\n      d = data.slice()\n    } else if ($.type(data) === 'object') {\n      d = Object.create(data)\n    } else {\n      d = data\n    }\n      this[dataStore] = d\n      this.renderComponents(this)\n    }\n  }\n\n  remove(prop) {\n    if (!prop) {\n      return\n    }\n    if ($.type(this[dataStore]) !== 'object') return\n    delete this[dataStore][prop]\n    this.renderComponents()\n  }\n\n  getPropAt(property, position) {\n    if (!property || position === undefined) {\n      return\n    }\n    if ($.type(this[dataStore]) === 'array') {\n      if (position < 0) {\n        const pos = this[dataStore].length + position\n        return this[dataStore][pos][property]\n      } else if (position > this[dataStore].length) {\n        return\n      } else {\n        return this[dataStore][position][property]\n      }\n    }\n  }\n\n  setPropAt(property, value, position) {\n    if (!property || value === undefined || position=== undefined) {\n      return\n    }\n    if ($.type(this[dataStore]) === 'array') {\n      if (position < 0) {\n        const pos = this[dataStore].length + position\n        this[dataStore][pos][property] = value\n        this.renderComponents()\n      } else {\n        this[dataStore][position][property] = value\n        this.renderComponents()\n      }\n    }\n  }\n\n  push(data) {\n    if (!data) {\n      return\n    }\n    if ($.type(this[dataStore]) === 'array') {\n      this[dataStore].push(data)\n      this.renderComponents()\n    }\n  }\n\n  pop() {\n    if ($.type(this[dataStore]) === 'array') {\n      this[dataStore].pop()\n      this.renderComponents()\n    }\n  }\n\n  unshift(data) {\n    if (!data) {\n      return\n    } else if ($.type(this[dataStore]) === 'array') {\n      this[dataStore].unshift(data)\n      this.renderComponents()\n    }\n  }\n\n  shift() {\n    if ($.type(this[dataStore]) === 'array') {\n      this[dataStore].shift()\n      this.renderComponents()\n    }\n  }\n\n\n  slice(start, end) {\n    if (end === undefined || start === undefined) {\n      return\n    }\n    if ($.type(this[dataStore]) === 'array') {\n      return this[dataStore].slice(start, end)\n    }\n  }\n\n  splice(start, end, data) {\n    if (end === undefined || start === undefined) {\n      return\n    }\n    if ($.type(this[dataStore]) === 'array' && data) {\n      this[dataStore].splice(start, end, data)\n      this.renderComponents()\n    } else if ($.type(this[dataStore]) === 'array') {\n      if(start == null || !end) return\n      this[dataStore].splice(start, end)\n      this.renderComponents()\n    }\n  }\n\n  insert(position, data) {\n    if (data === undefined || position === undefined || typeof position !== 'number') {\n      return\n    }\n    if (typeof this[dataStore] === 'array') {\n      if ($.type(position) !== 'number') return\n      this[dataStore].splice(position, 0, data)\n      this.renderComponents()\n    }\n  }\n\n  pluck(property) {\n    if (!property) {\n      return\n    } else {\n      const ret = []\n      if (this[dataStore] && this[dataStore].length) {\n        const len = this[dataStore].length\n        for (let i = 0; i < len; i++) {\n          ret.push(this[dataStore][i][property])\n        }\n        return ret\n      }\n    }\n  }\n\n  indexOf(element, startFrom) {\n    if (!element) {\n      return\n    } else if ($.type(this[dataStore]) === 'array') {\n      return this[dataStore].indexOf(element, startFrom)\n    }\n  }\n\n  find(callback) {\n    if (!callback) {\n      return\n    } else if ($.type(this[dataStore]) === 'array') {\n      return this[dataStore].find(callback)\n    }\n  }\n\n  findIndex(callback) {\n    if (!callback) {\n      return\n    } else if ($.type(this[dataStore]) === 'array') {\n      return this[dataStore].findIndex(callback)\n    }\n  }\n\n  forEach(callback) {\n    if (!callback) {\n      return\n    }\n    if (this[dataStore] && this[dataStore].length) {\n      let value\n      let i = -1\n      const len = this[dataStore].length\n      while (++i < len) {\n        value = callback.call(this[dataStore][i], this[dataStore][i], i)\n        if (value === false) {\n          break\n        }\n      }\n    }\n  }\n\n  filter(...args) {\n    for (let _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key]\n    }\n    if (this[dataStore] && this[dataStore].length) {\n      return this[dataStore].filter.apply(this[dataStore], args)\n    }\n  }\n\n  map(...args) {\n    for (let _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key]\n    }\n    if (this[dataStore] && this[dataStore].length) {\n      return this[dataStore].map.apply(this[dataStore], args)\n    }\n  }\n\n  reverse() {\n    if (this[dataStore] && this[dataStore].length) {\n      this[dataStore].reverse()\n      this.renderComponents()\n    }\n  }\n\n  sort(compareFunction) {\n    if (this[dataStore] && this[dataStore].length) {\n      if (compareFunction) {\n        this[dataStore].sort(compareFunction)\n        this.renderComponents()\n      } else {\n        this[dataStore].sort()\n        this.renderComponents()\n      }\n    }\n  }\n\n  orderBy(...props) {\n    for (let _len = arguments.length, _key = 0; _key < _len; _key++) {\n      props[_key] = arguments[_key]\n    }\n    if (!props) return\n\n    const orderBy = function() {\n      return function(a, b) {\n        const sortByProperty = function(property) {\n          let sortOrder = 1\n          if (property[0] === \"-\") {\n            sortOrder = -1\n            property = property.substr(1)\n          }\n          return function(a, b) {\n            const result = (a[property] < b[property]) ? -1 : (a[property] > b[property]) ? 1 : 0\n            return result * sortOrder\n          }\n        }\n\n        let i = 0\n        let result = 0\n        const numberOfProperties = props.length\n        while (result === 0 && i < numberOfProperties) {\n          result = sortByProperty(props[i])(a, b)\n          i++\n        }\n        return result\n      }\n    }\n    if (this[dataStore] && this[dataStore].length) {\n      this[dataStore].sort(orderBy.apply(null, props))\n      this.renderComponents()\n    }\n  }\n\n  concat(data) {\n    if (!data) {\n      return\n    }\n    if ($.type(this[dataStore]) === 'array') {\n      const temp = this[dataStore].concat(data)\n      this[dataStore] = temp\n      this.renderComponents()\n    }\n  }\n\n  unique() {\n    if ($.type(this[dataStore]) === 'array') {\n      this[dataStore].unique()\n      this.renderComponents()\n    }\n  }\n\n  eq(position) {\n    if ($.type(this[dataStore]) === 'array') {\n      return this[dataStore][position]\n    }\n  }\n\n  size() {\n    if ($.type(this[dataStore]) === 'array') {\n      return this[dataStore].length\n    } else {\n      return\n    }\n  }\n}\n\n$.extend($, {\n  isiPhone: /iphone/img.test(navigator.userAgent),\n  isiPad: /ipad/img.test(navigator.userAgent),\n  isiPod: /ipod/img.test(navigator.userAgent),\n  isiOS: /ip(hone|od|ad)/img.test(navigator.userAgent),\n  isAndroid: (/android/img.test(navigator.userAgent) && !/trident/img.test(navigator.userAgent)),\n  isTouchEnabled: !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && 'createTouch' in document,\n  isStandalone: navigator.standalone || false,\n  isWebkit: (!/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /webkit/img.test(navigator.userAgent)),\n  isDesktop: (!/mobile/img.test(navigator.userAgent)),\n  isMobile: (/mobile/img.test(navigator.userAgent)),\n  isSafari: (!/edge/img.test(navigator.userAgent) && !/Chrome/img.test(navigator.userAgent) && /Safari/img.test(navigator.userAgent) && !/android/img.test(navigator.userAgent)),\n  isChrome: !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /Chrome/img.test(navigator.userAgent) && !((/samsung/img.test(navigator.userAgent) || /Galaxy Nexus/img.test(navigator.userAgent) || /HTC/img.test(navigator.userAgent) || /LG/img.test(navigator.userAgent)) && !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /android/i.test(navigator.userAgent) && /webkit/i.test(navigator.userAgent)),\n  isNativeAndroid: ((/samsung/img.test(navigator.userAgent) || /Galaxy Nexus/img.test(navigator.userAgent) || /HTC/img.test(navigator.userAgent) || /\\sLG/img.test(navigator.userAgent)) && !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /android/i.test(navigator.userAgent) && /webkit/i.test(navigator.userAgent) && (/Android 3/i.test(userAgentHTC) || /Android 4/i.test(navigator.userAgent)))\n})\n"]}