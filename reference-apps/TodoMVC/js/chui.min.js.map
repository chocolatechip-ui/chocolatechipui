{"version":3,"sources":["chui.js"],"names":["Stack","args","array","length","type","document","Array","isArray","i","len","prototype","slice","apply","arguments","forEach","ctx","idx","index","ret","temp","push","data","objectType","concat","pop","$","unshift","shift","callback","value","call","splice","filter","map","node","nodeType","indexOf","el","parentNode","querySelector","collection","self","constructor","toString","match","item","reverse","sort","a","b","selector","context","matches","querySelectorAll","children","arg","__is","nodes","elements","getIndex","result","findIndex","is","siblings","__siblings","pos","parent","newPos","console","log","p","trim","closest","undefined","property","pixelRE","postFix","testForPixelSupport","key","hasOwnProperty","style","camelize","defaultView","getComputedStyle","eq","getPropertyValue","toLowerCase","content","__before","h","insertBefore","__after","nextElementSibling","appendChild","childNodes","element","insertAdjacentHTML","firstChild","textContent","replace","newElement","targetElement","newEl","targEl","off","replaceChild","removeChild","string","innerText","markup","innerHTML","dataset","display","css","window","readyRE","getNode","test","readyState","body","addEventListener","err","extend","obj","prop","Object","keys","defineProperty","writable","enumerable","configurable","fn","object","version","noop","uuid","d","Date","now","performance","charset","split","randomLetter","Math","floor","random","c","r","then","escapeHTML","tagsToReplace","str","JSON","stringify","replaceTag","tag","safe_tags_replace","parse","letter","toUpperCase","hyphenate","subscriptions","publish","subscription","payload","hasProp","subscribe","handler","run","unsubscribe","delay","milliseconds","Promise","resolve","setTimeout","template","createElement","frag","createDocumentFragment","html","literals","raw","sub","lit","safe","normalize","join","String","app","navigator","userAgent","classList","add","theme","dir","unique","arrayItem","arrayItemValue","val","eventStart","eventEnd","eventMove","eventCancel","gestureLength","pointerEnabled","msPointerEnabled","ChuiEventCache","bind","event","capturePhase","id","deleteFromEventStack","toDelete","evtStck","unbind","eventStack","deleteOrder","evt","removeEventListener","delegate","delegateElement","on","e","target","find","ancestor","undelegate","events","trigger","createEvent","evtObj","initEvent","dispatchEvent","touch","touchTimeout","swipeTimeout","tapTimeout","longTapDelay","singleTapDelay","isAndroid","longTapTimeout","parentIfText","swipeDirection","x1","x2","y1","y2","abs","longTap","last","cancelLongTap","clearTimeout","cancelAll","delta","twoTouches","originalEvent","nodeName","pageX","pageY","touches","targetTouches","isDoubleTap","method","Component","options","elm","origElement","renderFnc","render","state","boundComponents","actions","styles","substr","chuiStyle","sharedSheet","unitlessProps","columnCount","fillOpacity","flex","flexGrow","flexShrink","fontWeight","lineClamp","lineHeight","opacity","order","orphans","widows","zIndex","zoom","flatten","flat","createStyleSheet","prefix","unit","_sheet","_prefix","createSheet","rules","rulesFromStyles","set","addUnit","insertRules","head","Error","sheet","block","isPlainObject","combineSelectors","$0","rule","pairs","rulez","insertRule","child","pseudoRe","parents","part","separator","isNaN","stylesheets","handleEvents","bubble","append","get","empty","dataStore","State","create","substring","paused","component","renderComponents","position","start","end","startFrom","_len","_key","compareFunction","props","orderBy","sortByProperty","sortOrder","numberOfProperties","isiPhone","isiPad","isiPod","isiOS","isTouchEnabled","isStandalone","standalone","isWebkit","isDesktop","isMobile","isSafari","isChrome","isNativeAndroid","userAgentHTC"],"mappings":"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","file":"chui.min.js","sourcesContent":["class Stack {\n  constructor(args) {\n    this.array = [];\n    this.length = 0\n    this.type = 'stack'\n    if (args && args === document) {\n      this.array[0] = document\n      this[0] = document;\n    } else if (Array.isArray(args)) {\n      let i = -1\n      const len = args.length\n      while (++i < len) {\n        this.array[i] = args[i]\n      }\n    } else {\n      const array = Array.prototype.slice.apply(arguments);\n      array.forEach(function(ctx, idx) {\n        this.array[idx] = ctx\n      })\n    }\n  }\n\n  eq(index) {\n    const ret = new Stack()\n    if (!this.array.length) return ret\n    let temp;\n    if (index < 0) {\n      temp = this.array[this.array.length + index]\n      ret.push(temp)\n    } else {\n      if (index >= this.array.length) return new Stack()\n      temp = this.array[index]\n      ret.push(temp)\n    }\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  push(data) {\n    if (data && data.objectType === 'Stack') {\n      this.array = this.array.concat(data.array)\n      this[0] = this.array\n    } else {\n      this.array.push(data)\n    }\n  }\n\n  pop() {\n    let ret = this.array.pop()\n    ret = $(ret)\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  unshift(data) {\n    if (data && data.objectType === 'Stack') {\n      this.array.unshift(data.array[0])\n      this[0] = this.array[0]\n    } else {\n      this.array.unshift(data)\n      this[0] = this.array[0]\n    }\n  }\n\n  shift() {\n    let ret = this.array.shift()\n    ret = $(ret)\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  forEach(callback) {\n    let value\n    let i = 0\n    const len = this.array.length\n    for (; i < len; i++) {\n      value = callback.call(this.array[i], this.array[i], i)\n      if (value === false) {\n        break\n      }\n    }\n  }\n\n  slice(...args) {\n    let ret = new Stack()\n    ret.concat(this.array.slice.apply(this.array, args))\n    ret = $(ret)\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  splice(...args) {\n    let ret = new Stack()\n    ret.concat(this.array.splice.apply(this.array, args))\n    ret = $(ret)\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  filter(...args) {\n    let ret = new Stack()\n    ret.concat(this.array.filter.apply(this.array, args))\n    ret[0] = ret.array[0]\n    ret = $(ret)\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  map(...args) {\n    let ret = new Stack()\n    ret.concat(this.array.map.apply(this.array, args))\n    ret[0] = ret.array[0]\n    ret = $(ret)\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  indexOf(node) {\n    if (!node) return -1\n    if (node.nodeType && node.nodeType === 1) {\n      return this.array.indexOf(node)\n    } else if (node && node.objectType === 'Stack') {\n      return this.array.indexOf(node[0])\n    } else if (node && Array.isArray(node)) {\n      return this.array.indexOf(node[0])\n    } else if (node && $.type(node) === 'string') {\n      const el = this[0].parentNode.querySelector(node)\n      return this.array.indexOf(el)\n    }\n  }\n\n  concat(collection) {\n    const self = this\n    if (collection && Array.isArray(collection.array)) {\n      this.array = this.array.concat(collection.array)\n    } else if (collection && collection.constructor.toString().match(/HTMLLIElement/)) {\n      this.array.push(collection)\n    } else if (collection && Array.isArray(collection)) {\n      collection.forEach(function(item) {\n        self.array.push(item)\n      })\n    }\n  }\n\n  reverse(...args) {\n    this.array.reverse.apply(this.array, args)\n    this[0] = this.array[0]\n  }\n\n  unique() {\n    const ret = []\n    const sort = this.array.sort()\n    sort.forEach((ctx) => {\n      if (ret.indexOf(ctx) === -1) {\n        ret.push(ctx)\n      }\n    });\n    ret.sort(function(a, b) {\n      return a - b\n    });\n    this.array.splice(0)\n    const self = this.array\n    ret.forEach(function(node) {\n      self.push(node)\n    });\n  }\n\n  purge() {\n    this.array.length = 0\n  }\n\n  find(selector, context) {\n    let ret = new Stack()\n    let matches\n    if (!this.array.length)\n      return ret;\n    if (context) {\n      $(context).forEach(function() {\n        matches = Array.prototype.slice.apply(context.querySelectorAll(selector))\n        matches.forEach(function(node) {\n          ret.array.push(node)\n        });\n      });\n    } else {\n      this.forEach(function(ctx) {\n        if (ctx && ctx.children && ctx.children.length) {\n          matches = Array.prototype.slice.apply(ctx.querySelectorAll(selector))\n          matches.forEach(function(node) {\n            ret.array.push(node)\n          })\n        }\n      });\n    }\n    ret[0] = ret.array[0]\n    return ret;\n  }\n\n  is(arg) {\n    let ret = false;\n    if (!this.array.length || !arg) return;\n    if (!this.array.length) return\n    const self = this;\n    const __is = function(node, arg) {\n      if (typeof arg === 'string') {\n        let nodes;\n        if (node.parentNode) nodes = node.parentNode.querySelectorAll(arg);\n        let elements;\n        if (nodes && nodes.length) {\n          elements = Array.prototype.slice.apply(node.parentNode.querySelectorAll(arg));\n        }\n        if (elements && elements.length) {\n          if (elements.indexOf(node) >= 0) {\n            ret = true;\n          }\n        }\n      } else if (typeof arg === 'function') {\n        if (arg.call(self)) {\n          ret = true;\n        }\n      } else if (arg && arg.type && arg.type === 'Stack') {\n        if (node === arg[0]) {\n          ret = true;\n        }\n      } else if (arg && arg.length) {\n        if (this.slice.apply(arg).indexOf(node) !== -1) {\n          ret = true;\n        }\n      } else if (arg.nodeType === 1) {\n        if (node === arg) {\n          ret = true;\n        }\n      } else {\n        return;\n      }\n      return ret;\n    };\n    this.forEach(function(item) {\n      if (__is(item, arg)) {\n        ret = true;\n      }\n    });\n    return ret;\n  }\n\n  index(selector) {\n    const self = this.array;\n    if (!this.array.length) {\n      return;\n    }\n\n    function getIndex() {\n      const result = self.findIndex(function(el) {\n        return $(el).is(selector);\n      })\n      return result\n    }\n\n    if (selector && typeof selector === 'string') {\n      return getIndex(selector);\n\n    } else if (selector && selector.type && selector.type === 'Stack') {\n      return getIndex(selector[0]);\n\n    } else if (selector && selector.nodeType && selector.nodeType === 1) {\n      return getIndex(selector);\n\n    } else {\n      if (self.length > 1) {\n        return 0;\n      }\n      const siblings = Array.prototype.slice.apply(self[0].parentNode.children);\n      return siblings.findIndex(function(el) {\n        return el === self[0];\n      })\n    }\n  }\n\n  siblings(selector) {\n    if (!this.array.length)\n      return new Stack()\n    let __siblings\n    let ret = new Stack()\n    const self = this\n    const pos =  this.index()\n    let parent\n    const children = Array.prototype.slice.apply(self.array[0].parentNode.children);\n    if (selector && typeof selector === 'string') {\n      parent = this.array[0].parentNode\n      __siblings = Array.prototype.slice.apply(parent.querySelectorAll(selector))\n      const newPos = __siblings.indexOf(self.array[0])\n      __siblings.splice(newPos, 1)\n      ret.concat(__siblings)\n      ret[0] = ret.array[0]\n      return ret\n    } else {\n      children.splice(pos, 1)\n      ret.array = children\n      ret[0] = ret.array[0]\n      return ret\n    }\n  }\n\n  closest(selector) {\n    if (!this.array.length) {\n      console.log('nothing to find here')\n      return new Stack()\n    }\n    const ret = new Stack()\n    if (typeof selector === 'undefined') {\n      return new Stack()\n    }\n    let p\n    if (this.array[0]) {\n      p = this.array[0].parentNode;\n    }\n    if (!p) {\n      return new Stack()\n    }\n    if (typeof selector === 'string') {\n      selector.trim()\n      if (p && $(p).is(selector)) {\n        ret.array.push(p)\n      } else {\n        ret.array.push($(p).closest(selector).array[0])\n      }\n    }\n    if (ret.array[0] === undefined) {\n      ret.splice(0)\n    }\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  css(property, value) {\n    if (!this.array.length) return new Stack();\n    const pixelRE = /top|bottom|left|right|margin|padding/img\n    let postFix = ''\n    const ret = new Stack()\n    const testForPixelSupport = function(value, property) {\n      if (value === 'number' && property.match(pixelRE)) {\n        postFix = 'px'\n      }\n    };\n    if (!property) return new Stack()\n    if (!value && typeof property === 'object' && !Array.isArray(property)) {\n      this.forEach(function(node) {\n        for (let key in property) {\n          if (property.hasOwnProperty(key)) {\n            testForPixelSupport(property[key], key)\n            node.style[$.camelize(key)] = property[key] + postFix\n          }\n        }\n        ret.push(node)\n      });\n    } else if (!value && typeof property === 'string') {\n      if (!this.array.length)\n        return;\n      return document.defaultView.getComputedStyle(this.eq(0).array[0], null).getPropertyValue(property.toLowerCase())\n    } else if (!!value) {\n      this.forEach(function(node) {\n        testForPixelSupport(value, property)\n        node.style[$.camelize(property)] = value + postFix\n        ret.push(node)\n      });\n    }\n    ret[0] = ret.array[0]\n    return ret;\n  }\n\n  before(content) {\n    if (!this.array || !this.array.length) {\n      return new Stack()\n    }\n    const self = this\n    const __before = function(node, content) {\n      if (typeof content === 'string' || typeof content === 'number') {\n        content = $.h(content)\n      }\n      if (content && content.type && content.type === 'stack') {\n        const len = content.array.length\n        let i = 0\n        while (i < len) {\n          node.parentNode.insertBefore(content.array[i], node)\n          i++\n        }\n      } else if (content && content.nodeType === 1) {\n        node.parentNode.insertBefore(content, node)\n      } else if (content && content.nodeType == 11) {\n      self.forEach(function() {\n        node.parentNode.insertBefore(content, node)\n      })\n    }\n      self[0] = self.array[0]\n      return self\n    };\n    self.forEach(function(node) {\n      return __before(node, content)\n    });\n    self[0] = self.array[0]\n    return this\n  }\n\n  after(content) {\n    if (!this.array || !this.array.length) return new Stack();\n    const self = this\n    const __after = (children) => {\n      children.forEach(function(node) {\n        self.array.forEach(function(el) {\n          if (el.nextElementSibling) {\n            el.parentNode.insertBefore(node, el.nextElementSibling)\n          } else {\n            el.parent.appendChild(node)\n          }\n        })\n      })\n    }\n    if (typeof content === 'string') {\n      content = $.h(content)\n    }\n    if (content && content.type === 'stack') {\n      if (content && content.array && !content.array.length) return\n      __after(content.array)\n    } else if (content && (content.nodeType === 1 || content.nodeType === 3)) {\n      self.forEach(function(el) {\n        __after([content])\n      })\n    } else if (content && content.nodeType === 11) {\n      const children = Array.prototype.slice.apply(content.childNodes)\n      __after(children)\n    }\n    self[0] = this.array[0]\n    return self\n  }\n\n  prepend(content) {\n    if (!this.array.length) return new Stack();\n\n    if (typeof content === 'string' || typeof content === 'number') {\n      this.forEach(function(element) {\n        element.insertAdjacentHTML('afterbegin', content);\n      });\n    } else if (content && content.type && content.type === 'Stack') {\n      this.forEach(function(element) {\n        content.forEach(function(node) {\n          element.insertBefore(node, element.firstChild);\n        });\n      });\n    } else if (content && content.nodeType === 1) {\n      this.forEach(function(element) {\n        element.insertBefore(content, element.firstChild);\n      });\n    } else if (content && content.nodeType == 11) {\n      this.forEach(function(element) {\n        element.appendChild(content)\n      })\n    }\n    this[0] = this.array[0]\n    return this;\n  }\n\n  append(content) {\n    if (!this.array.length) return new Stack();\n\n    if (typeof content === 'string' || typeof content === 'number') {\n      this.forEach(function(element) {\n        element.insertAdjacentHTML('beforeend', content);\n      });\n    } else if (content && content.type && content.type === 'Stack') {\n      this.forEach(function(element) {\n        content.forEach(function(node) {\n          element.insertBefore(node, null);\n        })\n      })\n\n    } else if (content && content.nodeType === 1) {\n      this.forEach(function(element) {\n        element.insertBefore(content, null);\n      })\n    } else if (content && content.nodeType == 11) {\n      this.forEach(function(element) {\n        element.appendChild(content)\n      })\n    }\n    this[0] = this.array[0]\n    return this;\n  }\n\n  empty() {\n    if (!this.array.length) return new Stack()\n    const ret = new Stack()\n    this.array.forEach(function(ctx) {\n      ctx.textContent = ''\n      ret.push(ctx)\n    });\n    ret[0] = ret.array[0]\n    return ret\n  }\n\n  replaceWith(content) {\n    function replace(newElement, targetElement) {\n      if (!newElement || !targetElement) return;\n      let newEl;\n      let targEl;\n      if (typeof newElement === 'string') {\n        newEl = $.h(newElement);\n      } else if (newElement.type && newElement.type === 'stack') {\n        newEl = newElement.array[0];\n      } else if (newElement.nodeType === 1 || newElement.nodeType === 11) {\n        newEl = newElement;\n      }\n      if (typeof targetElement === 'string') {\n        targEl = $(targetElement).array[0];\n      } else if (targetElement.type && targetElement.type === 'stack') {\n        targEl = targetElement.array[0];\n      } else if (targetElement.nodeType === 1) {\n        targEl = targetElement;\n      }\n      /**\n       * Remove target's bound events:\n       */\n      $(targEl).off();\n      targEl.parentNode.replaceChild(newEl, targEl);\n    }\n    if (content && content.nodeType && content.nodeType === 1) {\n      $(content).off()\n    } else if (content && content.type && content.type === 'stack') {\n      content.off()\n    }\n    this.forEach(function(node) {\n      $(node).off()\n        replace(content, node)\n    });\n  }\n\n  remove() {\n    if (!this.array.length) return new Stack();\n    this.forEach(function(node) {\n      $(node).off()\n      if (node.parentNode) node.parentNode.removeChild(node)\n    });\n  }\n\n  text(string) {\n    let ret = ''\n    if (!this.array.length) return new Stack()\n    if (!!string || string === 0) {\n      this.forEach(function(element) {\n        element.innerText = string\n      });\n      return this\n    } else {\n      this.forEach(function(element) {\n        ret += element.innerText\n        ret.trim()\n      });\n      return ret\n    }\n  }\n\n  html(markup) {\n    if (!this.array.length) return new Stack();\n    if (markup === '') {\n      this.array.forEach(node => {\n        node.innerHTML = '';\n      });\n      return this;\n    } else if (markup) {\n      this.array.forEach(node => {\n        node.innerHTML = markup;\n      });\n      return this;\n    } else if (!markup) {\n      return this.array[0].innerHTML.trim();\n    }\n  }\n\n  val(value) {\n    if (!this.array.length) return new Stack()\n    if (value || value === '') {\n      this.array[0].value = value\n      this[0] = this.array[0]\n      return this\n    } else {\n      if (this.array[0] && this.array[0].value) {\n        return this.array[0].value\n      }\n    }\n  }\n\n  hide() {\n    if (this.array.length) {\n      this.array[0].dataset.display = this.css('display')\n      this.css('display', 'none')\n    }\n  }\n\n  show() {\n    if (this.array.length) {\n      const display = this.array[0].dataset.display\n      if (display) {\n        this.css('display', display)\n      } else {\n        this.css('display', 'block')\n      }\n    }\n  }\n}\n\nwindow.Stack = Stack\n\n\nfunction $(selector) {\n  const readyRE = /complete|loaded|interactive/;\n  let temp;\n\n  const slice = function(elements) {\n    temp = new Stack([].slice.apply(elements));\n    temp[0] = temp.array[0];\n    return temp;\n  };\n\n  const getNode = function(selector) {\n    if (typeof selector === 'string') {\n      selector = selector.trim();\n      temp = slice(document.querySelectorAll(selector));\n      return temp;\n    }\n  };\n\n  if (selector && selector.type && selector.type === 'Stack') {\n    return selector;\n  }\n\n  if (selector === document) {\n    return new Stack(document);\n  }\n\n  if (selector === null) {\n    return new Stack();\n  }\n\n  if (typeof selector === 'function') {\n    if (readyRE.test(document.readyState) && document.body) {\n      selector.call(selector);\n    } else {\n      document.addEventListener(\"DOMContentLoaded\", function() {\n        return selector.call(selector);\n      });\n    }\n\n  } else if (selector && selector.nodeType === 1) {\n    temp = new Stack();\n    temp[0] = selector;\n    temp.length = temp.array.length;\n    temp.push(selector);\n    return temp;\n\n  } else if (typeof selector === 'string') {\n    if (selector === '') return new Stack();\n    try {\n      return getNode(selector) ? getNode(selector) : new Stack();\n    } catch (err) {\n      return new Stack();\n    }\n\n  } else if (Array.isArray(selector)) {\n    return new Stack(selector);\n\n  } else if (selector === window) {\n    temp = new Stack();\n    temp[0] = window;\n    temp.length = temp.array.length;\n    return temp;\n\n  } else {\n    return new Stack();\n  }\n\n  return new Stack();\n}\nwindow.$ = $\n\n$.extend = function(obj, prop) {\n  if (!prop) {\n    prop = obj;\n    obj = $;\n  }\n  Object.keys(prop).forEach(function(p) {\n    if (prop.hasOwnProperty(p)) {\n      Object.defineProperty(obj, p, {\n        value: prop[p],\n        writable: true,\n        enumerable: false,\n        configurable: true\n      });\n    }\n  });\n}\n\n$.fn = {\n  extend: function(object) {\n   $.extend(Stack.prototype, object)\n  }\n};\n\n$.extend({\n\n  version: 'VERSION_NUMBER',\n\n  noop: function() {\n    return\n  },\n\n  uuid: function() {\n    let d = Date.now();\n    d += performance.now();\n    const charset = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".split('');\n    const randomLetter = charset[Math.floor(Math.random() * charset.length)];\n    return randomLetter + 'xxxxxxxxxxxxxxx'.replace(/[x]/g, function(c) {\n      const r = (d + Math.random() * 16) % 16 | 0;\n      d = Math.floor(d / 16);\n      return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n    });\n  },\n\n  type: function(type) {\n    switch (typeof type) {\n      case 'boolean':\n        return 'boolean';\n      case 'number':\n        return 'number';\n      case 'string':\n        return 'string';\n      case 'function':\n        return 'function';\n      case 'object':\n        if (Array.isArray(type)) {\n          return 'array';\n        } else if (Object.prototype.toString.call(type) === '[object Date]') {\n          return 'date';\n        } else if (Object.prototype.toString.call(type) === '[object Error]') {\n          return 'error';\n        } else if (Object.prototype.toString.call(type) === '[object RegExp]') {\n          return 'regexp';\n        } else if (Object.prototype.toString.call(type) === '[object Object]') {\n            if (type.objectType && type.objectType === 'domstack') {\n              return 'domstack';\n              /* If Promise polyfill, then should support `then`. */\n            } else if (type.then) {\n              return 'promise';\n              /* Otherwise we got a normal object here. */\n            } else {\n              return 'object';\n            }\n        } else if (Object.prototype.toString.call(type) === '[object Number]') {\n          return 'number';\n        } else if (Object.prototype.toString.call(type) === '[object String]') {\n          return 'string';\n        } else if (Object.prototype.toString.call(type) === '[object Promise]') {\n          return 'promise';\n        } else if (Object.prototype.toString.call(type) === '[object Boolean]') {\n          return 'boolean';\n        }\n    }\n  },\n\n  escapeHTML: function(data) {\n    const tagsToReplace = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '(': '%28',\n      ')': '%29'\n    }\n\n    let str = JSON.stringify(data)\n\n    const replaceTag = function(tag) {\n      return tagsToReplace[tag] || tag\n    }\n\n    const safe_tags_replace = function(str) {\n      return str.replace(/[&<>\\(\\)]/g, replaceTag)\n    }\n\n    str = safe_tags_replace(str)\n    return JSON.parse(str)\n  },\n\n  camelize: function(string) {\n    if (typeof string !== 'string')\n      return;\n    return string.replace(/\\-(.)/g, function(match, letter) {\n      return letter.toUpperCase();\n    });\n  },\n\n  hyphenate: function(string) {\n    if (typeof string !== 'string')\n      return;\n    return string.replace(/([A-Z])/g, '-$1').toLowerCase();\n  },\n\n  subscriptions: {},\n\n  publish: function(subscription, payload) {\n    const hasProp = $.subscriptions.hasOwnProperty\n    if (!hasProp.call($.subscriptions, subscription)) return\n\n    $.subscriptions[subscription].forEach(function(item) {\n      item(payload != undefined ? payload : {})\n    })\n  },\n\n  subscribe: function(subscription, handler) {\n    if (!$.subscriptions.hasOwnProperty.call($.subscriptions, subscription)) $.subscriptions[subscription] = []\n    const index = $.subscriptions[subscription].push(handler) -1\n    return {\n      off: function() {\n        delete $.subscriptions[subscription][index]\n      },\n\n      run: function(data) {\n        if ($.subscriptions[subscription]) {\n          try {\n            $.subscriptions[subscription][index](data)\n          } catch(err) {}\n        }\n      }\n    }\n  },\n\n  unsubscribe: function(subscription) {\n    delete $.subscriptions[subscription]\n  },\n\n  delay: function(milliseconds) {\n    return new Promise(function(resolve) {\n      setTimeout(resolve, milliseconds)\n    })\n  },\n\n  h: function(template) {\n    const temp = document.createElement('div')\n    temp.innerHTML = template\n    const frag = document.createDocumentFragment()\n    // Use childNodes to allow creating element nodes or text nodes:\n    const children = Array.prototype.slice.apply(temp.childNodes)\n    children.map(function(el) {\n     frag.appendChild(el)\n    })\n    return frag\n  }\n})\n\nfunction html(literals) {\n  const raw = literals.raw\n  let result = ''\n  let i\n  let len\n  let sub\n  let lit\n  let safe\n\n  /**\n   * Function that normalizes interpolation substitions.\n   * It flattens arrays while ignoring falsey values.\n   * All other values are converted to strings.\n   */\n  function normalize (value, safe) {\n    return (\n      value == null ? ''\n      : value === false ? ''\n      : Array.isArray(value) ? value.map(normalize).join('')\n      : safe === false ? $.escapeHTML(value)\n      : String(value)\n    )\n  }\n\n  for (i = 1, len = arguments.length; i < len; i++) {\n    lit = raw[i - 1]\n    /**\n     * Allow safe html by prefixing interpolation with an exclamation mark.\n     */\n    safe = lit[lit.length - 1] === '!'\n    sub = normalize(arguments[i], safe)\n    if (safe) lit = lit.slice(0, -1)\n\n    result += lit + sub\n  }\n\n  // Take care of last literal section.\n  result += raw[raw.length - 1]\n\n  return result\n}\nwindow.html = html\n\nfunction app(callback) {\n  $(function() {\n    callback()\n  })\n}\nwindow.app = app\n\n$(function() {\n    if (!/(mobile)|(ios)|(android)/img.test(navigator.userAgent)) {\n        document.body.classList.add('isDesktop');\n    }\n    if ($('link[href*=ios]')[0]) {\n        document.body.classList.add('themeIsiOS');\n        $.theme = 'ios';\n    } else if ($('link[href*=android]')[0]) {\n        document.body.classList.add('themeIsAndroid');\n        $.theme = 'android';\n    }\n    $.dir = 'ltr';\n    if (document.dir === 'rtl') {\n        $.dir = 'rtl';\n    }\n\n\n  if (!Array.prototype.unique) {\n    $.extend(Array.prototype, {\n      unique: function() {\n        const len = this.length;\n        const obj = {};\n        const ret = [];\n        for (let i = 0; i < len; i++) {\n          const arrayItem = JSON.stringify(this[i]);\n          const arrayItemValue = this[i];\n          if (obj[arrayItem] === undefined) {\n            ret.push(arrayItemValue);\n            obj[arrayItem] = 1;\n          } else {\n            obj[arrayItem]++;\n          }\n        }\n        this.length = 0;\n        const self = this;\n        ret.forEach(function(item) {\n          self.push(item);\n        })\n      }\n    })\n  }\n});\n\n\n\nfunction html(literals) {\n  let raw = literals.raw\n  let result = ''\n  let i\n  let len\n  let sub\n  let lit\n  let safe\n\n  /**\n   * Function that normalizes interpolation substitions.\n   * It flattens arrays while ignoring falsey values.\n   * All other values are converted to strings.\n   */\n  function normalize (val, safe) {\n    return (\n      val == null ? ''\n      : val === false ? ''\n      : Array.isArray(val) ? val.map(normalize).join('')\n      : safe === false ? $.escapeHTML(val)\n      : String(val)\n    )\n  }\n\n  for (i = 1, len = arguments.length; i < len; i++) {\n    lit = raw[i - 1]\n    /**\n     * Allow safe html by prefixing interpolation with an exclamation mark.\n     */\n    safe = lit[lit.length - 1] === '!'\n    sub = normalize(arguments[i], safe)\n    if (safe) lit = lit.slice(0, -1)\n\n    result += lit + sub\n  }\n\n  // Take care of last literal section.\n  result += raw[raw.length - 1]\n\n  return result\n}\n\n\n$.extend({\n  eventStart : null,\n  eventEnd : null,\n  eventMove : null,\n  eventCancel : null,\n  gestureLength : 30\n});\n\n$(function() {\n  /* Setup Event Variables */\n  /* Pointer events for IE10 and WP8: */\n  if (window.navigator.pointerEnabled) {\n    $.eventStart = 'pointerdown'\n    $.eventEnd = 'pointerup'\n    $.eventMove = 'pointermove'\n    $.eventCancel = 'pointercancel'\n  /* Pointer events for IE10 and WP8: */\n  } else if (window.navigator.msPointerEnabled) {\n    $.eventStart = 'MSPointerDown'\n    $.eventEnd = 'MSPointerUp'\n    $.eventMove = 'MSPointerMove'\n    $.eventCancel = 'MSPointerCancel'\n  /* Touch events for iOS & Android: */\n  } else if ('ontouchstart' in window && /mobile/img.test(navigator.userAgent)) {\n    $.eventStart = 'touchstart'\n    $.eventEnd = 'touchend'\n    $.eventMove = 'touchmove'\n    $.eventCancel = 'touchcancel'\n  /* Mouse events for desktop: */\n  } else {\n    $.eventStart = 'mousedown'\n    $.eventEnd = 'click'\n    $.eventMove = 'mousemove'\n    $.eventCancel = 'mouseout'\n  }\n});\n\n(function() {\n\n  var ChuiEventCache = {\n    elements: {}\n  }\n\n  /**\n   * Private method to set events on ChuiEventCache\n   */\n  const bind = function(element, event, callback, capturePhase) {\n    if (!element.id) element.id = $.uuid()\n    if (!ChuiEventCache.elements[element.id]) {\n      ChuiEventCache.elements[element.id] = []\n    }\n    ChuiEventCache.elements[element.id].push({\n      event: event,\n      callback: callback\n    })\n    element.addEventListener(event, callback, capturePhase)\n  }\n\n  /**\n   * Delete items from event stack:\n   */\n  const deleteFromEventStack = function(toDelete, evtStck) {\n    let len = toDelete.length\n    for (let i = 0; len > i; len--) {\n      evtStck.splice(toDelete[len - 1], 1)\n    }\n  }\n\n  /**\n   * Private method to unbind events on ChuiEventCache\n   */\n  const unbind = function(element, event, callback) {\n\n    const eventStack = ChuiEventCache.elements[element.id]\n    if (!eventStack) return\n    let deleteOrder = []\n\n    if (!event) {\n      deleteOrder = []\n      eventStack.forEach(function(evt, idx) {\n        element.removeEventListener(evt.event, evt.callback, evt.capturePhase)\n        deleteOrder.push(idx)\n      })\n\n      deleteFromEventStack(deleteOrder, eventStack)\n\n    } else if (!!event && !callback) {\n      deleteOrder = []\n      eventStack.forEach(function(evt, idx) {\n        if (evt.event === event) {\n          element.removeEventListener(evt.event, evt.callback, evt.capturePhase)\n          deleteOrder.push(idx)\n        }\n      })\n\n      deleteFromEventStack(deleteOrder, eventStack)\n\n    } else if (callback) {\n      deleteOrder = []\n      eventStack.forEach(function(evt, idx) {\n        if (callback === evt.callback) {\n          element.removeEventListener(evt.event, evt.callback, evt.capturePhase)\n          deleteOrder.push(idx)\n        }\n      })\n      deleteFromEventStack(deleteOrder, eventStack)\n    }\n  }\n\n  /**\n   * Set delegated events on ChuiEventCache\n   */\n  const delegate = function(element, selector, event, callback, capturePhase) {\n    const delegateElement = $(element).array[0]\n    $(element).forEach(function(ctx) {\n      $(ctx).on(event, function(e) {\n        let target = e.target\n        if (e.target.nodeType === 3) {\n          target = e.target.parentNode\n        }\n        $(ctx).find(selector).forEach(function(delegateElement) {\n          if (delegateElement === target) {\n            callback.call(delegateElement, e)\n          } else {\n            try {\n              const ancestor = $(target).closest(selector)\n              if (delegateElement === ancestor.array[0]) {\n                callback.call(delegateElement, e)\n              }\n            } catch (err) {}\n          }\n        })\n      }, capturePhase)\n    })\n  }\n\n\n  /**\n   * Method to remove delegated events from ChuiEventCache:\n   */\n  const undelegate = function(element, selector, event, callback, capturePhase) {\n\n    unbind($(element).array[0], event, callback, capturePhase)\n  }\n\n  $.fn.extend({\n    on: function(event, selector, callback, capturePhase) {\n      if (!event) {\n        return\n      }\n      if (!selector) {\n        return\n      }\n      if (!selector && /Object/img.test(event.constructor.toString())) {\n        this.forEach(function(element) {\n          for (let key in event) {\n            if (event.hasOwnProperty(key)) {\n              $(element).on(key, event[key])\n            }\n          }\n        })\n      }\n      let ret = []\n      let events\n      if (typeof event === 'string') {\n        event = event.trim()\n        if (/\\s/.test(event)) {\n          events = event.split(' ')\n          this.forEach(function(ctx) {\n            events.forEach(function(evt) {\n              if (typeof selector === 'function') {\n                bind(ctx, evt, selector, callback)\n                ret.push(ctx)\n              } else {\n                delegate(ctx, selector, evt, callback, capturePhase)\n              }\n            })\n          })\n        }\n      }\n      this.forEach(function(ctx) {\n        if (typeof selector === 'function') {\n          return bind(ctx, event, selector, callback)\n        } else {\n          delegate(ctx, selector, event, callback, capturePhase)\n        }\n      })\n      return this\n    },\n\n    off: function(event, selector, callback, capturePhase) {\n      const ret = new Stack()\n      if (!this.array.length) return ret\n\n      this.forEach(function(ctx) {\n        if (typeof event === 'undefined') {\n          ret.push(ctx)\n          unbind(ctx)\n          return ret\n        } else if (typeof selector === 'function' || !selector) {\n          unbind(ctx, event, selector, callback, capturePhase)\n          return this\n        } else {\n          undelegate(ctx, selector, event, callback, capturePhase)\n          return this\n        }\n      })\n    },\n\n    trigger: function(event, data) {\n      if (!event) {\n        return\n      }\n      if (!this.array.length) return new Stack()\n      this.forEach(function(ctx) {\n        if (document.createEvent) {\n          const evtObj = document.createEvent('Events')\n          evtObj.initEvent(event, true, false)\n          evtObj.data = data\n          ctx.dispatchEvent(evtObj)\n        }\n      })\n    }\n  })\n})();\n\n\n(function() {\n  \"use strict\";\n  let touch = {}\n  let touchTimeout\n  let swipeTimeout\n  let tapTimeout\n  const longTapDelay = 750\n  let singleTapDelay = 150\n  const gestureLength = 50\n  if ($.isAndroid) singleTapDelay = 200\n  let longTapTimeout\n\n  function parentIfText(node) {\n    return 'tagName' in node ? node : node.parentNode\n  }\n\n  function swipeDirection(x1, x2, y1, y2) {\n    return Math.abs(x1 - x2) >=\n      Math.abs(y1 - y2) ? (x1 - x2 > 0 ? 'left' : 'right') : (y1 - y2 > 0 ? 'up' : 'down')\n  }\n\n  function longTap() {\n    longTapTimeout = null\n    if (touch.last) {\n      try {\n        if (touch && touch.el) {\n          touch.el.trigger('longtap')\n          touch = {}\n        }\n      } catch (err) {}\n    }\n  }\n\n  function cancelLongTap() {\n    if (longTapTimeout) clearTimeout(longTapTimeout)\n    longTapTimeout = null\n  }\n\n  function cancelAll() {\n    if (touchTimeout) clearTimeout(touchTimeout)\n    if (tapTimeout) clearTimeout(tapTimeout)\n    if (swipeTimeout) clearTimeout(swipeTimeout)\n    if (longTapTimeout) clearTimeout(longTapTimeout)\n    touchTimeout = tapTimeout = swipeTimeout = longTapTimeout = null\n    touch = {}\n  }\n\n  $(function() {\n    let now\n    let delta\n    let body = document.body\n    let twoTouches = false\n\n    body.addEventListener($.eventStart, function(e) {\n      now = Date.now()\n      delta = now - (touch.last || now)\n      if (e.originalEvent) e = e.originalEvent\n\n      if ($.eventStart === 'mousedown') {\n        touch.el = $(parentIfText(e.target))\n        if (e.target.nodeName === 'ripple') {\n          touch.el = $(el.target.parentNode)\n        }\n        touchTimeout && clearTimeout(touchTimeout)\n        touch.x1 = e.pageX\n        touch.y1 = e.pageY\n        twoTouches = false\n\n      } else {\n        if (e.touches.length === 1) {\n          touch.el = $(parentIfText(e.touches[0].target))\n          touchTimeout && clearTimeout(touchTimeout)\n          touch.x1 = e.touches[0].pageX\n          touch.y1 = e.touches[0].pageY\n          if (e.targetTouches.length === 2) {\n            twoTouches = true\n          } else {\n            twoTouches = false\n          }\n        }\n      }\n\n      if (delta > 0 && delta <= 250) {\n        touch.isDoubleTap = true\n      }\n      touch.last = now\n      longTapTimeout = setTimeout(longTap, longTapDelay)\n    })\n\n    body.addEventListener($.eventMove, function(e) {\n      if (e.originalEvent) e = e.originalEvent\n      cancelLongTap()\n      if ($.eventMove === 'mousemove') {\n        touch.x2 = e.pageX\n        touch.y2 = e.pageY\n      } else {\n\n        if (e.touches.length === 1) {\n          touch.x2 = e.touches[0].pageX\n          touch.y2 = e.touches[0].pageY\n        }\n      }\n    })\n\n    body.addEventListener($.eventEnd, function() {\n\n      cancelLongTap()\n      if (!!touch.el) {\n        if ((touch.x2 && Math.abs(touch.x1 - touch.x2) > gestureLength) ||\n          (touch.y2 && Math.abs(touch.y1 - touch.y2) > gestureLength)) {\n          swipeTimeout = setTimeout(function() {\n            if (touch && touch.el) {\n              touch.el.trigger('swipe')\n              touch.el.trigger('swipe' + (swipeDirection(touch.x1, touch.x2, touch.y1, touch.y2)))\n              touch = {}\n            }\n          }, 0)\n        } else if ('last' in touch) {\n          tapTimeout = setTimeout(function() {\n            if (touch && touch.isDoubleTap) {\n              if (touch && touch.el) {\n                touch.el.trigger('dbltap')\n                touch = {}\n              }\n\n            } else {\n              touchTimeout = setTimeout(function() {\n                touchTimeout = null\n                if (touch && touch.el) {\n                  touch.el.trigger('tap')\n                  touch = {}\n                  return false\n                }\n              }, singleTapDelay)\n            }\n          }, 0)\n        }\n\n      } else {\n        return\n      }\n    })\n    body.addEventListener('touchcancel', cancelAll)\n  });\n\n  ['tap', 'dbltap', 'longtap', 'swipeleft', 'swiperight', 'swipeup', 'swipedown'].forEach(function(method) {\n    $.fn.extend({\n      method: function(callback) {\n        return this.on(method, callback)\n      }\n    })\n  })\n})()\n\nclass Component {\n  constructor(options) {\n    if (!options) return\n    if (typeof options.element === 'string') {\n      this.elm = $(options.element)\n    } else if (options.element && options.element.nodeType) {\n      this.elm = $(options.element)\n    } else {\n      this.elm = options.element\n    }\n    this.origElement = options.element\n    this.renderFnc = options.render\n    this.state = options.state\n    if (this.state) {\n      this.state.boundComponents.push(this)\n    }\n    this.actions = options.actions\n    this.styles = options.styles\n    this.id = options.id || Math.random().toString(16).substr(2, 10)\n\n    this.chuiStyle = function() {\n      let sharedSheet = null\n\n      const unitlessProps = {\n        columnCount: true,\n        fillOpacity: true,\n        flex: true,\n        flexGrow: true,\n        flexShrink: true,\n        fontWeight: true,\n        lineClamp: true,\n        lineHeight: true,\n        opacity: true,\n        order: true,\n        orphans: true,\n        widows: true,\n        zIndex: true,\n        zoom: true\n      }\n\n      function flatten(array) {\n        const flat = Array.prototype.concat(array)\n        for (let i = 0; i < flat.length; i++) {\n          if (Array.isArray(flat[i])) {\n            flat.splice(i, 1, flat[i--])\n          }\n        }\n        return flat\n      }\n\n      function createStyleSheet(options) {\n        if (!(this instanceof createStyleSheet)) {\n          return new createStyleSheet(options)\n        }\n        options || (options = {})\n        options.prefix = !options.hasOwnProperty(\"prefix\") ? true : !!options.prefix\n        options.unit = options.hasOwnProperty(\"unit\") ? options.unit : \"px\"\n\n        this._sheet = null\n        this._prefix = null\n\n        this.css = function (element, styles, selector) {\n          if (styles == null) return \"\"\n          if (this._sheet == null) {\n            this._sheet = sharedSheet = (sharedSheet || createSheet())\n          }\n          selector = element\n\n          const rules = rulesFromStyles(selector, styles)\n          if (options.prefix || options.unit !== \"\") {\n            rules.forEach(function(set) {\n              if (options.unit !== \"\") {\n                addUnit(set[1], options.unit)\n              }\n            })\n          }\n          insertRules(rules, this._sheet)\n        }\n\n      }\n\n      function createSheet() {\n        if (document.head == null) {\n          throw new Error(\"Can't add stylesheet before <head> is available. Make sure your document has a head element.\")\n        }\n        const style = document.createElement(\"style\")\n        style.id = \"styles_\" + Math.random().toString(16).slice(2, 8)\n        document.head.appendChild(style)\n        return style.sheet\n      }\n\n      function rulesFromStyles(selector, styles) {\n        if (!Array.isArray(styles)) styles = [styles]\n        const style = {}\n        let rules = []\n        styles = flatten(styles)\n        styles.forEach(function(block) {\n          for (let prop in block) {\n            let value = block[prop]\n            if (isPlainObject(value) || Array.isArray(value)) {\n              rules = rules.concat(\n                rulesFromStyles(combineSelectors(selector, prop), value)\n              )\n            } else {\n              if (prop === \"content\") value = \"'\"+value+\"'\"\n              style[prop] = value\n            }\n          }\n        })\n        rules.push([ selector, style ])\n        return rules\n      }\n\n      function insertRules(rules, sheet) {\n        window.sheet = sheet\n        function hyphenate(str) {\n          return str.replace(/[A-Z]/g, function($0) { return '-'+$0.toLowerCase() })\n        }\n        rules.forEach(function(rule) {\n          const pairs = []\n          for (let prop in rule[1]) {\n            pairs.push(hyphenate(prop) + \":\" + rule[1][prop])\n          }\n          if (pairs.length > 0) {\n            const rulez = rule[0] ? rule[0] : ''\n            sheet.insertRule(rulez + \"{\" + pairs.join(\";\") + \"}\", 0)\n          }\n        })\n      }\n\n      function combineSelectors(parent, child) {\n        const pseudoRe = /^[:\\[]/\n        const parents = parent.split(\",\"), children = child.split(\",\")\n        return parents.map(function(parent) {\n          return children.map(function(part) {\n            const separator = pseudoRe.test(part) ? \"\" : \" \"\n            return parent + separator + part\n          }).join(\",\")\n        }).join(\",\")\n      }\n\n      function addUnit(style, unit) {\n        for (let prop in style) {\n          let value = style[prop] + \"\"\n          if (!isNaN(value) && !unitlessProps[prop]) {\n            value = value + unit\n          }\n          style[prop] = value\n        }\n        return style\n      }\n\n      function isPlainObject(obj) {\n        return obj === Object(obj) && Object.prototype.toString === obj.toString\n      }\n\n      const stylesheets = {}\n      stylesheets.css = createStyleSheet().css\n      return stylesheets\n    }\n\n    this.handleEvents = function() {\n      if (!this.actions) return\n      const self = this\n      let bubble = false\n      if (this.actions.length) {\n        this.actions.forEach(function(item) {\n          bubble = item.bubble\n          if (item && item.element === 'self' || item && !item.element) {\n            self.elm.on(item.event, item.callback, bubble)\n          } else {\n            self.elm.on(item.event, item.element, item.callback, bubble)\n          }\n        })\n      } else if ($.type(this.actions) === 'object') {\n        bubble = this.actions.bubble || false\n        if (!this.actions.element || this.actions.element === 'self') {\n          self.elm.on(this.actions.event, this.actions.callback, bubble)\n        } else {\n          self.elm.on(this.actions.event, this.actions.element, this.actions.callback, bubble)\n        }\n      }\n    }\n\n    if (this.actions) {\n      this.handleEvents(this.actions)\n    }\n  }\n\n  setTemplate(template) {\n    if (template) this.renderFnc = template\n  }\n\n  setState(state) {\n    if (state) {\n      state.boundComponents.push(this)\n      this.state = state\n    }\n  }\n\n  render(data, append) {\n    const self = this\n    if (!self.renderFnc) {\n      return\n    }\n    let temp = ''\n    if (!this.elm.array[0]) {\n      return\n    }\n    if (!data && this.state) {\n      data = this.state.get()\n    }\n\n    if (Array.isArray(data)) {\n      data.map(function(item, idx) {\n        temp += self.renderFnc(item, idx)\n      }).join('')\n    } else {\n      temp = self.renderFnc(data)\n    }\n\n    if (this.styles && (this.elm && this.elm.array[0])) {\n      const styles = this.chuiStyle()\n      if (typeof this.styles !== 'object') return\n      styles.css(this.origElement, this.styles)\n    }\n\n    if (append) {\n      self.elm.append(temp)\n    } else {\n      this.elm.array[0].textContent = ''\n      self.elm.empty()\n      self.elm.append(temp)\n    }\n  }\n\n  empty() {\n    if (this.elm.array[0]) {\n      this.elm.empty()\n    }\n  }\n\n  mount() {\n    this.elm = $(this.origElement)\n    this.handleEvents()\n    const styles = this.chuiStyle()\n    styles.css(this.origElement, this.styles)\n  }\n}\n\n\nconst dataStore = {\n  id: new Date()\n}\nclass State {\n  constructor(data) {\n    let d\n    if ($.type(data) === 'array') {\n      d = data.slice()\n    } else if ($.type(data) === 'object') {\n      d = Object.create(data)\n    } else {\n      d = data\n    }\n\n    this[dataStore] = d\n    this.id = (((1+Math.random())*0x10000)|0).toString(16).substring(1) + (((1+Math.random())*0x10000)|0).toString(16).substring(1)\n    this[dataStore] = d\n    this.events = {}\n    this.paused = false\n    this.boundComponents = []\n  }\n\n  renderComponents() {\n    if (!this.boundComponents || !this.boundComponents.length || this.paused) {\n      return\n    }\n    this.boundComponents.forEach(function(component) {\n      component.render()\n    })\n  }\n\n  get(property) {\n    if (property && $.type(this[dataStore]) === 'object') {\n      return this[dataStore][property]\n    } else {\n      return this[dataStore]\n    }\n  }\n\n  set(property, data) {\n    if (property === '' || property === false) {\n      this[dataStore][property] = property\n      console.log('Setting property to:')\n      console.log(property)\n      this.renderComponents()\n    } else if (!property) {\n      return\n    } else if (data && $.type(this[dataStore]) === 'object') {\n      this[dataStore][property] = data\n      this.renderComponents()\n    } else if (!data && ($.type(this[dataStore]) !== 'object' || $.type(this[dataStore]) !== 'array')) {\n      this[dataStore] = property\n      this.renderComponents()\n    }\n  }\n\n  purge() {\n    if ($.type(this[dataStore]) === 'object') {\n      this[dataStore] = {}\n    } else if ($.type(this[dataStore]) === 'array') {\n      this[dataStore] = []\n    } else {\n      this[dataStore]\n    }\n  }\n\n  merge(obj) {\n    if (!obj || typeof obj !== 'object') {\n      return\n    } else if (typeof this[dataStore] === 'object') {\n      for (let key in obj) {\n        this[dataStore][key] = obj[key]\n      }\n      this.renderComponents()\n    }\n  }\n\n  mixin(data) {\n    if (!data) {\n      return\n    }\n    if ($.type(this[dataStore]) === 'object') {\n      for (let key in data) {\n\n        if (!(key in this[dataStore])) {\n          this[dataStore][key] = data[key]\n          this.renderComponents()\n        }\n      }\n    } else if ($.type(this[dataStore]) === 'array') {\n      this[dataStore] = this[dataStore].concat(data).unique()\n      this.renderComponents()\n    }\n  }\n\n  replace(data) {\n    if (data) {\n    let d\n    if ($.type(data) === 'array') {\n      d = data.slice()\n    } else if ($.type(data) === 'object') {\n      d = Object.create(data)\n    } else {\n      d = data\n    }\n      this[dataStore] = d\n      this.renderComponents(this)\n    }\n  }\n\n  remove(prop) {\n    if (!prop) {\n      return\n    }\n    if ($.type(this[dataStore]) !== 'object') return\n    delete this[dataStore][prop]\n    this.renderComponents()\n  }\n\n  getPropAt(property, position) {\n    if (!property || position === undefined) {\n      return\n    }\n    if ($.type(this[dataStore]) === 'array') {\n      if (position < 0) {\n        const pos = this[dataStore].length + position\n        return this[dataStore][pos][property]\n      } else if (position > this[dataStore].length) {\n        return\n      } else {\n        return this[dataStore][position][property]\n      }\n    }\n  }\n\n  setPropAt(property, value, position) {\n    if (!property || value === undefined || position=== undefined) {\n      return\n    }\n    if ($.type(this[dataStore]) === 'array') {\n      if (position < 0) {\n        const pos = this[dataStore].length + position\n        this[dataStore][pos][property] = value\n        this.renderComponents()\n      } else {\n        this[dataStore][position][property] = value\n        this.renderComponents()\n      }\n    }\n  }\n\n  push(data) {\n    if (!data) {\n      return\n    }\n    if ($.type(this[dataStore]) === 'array') {\n      this[dataStore].push(data)\n      this.renderComponents()\n    }\n  }\n\n  pop() {\n    if ($.type(this[dataStore]) === 'array') {\n      this[dataStore].pop()\n      this.renderComponents()\n    }\n  }\n\n  unshift(data) {\n    if (!data) {\n      return\n    } else if ($.type(this[dataStore]) === 'array') {\n      this[dataStore].unshift(data)\n      this.renderComponents()\n    }\n  }\n\n  shift() {\n    if ($.type(this[dataStore]) === 'array') {\n      this[dataStore].shift()\n      this.renderComponents()\n    }\n  }\n\n\n  slice(start, end) {\n    if (end === undefined || start === undefined) {\n      return\n    }\n    if ($.type(this[dataStore]) === 'array') {\n      return this[dataStore].slice(start, end)\n    }\n  }\n\n  splice(start, end, data) {\n    if (end === undefined || start === undefined) {\n      return\n    }\n    if ($.type(this[dataStore]) === 'array' && data) {\n      this[dataStore].splice(start, end, data)\n      this.renderComponents()\n    } else if ($.type(this[dataStore]) === 'array') {\n      if(start == null || !end) return\n      this[dataStore].splice(start, end)\n      this.renderComponents()\n    }\n  }\n\n  insert(position, data) {\n    if (data === undefined || position === undefined || typeof position !== 'number') {\n      return\n    }\n    if (typeof this[dataStore] === 'array') {\n      if ($.type(position) !== 'number') return\n      this[dataStore].splice(position, 0, data)\n      this.renderComponents()\n    }\n  }\n\n  pluck(property) {\n    if (!property) {\n      return\n    } else {\n      const ret = []\n      if (this[dataStore] && this[dataStore].length) {\n        const len = this[dataStore].length\n        for (let i = 0; i < len; i++) {\n          ret.push(this[dataStore][i][property])\n        }\n        return ret\n      }\n    }\n  }\n\n  indexOf(element, startFrom) {\n    if (!element) {\n      return\n    } else if ($.type(this[dataStore]) === 'array') {\n      return this[dataStore].indexOf(element, startFrom)\n    }\n  }\n\n  find(callback) {\n    if (!callback) {\n      return\n    } else if ($.type(this[dataStore]) === 'array') {\n      return this[dataStore].find(callback)\n    }\n  }\n\n  findIndex(callback) {\n    if (!callback) {\n      return\n    } else if ($.type(this[dataStore]) === 'array') {\n      return this[dataStore].findIndex(callback)\n    }\n  }\n\n  forEach(callback) {\n    if (!callback) {\n      return\n    }\n    if (this[dataStore] && this[dataStore].length) {\n      let value\n      let i = -1\n      const len = this[dataStore].length\n      while (++i < len) {\n        value = callback.call(this[dataStore][i], this[dataStore][i], i)\n        if (value === false) {\n          break\n        }\n      }\n    }\n  }\n\n  filter(...args) {\n    for (let _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key]\n    }\n    if (this[dataStore] && this[dataStore].length) {\n      return this[dataStore].filter.apply(this[dataStore], args)\n    }\n  }\n\n  map(...args) {\n    for (let _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key]\n    }\n    if (this[dataStore] && this[dataStore].length) {\n      return this[dataStore].map.apply(this[dataStore], args)\n    }\n  }\n\n  reverse() {\n    if (this[dataStore] && this[dataStore].length) {\n      this[dataStore].reverse()\n      this.renderComponents()\n    }\n  }\n\n  sort(compareFunction) {\n    if (this[dataStore] && this[dataStore].length) {\n      if (compareFunction) {\n        this[dataStore].sort(compareFunction)\n        this.renderComponents()\n      } else {\n        this[dataStore].sort()\n        this.renderComponents()\n      }\n    }\n  }\n\n  orderBy(...props) {\n    for (let _len = arguments.length, _key = 0; _key < _len; _key++) {\n      props[_key] = arguments[_key]\n    }\n    if (!props) return\n\n    const orderBy = function() {\n      return function(a, b) {\n        const sortByProperty = function(property) {\n          let sortOrder = 1\n          if (property[0] === \"-\") {\n            sortOrder = -1\n            property = property.substr(1)\n          }\n          return function(a, b) {\n            const result = (a[property] < b[property]) ? -1 : (a[property] > b[property]) ? 1 : 0\n            return result * sortOrder\n          }\n        }\n\n        let i = 0\n        let result = 0\n        const numberOfProperties = props.length\n        while (result === 0 && i < numberOfProperties) {\n          result = sortByProperty(props[i])(a, b)\n          i++\n        }\n        return result\n      }\n    }\n    if (this[dataStore] && this[dataStore].length) {\n      this[dataStore].sort(orderBy.apply(null, props))\n      this.renderComponents()\n    }\n  }\n\n  concat(data) {\n    if (!data) {\n      return\n    }\n    if ($.type(this[dataStore]) === 'array') {\n      const temp = this[dataStore].concat(data)\n      this[dataStore] = temp\n      this.renderComponents()\n    }\n  }\n\n  unique() {\n    if ($.type(this[dataStore]) === 'array') {\n      this[dataStore].unique()\n      this.renderComponents()\n    }\n  }\n\n  eq(position) {\n    if ($.type(this[dataStore]) === 'array') {\n      return this[dataStore][position]\n    }\n  }\n\n  size() {\n    if ($.type(this[dataStore]) === 'array') {\n      return this[dataStore].length\n    } else {\n      return\n    }\n  }\n}\n\n$.extend($, {\n  isiPhone: /iphone/img.test(navigator.userAgent),\n  isiPad: /ipad/img.test(navigator.userAgent),\n  isiPod: /ipod/img.test(navigator.userAgent),\n  isiOS: /ip(hone|od|ad)/img.test(navigator.userAgent),\n  isAndroid: (/android/img.test(navigator.userAgent) && !/trident/img.test(navigator.userAgent)),\n  isTouchEnabled: !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && 'createTouch' in document,\n  isStandalone: navigator.standalone || false,\n  isWebkit: (!/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /webkit/img.test(navigator.userAgent)),\n  isDesktop: (!/mobile/img.test(navigator.userAgent)),\n  isMobile: (/mobile/img.test(navigator.userAgent)),\n  isSafari: (!/edge/img.test(navigator.userAgent) && !/Chrome/img.test(navigator.userAgent) && /Safari/img.test(navigator.userAgent) && !/android/img.test(navigator.userAgent)),\n  isChrome: !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /Chrome/img.test(navigator.userAgent) && !((/samsung/img.test(navigator.userAgent) || /Galaxy Nexus/img.test(navigator.userAgent) || /HTC/img.test(navigator.userAgent) || /LG/img.test(navigator.userAgent)) && !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /android/i.test(navigator.userAgent) && /webkit/i.test(navigator.userAgent)),\n  isNativeAndroid: ((/samsung/img.test(navigator.userAgent) || /Galaxy Nexus/img.test(navigator.userAgent) || /HTC/img.test(navigator.userAgent) || /\\sLG/img.test(navigator.userAgent)) && !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /android/i.test(navigator.userAgent) && /webkit/i.test(navigator.userAgent) && (/Android 3/i.test(userAgentHTC) || /Android 4/i.test(navigator.userAgent)))\n})\n"]}