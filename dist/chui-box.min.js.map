{"version":3,"sources":["chui-box.js"],"names":["DOMStack","args","array","length","objectType","Array","isArray","i","len","document","prototype","slice","apply","arguments","forEach","ctx","idx","index","ret","temp","undefined","push","data","concat","pop","$","unshift","shift","callback","value","call","splice","filter","map","node","nodeType","indexOf","type","el","parentNode","querySelector","collection","getData","constructor","toString","match","reverse","every","some","obj","arrayItem","JSON","stringify","arrayItemValue","chocolatechipjs","selector","context","self","idRE","classRE","tagRE","readyRE","elements","getId","getElementById","split","getTag","getElementsByTagName","getClass","getElementsByClassName","getNode","trim","test","html","querySelectorAll","find","readyState","body","addEventListener","err","window","DefaultLanguageForErrors","languageForErrors","Object","keys","hasOwnProperty","hasDontEnumBug","propertyIsEnumerable","dontEnums","dontEnumsLength","TypeError","result","prop","extend","p","defineProperty","writable","enumerable","configurable","fn","object","lib","version","noop","uuid","d","Date","now","performance","charset","randomLetter","Math","floor","random","replace","c","r","wrapperMap","option","legend","area","param","thead","tr","col","td","__default","optgroup","tbody","tfoot","colgroup","caption","th","element","createElement","exec","HTMLString","tag","innerHTML","lastChild","childNodes","nodeValue","require","src","onerror","insertScript","script","firstScript","insertBefore","done","loadScript","handleError","Error","setupLoad","onload","async","delay","Promise","resolve","reject","setTimeout","milliseconds","each","key","item","unique","newElement","targetElement","newEl","targEl","off","replaceChild","isEmptyObject","isInteger","number","isFloat","encode","encodeURIComponent","escapeHTML","tagsToReplace","str","replaceTag","safe_tags_replace","parse","join","mixin","sourceObj","targetObj","compare","value1","value2","compareNativeSubtypes","compareArrays","alike","compareObjects","keys1","sort","keys2","key1","key2","paginate","itemsPerChunk","pages","thing","flatten","flat","throttle","func","wait","options","timeout","previous","later","leading","getTime","remaining","clearTimeout","trailing","debounce","immediate","timestamp","last","callNow","once","times","memo","before","after","topics","hasProp","on","topic","handler","run","getTopic","send","payload","getTopics","removeTopic","production","supressErrorMessages","children","is","arg","that","__is","nodes","not","__nots","has","__has","prev","previousElement","previousElementSibling","siblings","selectorCheck","parent","prevAll","__siblings","__parent","__self","__sibs","pos","next","nextElement","nextElementSibling","nextAll","first","eq","$this","newPos","parents","closest","position","css","property","pixelRE","postFix","testForPixelSupport","style","camelize","defaultView","getComputedStyle","getPropertyValue","toLowerCase","width","amount","styles","parseInt","height","content","__before","size","__after","appendChild","nextSibling","prepend","insertAdjacentHTML","firstChild","append","prependTo","appendTo","clone","cloneNode","wrap","string","tempNode","empNode","whichClone","remove","unwrap","nodeName","offset","getBoundingClientRect","top","round","left","bottom","right","parentPos","empty","textContent","text","innerText","replaceWith","removeChild","addClass","className","classes","classList","add","name","hasClass","contains","removeClass","getAttribute","removeAttribute","toggleClass","toggle","attr","attribute","__attr","setAttribute","hasAttribute","removeAttr","removeProp","disable","disabled","cursor","enable","val","hide","display","show","a","b","EventErrorMessages","en","noEventOrCallback","noCallbackForEventBinding","noEventToTrigger","es","errors","EventStack","__array","arr","purge","ChuiEventCache","bind","event","capturePhase","id","deleteFromEventStack","toDelete","evtStck","unbind","eventStack","deleteOrder","evt","removeEventListener","delegate","delegateElement","e","target","ancestor","undelegate","console","error","events","trigger","createEvent","evtObj","initEvent","dispatchEvent","eventStart","eventEnd","eventMove","eventCancel","gestureLength","navigator","userAgent","touch","touchTimeout","swipeTimeout","tapTimeout","longTapDelay","singleTapDelay","isAndroid","longTapTimeout","parentIfText","swipeDirection","x1","x2","y1","y2","abs","longTap","cancelLongTap","cancelAll","delta","twoTouches","originalEvent","pageX","pageY","touches","targetTouches","isDoubleTap","method","CCDataCache","removeData","then","letter","toUpperCase","deCamelize","capitalize","all","newstr","charAt","substring","iz","iznt","_","haz","haznt","hazClass","hazntClass","hazAttr","hazntAttr","setValidityStatus","valid","checkValidity","expression","isNotEmpty","validateAlphabetic","letters","validateText","validateNumber","numbers","validateAlphaNumeric","validateUserName","minimum","username","validateEmail","email","validatePhoneNumber","int","phone","phoneNumber","convertLettersToNumbers","phonenumber","character","isNaN","validateUrl","url","validateAge","age","validateCheckbox","checked","validateRadioButtons","choice","button","validateSelectBox","selectedIndex","validateSwitch","checkbox","validateSelectList","radio","validateMultiSelectList","checkboxes","validatePassword","input1","input2","validateWithRegex","input","regex","customValidators","registerCustomValidator","serializeArray","field","serialize","Form","__passed","__errors","__result","validateElement","convertToObject","convertObjectToJSON","delimiter","arrays","nameParts","currResult","j","namePart","arrName","substr","arrIdx","min","element2","inputs","cv","validator","getErrors","get","formatNumber","separator","decimal","sep","num","Number","toFixed","sum","reduce","currency","symbol","sym","dec","zero","formatTime","time","temp2","ampm","sortDate","date1","date2","sortNumbers","sortNumbersDescending","ViewErrorMessages","noDataForViewRender","noElementForView","noTemplateForView","viewElementHasNoTemplate","noElementToSetToTemplate","noTemplateToSetToView","noEventsToAdd","noDataToSetForView","noModelToBindToView","viewHasNoModel","viewHasNoData","viewHasNoTemplate","noStyleObject","ChuiStyle","sharedSheet","unitlessProps","columnCount","fillOpacity","flex","flexGrow","flexShrink","fontWeight","lineClamp","lineHeight","opacity","order","orphans","widows","zIndex","zoom","CreateStyleSheet","prefix","unit","_sheet","_prefix","createStyleSheet","rules","rulesFromStyles","set","addUnit","insertRules","head","sheet","block","isPlainObject","combineSelectors","hyphenate","$0","rule","pairs","insertRule","child","pseudoRe","part","supports","stylesheets","view","helpers","defineHelper","View","__element","__origElement","__template","template","__data","__model","model","__index","__rendered","__variable","variable","__events","__startIndexFrom","startIndexFrom","__re","__safeHTML","safeHTML","__es6Template","es6Template","__noTemplate","noTemplate","__id","__styles","parsedTemplate","parseView","interpolate","Template","Function","handleEvents","bubble","extractTemplate","bindToModel","boundViews","render","escapeNumber","String","renderIterableData","Data","interateModelToTemplate","resetIndex","getElement","setElement","getTemplate","setTemplate","bindModel","unbindModel","findIndex","getModel","isRendered","isEmpty","addEvent","boolean","isEscapingHTML","setData","mount","Component","comp","cycle","queue","config","Item","f","schedule","isThenable","_then","obj_type","notify","chain","notifyIsolated","state","success","failure","msg","promise","deferred","triggered","deferred_wrapper","MakeDeferred","iteratePromises","Constructor","resolver","rejecter","IIFE","Deferred","executor","isValidPromise","extractChain","catch","PromisePrototype","msgs","count","JSONPCallbacks","jsonp","opts","settings","callbackName","clear","generateCallbackName","response","ok","json","defer","fetch","normalizeName","normalizeValue","Headers","headers","getOwnPropertyNames","list","values","getAll","thisArg","consumed","bodyUsed","fileReaderReady","reader","readBlobAsArrayBuffer","blob","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","support","Blob","formData","arrayBuffer","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","ArrayBuffer","rejected","decode","methods","normalizeMethod","upcased","Request","credentials","mode","referrer","form","bytes","decodeURIComponent","xhr","getAllResponseHeaders","header","Response","bodyInit","status","statusText","redirectStatuses","redirect","RangeError","location","init","request","XMLHttpRequest","responseURL","getResponseHeader","responseText","open","withCredentials","responseType","setRequestHeader","polyfill","predicate","pluck","difference","found","intersection","diff","ModelErrorMessages","noPropertyOrDataError","noPropertyToSet","noPropertyToDelete","noObjectToMerge","incorrectDataForMerging","noObjForMixin","noCallbackForModelOn","noEventForModelOn","noEventForModelTrigger","noPosForEventDeletion","noPosForPropAt","noPropForPropAt","noValForPropEquals","noPropForPropEquals","noPosForSetPropAt","noValueForSetPropAt","noPropForSetPropAt","noValueForPropEquals","dataStore","Model","create","stopped","updateBoundViews","noDataToReplaceInModel","positionGreaterThanModelLength","noDataToPushToModel","noDataForShiftToModel","start","end","noEndForModelSlice","noStartModelForSlice","noEndForModelSplice","noStartForModelSplice","noDataToInsertInModel","noPosToInserInModel","noPropForPlucking","startFrom","noElementForIndexOf","noCallbackForModelFind","noCallbackFoFindIndex","noCallbackForForEach","compareFunction","props","noPropsForSortBy","orderBy","sortByProperty","sortOrder","numberOfProperties","noDataToConcat","isiPhone","isiPad","isiPod","isiOS","isTouchEnabled","isOnline","onLine","isStandalone","standalone","isWebkit","isDesktop","isMobile","isSafari","isChrome","isNativeAndroid","userAgentHTC","theme","dir","Busy","color","spinner","iOSBusy","small","androidBusy","androidActivityIndicator","Block","Unblock","chuiBackButtonSVG","decorateBackButton","buttonText","center","parentHeight","parentWidth","clientHeight","clientWidth","tmpTop","tmpLeft","innerHeight","pageYOffset","innerWidth","EditList","editLabel","doneLabel","deleteLabel","cancelLabel","deletable","movable","modelProp","__editMade","__view","deleteButton","editButton","deletionIndicator","dispelDeletable","enableDeletable","moveUpIndicator","moveDownIndicator","screen","nav","AdjustNavbarLayout","makeEditable","movedItems","__newarray","_this","itemClone","prevClone","offsetHeight","nextClone","transform","listItem","direction","getView","MultiSelectList","selected","__selection","selections","sel","dataObj","getSelection","globalNav","h1","whichSide","oppositeSide","rtl","hidden","visibleSibling","calculateLongest","widthA","widthB","handleOneSibling","sib","sibling","sibwidth","headerWidth","isNavigating","getScreen","makeScreenCurrent","makeScreenPrevious","makeScreenNext","GoToScreen","ChuiRoutes","destination","currentScreen","screens","getCurrent","destinationScreen","scrollTop","Router","dispatch","GoBack","GoBackToScreen","dest","route","handleNavigationEvent","Paging","pager","currentSection","articles","pageForward","pagerButton","currentArticle","pageBack","Popover","title","popover","popoverID","__calcPopPos","calcLeft","calcTop","popoverOffset","ClosePopover","AlignPopover","triggerID","onresize","Popup","message","cancelButton","continueButton","popup","ClosePopup","ShowPopup","Range","newPlace","newPoint","addRoute","getFullRoute","getCurrentLoc","getNext","getPrevious","Segmented","segmented","labels","createSegmentedButton","androidSelectionIndicator","__segmented","androidSelectionBorder","selectedButton","SelectList","Sheet","background","handle","slideFrom","slideDown","HideSheet","ShowSheet","SlideOut","slideoutID","buttonID","slideOutButton","slideOut","slideout","slideOutBtn","menuItems","screenToShow","populate","Stepper","max","stepper","defaultValue","increaseSymbol","decreaseSymbol","disabledDecrease","disabledIncrease","decreaseButton","label","increaseButton","increaseStepperValue","currentValue","newValue","decreaseStepperValue","getValue","Switch","__checked","onCallback","offCallback","swipeOn","swipeOff","documentElement","checkState","__switch","TabBar","icons","__tabbarScreens","screenPrefix","selectedScreen","showIcons","setToCurrent","setToNext","makeTab","icon","tab","tabbarTmpl","tabbar","selectedTabButton","__tabbarButtons","__selectedTabbarButton","__selectedTabbarScreen","handleTabSelectionForAndroid","tabbarButtons","routes","fullRoute","navRoutesFull","navRoutes","routing","whichRoute","getSelectedTab","getSelectedScreen","setSelectedTab","ChuiColor","colorRegex","re","process","bits","processor","channels","g","toHex","toRGB","getBrightness","lightenColor","percent","amt","R","G","B","darkenColor","calculateBrightness","kolor","w","offsetWidth","h","x","y","navBkColor","backgroundColor","ripple","rippleColor","brightness","dataset","rippleWave","Box","globalObject","indexedDB","webkitIndexedDB","mozIndexedDB","OIndexedDB","msIndexedDB","DETECT_BLOB_SUPPORT_STORE","supportsBlobs","dbContexts","_binStringToArrayBuffer","bin","buf","Uint8Array","charCodeAt","_checkBlobSupportWithoutCaching","txn","createBlob","objectStore","put","onabort","preventDefault","stopPropagation","oncomplete","matchedChrome","matchedEdge","_checkBlobSupport","idb","_deferReadiness","dbInfo","dbContext","deferredOperation","deferredOperations","dbReady","_advanceReadiness","_getConnection","upgradeNeeded","db","close","dbArgs","openreq","onupgradeneeded","createObjectStore","storeName","oldVersion","ex","warn","newVersion","onsuccess","_getOriginalConnection","_getUpgradedConnection","_isUpgradeNeeded","defaultVersion","isNewStore","objectStoreNames","isDowngrade","isUpgrade","incVersion","_encodeBlob","onloadend","base64","btoa","__local_forage_encoded_blob","readAsBinaryString","_decodeBlob","encodedBlob","arrayBuff","atob","_isEncodedBlob","_fullyReady","_initReady","_dbInfo","executeTwoCallbacks","_initStorage","forages","ready","initPromises","ignoreErrors","forage","_defaultConfig","k","store","transaction","req","executeCallback","iterator","openCursor","iterationNumber","continue","blobSupport","delete","n","advanced","advance","asyncStorage","_driver","openDatabase","__initStorage","dbInfoPromise","description","setDriver","LOCALSTORAGE","t","executeSql","boxName","__dbInfo","chuiBoxSerializer","serializer","results","rows","deserialize","originalValue","sqlError","code","QUOTA_ERR","webSQLStorage","__driver","localStorage","keyPrefix","__defaultConfig","_key","keyPrefixLength","_key2","localStorageWrapper","BASE_CHARS","BLOB_TYPE_PREFIX","BLOB_TYPE_PREFIX_REGEX","SERIALIZED_MARKER","SERIALIZED_MARKER_LENGTH","TYPE_ARRAYBUFFER","TYPE_BLOB","TYPE_INT8ARRAY","TYPE_UINT8ARRAY","TYPE_UINT8CLAMPEDARRAY","TYPE_INT16ARRAY","TYPE_INT32ARRAY","TYPE_UINT16ARRAY","TYPE_UINT32ARRAY","TYPE_FLOAT32ARRAY","TYPE_FLOAT64ARRAY","TYPE_SERIALIZED_MARKER_LENGTH","__createBlob","parts","properties","BlobBuilder","MSBlobBuilder","MozBlobBuilder","WebKitBlobBuilder","builder","getBlob","valueString","buffer","marker","bufferToString","fileReader","serializedString","blobType","matcher","stringToBuffer","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","bufferLength","encoded1","encoded2","encoded3","encoded4","base64String","CustomDrivers","DriverType","INDEXEDDB","WEBSQL","DefaultDriverOrder","LibraryMethods","DefaultConfig","driver","driverSupport","IDBKeyRange","callWhenReady","chuiBoxInstance","libraryMethod","__args","isLibraryDriver","driverName","ChuiBox","__config","__driverSet","__initDriver","__ready","__wrapLibraryMethodsWithReady","defineDriver","driverObject","errorCallback","_ret","complianceError","namingError","v","customDriverMethods","customDriverMethod","supportPromise","__support","supportResult","getDriver","getDriverPromise","log","getSerializer","serializerPromise","drivers","supportedDrivers","__getSupportedDrivers","setDriverToConfig","initDriver","currentDriverIndex","driverPromiseLoop","__extend","oldDriverSetDone","libraryMethodsAndProperties","createInstance","chuiBox"],"mappings":"muCACA;;;;OAKMA,S,YACJ,kBAAaC,IAAb,CAAmB,gCACjB,KAAKC,KAAL,CAAa,EAAb,CACA,KAAKC,MAAL,CAAc,CAAd,CACA,KAAKC,UAAL,CAAkB,UAAlB,CACA,GAAIC,MAAMC,OAAN,CAAcL,IAAd,CAAJ,CAAyB,CACvB,GAAIM,GAAI,CAAC,CAAT,CACA,GAAMC,KAAMP,KAAKE,MAAjB,CACA,MAAO,EAAEI,CAAF,CAAMC,GAAb,CAAkB,CAChB,KAAKN,KAAL,CAAWK,CAAX,EAAgBN,KAAKM,CAAL,CAAhB,CACD,CACF,CAND,IAMO,IAAIN,IAAJ,CAAU,CACf,GAAIA,OAASQ,QAAb,CAAuB,CACrB,KAAKP,KAAL,CAAW,CAAX,EAAgBO,QAAhB,CACA,KAAK,CAAL,EAAUA,QAAV,CACA,KAAKN,MAAL,CAAc,CAAd,CACD,CAJD,IAIO,CACL,GAAMD,OAAQG,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4BC,SAA5B,CAAd,CACAX,MAAMY,OAAN,CAAc,SAASC,GAAT,CAAcC,GAAd,CAAmB,CAC/B,KAAKd,KAAL,CAAWc,GAAX,EAAkBD,GAAlB,CACD,CAFD,EAGD,CACF,CACF,C,mDAEEE,K,CAAO,CACR,GAAIC,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAI,CAAC,KAAKE,KAAL,CAAWC,MAAhB,CAAwB,MAAOe,IAAP,CACxB,GAAIC,MAAOC,SAAX,CACA,GAAIH,MAAQ,CAAZ,CAAe,CACbE,KAAO,KAAKjB,KAAL,CAAW,KAAKA,KAAL,CAAWC,MAAX,CAAoBc,KAA/B,CAAP,CACAC,IAAIG,IAAJ,CAASF,IAAT,EACD,CAHD,IAGO,CACL,GAAIF,OAAS,KAAKf,KAAL,CAAWC,MAAxB,CAAgC,MAAO,IAAIH,SAAJ,EAAP,CAChCmB,KAAO,KAAKjB,KAAL,CAAWe,KAAX,CAAP,CACAC,IAAIG,IAAJ,CAASF,IAAT,EACD,CACDD,IAAI,CAAJ,EAASA,IAAIhB,KAAJ,CAAU,CAAV,CAAT,CACAgB,IAAIf,MAAJ,CAAae,IAAIhB,KAAJ,CAAUC,MAAvB,CACA,MAAOe,IAAP,CACD,C,kCAEII,I,CAAM,CACT,GAAIA,MAAQA,KAAKlB,UAAL,GAAoB,UAAhC,CAA4C,CAC1C,KAAKF,KAAL,CAAa,KAAKA,KAAL,CAAWqB,MAAX,CAAkBD,KAAKpB,KAAvB,CAAb,CACD,CAFD,IAEO,CACL,KAAKA,KAAL,CAAWmB,IAAX,CAAgBC,IAAhB,EACD,CACD,KAAKnB,MAAL,CAAc,KAAKD,KAAL,CAAWC,MAAzB,CACA,KAAK,CAAL,EAAU,KAAKD,KAAL,CAAW,CAAX,CAAV,CACD,C,iCAEK,CACJ,KAAKC,MAAL,CAAc,KAAKD,KAAL,CAAWC,MAAX,CAAoB,CAAlC,CACA,GAAIe,KAAM,KAAKhB,KAAL,CAAWsB,GAAX,EAAV,CACA,MAAOC,GAAEP,GAAF,CAAP,CACD,C,wCAEOI,I,CAAM,CACZ,GAAIA,MAAQA,KAAKlB,UAAL,GAAoB,UAAhC,CAA4C,CAC1C,KAAKF,KAAL,CAAWwB,OAAX,CAAmBJ,KAAKpB,KAAL,CAAW,CAAX,CAAnB,EACD,CAFD,IAEO,CACL,KAAKA,KAAL,CAAWwB,OAAX,CAAmBJ,IAAnB,EACD,CACD,KAAK,CAAL,EAAU,KAAKpB,KAAL,CAAW,CAAX,CAAV,CACA,KAAKC,MAAL,CAAc,KAAKD,KAAL,CAAWC,MAAzB,CACD,C,qCAEO,CACN,KAAKA,MAAL,CAAc,KAAKD,KAAL,CAAWC,MAAX,CAAoB,CAAlC,CACA,GAAIe,KAAM,KAAKhB,KAAL,CAAWyB,KAAX,EAAV,CACA,MAAOF,GAAEP,GAAF,CAAP,CACD,C,mCAEM,CACL,MAAO,MAAKhB,KAAL,CAAWC,MAAlB,CACD,C,wCAEOyB,Q,CAAU,CAChB,GAAIC,OAAQT,SAAZ,CACA,GAAIb,GAAI,CAAR,CACA,GAAMC,KAAM,KAAKN,KAAL,CAAWC,MAAvB,CACA,KAAOI,EAAIC,GAAX,CAAgBD,GAAhB,CAAqB,CACnBsB,MAAQD,SAASE,IAAT,CAAc,KAAK5B,KAAL,CAAWK,CAAX,CAAd,CAA6B,KAAKL,KAAL,CAAWK,CAAX,CAA7B,CAA4CA,CAA5C,CAAR,CACA,GAAIsB,QAAU,KAAd,CAAqB,CACnB,MACD,CACF,CACF,C,kCAEID,Q,CAAU,CACb,GAAIC,OAAQT,SAAZ,CACA,GAAIb,GAAI,CAAR,CACA,GAAMC,KAAM,KAAKN,KAAL,CAAWC,MAAvB,CACA,KAAOI,EAAIC,GAAX,CAAgBD,GAAhB,CAAqB,CACnBsB,MAAQD,SAASE,IAAT,CAAc,KAAK5B,KAAL,CAAWK,CAAX,CAAd,CAA6BA,CAA7B,CAAgC,KAAKL,KAAL,CAAWK,CAAX,CAAhC,CAAR,CACA,GAAIsB,QAAU,KAAd,CAAqB,CACnB,MACD,CACF,CACF,C,qCAEc,CACb,GAAIX,KAAM,GAAIlB,SAAJ,EAAV,CADa,8BAANC,IAAM,yCAANA,IAAM,0BAEbiB,IAAIK,MAAJ,CAAW,KAAKrB,KAAL,CAAWS,KAAX,CAAiBC,KAAjB,CAAuB,KAAKV,KAA5B,CAAmCD,IAAnC,CAAX,EACA,MAAOwB,GAAEP,GAAF,CAAP,CACD,C,uCAEe,CACd,GAAIA,KAAM,GAAIlB,SAAJ,EAAV,CADc,+BAANC,IAAM,2CAANA,IAAM,0BAEdiB,IAAIK,MAAJ,CAAW,KAAKrB,KAAL,CAAW6B,MAAX,CAAkBnB,KAAlB,CAAwB,KAAKV,KAA7B,CAAoCD,IAApC,CAAX,EACA,KAAK,CAAL,EAAU,KAAKC,KAAL,CAAW,CAAX,CAAV,CACA,KAAKC,MAAL,CAAc,KAAKD,KAAL,CAAWC,MAAzB,CACA,MAAOsB,GAAEP,GAAF,CAAP,CACD,C,uCAEe,CACd,GAAIA,KAAM,GAAIlB,SAAJ,EAAV,CADc,+BAANC,IAAM,2CAANA,IAAM,0BAGdiB,IAAIK,MAAJ,CAAW,KAAKrB,KAAL,CAAW8B,MAAX,CAAkBpB,KAAlB,CAAwB,KAAKV,KAA7B,CAAoCD,IAApC,CAAX,EACAiB,IAAI,CAAJ,EAASA,IAAIhB,KAAJ,CAAU,CAAV,CAAT,CACA,MAAOgB,IAAP,CACD,C,iCAEY,CACX,GAAIA,KAAM,GAAIlB,SAAJ,EAAV,CADW,+BAANC,IAAM,2CAANA,IAAM,0BAEXiB,IAAIK,MAAJ,CAAW,KAAKrB,KAAL,CAAW+B,GAAX,CAAerB,KAAf,CAAqB,KAAKV,KAA1B,CAAiCD,IAAjC,CAAX,EACAiB,IAAI,CAAJ,EAASA,IAAIhB,KAAJ,CAAU,CAAV,CAAT,CACA,MAAOgB,IAAP,CACD,C,wCAEOgB,I,CAAM,CACZ;AACA,GAAI,CAACA,IAAL,CAAW,MAAO,CAAC,CAAR,CACX,GAAIA,KAAKC,QAAL,EAAiBD,KAAKC,QAAL,GAAkB,CAAvC,CAA0C,CACxC,MAAO,MAAKjC,KAAL,CAAWkC,OAAX,CAAmBF,IAAnB,CAAP,CACD,CAFD,IAEO,IAAIA,MAAQA,KAAK9B,UAAL,GAAoB,UAAhC,CAA4C,CACjD,MAAO,MAAKF,KAAL,CAAWkC,OAAX,CAAmBF,KAAK,CAAL,CAAnB,CAAP,CACD,CAFM,IAEA,IAAIA,MAAQ7B,MAAMC,OAAN,CAAc4B,IAAd,CAAZ,CAAiC,CACtC,MAAO,MAAKhC,KAAL,CAAWkC,OAAX,CAAmBF,KAAK,CAAL,CAAnB,CAAP,CACD,CAFM,IAEA,IAAIA,MAAQT,EAAEY,IAAF,CAAOH,IAAP,IAAiB,QAA7B,CAAuC,CAC5C,GAAMI,KAAK,KAAK,CAAL,EAAQC,UAAR,CAAmBC,aAAnB,CAAiCN,IAAjC,CAAX,CACA,MAAO,MAAKhC,KAAL,CAAWkC,OAAX,CAAmBE,GAAnB,CAAP,CACD,CACF,C,sCAEMG,U,CAAY,CACjB,GAAIlC,GAAI,CAAC,CAAT,CACA,GAAIC,KAAMY,SAAV,CACA,GAAID,MAAOC,SAAX,CACA,GAAIf,MAAMC,OAAN,CAAcmC,UAAd,CAAJ,CAA+B,CAC7BtB,KAAOsB,UAAP,CACAjC,IAAMW,KAAKhB,MAAX,CACD,CAHD,IAGO,IAAIsC,YAAcA,WAAWrC,UAAzB,EAAuCqC,WAAWrC,UAAX,GAA0B,UAArE,CAAiF,CACtFe,KAAOsB,WAAWC,OAAX,EAAP,CACAlC,IAAMW,KAAKhB,MAAX,CACD,CAHM,IAGA,IAAIsC,WAAWE,WAAX,CAAuBC,QAAvB,GAAkCC,KAAlC,CAAwC,4BAAxC,CAAJ,CAA2E,CAChF1B,KAAO,CAACsB,UAAD,CAAP,CACAjC,IAAM,CAAN,CACD,CACD,KAAKN,KAAL,CAAWmB,IAAX,CAAgBT,KAAhB,CAAsB,KAAKV,KAA3B,CAAkCiB,IAAlC,EACA,KAAK,CAAL,EAAU,KAAKjB,KAAL,CAAW,CAAX,CAAV,CACA,KAAKC,MAAL,CAAc,KAAKD,KAAL,CAAWC,MAAzB,CACD,C,yCAEgB,gCAANF,IAAM,2CAANA,IAAM,0BACf,KAAKC,KAAL,CAAW4C,OAAX,CAAmBlC,KAAnB,CAAyB,KAAKV,KAA9B,CAAqCD,IAArC,EACA,KAAK,CAAL,EAAU,KAAKC,KAAL,CAAW,CAAX,CAAV,CACD,C,qCAEc,gCAAND,IAAM,2CAANA,IAAM,0BACb,MAAO,MAAKC,KAAL,CAAW6C,KAAX,CAAiBnC,KAAjB,CAAuB,KAAKV,KAA5B,CAAmCD,IAAnC,CAAP,CACD,C,mCAEa,gCAANA,IAAM,2CAANA,IAAM,0BACZ,MAAO,MAAKC,KAAL,CAAW8C,IAAX,CAAgBpC,KAAhB,CAAsB,KAAKV,KAA3B,CAAkCD,IAAlC,CAAP,CACD,C,uCAEQ,CACP,GAAMO,KAAM,KAAKN,KAAL,CAAWC,MAAvB,CACA,GAAIe,KAAM,EAAV,CACA,GAAI+B,KAAM,EAAV,CACA,IAAK,GAAI1C,GAAI,CAAb,CAAgBA,EAAIC,GAApB,CAAyBD,GAAzB,CAA8B,CAC5B,GAAM2C,WAAYC,KAAKC,SAAL,CAAe,KAAKlD,KAAL,CAAWK,CAAX,CAAf,CAAlB,CACA,GAAM8C,gBAAiB,KAAKnD,KAAL,CAAWK,CAAX,CAAvB,CACA,GAAI0C,IAAIC,SAAJ,IAAmB9B,SAAvB,CAAkC,CAChCF,IAAIG,IAAJ,CAASgC,cAAT,EACAJ,IAAIC,SAAJ,EAAiB,CAAjB,CACD,CAHD,IAGO,CACLD,IAAIC,SAAJ,IACD,CACF,CACD,KAAKhD,KAAL,CAAagB,GAAb,CACA,KAAK,CAAL,EAAU,KAAKhB,KAAL,CAAW,CAAX,CAAV,CACA,KAAKC,MAAL,CAAc,KAAKD,KAAL,CAAWC,MAAzB,CACD,C,iCAEK,CACJ,MAAO,MAAKD,KAAZ,CACD,CACD;;8CAGU,CACR,MAAO,MAAKA,KAAZ,CACD,C,qCAEO,CACN,KAAKA,KAAL,CAAWC,MAAX,CAAoB,CAApB,CACA,KAAKA,MAAL,CAAc,CAAd,CACD,C,wBAEH;;GAGA,CAAC,UAAW,0BAEV;;KAGA,QAASmD,gBAAT,CAAyBC,QAAzB,CAAmCC,OAAnC,CAA4C,CAC1C,GAAMC,MAAO,IAAb,CACA,GAAMC,MAAO,aAAb,CACA,GAAMC,SAAU,aAAhB,CACA,GAAMC,OAAQ,UAAd,CACA,GAAMC,SAAU,6BAAhB,CACA,GAAI1C,MAAOC,SAAX,CAEA,GAAMT,OAAQ,QAARA,MAAQ,UAAY,CACxBQ,KAAO,GAAInB,SAAJ,CAAa,GAAGW,KAAH,CAASC,KAAT,CAAekD,QAAf,CAAb,CAAP,CACA3C,KAAK,CAAL,EAAUA,KAAKjB,KAAL,CAAW,CAAX,CAAV,CACA,MAAOiB,KAAP,CACD,CAJD,CAMA,GAAM4C,OAAQ,QAARA,MAAQ,UAAY,CACxB,GAAMzB,IAAK7B,SAASuD,cAAT,CAAwBT,SAASU,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAxB,CAAX,CACA,GAAI3B,EAAJ,CAAQ,CACNnB,KAAO,GAAInB,SAAJ,CAAa,CAACsC,EAAD,CAAb,CAAP,CACAnB,KAAK,CAAL,EAAU,GAAInB,SAAJ,CAAa,CAACsC,EAAD,CAAb,EAAmBpC,KAAnB,CAAyB,CAAzB,CAAV,CACAiB,KAAKhB,MAAL,CAAc,CAAd,CACA,MAAOgB,KAAP,CACD,CALD,IAKO,CACL,MAAO,IAAInB,SAAJ,EAAP,CACD,CACF,CAVD,CAYA,GAAMkE,QAAS,QAATA,OAAS,CAACX,QAAD,CAAWC,OAAX,CAAuB,CACpC,GAAIA,OAAJ,CAAa,CACXrC,KAAOR,MAAM6C,QAAQW,oBAAR,CAA6BZ,QAA7B,CAAN,CAAP,CACApC,KAAK,CAAL,EAAUA,KAAKjB,KAAL,CAAW,CAAX,CAAV,CACAiB,KAAKhB,MAAL,CAAcgB,KAAKhB,MAAnB,CACA,MAAOgB,KAAP,CACD,CALD,IAKO,CACLA,KAAOR,MAAMF,SAAS0D,oBAAT,CAA8BZ,QAA9B,CAAN,CAAP,CACApC,KAAK,CAAL,EAAUA,KAAKjB,KAAL,CAAW,CAAX,CAAV,CACAiB,KAAKhB,MAAL,CAAcgB,KAAKjB,KAAL,CAAWC,MAAzB,CACA,MAAOgB,KAAP,CACD,CACF,CAZD,CAcA,GAAMiD,UAAW,QAAXA,SAAW,CAACb,QAAD,CAAWC,OAAX,CAAuB,CACtC,GAAIA,OAAJ,CAAa,CACXrC,KAAOR,MAAM6C,QAAQa,sBAAR,CAA+Bd,SAASU,KAAT,CAAe,GAAf,EAAoB,CAApB,CAA/B,CAAN,CAAP,CACA9C,KAAK,CAAL,EAAUA,KAAKjB,KAAL,CAAW,CAAX,CAAV,CACAiB,KAAKhB,MAAL,CAAcgB,KAAKhB,MAAnB,CACA,MAAOgB,KAAP,CACD,CALD,IAKO,CACLA,KAAOR,MAAMF,SAAS4D,sBAAT,CAAgCd,SAASU,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAhC,CAAN,CAAP,CACA9C,KAAK,CAAL,EAAUA,KAAKjB,KAAL,CAAW,CAAX,CAAV,CACAiB,KAAKhB,MAAL,CAAcgB,KAAKjB,KAAL,CAAWC,MAAzB,CACA,MAAOgB,KAAP,CACD,CACF,CAZD,CAcA,GAAMmD,SAAU,QAAVA,QAAU,CAACf,QAAD,CAAWC,OAAX,CAAuB,CACrC,GAAI,MAAOD,SAAP,GAAoB,QAAxB,CACEA,SAAWA,SAASgB,IAAT,EAAX,CACF,GAAI,MAAOhB,SAAP,GAAoB,QAApB,EAAgCG,KAAKc,IAAL,CAAUjB,QAAV,CAApC,CAAyD,CACvD,MAAOQ,OAAMR,QAAN,CAAP,CACD,CAED,GAAIA,UAAaA,mBAAoBlD,MAAjC,EAA2CkD,SAASpD,MAAxD,CACE,MAAOoD,SAAP,CACF,GAAI,CAACC,OAAD,EAAY,MAAOD,SAAP,GAAoB,QAApC,CAA8C,CAC5C,GAAI,aAAaiB,IAAb,CAAkBjB,QAAlB,CAAJ,CAAiC,CAC/B,MAAOE,MAAKgB,IAAL,CAAUlB,QAAV,CAAP,CACD,CAED,GAAIK,MAAMY,IAAN,CAAWjB,QAAX,CAAJ,CAA0B,CACxB,MAAOW,QAAOX,QAAP,CAAP,CAED,CAHD,IAGO,IAAII,QAAQa,IAAR,CAAajB,QAAb,CAAJ,CAA4B,CACjC,MAAOa,UAASb,QAAT,CAAP,CAED,CAHM,IAGA,CACLpC,KAAOR,MAAMF,SAASiE,gBAAT,CAA0BnB,QAA1B,CAAN,CAAP,CACApC,KAAK,CAAL,EAAUA,KAAKjB,KAAL,CAAW,CAAX,CAAV,CACAiB,KAAKhB,MAAL,CAAcgB,KAAKjB,KAAL,CAAWC,MAAzB,CACA,MAAOgB,KAAP,CACD,CAEF,CAlBD,IAkBO,CACL,GAAIqC,OAAJ,CAAa,CACXrC,KAAOR,MAAMc,EAAE+B,OAAF,EAAWmB,IAAX,CAAgBpB,QAAhB,CAAN,CAAP,CACApC,KAAK,CAAL,EAAUA,KAAKjB,KAAL,CAAW,CAAX,CAAV,CACAiB,KAAKhB,MAAL,CAAcgB,KAAKjB,KAAL,CAAaC,MAA3B,CACA,MAAOgB,KAAP,CAED,CAND,IAMO,CACLA,KAAOR,MAAMF,SAASiE,gBAAT,CAA0BnB,QAA1B,CAAN,CAAP,CACApC,KAAK,CAAL,EAAUA,KAAKjB,KAAL,CAAW,CAAX,CAAV,CACAiB,KAAKhB,MAAL,CAAcgB,KAAKjB,KAAL,CAAWC,MAAzB,CACA,MAAOgB,KAAP,CACD,CACF,CACF,CAzCD,CA2CA,GAAIoC,UAAYA,SAASnD,UAArB,EAAmCmD,SAASnD,UAAT,GAAwB,UAA/D,CAA2E,CACzE,MAAOmD,SAAP,CACD,CAED,GAAIA,WAAa9C,QAAjB,CAA2B,CACzB,MAAO,IAAIT,SAAJ,CAAaS,QAAb,CAAP,CACD,CAED,GAAI8C,WAAa,IAAjB,CAAuB,CACrB,MAAO,IAAIvD,SAAJ,EAAP,CACD,CAED,GAAI,CAAC,CAACwD,OAAN,CAAe,CACb,GAAI,MAAOA,QAAP,GAAmB,QAAvB,CAAiC,CAC/BrC,KAAOR,MAAMF,SAASiE,gBAAT,CAA0BlB,QAAU,GAAV,CAAgBD,QAA1C,CAAN,CAAP,CACApC,KAAK,CAAL,EAAUA,KAAKjB,KAAL,CAAW,CAAX,CAAV,CACAiB,KAAKhB,MAAL,CAAcgB,KAAKjB,KAAL,CAAWC,MAAzB,CACA,MAAOgB,KAAP,CACD,CALD,IAKO,IAAIqC,QAAQrB,QAAR,GAAqB,CAAzB,CAA4B,CACjC,MAAOmC,SAAQf,QAAR,CAAkBC,OAAlB,CAAP,CACD,CAEF,CAVD,IAUO,IAAI,MAAOD,SAAP,GAAoB,UAAxB,CAAoC,CACzC,GAAIM,QAAQW,IAAR,CAAa/D,SAASmE,UAAtB,GAAqCnE,SAASoE,IAAlD,CAAwD,CACtDtB,SAASzB,IAAT,CAAcyB,QAAd,EACD,CAFD,IAEO,CACL9C,SAASqE,gBAAT,CAA0B,kBAA1B,CAA8C,UAAW,CACvD,MAAOvB,UAASzB,IAAT,CAAcyB,QAAd,CAAP,CACD,CAFD,EAGD,CAEF,CATM,IASA,IAAIA,UAAYA,SAASpB,QAAT,GAAsB,CAAtC,CAAyC,CAC9ChB,KAAO,GAAInB,SAAJ,EAAP,CACAmB,KAAK,CAAL,EAAUoC,QAAV,CACApC,KAAKhB,MAAL,CAAcgB,KAAKjB,KAAL,CAAWC,MAAzB,CACAgB,KAAKE,IAAL,CAAUkC,QAAV,EACA,MAAOpC,KAAP,CAED,CAPM,IAOA,IAAI,MAAOoC,SAAP,GAAoB,QAAxB,CAAkC,CACvC,GAAIA,WAAa,EAAjB,CAAqB,MAAO,IAAIvD,SAAJ,EAAP,CACrB,GAAI,aAAawE,IAAb,CAAkBjB,QAAlB,CAAJ,CAAiC,CAC/B,MAAOD,iBAAgBmB,IAAhB,CAAqBlB,QAArB,CAAP,CACD,CAFD,IAEO,CACL,GAAI,CACF,MAAOe,SAAQf,QAAR,EAAoBe,QAAQf,QAAR,CAApB,CAAwC,GAAIvD,SAAJ,EAA/C,CACD,CAAC,MAAO+E,GAAP,CAAY,CACZ,MAAO,IAAI/E,SAAJ,EAAP,CACD,CACF,CAEF,CAZM,IAYA,IAAIK,MAAMC,OAAN,CAAciD,QAAd,CAAJ,CAA6B,CAClC,MAAO,IAAIvD,SAAJ,CAAauD,QAAb,CAAP,CAED,CAHM,IAGA,IAAIA,WAAayB,MAAjB,CAAyB,CAC9B7D,KAAO,GAAInB,SAAJ,EAAP,CACAmB,KAAK,CAAL,EAAU6D,MAAV,CACA7D,KAAKhB,MAAL,CAAcgB,KAAKjB,KAAL,CAAWC,MAAzB,CACA,MAAOgB,KAAP,CAED,CANM,IAMA,CACL,MAAO,IAAInB,SAAJ,EAAP,CACD,CAED,MAAO,IAAIA,SAAJ,EAAP,CACD,CAED,GAAIgF,OAAOC,wBAAX,CAAqC,CACnC3B,gBAAgB4B,iBAAhB,CAAoCF,OAAOC,wBAA3C,CACD,CAFD,IAEO,CACL3B,gBAAgB4B,iBAAhB,CAAoC,IAApC,CACD,CAED,GAAIzD,GAAI6B,eAAR,CAEA;;KAIA;;;KAIA,GAAI,CAAC6B,OAAOC,IAAZ,CAAkB,CAChBD,OAAOC,IAAP,CAAe,UAAW,CACxB,aACA,GAAMC,gBAAiBF,OAAOzE,SAAP,CAAiB2E,cAAxC,CACIC,eAAiB,CAAE,CAAE1C,SAAU,IAAZ,CAAD,CAAqB2C,oBAArB,CAA0C,UAA1C,CADtB,CAEIC,UAAY,CACV,UADU,CAEV,gBAFU,CAGV,SAHU,CAIV,gBAJU,CAKV,eALU,CAMV,sBANU,CAOV,aAPU,CAFhB,CAWIC,gBAAkBD,UAAUrF,MAXhC,CAaA,MAAO,UAAS8C,GAAT,CAAc,CACnB,GAAI,OAAOA,IAAP,mCAAOA,GAAP,KAAe,QAAf,GAA4B,MAAOA,IAAP,GAAe,UAAf,EAA6BA,MAAQ,IAAjE,CAAJ,CAA4E,CAC1E,KAAM,IAAIyC,UAAJ,CAAc,kCAAd,CAAN,CACD,CAED,GAAIC,QAAS,EAAb,CACA,GAAIC,MAAOxE,SAAX,CACA,GAAIb,GAAIa,SAAR,CAEA,IAAKwE,IAAL,GAAa3C,IAAb,CAAkB,CAChB,GAAIoC,eAAevD,IAAf,CAAoBmB,GAApB,CAAyB2C,IAAzB,CAAJ,CAAoC,CAClCD,OAAOtE,IAAP,CAAYuE,IAAZ,EACD,CACF,CAED,GAAIN,cAAJ,CAAoB,CAClB,IAAK/E,EAAI,CAAT,CAAYA,EAAIkF,eAAhB,CAAiClF,GAAjC,CAAsC,CACpC,GAAI8E,eAAevD,IAAf,CAAoBmB,GAApB,CAAyBuC,UAAUjF,CAAV,CAAzB,CAAJ,CAA4C,CAC1CoF,OAAOtE,IAAP,CAAYmE,UAAUjF,CAAV,CAAZ,EACD,CACF,CACF,CACD,MAAOoF,OAAP,CACD,CAvBD,CAwBD,CAvCc,EAAf,CAwCD,CAEDlE,EAAEoE,MAAF,CAAW,SAAC5C,GAAD,CAAM2C,IAAN,CAAe,CACxB,GAAI,CAACA,IAAL,CAAW,CACTA,KAAO3C,GAAP,CACAA,IAAMK,eAAN,CACD,CACD6B,OAAOC,IAAP,CAAYQ,IAAZ,EAAkB9E,OAAlB,CAA0B,WAAK,CAC7B,GAAI8E,KAAKP,cAAL,CAAoBS,CAApB,CAAJ,CAA4B,CAC1BX,OAAOY,cAAP,CAAsB9C,GAAtB,CAA2B6C,CAA3B,CAA8B,CAC5BjE,MAAO+D,KAAKE,CAAL,CADqB,CAE5BE,SAAU,IAFkB,CAG5BC,WAAY,KAHgB,CAI5BC,aAAc,IAJc,CAA9B,EAMD,CACF,CATD,EAUD,CAfD,CAkBA;;KAGAzE,EAAE0E,EAAF,CAAO,CACLN,OAAQ,8BAAUpE,GAAEoE,MAAF,CAAS7F,SAASU,SAAlB,CAA6B0F,MAA7B,CAAV,EADH,CAAP,CAIA;;KAGA3E,EAAEoE,MAAF,CAAS,CACPQ,IAAK,iBADE,CAGPC,QAAS,gBAHF,CAKPC,KAAM,eAAM,CAAE,CALP,CAOPC,KAAM,eAAM,CACV,GAAIC,GAAIC,KAAKC,GAAL,EAAR,CACAF,GAAKG,YAAYD,GAAZ,EAAL,CACA,GAAME,SAAU,uDAAuD5C,KAAvD,CAA6D,EAA7D,CAAhB,CACA,GAAM6C,cAAeD,QAAQE,KAAKC,KAAL,CAAWD,KAAKE,MAAL,GAAgBJ,QAAQ1G,MAAnC,CAAR,CAArB,CACA,MAAO2G,cAAe,kCAAkCI,OAAlC,CAA0C,OAA1C,CAAmD,SAASC,CAAT,CAAY,CACnF,GAAIC,GAAI,CAACX,EAAIM,KAAKE,MAAL,GAAgB,EAArB,EAA2B,EAA3B,CAAgC,CAAxC,CACAR,EAAIM,KAAKC,KAAL,CAAWP,EAAI,EAAf,CAAJ,CACA,MAAO,CAACU,IAAM,GAAN,CAAYC,CAAZ,CAAiBA,EAAI,GAAJ,CAAU,GAA5B,EAAkCxE,QAAlC,CAA2C,EAA3C,CAAP,CACD,CAJqB,CAAtB,CAKD,CAjBM,CAmBP6B,KAAM,yBAAc,CAClB,GAAIvD,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAImB,MAAOC,SAAX,CAEA,GAAMiG,YAAa,CACjBC,OAAQ,CAAC,CAAD,CAAI,8BAAJ,CAAoC,WAApC,CADS,CAEjBC,OAAQ,CAAC,CAAD,CAAI,YAAJ,CAAkB,aAAlB,CAFS,CAGjBC,KAAM,CAAC,CAAD,CAAI,OAAJ,CAAa,QAAb,CAHW,CAIjBC,MAAO,CAAC,CAAD,CAAI,UAAJ,CAAgB,WAAhB,CAJU,CAKjBC,MAAO,CAAC,CAAD,CAAI,SAAJ,CAAe,UAAf,CALU,CAMjBC,GAAI,CAAC,CAAD,CAAI,gBAAJ,CAAsB,kBAAtB,CANa,CAOjBC,IAAK,CAAC,CAAD,CAAI,kCAAJ,CAAwC,qBAAxC,CAPY,CAQjBC,GAAI,CAAC,CAAD,CAAI,oBAAJ,CAA0B,uBAA1B,CARa,CASjBC,UAAW,CAAC,CAAD,CAAI,OAAJ,CAAa,QAAb,CATM,CAAnB,CAYAT,WAAWU,QAAX,CAAsBV,WAAWC,MAAjC,CACAD,WAAWW,KAAX,CAAmBX,WAAWY,KAAX,CAAmBZ,WAAWa,QAAX,CAAsBb,WAAWc,OAAX,CAAqBd,WAAWK,KAA5F,CACAL,WAAWe,EAAX,CAAgBf,WAAWQ,EAA3B,CAEA,GAAIQ,SAAU5H,SAAS6H,aAAT,CAAuB,KAAvB,CAAd,CACA,GAAMzF,OAAQ,cAAc0F,IAAd,CAAmBC,UAAnB,CAAd,CAEA,GAAI3F,QAAU,IAAd,CAAoB,CAClB,GAAM4F,KAAM5F,MAAM,CAAN,EAASqE,OAAT,CAAiB,IAAjB,CAAuB,EAAvB,EAA2BA,OAA3B,CAAmC,IAAnC,CAAyC,EAAzC,CAAZ,CACA,GAAMjF,KAAMoF,WAAWoB,GAAX,GAAmBpB,WAAWS,SAA1C,CACAU,WAAavG,IAAI,CAAJ,EAASuG,UAAT,CAAsBvG,IAAI,CAAJ,CAAnC,CAEAoG,QAAQK,SAAR,CAAoBF,UAApB,CACAH,QAAUA,QAAQM,SAAlB,CAEAxH,KAAOd,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4ByH,QAAQO,UAApC,CAAP,CACAzH,KAAKL,OAAL,CAAa,aAAO,CAClB,GAAIC,IAAIoB,QAAJ,GAAiB,CAArB,CAAwB,CACtBjB,IAAIG,IAAJ,CAASN,GAAT,EACD,CAFD,IAEO,IAAIA,IAAIoB,QAAJ,GAAiB,CAAjB,EAAsBpB,IAAI8H,SAAJ,CAActE,IAAd,GAAqBpE,MAArB,GAAgC,CAA1D,CAA6D,CAClEe,IAAIG,IAAJ,CAASN,GAAT,EACD,CACF,CAND,EAQD,CAjBD,IAiBO,CACLsH,QAAQK,SAAR,CAAoBF,UAApB,CACAH,QAAUA,QAAQM,SAAlB,CACAzH,IAAIG,IAAJ,CAASgH,OAAT,EACD,CAED,MAAOnH,IAAP,CACD,CAlEM,CAoEP;;;OAIA4H,QAAS,iBAACC,GAAD,CAAMnH,QAAN,CAAgBb,GAAhB,CAAwB,CAC/B,GAAIiI,SAAU,SAAd,CACA,GAAMC,cAAe,QAAfA,aAAe,CAASC,MAAT,CAAiB,CACpC,GAAIC,aAAc1I,SAAS0D,oBAAT,CAA8B,QAA9B,EAAwC,CAAxC,CAAlB,CACAgF,YAAY5G,UAAZ,CAAuB6G,YAAvB,CAAoCF,MAApC,CAA4CC,WAA5C,EACD,CAHD,CAIA,GAAID,QAASzI,SAAS6H,aAAT,CAAuB,QAAvB,CAAb,CACA,GAAIe,MAAO,KAAX,CACA,GAAItE,KAAM3D,SAAV,CACA,GAAIkI,YAAalI,SAAjB,CACA,GAAMmI,aAAc,QAAdA,YAAc,EAAW,CAC7BxE,IAAM,GAAIyE,MAAJ,CAAUT,KAAO,OAAjB,CAAN,CACAO,aACD,CAHD,CAIA,GAAMG,WAAY,QAAZA,UAAY,CAAStD,EAAT,CAAa,CAC7B,MAAO,WAAW,CAChB;;aAGA,GAAIkD,IAAJ,CAAU,CACR,OACD,CACDA,KAAO,IAAP,CACAlD,KACA,GAAIvE,QAAJ,CAAc,CACZA,SAASE,IAAT,CAAcf,GAAd,CAAmBgE,GAAnB,EACD,CACF,CAZD,CAaD,CAdD,CAgBAuE,WAAaG,UAAU,UAAW,CAChCP,OAAOQ,MAAP,CAAgBR,OAAOF,OAAP,EAAkB,IAAlC,CACD,CAFY,CAAb,CAIAE,OAAOF,OAAP,EAAkBO,WAAlB,CACAL,OAAOQ,MAAP,CAAgBJ,UAAhB,CACAJ,OAAOS,KAAP,CAAe,IAAf,CACAT,OAAOrC,OAAP,CAAiB,OAAjB,CACAqC,OAAOH,GAAP,CAAaA,GAAb,CACAE,aAAaC,MAAb,EACD,CAhHM,CAkHPU,MAAO,4BAAgB,CACrB,MAAO,IAAIC,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CAC5CC,WAAWF,OAAX,CAAoBG,YAApB,EACD,CAFM,CAAP,CAGD,CAtHM,CAwHPC,KAAM,cAACjH,GAAD,CAAMrB,QAAN,CAAmB,CACvB,GAAIC,OAAQT,SAAZ,CACA,GAAI+I,KAAM/I,SAAV,CACA,GAAIb,GAAI,CAAR,CACA,GAAIJ,QAASiB,SAAb,CAEA,GAAIf,MAAMC,OAAN,CAAc2C,GAAd,CAAJ,CAAwB,CACtB9C,OAAS8C,IAAI9C,MAAb,CACA,KAAOI,EAAIJ,MAAX,CAAmBI,GAAnB,CAAwB,CACtBsB,MAAQD,SAASE,IAAT,CAAcmB,IAAI1C,CAAJ,CAAd,CAAsBA,CAAtB,CAAyB0C,IAAI1C,CAAJ,CAAzB,CAAR,CACA,GAAIsB,QAAU,KAAd,CAAqB,CACnB,MACD,CACF,CACD,MAAOoB,IAAP,CACD,CATD,IASO,IAAIA,IAAI7C,UAAJ,EAAkB6C,IAAI7C,UAAJ,GAAmB,UAAzC,CAAqD,CAC1D6C,IAAInC,OAAJ,CAAY,SAACsJ,IAAD,CAAOpJ,GAAP,QAAeY,UAASE,IAAT,CAAcsI,IAAd,CAAoBpJ,GAApB,CAAyBoJ,IAAzB,CAAf,EAAZ,EACA,MAAOnH,IAAP,CACD,CAHM,IAGA,IAAIxB,EAAEY,IAAF,CAAOY,GAAP,IAAgB,QAAhB,EAA4BkC,OAAOC,IAAP,CAAYnC,GAAZ,EAAiB9C,MAAjD,CAAyD,CAC9D,IAAKgK,GAAL,GAAYlH,IAAZ,CAAiB,CACf,GAAIrB,SAASE,IAAT,CAAcmB,IAAIkH,GAAJ,CAAd,CAAwBA,GAAxB,CAA6BlH,IAAIkH,GAAJ,CAA7B,IAA2C,KAA/C,CAAsD,MAAOlH,IAAP,CACvD,CACF,CACF,CA/IM,CAiJP;;OAGAoH,OAAQ,sBAAS,CACf,GAAI,CAACnK,KAAD,EAAU,CAACG,MAAMC,OAAN,CAAcJ,KAAd,CAAf,CAAqC,OACrC,GAAMM,KAAMN,MAAMC,MAAlB,CACA,GAAI8C,KAAM,EAAV,CACA,GAAI/B,KAAM,EAAV,CACA,IAAK,GAAIX,GAAI,CAAb,CAAgBA,EAAIC,GAApB,CAAyBD,GAAzB,CAA8B,CAC5B,GAAM2C,WAAYC,KAAKC,SAAL,CAAelD,MAAMK,CAAN,CAAf,CAAlB,CACA,GAAM8C,gBAAiBnD,MAAMK,CAAN,CAAvB,CACA,GAAI0C,IAAIC,SAAJ,IAAmB9B,SAAvB,CAAkC,CAChCF,IAAIG,IAAJ,CAASgC,cAAT,EACAJ,IAAIC,SAAJ,EAAiB,CAAjB,CACD,CAHD,IAGO,CACLD,IAAIC,SAAJ,IACD,CACF,CACD,MAAOhC,IAAP,CACD,CApKM,CAsKP;;OAGAgG,QAAS,iBAACoD,UAAD,CAAaC,aAAb,CAA+B,CACtC,GAAI,CAACD,UAAD,EAAe,CAACC,aAApB,CAAmC,OACnC,GAAIC,OAAQpJ,SAAZ,CACA,GAAIqJ,QAASrJ,SAAb,CACA,GAAI,MAAOkJ,WAAP,GAAsB,QAA1B,CAAoC,CAClCE,MAAQ/I,EAAE6I,UAAF,EAAc,CAAd,CAAR,CACD,CAFD,IAEO,IAAIA,WAAWlK,UAAX,EAAyBkK,WAAWlK,UAAX,GAA0B,UAAvD,CAAmE,CACxEoK,MAAQF,WAAW,CAAX,CAAR,CACD,CAFM,IAEA,IAAIA,WAAWnI,QAAX,GAAwB,CAA5B,CAA+B,CACpCqI,MAAQF,UAAR,CACD,CACD,GAAI,MAAOC,cAAP,GAAyB,QAA7B,CAAuC,CACrCE,OAAShJ,EAAE8I,aAAF,EAAiB,CAAjB,CAAT,CACD,CAFD,IAEO,IAAIA,cAAcnK,UAAd,EAA4BmK,cAAcnK,UAAd,GAA6B,UAA7D,CAAyE,CAC9EqK,OAASF,cAAc,CAAd,CAAT,CACD,CAFM,IAEA,IAAIA,cAAcpI,QAAd,GAA2B,CAA/B,CAAkC,CACvCsI,OAASF,aAAT,CACD,CACD;;SAGA9I,EAAEgJ,MAAF,EAAUC,GAAV,GACAD,OAAOlI,UAAP,CAAkBoI,YAAlB,CAA+BH,KAA/B,CAAsCC,MAAtC,EACD,CAhMM,CAkMP;;OAGAG,cAAe,kCAAQzF,QAAOC,IAAP,CAAYnC,GAAZ,EAAiB9C,MAAjB,GAA4B,CAApC,EArMR,CAuMP0K,UAAW,iCAAW,OAAOC,OAAP,GAAkB,QAAlB,EAA8BA,OAAS,CAAT,GAAe,CAAxD,EAvMJ,CAyMPC,QAAS,+BAAW,OAAOD,OAAP,GAAkB,QAAlB,EAA8BA,OAAS,CAAT,GAAe,CAAxD,EAzMF,CA2MPE,OAAQ,6BAASC,oBAAmBpJ,KAAnB,CAAT,EA3MD,CA6MP;;OAGAqJ,WAAY,yBAAQ,CAClB,GAAMC,eAAgB,CACpB,IAAK,OADe,CAEpB,IAAK,MAFe,CAGpB,IAAK,MAHe,CAIpB,IAAK,KAJe,CAKpB,IAAK,KALe,CAAtB,CAOA,GAAIC,KAAMjI,KAAKC,SAAL,CAAe9B,IAAf,CAAV,CAEA,GAAM+J,YAAa,QAAbA,WAAa,CAAC5C,GAAD,QAAS0C,eAAc1C,GAAd,GAAsBA,GAA/B,EAAnB,CAEA,GAAM6C,mBAAoB,QAApBA,kBAAoB,CAACF,GAAD,QAASA,KAAIlE,OAAJ,CAAY,YAAZ,CAA0BmE,UAA1B,CAAT,EAA1B,CAEAD,IAAME,kBAAkBF,GAAlB,CAAN,CACA,MAAOjI,MAAKoI,KAAL,CAAWH,GAAX,CAAP,CACD,CAhOM,CAkOP;;OAGA7J,OAAQ,iBAAa,gCAATtB,IAAS,8CAATA,IAAS,4BACnB,GAAII,MAAMC,OAAN,CAAcL,IAAd,CAAJ,CAAyB,CACvB,GAAII,MAAMC,OAAN,CAAcL,KAAK,CAAL,CAAd,CAAJ,CAA4B,CAC1B,MAAOA,MAAK,CAAL,EAAQuL,IAAR,CAAa,EAAb,CAAP,CACD,CAFD,IAEO,CACL,MAAOvL,MAAKuL,IAAL,CAAU,EAAV,CAAP,CACD,CACF,CAND,IAMO,CACL,MAAOnL,OAAMK,SAAN,CAAgBC,KAAhB,CAAsBV,IAAtB,EAA4BuL,IAA5B,CAAiC,EAAjC,CAAP,CACD,CACDnL,MAAMC,OAAN,CAAcL,IAAd,EAAsBA,KAAK,CAAL,EAAQgE,KAAR,CAAc,EAAd,CAAtB,CAA0C5D,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBV,IAAtB,EAA4BuL,IAA5B,CAAiC,EAAjC,CAA1C,CACD,CAhPM,CAkPP;;OAGAC,MAAO,eAACC,SAAD,CAAYC,SAAZ,CAA0B,CAC/B,IAAK,GAAIxB,IAAT,GAAgBuB,UAAhB,CAA2B,CACzB,2CACA,GAAI,EAAEvB,MAAOwB,UAAT,CAAJ,CAAyB,CACrBA,UAAUxB,GAAV,EAAiBuB,UAAUvB,GAAV,CAAjB,CACH,CACF,CACD,MAAOwB,UAAP,CACD,CA7PM,CA+PP;;OAGAC,QAAS,iBAACC,MAAD,CAASC,MAAT,CAAoB,CAE3B,QAASC,sBAAT,CAA+BF,MAA/B,CAAuCC,MAAvC,CAA+C,CAC7C;;WAGA,MAAOD,QAAOjJ,QAAP,KAAsBkJ,OAAOlJ,QAAP,EAA7B,CACD,CAED,QAASoJ,cAAT,CAAuBH,MAAvB,CAA+BC,MAA/B,CAAuC,CACrC,GAAMtL,KAAMqL,OAAO1L,MAAnB,CACA,GAAIK,KAAOsL,OAAO3L,MAAlB,CAA0B,CACxB,MAAO,MAAP,CACD,CACD,GAAI8L,OAAQ,IAAZ,CACA,IAAK,GAAI1L,GAAI,CAAb,CAAgBA,EAAIC,GAApB,CAAyBD,GAAzB,CAA8B,CAC5B,GAAI,CAACkB,EAAEmK,OAAF,CAAUC,OAAOtL,CAAP,CAAV,CAAqBuL,OAAOvL,CAAP,CAArB,CAAL,CAAsC,CACpC0L,MAAQ,KAAR,CACA,MACD,CACF,CACD,MAAOA,MAAP,CACD,CAED,QAASC,eAAT,CAAwBL,MAAxB,CAAgCC,MAAhC,CAAwC,CACtC,GAAMK,OAAQhH,OAAOC,IAAP,CAAYyG,MAAZ,EAAoBO,IAApB,EAAd,CACA,GAAMC,OAAQlH,OAAOC,IAAP,CAAY0G,MAAZ,EAAoBM,IAApB,EAAd,CACA,GAAM5L,KAAM2L,MAAMhM,MAAlB,CACA,GAAIK,KAAO6L,MAAMlM,MAAjB,CAAyB,CACvB,MAAO,MAAP,CACD,CACD,IAAK,GAAII,GAAI,CAAb,CAAgBA,EAAIC,GAApB,CAAyBD,GAAzB,CAA8B,CAC5B,GAAI+L,MAAOH,MAAM5L,CAAN,CAAX,CACA,GAAIgM,MAAOF,MAAM9L,CAAN,CAAX,CACA,GAAI,EAAG+L,MAAQC,IAAT,EAAmB9K,EAAEmK,OAAF,CAAUC,OAAOS,IAAP,CAAV,CAAwBR,OAAOS,IAAP,CAAxB,CAArB,CAAJ,CAAkE,CAChE,MAAO,MAAP,CACD,CACF,CACD,MAAO,KAAP,CACD,CACD,GAAIV,SAAWC,MAAf,CAAuB,CACrB,MAAO,KAAP,CACD,CACD,GAAI,OAAOD,OAAP,mCAAOA,MAAP,WAAwBC,OAAxB,mCAAwBA,MAAxB,EAAJ,CAAoC,CAClC,MAAO,MAAP,CACD,CACD,GAAID,SAAW1G,OAAO0G,MAAP,CAAf,CAA+B,CAC7B;;WAGA,MAAO,MAAP,CACD,CACD,GAAI,CAACA,MAAL,CAAa,CACX,MAAO,MAAP,CACD,CACD,GAAIxL,MAAMC,OAAN,CAAcuL,MAAd,CAAJ,CAA2B,CACzB,MAAOG,eAAcH,MAAd,CAAsBC,MAAtB,CAAP,CACD,CACD,GAAK,EAAD,CAAKlJ,QAAL,CAAcd,IAAd,CAAmB+J,MAAnB,GAA8B,iBAAlC,CAAqD,CACnD,MAAOK,gBAAeL,MAAf,CAAuBC,MAAvB,CAAP,CACD,CAFD,IAEO,CACL,MAAOC,uBAAsBF,MAAtB,CAA8BC,MAA9B,CAAP,CACD,CACF,CAjUM,CAmUP;;;OAIAU,SAAU,kBAAClL,IAAD,CAAOmL,aAAP,CAAyB,CACjC,GAAIvL,KAAM,EAAV,CACA,GAAIwL,OAAQ3F,KAAKC,KAAL,CAAW1F,KAAKnB,MAAL,CAAcsM,aAAzB,CAAZ,CACA,GAAInL,KAAKnB,MAAL,CAAcuM,KAAlB,CAAyBA,QACzB,GAAIvL,MAAO,CAAX,CACA,IAAK,GAAIZ,GAAI,CAAb,CAAgBA,EAAImM,KAApB,CAA2BnM,GAA3B,CAAgC,CAC9B,GAAIY,OAASG,KAAKnB,MAAlB,CAA0B,MAC1B,GAAMwM,OAAQrL,KAAKX,KAAL,CAAWQ,IAAX,CAAiBsL,cAAgBtL,IAAjC,CAAd,CACAD,IAAIG,IAAJ,CAASsL,KAAT,EACAxL,MAAQsL,aAAR,CACD,CACD,MAAOvL,IAAP,CACD,CAnVM,CAqVP;;OAGA0L,QAAS,uBAAS,CAChB,GAAMC,MAAOxM,MAAMK,SAAN,CAAgBa,MAAhB,CAAuBrB,KAAvB,CAAb,CACA,IAAK,GAAIK,GAAI,CAAb,CAAgBA,EAAIsM,KAAK1M,MAAzB,CAAiCI,GAAjC,CAAsC,CACpC,GAAIF,MAAMC,OAAN,CAAcuM,KAAKtM,CAAL,CAAd,CAAJ,CAA4B,CAC1BsM,KAAK9K,MAAL,aAAYxB,CAAZ,CAAe,CAAf,4BAAqBsM,KAAKtM,GAAL,CAArB,IACD,CACF,CACD,MAAOsM,KAAP,CACD,CAhWM,CAkWP;;;;OAKAC,SAAU,kBAACC,IAAD,CAAOC,IAAP,CAAaC,OAAb,CAAyB,CACjC,GAAIzJ,eAAJ,CAAavD,WAAb,CAAmB0F,aAAnB,CACA,GAAIuH,SAAU,IAAd,CACA,GAAIC,UAAW,CAAf,CACA,GAAI,CAACF,OAAL,CAAcA,QAAU,EAAV,CACd,GAAMG,OAAQ,QAARA,MAAQ,EAAW,CACvBD,SAAWF,QAAQI,OAAR,GAAoB,KAApB,CAA4B,CAA5B,CAAgC,GAAI3G,KAAJ,GAAW4G,OAAX,EAA3C,CACAJ,QAAU,IAAV,CACAvH,OAASoH,KAAKnM,KAAL,CAAW4C,OAAX,CAAoBvD,IAApB,CAAT,CACA,GAAI,CAACiN,OAAL,CAAc1J,QAAUvD,KAAO,IAAjB,CACf,CALD,CAMA,MAAO,WAAW,CAChB,GAAM0G,KAAM,GAAID,KAAJ,GAAW4G,OAAX,EAAZ,CACA,GAAI,CAACH,QAAD,EAAaF,QAAQI,OAAR,GAAoB,KAArC,CAA4CF,SAAWxG,GAAX,CAC5C,GAAI4G,WAAYP,MAAQrG,IAAMwG,QAAd,CAAhB,CACA3J,QAAU,IAAV,CACAvD,KAAOY,SAAP,CACA,GAAI0M,WAAa,CAAb,EAAkBA,UAAYP,IAAlC,CAAwC,CACtC,GAAIE,OAAJ,CAAa,CACXM,aAAaN,OAAb,EACAA,QAAU,IAAV,CACD,CACDC,SAAWxG,GAAX,CACAhB,OAASoH,KAAKnM,KAAL,CAAW4C,OAAX,CAAoBvD,IAApB,CAAT,CACA,GAAI,CAACiN,OAAL,CAAc1J,QAAUvD,KAAO,IAAjB,CACf,CARD,IAQO,IAAI,CAACiN,OAAD,EAAYD,QAAQQ,QAAR,GAAqB,KAArC,CAA4C,CACjDP,QAAUlD,WAAWoD,KAAX,CAAkBG,SAAlB,CAAV,CACD,CACD,MAAO5H,OAAP,CACD,CAlBD,CAmBD,CArYM,CAuYP;;;;OAKA+H,SAAU,kBAACX,IAAD,CAAOC,IAAP,CAAaW,SAAb,CAA2B,CACnC,GAAIT,eAAJ,CAAajN,WAAb,CAAmBuD,cAAnB,CAA4BoK,gBAA5B,CAAuCjI,aAAvC,CAEA,GAAMyH,OAAQ,QAARA,MAAQ,EAAW,CACvB,GAAMS,MAAO,GAAInH,KAAJ,GAAW4G,OAAX,GAAuBM,SAApC,CAEA,GAAIC,KAAOb,IAAP,EAAea,MAAQ,CAA3B,CAA8B,CAC5BX,QAAUlD,WAAWoD,KAAX,CAAkBJ,KAAOa,IAAzB,CAAV,CACD,CAFD,IAEO,CACLX,QAAU,IAAV,CACA,GAAI,CAACS,SAAL,CAAgB,CACdhI,OAASoH,KAAKnM,KAAL,CAAW4C,OAAX,CAAoBvD,IAApB,CAAT,CACA,GAAI,CAACiN,OAAL,CAAc1J,QAAUvD,KAAO,IAAjB,CACf,CACF,CACF,CAZD,CAcA,MAAO,WAAW,CAChBuD,QAAU,IAAV,CACAvD,KAAOY,SAAP,CACA+M,UAAY,GAAIlH,KAAJ,GAAW4G,OAAX,EAAZ,CACA,GAAMQ,SAAUH,WAAa,CAACT,OAA9B,CACA,GAAI,CAACA,OAAL,CAAcA,QAAUlD,WAAWoD,KAAX,CAAkBJ,IAAlB,CAAV,CACd,GAAIc,OAAJ,CAAa,CACXnI,OAASoH,KAAKnM,KAAL,CAAW4C,OAAX,CAAoBvD,IAApB,CAAT,CACAuD,QAAUvD,KAAO,IAAjB,CACD,CAED,MAAO0F,OAAP,CACD,CAZD,CAaD,CA1aM,CA4aP;;OAGAoI,KAAM,mBAAQ,CACZ,GAAIC,OAAQ,CAAZ,CACA,GAAIC,YAAJ,CACA,MAAO,WAAW,CAChB,GAAI,EAAED,KAAF,CAAU,CAAd,CAAiB,CACf,GAAIvM,EAAEY,IAAF,CAAO0K,IAAP,IAAiB,UAArB,CAAiC,CAC/BkB,KAAOlB,KAAKnM,KAAL,CAAW,IAAX,CAAiBC,SAAjB,CAAP,CACD,CACF,CACD,GAAImN,OAAS,CAAb,CAAgBjB,KAAO,IAAP,CAChB,MAAOkB,KAAP,CACD,CARD,CASD,CA3bM,CA6bP;;;OAKAC,OAAQ,gBAACF,KAAD,CAAQjB,IAAR,CAAiB,CACvB,GAAIkB,YAAJ,CACA,MAAO,WAAW,CAChB,GAAI,EAAED,KAAF,CAAU,CAAd,CAAiB,CACf,GAAIvM,EAAEY,IAAF,CAAO0K,IAAP,IAAiB,UAArB,CAAiC,CAC/BkB,KAAOlB,KAAKnM,KAAL,CAAW,IAAX,CAAiBC,SAAjB,CAAP,CACD,CACF,CACD,GAAImN,OAAS,CAAb,CAAgBjB,KAAO,IAAP,CAChB,MAAOkB,KAAP,CACD,CARD,CASD,CA7cM,CA+cP;;;OAKAE,MAAO,eAACH,KAAD,CAAQjB,IAAR,CAAiB,CACtB,MAAO,WAAW,CAChB,GAAI,EAAEiB,KAAF,CAAU,CAAd,CAAiB,CACf,MAAOjB,MAAKnM,KAAL,CAAW,IAAX,CAAiBC,SAAjB,CAAP,CACD,CACF,CAJD,CAKD,CA1dM,CAAT,EAgeA;;KAGA,GAAMuN,QAAS,EAAf,CACA,GAAMC,SAAUD,OAAO/I,cAAvB,CACA5D,EAAEoE,MAAF,CAAS,CACP;;OAGAyI,GAAI,YAACC,KAAD,CAAQC,OAAR,CAAoB,CACtB;;SAGA,GAAI,CAACH,QAAQvM,IAAR,CAAasM,MAAb,CAAqBG,KAArB,CAAL,CAAkCH,OAAOG,KAAP,EAAgB,EAAhB,CAElC;;SAGA,GAAItN,OAAQmN,OAAOG,KAAP,EAAclN,IAAd,CAAmBmN,OAAnB,EAA6B,CAAzC,CAEA;;SAGA,MAAO,CACL9D,IAAK,qBAAM,OAAO0D,QAAOG,KAAP,EAActN,KAAd,CAAb,EADA,CAGL;;WAGAwN,IAAK,aAACnN,IAAD,CAAU,CACb,GAAI8M,OAAOG,KAAP,CAAJ,CAAmBH,OAAOG,KAAP,EAActN,KAAd,EAAqBK,IAArB,EACpB,CARI,CAULoN,SAAU,0BAAMH,MAAN,EAVL,CAAP,CAYD,CA9BM,CAgCP;;OAGAI,KAAM,cAACJ,KAAD,CAAQK,OAAR,CAAoB,CACxB,GAAI,CAACP,QAAQvM,IAAR,CAAasM,MAAb,CAAqBG,KAArB,CAAL,CAAkC,OAElC;;SAGAH,OAAOG,KAAP,EAAczN,OAAd,CAAsB,cAAQ,CAC5BsJ,KAAKwE,SAAWxN,SAAX,CAAuBwN,OAAvB,CAAiC,EAAtC,EACD,CAFD,EAGD,CA5CM,CA8CP;;OAGAC,UAAW,2BAAMT,OAAN,EAjDJ,CAmDP;;OAGAU,YAAa,kCAAS,OAAOV,QAAOG,KAAP,CAAhB,EAtDN,CAwDPQ,WAAY,KAxDL,CA0DP;;OAGAC,qBAAsB,KA7Df,CAAT,EAiEA;;KAGAvN,EAAE0E,EAAF,CAAKN,MAAL,CAAY,CAEVlB,IAFU,eAELpB,QAFK,CAEKC,OAFL,CAEc,CACtB,GAAItC,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAI,CAAC,KAAKE,KAAL,CAAWC,MAAhB,CACE,MAAOe,IAAP,CACF,GAAIsC,OAAJ,CAAa,CACX/B,EAAE+B,OAAF,EAAW1C,OAAX,CAAmB,UAAM,CACvBT,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4B4C,QAAQkB,gBAAR,CAAyBnB,QAAzB,CAA5B,EAAgEzC,OAAhE,CAAwE,cAAO,CAC7E,MAAOI,KAAIG,IAAJ,CAASa,IAAT,CAAP,CACD,CAFD,EAGD,CAJD,EAKD,CAND,IAMO,CACL,KAAKpB,OAAL,CAAa,aAAO,CAClB,GAAIC,KAAOA,IAAIkO,QAAX,EAAuBlO,IAAIkO,QAAJ,CAAa9O,MAAxC,CAAgD,CAC9CE,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4BG,IAAI2D,gBAAJ,CAAqBnB,QAArB,CAA5B,EAA4DzC,OAA5D,CAAoE,cAAQ,CAC1E,MAAOI,KAAIG,IAAJ,CAASa,IAAT,CAAP,CACD,CAFD,EAGD,CACF,CAND,EAOD,CACD,MAAOhB,IAAP,CACD,CAtBS,CAwBVgO,EAxBU,aAwBPC,GAxBO,CAwBF,iBACN,GAAIjO,KAAM,KAAV,CACA,GAAI,CAAC,KAAKhB,KAAL,CAAWC,MAAZ,EAAsB,CAACgP,GAA3B,CAAgC,OAChC,GAAI,CAAC,KAAKjP,KAAL,CAAWC,MAAhB,CAAwB,OACxB,GAAMiP,MAAO,IAAb,CACA,GAAMC,MAAO,QAAPA,KAAO,CAACnN,IAAD,CAAOiN,GAAP,CAAe,CAC1B,GAAI,MAAOA,IAAP,GAAe,QAAnB,CAA6B,CAC3B,GAAIG,OAAQlO,SAAZ,CACA,GAAIc,KAAKK,UAAT,CAAqB+M,MAAQpN,KAAKK,UAAL,CAAgBmC,gBAAhB,CAAiCyK,GAAjC,CAAR,CACrB,GAAIrL,UAAW1C,SAAf,CACA,GAAIkO,OAASA,MAAMnP,MAAnB,CAA2B,CACzB2D,SAAWzD,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4BsB,KAAKK,UAAL,CAAgBmC,gBAAhB,CAAiCyK,GAAjC,CAA5B,CAAX,CACD,CACD,GAAIrL,UAAYA,SAAS3D,MAAzB,CAAiC,CAC/B,GAAI2D,SAAS1B,OAAT,CAAiBF,IAAjB,GAA0B,CAA9B,CAAiC,CAC/BhB,IAAM,IAAN,CACD,CACF,CACF,CAZD,IAYO,IAAI,MAAOiO,IAAP,GAAe,UAAnB,CAA+B,CACpC,GAAIA,IAAIrN,IAAJ,CAASsN,IAAT,CAAJ,CAAoB,CAClBlO,IAAM,IAAN,CACD,CACF,CAJM,IAIA,IAAIiO,KAAOA,IAAI/O,UAAX,EAAyB+O,IAAI/O,UAAJ,GAAmB,UAAhD,CAA4D,CACjE,GAAI8B,OAASiN,IAAI,CAAJ,CAAb,CAAqB,CACnBjO,IAAM,IAAN,CACD,CACF,CAJM,IAIA,IAAIiO,KAAOA,IAAIhP,MAAf,CAAuB,CAC5B,GAAI,OAAKQ,KAAL,CAAWC,KAAX,CAAiBuO,GAAjB,EAAsB/M,OAAtB,CAA8BF,IAA9B,IAAwC,CAAC,CAA7C,CAAgD,CAC9ChB,IAAM,IAAN,CACD,CACF,CAJM,IAIA,IAAIiO,IAAIhN,QAAJ,GAAiB,CAArB,CAAwB,CAC7B,GAAID,OAASiN,GAAb,CAAkB,CAChBjO,IAAM,IAAN,CACD,CACF,CAJM,IAIA,CACL,OACD,CACD,MAAOA,IAAP,CACD,CAjCD,CAkCA,KAAKJ,OAAL,CAAa,cAAQ,CACnB,GAAIuO,KAAKjF,IAAL,CAAW+E,GAAX,CAAJ,CAAqB,CACnBjO,IAAM,IAAN,CACD,CACF,CAJD,EAKA,MAAOA,IAAP,CACD,CArES,CAuEVqO,GAvEU,cAuENJ,GAvEM,CAuED,CACP,GAAIjO,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAI,CAAC,KAAKE,KAAL,CAAWC,MAAZ,EAAsB,CAACgP,GAA3B,CAAgC,MAAO,IAAInP,SAAJ,EAAP,CAChC,GAAI,CAAC,KAAKE,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAMoP,MAAO,IAAb,CACA,GAAMI,QAAS,QAATA,OAAS,CAACtN,IAAD,CAAOiN,GAAP,CAAe,CAC5B,GAAIxJ,QAAS,EAAb,CACA,GAAI,MAAOwJ,IAAP,GAAe,QAAnB,CAA6B,CAC3B,GAAIG,OAAQlO,SAAZ,CACA,GAAIc,KAAKK,UAAT,CAAqB+M,MAAQpN,KAAKK,UAAL,CAAgBmC,gBAAhB,CAAiCyK,GAAjC,CAAR,CACrB,GAAIrL,UAAW1C,SAAf,CACA,GAAIkO,OAASA,MAAMnP,MAAnB,CAA2B,CACzB2D,SAAWzD,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4BsB,KAAKK,UAAL,CAAgBmC,gBAAhB,CAAiCyK,GAAjC,CAA5B,CAAX,CACD,CACD,GAAIrL,UAAYA,SAAS3D,MAAzB,CAAiC,CAC/B,GAAI2D,SAAS1B,OAAT,CAAiBF,IAAjB,GAA0B,CAAC,CAA/B,CAAkC,CAChCyD,OAAOtE,IAAP,CAAYa,IAAZ,EACD,CACF,CAJD,IAIO,CACLyD,OAAOtE,IAAP,CAAYa,IAAZ,EACD,CACF,CAdD,IAcO,IAAIiN,IAAIhN,QAAJ,GAAiB,CAArB,CAAwB,CAC7B,GAAID,OAASiN,GAAb,CAAkB,CAChBxJ,OAAOtE,IAAP,CAAYa,IAAZ,EACD,CACF,CAJM,IAIA,IAAI7B,MAAMC,OAAN,CAAc6O,GAAd,GAAsBA,IAAIhP,MAA9B,CAAsC,CAC3C,GAAIE,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4BuO,GAA5B,EAAiC/M,OAAjC,CAAyCF,IAAzC,IAAmD,CAAC,CAAxD,CAA2D,CACzDyD,OAAOtE,IAAP,CAAYa,IAAZ,EACD,CACF,CAJM,IAIA,IAAIiN,IAAI/O,UAAJ,EAAkB+O,IAAI/O,UAAJ,GAAmB,UAAzC,CAAqD,CAC1D,GAAI8B,OAASiN,IAAI,CAAJ,CAAb,CAAqB,CACnBxJ,OAAOtE,IAAP,CAAYa,IAAZ,EACD,CACF,CAJM,IAIA,IAAI,MAAOiN,IAAP,GAAe,UAAnB,CAA+B,CACpC,GAAIA,IAAIrN,IAAJ,CAASsN,IAAT,CAAJ,CAAoB,CAClBzJ,OAAOtE,IAAP,CAAYa,IAAZ,EACD,CACF,CAJM,IAIA,CACL,MAAO,IAAIlC,SAAJ,EAAP,CACD,CACD,MAAO2F,OAAP,CACD,CApCD,CAqCA,GAAIxE,MAAO,EAAX,CACA,KAAKL,OAAL,CAAa,cAAQ,CACnBK,KAAKE,IAAL,CAAUmO,OAAOpF,IAAP,CAAa+E,GAAb,CAAV,EACD,CAFD,EAIAhO,KAAOM,EAAEmL,OAAF,CAAUzL,IAAV,CAAP,CACAD,IAAIK,MAAJ,CAAWJ,IAAX,EACA,MAAOD,IAAP,CACD,CAzHS,CA2HVuO,GA3HU,cA2HNN,GA3HM,CA2HD,iBACP,GAAI,CAAC,KAAKjP,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAIkB,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAMyD,MAAO,IAAb,CACA,GAAMwL,UAAW,KAAKA,QAAL,EAAjB,CAEA,GAAMS,OAAQ,QAARA,MAAQ,CAACxN,IAAD,CAAOiN,GAAP,CAAe,CAC3B,GAAI,MAAOA,IAAP,GAAe,QAAnB,CAA6B,CAC3B,GAAIjN,KAAKM,aAAL,CAAmB2M,GAAnB,CAAJ,CAA6B,CAC3B,MAAO,KAAP,CACD,CACF,CAJD,IAIO,IAAIA,KAAOA,IAAIhN,QAAJ,GAAiB,CAA5B,CAA+B,CACpC,GAAI9B,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4B6C,KAAKwL,QAAjC,EAA2C7M,OAA3C,CAAmD+M,GAAnD,CAAJ,CAA6D,CAC3D,MAAO,KAAP,CACD,CACF,CAJM,IAIA,IAAIA,KAAOA,IAAI/O,UAAJ,GAAmB,UAA9B,CAA0C,CAC/C,GAAM6O,WAAW,OAAKA,QAAL,EAAjB,CACA,GAAIA,UAAS/O,KAAT,CAAekC,OAAf,CAAuB+M,IAAI,CAAJ,CAAvB,GAAkC,CAAC,CAAvC,CAA0C,CACxC,MAAO,KAAP,CACD,CACF,CACD,MAAO,MAAP,CACD,CAhBD,CAkBA,KAAKrO,OAAL,CAAa,iBAAW,CACtB,GAAI4O,MAAMrH,OAAN,CAAe8G,GAAf,CAAJ,CAAyB,CACvBjO,IAAIG,IAAJ,CAASgH,OAAT,EACD,CACF,CAJD,EAKA,MAAOnH,IAAP,CACD,CAzJS,CA2JVyO,IA3JU,eA2JLpM,QA3JK,CA2JK,CACb,GAAI,CAAC,KAAKrD,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAIkB,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAIiP,UAAW7N,SAAf,CACA,GAAIwO,iBAAkB,KAAK,CAAL,EAAQC,sBAA9B,CACA,GAAItM,UAAY,MAAOA,SAAP,GAAoB,QAApC,CAA8C,CAC5C0L,SAAW,KAAKa,QAAL,CAAcvM,QAAd,CAAX,CACA,GAAIwM,eAAgB,KAAKC,MAAL,GAAcf,QAAd,CAAuB1L,QAAvB,CAApB,CACAwM,cAAcjP,OAAd,CAAsB,SAASuH,OAAT,CAAkB,CACtC,GAAIA,UAAYuH,eAAhB,CAAiC,CAC/B1O,IAAIG,IAAJ,CAASgH,OAAT,EACD,CACF,CAJD,EAKD,CARD,IAQO,CACLnH,IAAIG,IAAJ,CAAS,KAAK,CAAL,EAAQwO,sBAAjB,EACD,CACD,MAAO3O,IAAP,CACD,CA5KS,CA8KV+O,OA9KU,kBA8KF1M,QA9KE,CA8KQ,CAChB,GAAI,CAAC,KAAKrD,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAIkB,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAIkQ,YAAa9O,SAAjB,CACA,GAAI+O,UAAW/O,SAAf,CACA,GAAMgP,QAAS,KAAK,CAAL,CAAf,CACA,GAAIC,QAAShQ,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4B,KAAK,CAAL,EAAQ2B,UAAR,CAAmB0M,QAA/C,CAAb,CACA,GAAIqB,KAAMD,OAAOjO,OAAP,CAAegO,MAAf,CAAV,CACA,GAAI7M,UAAY,MAAOA,SAAP,GAAoB,QAApC,CAA8C,CAC5C4M,SAAW,KAAKjQ,KAAL,CAAW,CAAX,EAAcqC,UAAzB,CACA2N,WAAazO,EAAE0O,QAAF,EAAYxL,IAAZ,CAAiBpB,QAAjB,CAAb,CACA2M,WAAWpP,OAAX,CAAmB,SAASwB,EAAT,CAAa,CAC9B,GAAG+N,OAAOjO,OAAP,CAAeE,EAAf,EAAqBgO,GAAxB,CAA6B,CAC3BpP,IAAIG,IAAJ,CAASiB,EAAT,EACD,CACF,CAJD,EAKD,CARD,IAQO,CACL+N,OAAOtO,MAAP,CAAcuO,GAAd,EACApP,IAAIK,MAAJ,CAAW8O,MAAX,EACD,CACD,MAAOnP,IAAP,CACD,CAnMS,CAqMVqP,IArMU,eAqMLhN,QArMK,CAqMK,CACb,GAAI,CAAC,KAAKrD,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAIkB,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAIiP,UAAW7N,SAAf,CACA,GAAIoP,aAAc,KAAK,CAAL,EAAQC,kBAA1B,CACA,GAAIlN,UAAY,MAAOA,SAAP,GAAoB,QAApC,CAA8C,CAC5C0L,SAAW,KAAKa,QAAL,CAAcvM,QAAd,CAAX,CACA0L,SAASnO,OAAT,CAAiB,iBAAW,CAC1B,GAAI0P,cAAgBnI,OAApB,CAA6B,CAC3BnH,IAAIG,IAAJ,CAASgH,OAAT,EACD,CACF,CAJD,EAKD,CAPD,IAOO,CACLnH,IAAIG,IAAJ,CAAS,KAAK,CAAL,EAAQoP,kBAAjB,EACD,CACD,MAAOvP,IAAP,CACD,CArNS,CAuNVwP,OAvNU,kBAuNFnN,QAvNE,CAuNQ,CAChB,GAAI,CAAC,KAAKrD,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAIkB,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAIkQ,YAAa9O,SAAjB,CACA,GAAI+O,UAAW/O,SAAf,CACA,GAAMgP,QAAS,KAAK,CAAL,CAAf,CACA,GAAIC,QAAShQ,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4B,KAAK,CAAL,EAAQ2B,UAAR,CAAmB0M,QAA/C,CAAb,CACA,GAAIqB,KAAMD,OAAOjO,OAAP,CAAegO,MAAf,CAAV,CACAC,OAAOtO,MAAP,CAAc,CAAd,CAAiBuO,IAAM,CAAvB,EACA,GAAI/M,UAAY,MAAOA,SAAP,GAAoB,QAApC,CAA8C,CAC5C4M,SAAW,KAAKjQ,KAAL,CAAW,CAAX,EAAcqC,UAAzB,CACA2N,WAAazO,EAAE0O,QAAF,EAAYxL,IAAZ,CAAiBpB,QAAjB,CAAb,CACA8M,OAAOtO,MAAP,CAAc,CAAd,CAAiBsO,OAAOjO,OAAP,CAAe,KAAKlC,KAAL,CAAW,CAAX,CAAf,CAAjB,EACAmQ,OAAOvP,OAAP,CAAe,iBAAW,CACxB,GAAIoP,WAAWhQ,KAAX,CAAiBkC,OAAjB,CAAyBiG,OAAzB,EAAoC,CAAC,CAAzC,CAA4C,CAC1CnH,IAAIG,IAAJ,CAASgH,OAAT,EACD,CACF,CAJD,EAKD,CATD,IASO,CACL6H,WAAa7P,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4B,KAAK,CAAL,EAAQ2B,UAAR,CAAmB0M,QAA/C,CAAb,CACAqB,IAAMJ,WAAW9N,OAAX,CAAmBgO,MAAnB,CAAN,CACAF,WAAWnO,MAAX,CAAkB,CAAlB,CAAqBuO,IAAM,CAA3B,EACApP,IAAIK,MAAJ,CAAW2O,UAAX,EACD,CACD,MAAOhP,IAAP,CACD,CAhPS,CAkPVyP,KAlPU,iBAkPF,CACN,GAAI,CAAC,KAAKzQ,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,MAAO,MAAK4Q,EAAL,CAAQ,CAAR,CAAP,CAED,CAtPS,CAwPV/C,IAxPU,gBAwPH,CACL,GAAI,CAAC,KAAK3N,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,MAAO,MAAK4Q,EAAL,CAAQ,CAAC,CAAT,CAAP,CACD,CA3PS,CA6PV3P,KA7PU,gBA6PJoH,OA7PI,CA6PK,CACb,GAAI,CAAC,KAAKnI,KAAL,CAAWC,MAAhB,CAAwB,MAAOiB,UAAP,CACxB,GAAI,CAACiH,OAAL,CAAc,CACZ,GAAI,KAAKlI,MAAL,EAAe,CAAnB,CAAsB,CACpB,MAAO,EAAP,CACD,CAFD,IAEO,IAAI,KAAKA,MAAL,EAAe,CAAnB,CAAsB,CAC3B,MAAO,CAAC,CAAR,CACD,CAFM,IAEA,CACL,MAAO,CAAC,CAAR,CACD,CACF,CARD,IAQO,CACL,GAAIkI,SAAWA,QAAQjI,UAAnB,EAAiCiI,QAAQjI,UAAR,GAAuB,UAA5D,CAAwE,CACtE,MAAO,MAAKgC,OAAL,CAAaiG,QAAQ3F,OAAR,GAAkB,CAAlB,CAAb,CAAP,CACD,CAFD,IAEO,IAAI2F,QAAQlG,QAAR,GAAqB,CAAzB,CAA4B,CACjC,MAAO,MAAKC,OAAL,CAAaiG,OAAb,CAAP,CACD,CAFM,IAEA,CACL,MAAO,MAAKjG,OAAL,CAAaiG,OAAb,CAAP,CACD,CACF,CACF,CAhRS,CAkRV4G,QAlRU,mBAkRD1L,QAlRC,CAkRS,CACjB,GAAI,CAAC,KAAKrD,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAIkB,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAI,CAACuD,QAAL,CAAe,CACb,KAAKzC,OAAL,CAAa,cAAQ,CACnBT,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4BsB,KAAK+M,QAAjC,EAA2CnO,OAA3C,CAAmD,oBAAOI,KAAIG,IAAJ,CAASN,GAAT,CAAP,EAAnD,EACD,CAFD,EAGAG,IAAI,CAAJ,EAASA,IAAIhB,KAAJ,CAAU,CAAV,CAAT,CACD,CALD,IAKO,CACL,KAAKY,OAAL,CAAa,cAAQ,CACnBT,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4BsB,KAAK+M,QAAjC,EAA2CnO,OAA3C,CAAmD,aAAO,CACxD,GAAIW,EAAEV,GAAF,EAAOmO,EAAP,CAAU3L,QAAV,CAAJ,CAAyB,CACvBrC,IAAIG,IAAJ,CAASN,GAAT,EACD,CACF,CAJD,EAKD,CAND,EAOAG,IAAI,CAAJ,EAASA,IAAIhB,KAAJ,CAAU,CAAV,CAAT,CACD,CACD,MAAOgB,IAAP,CACD,CArSS,CAuSV4O,QAvSU,mBAuSDvM,QAvSC,CAuSS,CACjB,GAAI,CAAC,KAAKrD,KAAL,CAAWC,MAAhB,CACE,MAAO,IAAIH,SAAJ,EAAP,CACF,GAAIkQ,YAAa9O,SAAjB,CACA,GAAIF,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAM6Q,OAAQ,IAAd,CACA,GAAIb,QAAS5O,SAAb,CACA,GAAI6N,UAAW5O,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4BiQ,MAAM,CAAN,EAAStO,UAAT,CAAoB0M,QAAhD,CAAf,CAEA;;SAGA,GAAI1L,UAAY,MAAOA,SAAP,GAAoB,QAApC,CAA8C,CAC5CyM,OAAS,KAAK9P,KAAL,CAAW,CAAX,EAAcqC,UAAvB,CACA2N,WAAazO,EAAEuO,MAAF,EAAUrL,IAAV,CAAepB,QAAf,CAAb,CACA,GAAMuN,QAASZ,WAAWhQ,KAAX,CAAiBkC,OAAjB,CAAyByO,MAAM,CAAN,CAAzB,CAAf,CACAX,WAAWhQ,KAAX,CAAiB6B,MAAjB,CAAwB+O,MAAxB,CAAgC,CAAhC,EACA5P,IAAIK,MAAJ,CAAW2O,UAAX,EACD,CAND,IAMO,CACL,GAAMI,KAAMrB,SAAS7M,OAAT,CAAiByO,MAAM,CAAN,CAAjB,CAAZ,CACA5B,SAASlN,MAAT,CAAgBuO,GAAhB,CAAqB,CAArB,EACApP,IAAIK,MAAJ,CAAW0N,QAAX,EACD,CACD,MAAO/N,IAAP,CACD,CA/TS,CAiUV8O,MAjUU,iBAiUHzM,QAjUG,CAiUO,CACf,GAAI,CAAC,KAAKrD,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAIkB,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAI+Q,SAAU3P,SAAd,CACA,GAAIqC,MAAO,KAAK,CAAL,CAAX,CACA,GAAIkC,QAAS,EAAb,CACA,GAAIpC,QAAJ,CAAc,CACZwN,QAAU1Q,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,CAA4B6C,KAAKlB,UAAL,CAAgBA,UAAhB,CAA2BmC,gBAA3B,CAA4CnB,QAA5C,CAA5B,CAAV,CACAwN,QAAQjQ,OAAR,CAAgB,SAASwB,EAAT,CAAa,CAC3B,GAAIA,KAAOmB,KAAKlB,UAAhB,CAA4B,CAC1BoD,OAAOtE,IAAP,CAAYiB,EAAZ,EACD,CACF,CAJD,EAKAqD,OAAO0E,MAAP,GACAnJ,IAAIK,MAAJ,CAAWoE,MAAX,EACD,CATD,IASO,CACL,KAAK7E,OAAL,CAAa,aAAO,CAClB,MAAOI,KAAIG,IAAJ,CAASN,IAAIwB,UAAb,CAAP,CACD,CAFD,EAGD,CACDrB,IAAImJ,MAAJ,GACA,GAAInJ,KAAOE,SAAX,CAAsB,CACpB,MAAO,IAAIpB,SAAJ,EAAP,CACD,CAFD,IAEO,CACL,MAAOkB,IAAP,CACD,CACF,CA3VS,CA6VV8P,OA7VU,kBA6VFzN,QA7VE,CA6VQ,CAChB,GAAI,CAAC,KAAKrD,KAAL,CAAWC,MAAhB,CACE,MAAO,IAAIH,SAAJ,EAAP,CACF,GAAIkB,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAI,MAAOuD,SAAP,GAAoB,WAAxB,CAAqC,CACnC,MAAO,IAAIvD,SAAJ,EAAP,CACD,CACD,GAAIiR,UAAW,IAAf,CACA,GAAInL,GAAI1E,SAAR,CACA,GAAI,KAAK,CAAL,CAAJ,CAAa,CACX0E,EAAI,KAAK,CAAL,EAAQvD,UAAZ,CACD,CACD,GAAI,CAACuD,CAAL,CAAQ,CACN,MAAO,IAAI9F,SAAJ,EAAP,CACD,CACD,GAAI,MAAOuD,SAAP,GAAoB,QAAxB,CAAkC,CAChCA,SAASgB,IAAT,GACA,GAAIuB,GAAKrE,EAAEqE,CAAF,EAAKoJ,EAAL,CAAQ3L,QAAR,CAAT,CAA4B,CAC1BrC,IAAIG,IAAJ,CAASyE,CAAT,EACD,CAFD,IAEO,CACL5E,IAAIG,IAAJ,CAASI,EAAEqE,CAAF,EAAKkL,OAAL,CAAazN,QAAb,EAAuBrD,KAAvB,CAA6B,CAA7B,CAAT,EACD,CACF,CACD,GAAIgB,IAAI,CAAJ,IAAWE,SAAf,CAA0B,CACxBF,IAAIa,MAAJ,CAAW,CAAX,EACD,CACD,MAAOb,IAAP,CACD,CAxXS,CA0XVgQ,GA1XU,cA0XNC,QA1XM,CA0XItP,KA1XJ,CA0XW,CACnB,GAAI,CAAC,KAAK3B,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAMoR,SAAU,yCAAhB,CACA,GAAIC,SAAU,EAAd,CACA,GAAInQ,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAMsR,qBAAsB,QAAtBA,oBAAsB,CAACzP,KAAD,CAAQsP,QAAR,CAAqB,CAC/C,GAAI1P,EAAEY,IAAF,CAAOR,KAAP,IAAkB,QAAlB,EAA8BsP,SAAStO,KAAT,CAAeuO,OAAf,CAAlC,CAA2D,CACzDC,QAAU,IAAV,CACD,CACF,CAJD,CAKA,GAAI,CAACF,QAAL,CAAe,MAAO,IAAInR,SAAJ,EAAP,CACf,GAAI,CAAC6B,KAAD,EAAUJ,EAAEY,IAAF,CAAO8O,QAAP,IAAqB,QAAnC,CAA6C,CAC3C,KAAKrQ,OAAL,CAAa,cAAQ,CACnB,IAAK,GAAIqJ,IAAT,GAAgBgH,SAAhB,CAA0B,CACxB,GAAIA,SAAS9L,cAAT,CAAwB8E,GAAxB,CAAJ,CAAkC,CAChCmH,oBAAoBH,SAAShH,GAAT,CAApB,CAAmCA,GAAnC,EACAjI,KAAKqP,KAAL,CAAW9P,EAAE+P,QAAF,CAAWrH,GAAX,CAAX,EAA8BgH,SAAShH,GAAT,EAAgBkH,OAA9C,CACD,CACF,CACDnQ,IAAIG,IAAJ,CAASa,IAAT,EACD,CARD,EASD,CAVD,IAUO,IAAI,CAACL,KAAD,EAAU,MAAOsP,SAAP,GAAoB,QAAlC,CAA4C,CACjD,GAAI,CAAC,KAAKjR,KAAL,CAAWC,MAAhB,CACE,OACF,MAAOM,UAASgR,WAAT,CAAqBC,gBAArB,CAAsC,KAAKd,EAAL,CAAQ,CAAR,EAAW1Q,KAAX,CAAiB,CAAjB,CAAtC,CAA2D,IAA3D,EAAiEyR,gBAAjE,CAAkFR,SAASS,WAAT,EAAlF,CAAP,CACD,CAJM,IAIA,IAAI,CAAC,CAAC/P,KAAN,CAAa,CAClB,KAAKf,OAAL,CAAa,cAAQ,CACnBwQ,oBAAoBzP,KAApB,CAA2BsP,QAA3B,EACAjP,KAAKqP,KAAL,CAAW9P,EAAE+P,QAAF,CAAWL,QAAX,CAAX,EAAmCtP,MAAQwP,OAA3C,CACAnQ,IAAIG,IAAJ,CAASa,IAAT,EACD,CAJD,EAKD,CACD,MAAOhB,IAAP,CACD,CA3ZS,CA6ZV2Q,KA7ZU,gBA6ZJC,MA7ZI,CA6ZI,CACZ,GAAI,CAAC,KAAK5R,KAAL,CAAWC,MAAhB,CAAwB,OACxB,GAAI2R,MAAJ,CAAY,CACV,GAAG,sFAAsFtN,IAAtF,CAA2FsN,MAA3F,CAAH,CAAuG,CACrG,KAAKhR,OAAL,CAAa,SAASuH,OAAT,CAAkB,CAC7BA,QAAQkJ,KAAR,CAAcM,KAAd,CAAsBC,MAAtB,CACD,CAFD,EAGD,CAJD,IAIO,CACL,KAAKhR,OAAL,CAAa,SAASuH,OAAT,CAAkB,CAC7BA,QAAQkJ,KAAR,CAAcM,KAAd,CAAsBC,OAAS,IAA/B,CACD,CAFD,EAGD,CACF,CAVD,IAUO,CACL,GAAMC,QAAS/M,OAAO0M,gBAAP,CAAwB,KAAK,CAAL,CAAxB,CAAf,CACA,MAAOM,UAASD,OAAOF,KAAhB,CAAuB,EAAvB,CAAP,CACD,CACF,CA7aS,CA+aVI,MA/aU,iBA+aHH,MA/aG,CA+aK,CACb,GAAI,CAAC,KAAK5R,KAAL,CAAWC,MAAhB,CAAwB,OACxB,GAAI2R,MAAJ,CAAY,CACV,GAAG,sFAAsFtN,IAAtF,CAA2FsN,MAA3F,CAAH,CAAuG,CACrG,KAAKhR,OAAL,CAAa,SAASuH,OAAT,CAAkB,CAC7BA,QAAQkJ,KAAR,CAAcU,MAAd,CAAuBH,MAAvB,CACD,CAFD,EAGD,CAJD,IAIO,CACL,KAAKhR,OAAL,CAAa,SAASuH,OAAT,CAAkB,CAC7BA,QAAQkJ,KAAR,CAAcU,MAAd,CAAuBH,OAAS,IAAhC,CACD,CAFD,EAGD,CACF,CAVD,IAUO,CACL,GAAMC,QAAS/M,OAAO0M,gBAAP,CAAwB,KAAK,CAAL,CAAxB,CAAf,CACA,MAAOM,UAASD,OAAOE,MAAhB,CAAwB,EAAxB,CAAP,CACD,CACF,CA/bS,CAicV/D,MAjcU,iBAicHgE,OAjcG,CAicM,iBACd,GAAI,CAAC,KAAKhS,KAAL,CAAWC,MAAhB,CAAwB,CACtB,MAAO,IAAIH,SAAJ,EAAP,CACD,CACD,GAAMmS,UAAW,QAAXA,SAAW,CAACjQ,IAAD,CAAOgQ,OAAP,CAAmB,CAClC,GAAI,MAAOA,QAAP,GAAmB,QAAnB,EAA+B,MAAOA,QAAP,GAAmB,QAAtD,CAAgE,CAC9DA,QAAUzQ,EAAEgD,IAAF,CAAOyN,OAAP,CAAV,CACD,CACD,GAAIA,SAAWA,QAAQ9R,UAAnB,EAAiC8R,QAAQ9R,UAAR,GAAuB,UAA5D,CAAwE,CACtE,GAAMI,KAAM0R,QAAQE,IAAR,EAAZ,CACA,GAAI7R,GAAI,CAAR,CACA,MAAOA,EAAIC,GAAX,CAAgB,CACd0B,KAAKK,UAAL,CAAgB6G,YAAhB,CAA6B8I,QAAQhS,KAAR,CAAcK,CAAd,CAA7B,CAA+C2B,IAA/C,EACA3B,IACD,CACF,CAPD,IAOO,IAAI2R,SAAWA,QAAQ/P,QAAR,GAAqB,CAApC,CAAuC,CAC5CD,KAAKK,UAAL,CAAgB6G,YAAhB,CAA6B8I,OAA7B,CAAsChQ,IAAtC,EACD,CACD,cACD,CAfD,CAgBA,KAAKpB,OAAL,CAAa,cAAQ,CACnB,MAAOqR,UAASjQ,IAAT,CAAegQ,OAAf,CAAP,CACD,CAFD,EAGA,MAAO,KAAP,CACD,CAzdS,CA2dV/D,KA3dU,gBA2dJ+D,OA3dI,CA2dK,iBACb,GAAI,CAAC,KAAKhS,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAMqS,SAAU,QAAVA,QAAU,CAACnQ,IAAD,CAAOgQ,OAAP,CAAmB,CACjC,GAAIlC,QAAS9N,KAAKK,UAAlB,CACA,GAAI,MAAO2P,QAAP,GAAmB,QAAnB,EAA+B,MAAOA,QAAP,GAAmB,QAAtD,CAAgE,CAC9DA,QAAUzQ,EAAEgD,IAAF,CAAOyN,OAAP,CAAV,CACD,CACD,GAAIA,SAAWA,QAAQ9R,UAAnB,EAAiC8R,QAAQ9R,UAAR,GAAuB,UAA5D,CAAwE,CACtE,GAAIG,GAAI,CAAR,CACEC,IAAM0R,QAAQE,IAAR,EADR,CAEA,MAAO7R,EAAIC,GAAX,CAAgB,CACd,GAAI0B,OAAS8N,OAAOrH,SAApB,CAA+B,CAC7BqH,OAAOsC,WAAP,CAAmBJ,QAAQhS,KAAR,CAAcK,CAAd,CAAnB,EACD,CAFD,IAEO,CACLyP,OAAO5G,YAAP,CAAoB8I,QAAQhS,KAAR,CAAcK,CAAd,CAApB,CAAsC2B,KAAKqQ,WAA3C,EACD,CACDhS,IACD,CACF,CAXD,IAWO,IAAI2R,SAAWA,QAAQ/P,QAAR,GAAqB,CAApC,CAAuC,CAC5C6N,OAAOsC,WAAP,CAAmBJ,OAAnB,EACD,CACD,cACD,CApBD,CAqBA,KAAKpR,OAAL,CAAa,cAAQ,CACnB,MAAOuR,SAAQnQ,IAAR,CAAcgQ,OAAd,CAAP,CACD,CAFD,EAGA,MAAO,KAAP,CACD,CAtfS,CAwfVM,OAxfU,kBAwfFN,OAxfE,CAwfO,CACf,GAAI,CAAC,KAAKhS,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CAExB,GAAI,MAAOkS,QAAP,GAAmB,QAAnB,EAA+B,MAAOA,QAAP,GAAmB,QAAtD,CAAgE,CAC9D,KAAKpR,OAAL,CAAa,iBAAW,CACtBuH,QAAQoK,kBAAR,CAA2B,YAA3B,CAAyCP,OAAzC,EACD,CAFD,EAGD,CAJD,IAIO,IAAIA,SAAWA,QAAQ9R,UAAnB,EAAiC8R,QAAQ9R,UAAR,GAAuB,UAA5D,CAAwE,CAC7E,KAAKU,OAAL,CAAa,iBAAW,CACtBoR,QAAQpR,OAAR,CAAgB,cAAQ,CACtBuH,QAAQe,YAAR,CAAqBlH,IAArB,CAA2BmG,QAAQqK,UAAnC,EACD,CAFD,EAGD,CAJD,EAKD,CANM,IAMA,IAAIR,SAAWA,QAAQ/P,QAAR,GAAqB,CAApC,CAAuC,CAC5C,KAAKrB,OAAL,CAAa,iBAAW,CACtBuH,QAAQe,YAAR,CAAqB8I,OAArB,CAA8B7J,QAAQqK,UAAtC,EACD,CAFD,EAGD,CACD,MAAO,KAAP,CACD,CA3gBS,CA6gBVC,MA7gBU,iBA6gBHT,OA7gBG,CA6gBM,CACd,GAAI,CAAC,KAAKhS,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CAExB,GAAI,MAAOkS,QAAP,GAAmB,QAAnB,EAA+B,MAAOA,QAAP,GAAmB,QAAtD,CAAgE,CAC9D,KAAKpR,OAAL,CAAa,iBAAW,CACtBuH,QAAQoK,kBAAR,CAA2B,WAA3B,CAAwCP,OAAxC,EACD,CAFD,EAGD,CAJD,IAIO,IAAIA,SAAWA,QAAQ9R,UAAnB,EAAiC8R,QAAQ9R,UAAR,GAAuB,UAA5D,CAAwE,CAC7E,KAAKU,OAAL,CAAa,iBAAW,CACtBoR,QAAQpR,OAAR,CAAgB,cAAQ,CACtBuH,QAAQe,YAAR,CAAqBlH,IAArB,CAA2B,IAA3B,EACD,CAFD,EAGD,CAJD,EAMD,CAPM,IAOA,IAAIgQ,SAAWA,QAAQ/P,QAAR,GAAqB,CAApC,CAAuC,CAC5C,KAAKrB,OAAL,CAAa,iBAAW,CACtBuH,QAAQe,YAAR,CAAqB8I,OAArB,CAA8B,IAA9B,EACD,CAFD,EAGD,CACD,MAAO,KAAP,CACD,CAjiBS,CAmiBVU,SAniBU,oBAmiBArP,QAniBA,CAmiBU,CAClB,GAAI,CAAC,KAAKrD,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,KAAK8C,OAAL,GACA,KAAKhC,OAAL,CAAa,cAAQ,CACnB,MAAOW,GAAE8B,QAAF,EAAYiP,OAAZ,CAAoBpI,IAApB,CAAP,CACD,CAFD,EAGA,MAAO,KAAP,CACD,CA1iBS,CA4iBVyI,QA5iBU,mBA4iBDtP,QA5iBC,CA4iBS,CACjB,GAAI,CAAC,KAAKrD,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,KAAKc,OAAL,CAAa,cAAQ,CACnB,MAAOW,GAAE8B,QAAF,EAAYoP,MAAZ,CAAmBvI,IAAnB,CAAP,CACD,CAFD,EAGA,MAAO,KAAP,CACD,CAljBS,CAojBV0I,KApjBU,gBAojBJjR,KApjBI,CAojBG,CACX,GAAI,CAAC,KAAK3B,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAIkB,KAAM,GAAIlB,SAAJ,EAAV,CACA,KAAKc,OAAL,CAAa,aAAO,CAClB,GAAIe,QAAU,IAAV,EAAkB,CAACA,KAAvB,CAA8B,CAC5BX,IAAIG,IAAJ,CAASN,IAAIgS,SAAJ,CAAc,IAAd,CAAT,EACD,CAFD,IAEO,CACL7R,IAAIG,IAAJ,CAASN,IAAIgS,SAAJ,CAAc,KAAd,CAAT,EACD,CACF,CAND,EAOA,MAAO7R,IAAP,CACD,CA/jBS,CAikBV8R,IAjkBU,eAikBLC,MAjkBK,CAikBG,CACX,GAAI,CAAC,KAAK/S,KAAL,CAAWC,MAAZ,EAAsB,CAAC8S,MAA3B,CAAmC,MAAO,IAAIjT,SAAJ,EAAP,CACnC,GAAIkT,UAAW9R,SAAf,CACA,GAAI+R,SAAU/R,SAAd,CACA,GAAIgS,YAAahS,SAAjB,CACA,KAAKN,OAAL,CAAa,aAAO,CAClBoS,SAAWzR,EAAEgD,IAAF,CAAOwO,MAAP,CAAX,CACAE,QAAUD,SAAShT,KAAT,CAAe,CAAf,CAAV,CACAkT,WAAa3R,EAAEV,GAAF,EAAO+R,KAAP,CAAa,IAAb,CAAb,CACAI,SAASP,MAAT,CAAgBS,UAAhB,EACA3R,EAAEV,GAAF,EAAOmN,MAAP,CAAcgF,QAAd,EACAzR,EAAEV,GAAF,EAAOsS,MAAP,GACD,CAPD,EAQD,CA9kBS,CAglBVC,MAhlBU,kBAglBD,CACP,GAAI,CAAC,KAAKpT,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAIuC,YAAa,IAAjB,CACA,KAAKzB,OAAL,CAAa,cAAQ,CACnB,GAAIoB,KAAKK,UAAL,GAAoBA,UAAxB,CAAoC,CAClC,OACD,CACDA,WAAaL,KAAKK,UAAlB,CACA,GAAIL,KAAKK,UAAL,CAAgBgR,QAAhB,GAA6B,MAAjC,CAAyC,CACvC,MAAO,MAAP,CACD,CACD9R,EAAEyF,OAAF,CAAUhF,IAAV,CAAgBA,KAAKK,UAArB,EACD,CATD,EAUD,CA7lBS,CA+lBViR,MA/lBU,kBA+lBD,CACP,GAAI,CAAC,KAAKtT,KAAL,CAAWC,MAAhB,CACE,OACF,GAAMqT,QAAS,KAAK,CAAL,EAAQC,qBAAR,EAAf,CACA,MAAO,CACLC,IAAK3M,KAAK4M,KAAL,CAAWH,OAAOE,GAAlB,CADA,CAELE,KAAM7M,KAAK4M,KAAL,CAAWH,OAAOI,IAAlB,CAFD,CAGLC,OAAQ9M,KAAK4M,KAAL,CAAWH,OAAOK,MAAlB,CAHH,CAILC,MAAO/M,KAAK4M,KAAL,CAAWH,OAAOM,KAAlB,CAJF,CAAP,CAMD,CAzmBS,CA2mBV7C,QA3mBU,oBA2mBC,CACT,GAAMjB,QAAS,KAAK,CAAL,EAAQzN,UAAvB,CACA,GAAM+N,KAAM,KAAK,CAAL,EAAQmD,qBAAR,EAAZ,CACA,GAAMM,WAAY/D,OAAOyD,qBAAP,EAAlB,CACA,GAAIxQ,KAAM,CACRyQ,IAAKpD,IAAIoD,GAAJ,CAAUK,UAAUL,GADjB,CAERE,KAAMtD,IAAIsD,IAAJ,CAAWG,UAAUH,IAFnB,CAAV,CAIA,MAAO3Q,IAAP,CACD,CApnBS,CAsnBV+Q,KAtnBU,iBAsnBF,CACN,GAAI,CAAC,KAAK9T,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAIkB,KAAM,GAAIlB,SAAJ,EAAV,CACA,KAAKc,OAAL,CAAa,aAAO,CAClBW,EAAEV,GAAF,EAAOkO,QAAP,GAAkBvE,GAAlB,GACA3J,IAAIkT,WAAJ,CAAkB,EAAlB,CACA/S,IAAIG,IAAJ,CAASN,GAAT,EACD,CAJD,EAKA,MAAOG,IAAP,CACD,CA/nBS,CAioBVuD,IAjoBU,eAioBLyN,OAjoBK,CAioBI,CACZ,GAAI,CAAC,KAAKhS,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAIkS,UAAY,EAAhB,CAAoB,CAClB,KAAKpR,OAAL,CAAa,cAAQ,CACnBoB,KAAKwG,SAAL,CAAiB,EAAjB,CACD,CAFD,EAGA,MAAO,KAAP,CACD,CALD,IAKO,IAAIwJ,OAAJ,CAAa,CAClB,KAAKpR,OAAL,CAAa,cAAQ,CACnBoB,KAAKwG,SAAL,CAAiBwJ,OAAjB,CACD,CAFD,EAGA,MAAO,KAAP,CACD,CALM,IAKA,IAAI,CAACA,OAAL,CAAc,CACnB,MAAO,MAAKhS,KAAL,CAAW,CAAX,EAAcwI,SAAd,CAAwBnE,IAAxB,EAAP,CACD,CACF,CAhpBS,CAkpBV2P,IAlpBU,eAkpBLjB,MAlpBK,CAkpBG,CACX,GAAI/R,KAAM,EAAV,CACA,GAAI,CAAC,KAAKhB,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAI,CAAC,CAACiT,MAAF,EAAYA,SAAW,CAA3B,CAA8B,CAC5B,KAAKnS,OAAL,CAAa,iBAAW,CACtBuH,QAAQ8L,SAAR,CAAoBlB,MAApB,CACD,CAFD,EAGA,MAAO,KAAP,CACD,CALD,IAKO,CACL,KAAKnS,OAAL,CAAa,iBAAW,CACtBI,KAAOmH,QAAQ8L,SAAf,CACAjT,IAAIqD,IAAJ,GACD,CAHD,EAIA,MAAOrD,IAAP,CACD,CACF,CAjqBS,CAmqBVkT,WAnqBU,sBAmqBElC,OAnqBF,CAmqBW,CACnB,GAAIA,SAAWA,QAAQ/P,QAAnB,EAA+B+P,QAAQ/P,QAAR,GAAqB,CAAxD,CAA2D,CACzDV,EAAEyQ,OAAF,EAAWxH,GAAX,GACD,CAFD,IAEO,IAAIwH,SAAWA,QAAQ9R,UAAnB,EAAiC8R,QAAQ9R,UAAR,GAAuB,UAA5D,CAAwE,CAC7E8R,QAAQxH,GAAR,GACD,CACD,KAAK5J,OAAL,CAAa,cAAQ,CACnBW,EAAES,IAAF,EAAQwI,GAAR,GACA,GAAI,MAAOwH,QAAP,GAAmB,QAAvB,CAAiC,CAC/BzQ,EAAEyF,OAAF,CAAUzF,EAAEyQ,OAAF,CAAV,CAAsBhQ,IAAtB,EACD,CAFD,IAEO,CACLT,EAAEyF,OAAF,CAAUzF,EAAEyQ,OAAF,CAAV,CAAsBhQ,IAAtB,EACD,CACF,CAPD,EAQD,CAjrBS,CAmrBVmR,MAnrBU,kBAmrBD,CACP,GAAI,CAAC,KAAKnT,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,KAAKc,OAAL,CAAa,cAAQ,CACnBW,EAAES,IAAF,EAAQwI,GAAR,GACA,GAAIxI,KAAKK,UAAT,CAAqBL,KAAKK,UAAL,CAAgB8R,WAAhB,CAA4BnS,IAA5B,EACtB,CAHD,EAID,CAzrBS,CA2rBVoS,QA3rBU,mBA2rBDC,SA3rBC,CA2rBU,CAClB,GAAI,CAAC,KAAKrU,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAI,MAAOuU,UAAP,GAAqB,QAAzB,CACE,OACF,GAAIrT,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAIwU,SAAUpT,SAAd,CACA,KAAKN,OAAL,CAAa,cAAQ,CACnB,GAAI,KAAK0D,IAAL,CAAU+P,SAAV,CAAJ,CAA0B,CACxBC,QAAUD,UAAUtQ,KAAV,CAAgB,GAAhB,CAAV,CACAuQ,QAAQ1T,OAAR,CAAgB,cAAQ,CACtBoB,KAAKuS,SAAL,CAAeC,GAAf,CAAmBC,IAAnB,EACD,CAFD,EAGD,CALD,IAKO,CACLzS,KAAKuS,SAAL,CAAeC,GAAf,CAAmBH,SAAnB,EACD,CACDrT,IAAIG,IAAJ,CAASa,IAAT,EACD,CAVD,EAWA,MAAOhB,IAAP,CACD,CA7sBS,CA+sBV0T,QA/sBU,mBA+sBDL,SA/sBC,CA+sBU,CAClB,GAAI,CAAC,KAAKrU,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAImB,MAAO,KAAX,CACA,KAAKL,OAAL,CAAa,iBAAW,CACtB,GAAIuH,QAAQoM,SAAR,CAAkBI,QAAlB,CAA2BN,SAA3B,CAAJ,CAA2C,CACzCpT,KAAO,IAAP,CACD,CACF,CAJD,EAKA,MAAOA,KAAP,CACD,CAxtBS,CA0tBV2T,WA1tBU,sBA0tBEP,SA1tBF,CA0tBa,CACrB,GAAI,CAAC,KAAKrU,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAIkB,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAIwU,SAAUpT,SAAd,CACA,KAAKN,OAAL,CAAa,cAAQ,CACnB,GAAI,CAACoB,IAAL,CACE,OACF,GAAI,KAAKsC,IAAL,CAAU+P,SAAV,CAAJ,CAA0B,CACxBC,QAAUD,UAAUtQ,KAAV,CAAgB,GAAhB,CAAV,CACAuQ,QAAQ1T,OAAR,CAAgB,cAAQ,CACtBoB,KAAKuS,SAAL,CAAepB,MAAf,CAAsBsB,IAAtB,EACD,CAFD,EAGD,CALD,IAKO,CACLzS,KAAKuS,SAAL,CAAepB,MAAf,CAAsBkB,SAAtB,EACD,CACD,GAAIrS,KAAK6S,YAAL,CAAkB,OAAlB,IAA+B,EAAnC,CAAuC,CACrC7S,KAAK8S,eAAL,CAAqB,OAArB,EACD,CACD9T,IAAIG,IAAJ,CAASa,IAAT,EACD,CAfD,EAgBA,MAAOhB,IAAP,CACD,CA/uBS,CAivBV+T,WAjvBU,sBAivBEV,SAjvBF,CAivBa,CACrB,GAAI,CAAC,KAAKrU,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAIkB,KAAM,GAAIlB,SAAJ,EAAV,CACA,KAAKc,OAAL,CAAa,cAAQ,CACnBoB,KAAKuS,SAAL,CAAeS,MAAf,CAAsBX,SAAtB,EACArT,IAAIG,IAAJ,CAASa,IAAT,EACD,CAHD,EAIA,MAAOhB,IAAP,CACD,CAzvBS,CA2vBViU,IA3vBU,eA2vBLC,SA3vBK,CA2vBMvT,KA3vBN,CA2vBa,CACrB,GAAI,CAAC,KAAK3B,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAIkB,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAMqV,QAAS,QAATA,OAAS,CAACnT,IAAD,CAAOkT,SAAP,CAAkBvT,KAAlB,CAA4B,CACzC,GAAIA,QAAUT,SAAd,CAAyB,CACvB,MAAOc,MAAK6S,YAAL,CAAkBK,SAAlB,CAAP,CACD,CAFD,IAEO,CACL,MAAOlT,MAAKoT,YAAL,CAAkBF,SAAlB,CAA6BvT,KAA7B,CAAP,CACD,CACF,CAND,CAOA,GAAIA,QAAUT,SAAd,CAAyB,CACvB,GAAI,KAAK,CAAL,EAAQmU,YAAR,CAAqBH,SAArB,CAAJ,CAAqC,CACnC,MAAO,MAAK,CAAL,EAAQL,YAAR,CAAqBK,SAArB,CAAP,CACD,CAFD,IAEO,CACL,MAAO,EAAP,CACD,CACF,CAND,IAMO,CACL,KAAKtU,OAAL,CAAa,cAAQ,CACnBuU,OAAOnT,IAAP,CAAakT,SAAb,CAAwBvT,KAAxB,EACAX,IAAIG,IAAJ,CAASa,IAAT,EACD,CAHD,EAID,CACD,GAAIhB,IAAIf,MAAR,CAAgB,CACd,MAAOe,IAAP,CACD,CACF,CApxBS,CAsxBVsU,UAtxBU,qBAsxBCJ,SAtxBD,CAsxBY,CACpB,GAAI,CAAC,KAAKlV,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAIkB,KAAM,GAAIlB,SAAJ,EAAV,CACA,KAAKc,OAAL,CAAa,cAAQ,CACnB,GAAI,CAAC,CAACoB,KAAKqT,YAAL,CAAkBH,SAAlB,CAAN,CAAoC,CAClClT,KAAK8S,eAAL,CAAqBI,SAArB,EACAlU,IAAIG,IAAJ,CAASa,IAAT,EACD,CACF,CALD,EAMA,MAAOhB,IAAP,CACD,CAhyBS,CAkyBV0E,IAlyBU,eAkyBLuL,QAlyBK,CAkyBKtP,KAlyBL,CAkyBY,CACpB,GAAI,CAAC,KAAK3B,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAI6B,QAAU,KAAV,EAAmB,CAAC,CAACA,KAAzB,CAAgC,CAC9B,KAAKf,OAAL,CAAa,iBAAW,CACtBuH,QAAQ8I,QAAR,EAAoBtP,KAApB,CACD,CAFD,EAGA,MAAO,KAAP,CACD,CALD,IAKO,IAAI,KAAK3B,KAAL,CAAW,CAAX,GAAiB,KAAKA,KAAL,CAAW,CAAX,EAAciR,QAAd,CAArB,CAA8C,CACnD,MAAO,MAAKjR,KAAL,CAAW,CAAX,EAAciR,QAAd,CAAP,CACD,CACF,CA5yBS,CA8yBVsE,UA9yBU,qBA8yBCtE,QA9yBD,CA8yBW,CACnB,GAAI,CAAC,KAAKjR,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,KAAK,CAAL,EAAQmR,QAAR,EAAoB,KAApB,CACA,MAAO,CAAC,KAAK,CAAL,CAAD,CAAP,CACD,CAlzBS,CAozBVuE,OApzBU,mBAozBA,CACR,GAAI,CAAC,KAAKxV,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,KAAKc,OAAL,CAAa,cAAQ,CACnBoB,KAAKuS,SAAL,CAAeC,GAAf,CAAmB,UAAnB,EACAxS,KAAKyT,QAAL,CAAgB,IAAhB,CACAzT,KAAKqP,KAAL,CAAWqE,MAAX,CAAoB,SAApB,CACD,CAJD,EAKA,MAAO,KAAP,CACD,CA5zBS,CA8zBVC,MA9zBU,kBA8zBD,CACP,GAAI,CAAC,KAAK3V,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,KAAKc,OAAL,CAAa,cAAQ,CACnBoB,KAAKuS,SAAL,CAAepB,MAAf,CAAsB,UAAtB,EACAnR,KAAK8S,eAAL,CAAqB,UAArB,EACA9S,KAAKqP,KAAL,CAAWqE,MAAX,CAAoB,MAApB,CACD,CAJD,EAKA,MAAO,KAAP,CACD,CAt0BS,CAw0BVE,GAx0BU,cAw0BNjU,KAx0BM,CAw0BC,CACT,GAAI,CAAC,KAAK3B,KAAL,CAAWC,MAAhB,CAAwB,MAAO,IAAIH,SAAJ,EAAP,CACxB,GAAI6B,KAAJ,CAAW,CACT,KAAK3B,KAAL,CAAW,CAAX,EAAc2B,KAAd,CAAsBA,KAAtB,CACA,MAAO,KAAP,CACD,CAHD,IAGO,CACL,GAAI,KAAK3B,KAAL,CAAW,CAAX,GAAiB,KAAKA,KAAL,CAAW,CAAX,EAAc2B,KAAnC,CAA0C,CACxC,MAAO,MAAK3B,KAAL,CAAW,CAAX,EAAc2B,KAArB,CACD,CACF,CACF,CAl1BS,CAo1BVkU,IAp1BU,gBAo1BH,CACL,GAAIC,SAAU,KAAK9E,GAAL,CAAS,SAAT,CAAd,CACA,KAAK5P,IAAL,CAAU,cAAV,CAA0B0U,OAA1B,EACA,KAAK9E,GAAL,CAAS,SAAT,CAAoB,MAApB,EACD,CAx1BS,CA01BV+E,IA11BU,gBA01BH,CACL,GAAID,SAAU,KAAK1U,IAAL,CAAU,cAAV,CAAd,CACA,GAAI,CAAC0U,OAAL,CAAc,MAAO,KAAP,CACd,GAAIA,UAAY,MAAhB,CAAwB,CACtBA,QAAU,OAAV,CACD,CACD,KAAK9E,GAAL,CAAS,SAAT,CAAoB8E,OAApB,EACD,CAj2BS,CAm2BV3L,MAn2BU,kBAm2BD,CACP,GAAInJ,KAAM,EAAV,CACA,GAAIkL,MAAO,KAAKlM,KAAL,CAAWkM,IAAX,EAAX,CACAA,KAAKtL,OAAL,CAAa,SAASC,GAAT,CAAcC,GAAd,CAAmB,CAC9B,GAAIE,IAAIkB,OAAJ,CAAYrB,GAAZ,IAAqB,CAAC,CAA1B,CAA6B,CAC3BG,IAAIG,IAAJ,CAASN,GAAT,EACD,CACF,CAJD,EAKAG,IAAIkL,IAAJ,CAAS,SAAS8J,CAAT,CAAYC,CAAZ,CAAe,CACtB,MAAOD,GAAIC,CAAX,CACD,CAFD,EAGA,KAAKjW,KAAL,CAAW6B,MAAX,CAAkB,CAAlB,EACA,GAAI0B,MAAO,KAAKvD,KAAhB,CACAgB,IAAIJ,OAAJ,CAAY,SAASoB,IAAT,CAAe,CACzBuB,KAAKpC,IAAL,CAAUa,IAAV,EACD,CAFD,EAGA,KAAK/B,MAAL,CAAc,KAAKD,KAAL,CAAWC,MAAzB,CACD,CAp3BS,CAAZ,EAu3BA;;KAIA,CAAC,UAAM,CACL,GAAMiW,oBAAqB,CACzBC,GAAI,CACFC,kBAAmB,2LADjB,CAEFC,0BAA2B,oJAFzB,CAGFC,iBAAkB,gGAHhB,CADqB,CAMzBC,GAAI,CACFH,kBAAmB,mPADjB,CAEFC,0BAA2B,gMAFzB,CAGFC,iBAAkB,qHAHhB,CANqB,CAA3B,CAaA,GAAIE,QAAStV,SAAb,CACA,GAAIK,EAAE,MAAF,EAAU0T,IAAV,CAAe,MAAf,GAA0B,IAA9B,CAAoCuB,OAASN,mBAAmBC,EAA5B,CACpC,GAAI5U,EAAE,MAAF,EAAU0T,IAAV,CAAe,MAAf,GAA0B,IAA9B,CAAoCuB,OAASN,mBAAmBK,EAA5B,CAEpC;;OAGA,GAAIE,YAAa,QAAbA,WAAa,CAACzW,KAAD,CAAW,CAC1B,GAAI0W,SAAU,EAAd,CACA,GAAI1W,OAASG,MAAMC,OAAN,CAAcJ,KAAd,CAAb,CAAmC,CACjC,GAAIK,GAAI,CAAC,CAAT,CACA,GAAMC,KAAMN,MAAMC,MAAlB,CACA,MAAO,EAAEI,CAAF,CAAMC,GAAb,CAAkB,CAChBoW,QAAQrW,CAAR,EAAaL,MAAMK,CAAN,CAAb,CACD,CACF,CAND,IAMO,IAAIL,KAAJ,CAAW,CAChB,GAAM2W,KAAMxW,MAAMK,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,YAAZ,CACAiW,IAAI/V,OAAJ,CAAY,SAACC,GAAD,CAAMC,GAAN,CAAc,CACxB4V,QAAQ5V,GAAR,EAAeD,GAAf,CACD,CAFD,EAGD,CACD,MAAO,CAELqR,KAAM,sBAAMwE,SAAQzW,MAAd,EAFD,CAILkB,KAAM,cAACC,IAAD,QAAUsV,SAAQvV,IAAR,CAAaC,IAAb,CAAV,EAJD,CAMLE,IAAK,qBAAMoV,SAAQpV,GAAR,EAAN,EANA,CAQLoP,GAAI,YAAC3P,KAAD,CAAW,CACb,GAAIA,MAAQ,CAAZ,CAAe,CACb,MAAO2V,SAAQA,QAAQzW,MAAR,CAAiBc,KAAzB,CAAP,CACD,CAFD,IAEO,CACL,MAAO2V,SAAQ3V,KAAR,CAAP,CACD,CACF,CAdI,CAgBLH,QAAS,iBAACc,QAAD,CAAc,CACrB,GAAIC,OAAQT,SAAZ,CACA,GAAIb,GAAI,CAAC,CAAT,CACA,GAAMC,KAAMoW,QAAQzW,MAApB,CACA,MAAO,EAAEI,CAAF,CAAMC,GAAb,CAAkB,CAChBqB,MAAQD,SAASE,IAAT,CAAc8U,QAAQrW,CAAR,CAAd,CAA0BqW,QAAQrW,CAAR,CAA1B,CAAsCA,CAAtC,CAAR,CACA,GAAIsB,QAAU,KAAd,CAAqB,CACnB,MACD,CACF,CACF,CA1BI,CA4BLF,MAAO,uBAAMiV,SAAQjV,KAAR,CAAcf,KAAd,CAAoBgW,OAApB,YAAN,EA5BF,CA8BLlV,QAAS,yBAAMkV,SAAQlV,OAAR,CAAgBd,KAAhB,CAAsBgW,OAAtB,YAAN,EA9BJ,CAgCL7U,OAAQ,wBAAM6U,SAAQ7U,MAAR,CAAenB,KAAf,CAAqBgW,OAArB,YAAN,EAhCH,CAkCLxU,QAAS,yBAAMwU,SAAQxU,OAAR,CAAgBxB,KAAhB,CAAsBgW,OAAtB,YAAN,EAlCJ,CAoCLlU,QAAS,yBAAMkU,QAAN,EApCJ,CAsCLE,MAAO,uBAAMF,SAAU,EAAhB,EAtCF,CAAP,CAwCD,CAtDD,CAwDA,GAAIG,gBAAiB,CACnBjT,SAAU,EADS,CAArB,CAIA;oCAGA;;OAGA,GAAMkT,MAAO,QAAPA,KAAO,CAAS3O,OAAT,CAAkB4O,KAAlB,CAAyBrV,QAAzB,CAAmCsV,YAAnC,CAAiD,CAC5D,GAAI,CAAC7O,QAAQ8O,EAAb,CAAiB9O,QAAQ8O,EAAR,CAAa7T,gBAAgBkD,IAAhB,EAAb,CACjB,GAAI,CAACuQ,eAAejT,QAAf,CAAwBuE,QAAQ8O,EAAhC,CAAL,CAA0C,CACxCJ,eAAejT,QAAf,CAAwBuE,QAAQ8O,EAAhC,EAAsCR,YAAtC,CAAoD;AACrD,CACDI,eAAejT,QAAf,CAAwBuE,QAAQ8O,EAAhC,EAAoC9V,IAApC,CAAyC,CACvC4V,MAAOA,KADgC,CAEvCrV,SAAUA,QAF6B,CAAzC,EAIAyG,QAAQvD,gBAAR,CAAyBmS,KAAzB,CAAgCrV,QAAhC,CAA0CsV,YAA1C,EACD,CAVD,CAaA;;OAGA,GAAME,sBAAuB,QAAvBA,qBAAuB,CAASC,QAAT,CAAmBC,OAAnB,CAA4B,CACvD,GAAI9W,KAAM6W,SAASlX,MAAnB,CACA,IAAK,GAAII,GAAI,CAAb,CAAgBC,IAAMD,CAAtB,CAAyBC,KAAzB,CAAgC,CAC9B8W,QAAQvV,MAAR,CAAesV,SAAS7W,IAAM,CAAf,CAAf,CAAkC,CAAlC,EACD,CACF,CALD,CAMA;;OAGA,GAAM+W,QAAS,QAATA,OAAS,CAASlP,OAAT,CAAkB4O,KAAlB,CAAyBrV,QAAzB,CAAmCsV,YAAnC,CAAiD,CAE9D,GAAMM,YAAaT,eAAejT,QAAf,CAAwBuE,QAAQ8O,EAAhC,CAAnB,CACA,GAAI,CAACK,UAAL,CAAiB,OACjB,GAAIC,aAAc,EAAlB,CAEA,GAAI,CAACR,KAAL,CAAY,CACVQ,YAAc,EAAd,CACAD,WAAW1W,OAAX,CAAmB,SAAC4W,GAAD,CAAM1W,GAAN,CAAc,CAC/BqH,QAAQsP,mBAAR,CAA4BD,IAAIT,KAAhC,CAAuCS,IAAI9V,QAA3C,CAAqD8V,IAAIR,YAAzD,EACAO,YAAYpW,IAAZ,CAAiBL,GAAjB,EACD,CAHD,EAKAoW,qBAAqBK,WAArB,CAAkCD,UAAlC,EAED,CATD,IASO,IAAI,CAAC,CAACP,KAAF,EAAW,CAACrV,QAAhB,CAA0B,CAC/B6V,YAAc,EAAd,CACAD,WAAW1W,OAAX,CAAmB,SAAC4W,GAAD,CAAM1W,GAAN,CAAc,CAC/B,GAAI0W,IAAIT,KAAJ,GAAcA,KAAlB,CAAyB,CACvB5O,QAAQsP,mBAAR,CAA4BD,IAAIT,KAAhC,CAAuCS,IAAI9V,QAA3C,CAAqD8V,IAAIR,YAAzD,EACAO,YAAYpW,IAAZ,CAAiBL,GAAjB,EACD,CACF,CALD,EAOAoW,qBAAqBK,WAArB,CAAkCD,UAAlC,EAED,CAXM,IAWA,IAAI5V,QAAJ,CAAc,CACnB6V,YAAc,EAAd,CACAD,WAAW1W,OAAX,CAAmB,SAAC4W,GAAD,CAAM1W,GAAN,CAAc,CAC/B,GAAIY,WAAa8V,IAAI9V,QAArB,CAA+B,CAC7ByG,QAAQsP,mBAAR,CAA4BD,IAAIT,KAAhC,CAAuCS,IAAI9V,QAA3C,CAAqD8V,IAAIR,YAAzD,EACAO,YAAYpW,IAAZ,CAAiBL,GAAjB,EACD,CACF,CALD,EAMAoW,qBAAqBK,WAArB,CAAkCD,UAAlC,EACD,CACF,CApCD,CAuCA;;OAIA,GAAMI,UAAW,QAAXA,SAAW,CAACvP,OAAD,CAAU9E,QAAV,CAAoB0T,KAApB,CAA2BrV,QAA3B,CAAqCsV,YAArC,CAAsD,CACrE,GAAIW,iBAAkBpW,EAAE4G,OAAF,EAAWnI,KAAX,CAAiB,CAAjB,CAAtB,CACAuB,EAAE4G,OAAF,EAAWvH,OAAX,CAAmB,aAAO,CACxBW,EAAEV,GAAF,EAAOuN,EAAP,CAAU2I,KAAV,CAAiB,SAACa,CAAD,CAAO,CACtB,GAAIC,QAASD,EAAEC,MAAf,CACA,GAAID,EAAEC,MAAF,CAAS5V,QAAT,GAAsB,CAA1B,CAA6B,CAC3B4V,OAASD,EAAEC,MAAF,CAASxV,UAAlB,CACD,CACDd,EAAEV,GAAF,EAAO4D,IAAP,CAAYpB,QAAZ,EAAsBzC,OAAtB,CAA8B,yBAAmB,CAC/C,GAAI+W,kBAAoBE,MAAxB,CAAgC,CAC9BnW,SAASE,IAAT,CAAc+V,eAAd,CAA+BC,CAA/B,EACD,CAFD,IAEO,CACL,GAAI,CACF,GAAME,UAAWvW,EAAEsW,MAAF,EAAU/G,OAAV,CAAkBzN,QAAlB,CAAjB,CACA,GAAIsU,kBAAoBG,SAAS9X,KAAT,CAAe,CAAf,CAAxB,CAA2C,CACzC0B,SAASE,IAAT,CAAc+V,eAAd,CAA+BC,CAA/B,EACD,CACF,CAAC,MAAO/S,GAAP,CAAY,CAAE,CACjB,CACF,CAXD,EAYD,CAjBD,CAiBGmS,YAjBH,EAkBD,CAnBD,EAoBD,CAtBD,CAyBA;;OAGA,GAAMe,YAAa,QAAbA,WAAa,CAAC5P,OAAD,CAAU9E,QAAV,CAAoB0T,KAApB,CAA2BrV,QAA3B,CAAqCsV,YAArC,CAAsD,CAEvEK,OAAO9V,EAAE4G,OAAF,EAAWnI,KAAX,CAAiB,CAAjB,CAAP,CAA4B+W,KAA5B,CAAmCrV,QAAnC,CAA6CsV,YAA7C,EACD,CAHD,CAKAzV,EAAE0E,EAAF,CAAKN,MAAL,CAAY,CACVyI,GAAI,YAAS2I,KAAT,CAAgB1T,QAAhB,CAA0B3B,QAA1B,CAAoCsV,YAApC,CAAkD,CACpD,GAAI,CAACD,KAAL,CAAY,CACV,GAAIxV,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOJ,iBAArB,EACA,OACD,CACD,GAAI,CAAC/S,QAAL,CAAe,CACb,GAAI9B,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOH,yBAArB,EACA,OACD,CAED,GAAI,CAAChT,QAAD,EAAa,YAAYiB,IAAZ,CAAiByS,MAAMtU,WAAN,CAAkBC,QAAlB,EAAjB,CAAjB,CAAiE,CAC/D,KAAK9B,OAAL,CAAa,iBAAW,CACtB,IAAK,GAAIqJ,IAAT,GAAgB8M,MAAhB,CAAuB,CACrB,GAAIA,MAAM5R,cAAN,CAAqB8E,GAArB,CAAJ,CAA+B,CAC7B1I,EAAE4G,OAAF,EAAWiG,EAAX,CAAcnE,GAAd,CAAmB8M,MAAM9M,GAAN,CAAnB,EACD,CACF,CACF,CAND,EAOD,CACD,GAAIjJ,KAAM,EAAV,CACA,GAAIkX,QAAShX,SAAb,CACA,GAAI,MAAO6V,MAAP,GAAiB,QAArB,CAA+B,CAC7BA,MAAQA,MAAM1S,IAAN,EAAR,CACA,GAAI,KAAKC,IAAL,CAAUyS,KAAV,CAAJ,CAAsB,CACpBmB,OAASnB,MAAMhT,KAAN,CAAY,GAAZ,CAAT,CACA,KAAKnD,OAAL,CAAa,aAAO,CAClBsX,OAAOtX,OAAP,CAAe,aAAO,CACpB,GAAI,MAAOyC,SAAP,GAAoB,UAAxB,CAAoC,CAClCyT,KAAKjW,GAAL,CAAU2W,GAAV,CAAenU,QAAf,CAAyB3B,QAAzB,EACAV,IAAIG,IAAJ,CAASN,GAAT,EACD,CAHD,IAGO,CACL6W,SAAS7W,GAAT,CAAcwC,QAAd,CAAwBmU,GAAxB,CAA6B9V,QAA7B,CAAuCsV,YAAvC,EACD,CACF,CAPD,EAQD,CATD,EAUD,CACF,CACD,KAAKpW,OAAL,CAAa,aAAO,CAClB,GAAI,MAAOyC,SAAP,GAAoB,UAAxB,CAAoC,CAClC,MAAOyT,MAAKjW,GAAL,CAAUkW,KAAV,CAAiB1T,QAAjB,CAA2B3B,QAA3B,CAAP,CACD,CAFD,IAEO,CACLgW,SAAS7W,GAAT,CAAcwC,QAAd,CAAwB0T,KAAxB,CAA+BrV,QAA/B,CAAyCsV,YAAzC,EACD,CACF,CAND,EAOA,MAAO,KAAP,CACD,CAhDS,CAkDVxM,IAAK,aAASuM,KAAT,CAAgB1T,QAAhB,CAA0B3B,QAA1B,CAAoCsV,YAApC,CAAkD,CACrD,GAAIhW,KAAM,GAAIlB,SAAJ,EAAV,CACA,GAAI,CAAC,KAAKoS,IAAL,EAAL,CAAkB,MAAOlR,IAAP,CAElB,KAAKJ,OAAL,CAAa,SAASC,GAAT,CAAc,CACzB,GAAI,MAAOkW,MAAP,GAAiB,WAArB,CAAkC,CAChC/V,IAAIG,IAAJ,CAASN,GAAT,EACAwW,OAAOxW,GAAP,EACA,MAAOG,IAAP,CACD,CAJD,IAIO,IAAI,MAAOqC,SAAP,GAAoB,UAApB,EAAkC,CAACA,QAAvC,CAAiD,CACtDgU,OAAOxW,GAAP,CAAYkW,KAAZ,CAAmB1T,QAAnB,CAA6B3B,QAA7B,CAAuCsV,YAAvC,EACA,MAAO,KAAP,CACD,CAHM,IAGA,CACLe,WAAWlX,GAAX,CAAgBwC,QAAhB,CAA0B0T,KAA1B,CAAiCrV,QAAjC,CAA2CsV,YAA3C,EACA,MAAO,KAAP,CACD,CACF,CAZD,EAaD,CAnES,CAqEVmB,QAAS,iBAASpB,KAAT,CAAgB3V,IAAhB,CAAsB,CAC7B,GAAI,CAAC2V,KAAL,CAAY,CACV,GAAIxV,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOF,gBAArB,EACA,OACD,CACD,GAAI,CAAC,KAAKpE,IAAL,EAAL,CAAkB,MAAO,IAAIpS,SAAJ,EAAP,CAClB,KAAKc,OAAL,CAAa,aAAO,CAClB,GAAIL,SAAS6X,WAAb,CAA0B,CACxB,GAAMC,QAAS9X,SAAS6X,WAAT,CAAqB,QAArB,CAAf,CACAC,OAAOC,SAAP,CAAiBvB,KAAjB,CAAwB,IAAxB,CAA8B,KAA9B,EACAsB,OAAOjX,IAAP,CAAcA,IAAd,CACAP,IAAI0X,aAAJ,CAAkBF,MAAlB,EACD,CACF,CAPD,EAQD,CApFS,CAAZ,EAsFD,CAlRD,IAqRAvT,OAAOvD,CAAP,CAAWuD,OAAO1B,eAAP,CAAyBA,eAApC,CAEA,MAAO7B,EAAP,CACD,CA37DD,IA67DE;;KAGAA,EAAEoE,MAAF,CAAS,CACP6S,WAAY,IADL,CAEPC,SAAU,IAFH,CAGPC,UAAW,IAHJ,CAIPC,YAAa,IAJN,CAKP;;OAGAC,cAAe,EARR,CAAT,EAUArX,EAAE,UAAM,CACN;;OAGA,GAAI,gBAAkBuD,OAAlB,EAA4B,YAAYR,IAAZ,CAAiBuU,UAAUC,SAA3B,CAAhC,CAAuE,CACrEvX,EAAEiX,UAAF,CAAe,YAAf,CACAjX,EAAEkX,QAAF,CAAa,UAAb,CACAlX,EAAEmX,SAAF,CAAc,WAAd,CACAnX,EAAEoX,WAAF,CAAgB,aAAhB,CACA;;SAGD,CARD,IAQO,CACLpX,EAAEiX,UAAF,CAAe,WAAf,CACAjX,EAAEkX,QAAF,CAAa,OAAb,CACAlX,EAAEmX,SAAF,CAAc,WAAd,CACAnX,EAAEoX,WAAF,CAAgB,UAAhB,CACD,CACF,CAlBD,EAoBA;;KAGA,CAAC,UAAW,CACV,aACA,GAAII,OAAQ,EAAZ,CACA,GAAIC,cAAe9X,SAAnB,CACA,GAAI+X,cAAe/X,SAAnB,CACA,GAAIgY,YAAahY,SAAjB,CACA,GAAMiY,cAAe,GAArB,CACA,GAAIC,gBAAiB,GAArB,CACA7X,EAAEqX,aAAF,CAAkB,EAAlB,CACA,GAAIrX,EAAE8X,SAAN,CAAiBD,eAAiB,GAAjB,CACjB,GAAIE,gBAAiBpY,SAArB,CAEA,QAASqY,aAAT,CAAsBvX,IAAtB,CAA4B,CAC1B,MAAO,WAAaA,KAAb,CAAoBA,IAApB,CAA2BA,KAAKK,UAAvC,CACD,CAED,QAASmX,eAAT,CAAwBC,EAAxB,CAA4BC,EAA5B,CAAgCC,EAAhC,CAAoCC,EAApC,CAAwC,CACtC,MAAO/S,MAAKgT,GAAL,CAASJ,GAAKC,EAAd,GACL7S,KAAKgT,GAAL,CAASF,GAAKC,EAAd,CADK,CACgBH,GAAKC,EAAL,CAAU,CAAV,CAAc,MAAd,CAAuB,OADvC,CACmDC,GAAKC,EAAL,CAAU,CAAV,CAAc,IAAd,CAAqB,MAD/E,CAED,CAED,QAASE,QAAT,EAAmB,CACjBR,eAAiB,IAAjB,CACA,GAAIP,MAAMpL,IAAV,CAAgB,CACd,GAAI,CACF,GAAIoL,OAASA,MAAM3W,EAAnB,CAAuB,CACrB2W,MAAM3W,EAAN,CAAS+V,OAAT,CAAiB,SAAjB,EACAY,MAAQ,EAAR,CACD,CACF,CAAC,MAAOlU,GAAP,CAAY,CAAE,EACjB,CACF,CAED,QAASkV,cAAT,EAAyB,CACvB,GAAIT,cAAJ,CAAoBhM,aAAagM,cAAb,EACpBA,eAAiB,IAAjB,CACD,CAED,QAASU,UAAT,EAAqB,CACnB,GAAIhB,YAAJ,CAAkB1L,aAAa0L,YAAb,EAClB,GAAIE,UAAJ,CAAgB5L,aAAa4L,UAAb,EAChB,GAAID,YAAJ,CAAkB3L,aAAa2L,YAAb,EAClB,GAAIK,cAAJ,CAAoBhM,aAAagM,cAAb,EACpBN,aAAeE,WAAaD,aAAeK,eAAiB,IAA5D,CACAP,MAAQ,EAAR,CACD,CAED;;OAGAxX,EAAE,UAAM,CACN,GAAIkF,KAAMvF,SAAV,CACA,GAAI+Y,OAAQ/Y,SAAZ,CACA,GAAMyD,MAAOpD,EAAE,MAAF,CAAb,CACA,GAAI2Y,YAAa,KAAjB,CAEA;;SAGAvV,KAAKyJ,EAAL,CAAQ7M,EAAEiX,UAAV,CAAsB,SAASZ,CAAT,CAAY,CAChCnR,IAAMD,KAAKC,GAAL,EAAN,CACAwT,MAAQxT,KAAOsS,MAAMpL,IAAN,EAAclH,GAArB,CAAR,CACA,GAAImR,EAAEuC,aAAN,CAAqBvC,EAAIA,EAAEuC,aAAN,CAErB,GAAI5Y,EAAEiX,UAAF,GAAiB,WAArB,CAAkC,CAChCO,MAAM3W,EAAN,CAAWb,EAAEgY,aAAa3B,EAAEC,MAAf,CAAF,CAAX,CACA,GAAID,EAAEC,MAAF,CAASxE,QAAT,GAAsB,QAA1B,CAAoC,CAClC0F,MAAM3W,EAAN,CAAWb,EAAEa,GAAGyV,MAAH,CAAUxV,UAAZ,CAAX,CACD,CACD2W,cAAgB1L,aAAa0L,YAAb,CAAhB,CACAD,MAAMU,EAAN,CAAW7B,EAAEwC,KAAb,CACArB,MAAMY,EAAN,CAAW/B,EAAEyC,KAAb,CACAH,WAAa,KAAb,CAEF;;WAGC,CAbD,IAaO,CACL,GAAItC,EAAE0C,OAAF,CAAUra,MAAV,GAAqB,CAAzB,CAA4B,CAC1B8Y,MAAM3W,EAAN,CAAWb,EAAEgY,aAAa3B,EAAE0C,OAAF,CAAU,CAAV,EAAazC,MAA1B,CAAF,CAAX,CACAmB,cAAgB1L,aAAa0L,YAAb,CAAhB,CACAD,MAAMU,EAAN,CAAW7B,EAAE0C,OAAF,CAAU,CAAV,EAAaF,KAAxB,CACArB,MAAMY,EAAN,CAAW/B,EAAE0C,OAAF,CAAU,CAAV,EAAaD,KAAxB,CACA,GAAIzC,EAAE2C,aAAF,CAAgBta,MAAhB,GAA2B,CAA/B,CAAkC,CAChCia,WAAa,IAAb,CACD,CAFD,IAEO,CACLA,WAAa,KAAb,CACD,CACF,CACF,CAED,GAAID,MAAQ,CAAR,EAAaA,OAAS,GAA1B,CAA+B,CAC7BlB,MAAMyB,WAAN,CAAoB,IAApB,CACD,CACDzB,MAAMpL,IAAN,CAAalH,GAAb,CACA6S,eAAiBxP,WAAWgQ,OAAX,CAAoBX,YAApB,CAAjB,CACD,CArCD,EAuCA;;SAGAxU,KAAKyJ,EAAL,CAAQ7M,EAAEmX,SAAV,CAAqB,WAAK,CACxB,GAAId,EAAEuC,aAAN,CAAqBvC,EAAIA,EAAEuC,aAAN,CACrBJ,gBACA,GAAIxY,EAAEmX,SAAF,GAAgB,WAApB,CAAiC,CAC/BK,MAAMW,EAAN,CAAW9B,EAAEwC,KAAb,CACArB,MAAMa,EAAN,CAAWhC,EAAEyC,KAAb,CACD,CAHD,IAGO,CACL;;aAGA,GAAIzC,EAAE0C,OAAF,CAAUra,MAAV,GAAqB,CAAzB,CAA4B,CAC1B8Y,MAAMW,EAAN,CAAW9B,EAAE0C,OAAF,CAAU,CAAV,EAAaF,KAAxB,CACArB,MAAMa,EAAN,CAAWhC,EAAE0C,OAAF,CAAU,CAAV,EAAaD,KAAxB,CACD,CACF,CACF,CAfD,EAiBA;;SAGA1V,KAAKyJ,EAAL,CAAQ7M,EAAEkX,QAAV,CAAoB,WAAK,CAEvBsB,gBACA,GAAI,CAAC,CAAChB,MAAM3W,EAAZ,CAAgB,CACd;;aAGA,GAAK2W,MAAMW,EAAN,EAAY7S,KAAKgT,GAAL,CAASd,MAAMU,EAAN,CAAWV,MAAMW,EAA1B,EAAgCnY,EAAEqX,aAA/C,EACDG,MAAMa,EAAN,EAAY/S,KAAKgT,GAAL,CAASd,MAAMY,EAAN,CAAWZ,MAAMa,EAA1B,EAAgCrY,EAAEqX,aADjD,CACiE,CAC/DK,aAAenP,WAAW,UAAW,CACnC,GAAIiP,OAASA,MAAM3W,EAAnB,CAAuB,CACrB2W,MAAM3W,EAAN,CAAS+V,OAAT,CAAiB,OAAjB,EACAY,MAAM3W,EAAN,CAAS+V,OAAT,CAAiB,QAAWqB,eAAeT,MAAMU,EAArB,CAAyBV,MAAMW,EAA/B,CAAmCX,MAAMY,EAAzC,CAA6CZ,MAAMa,EAAnD,CAA5B,EACAb,MAAQ,EAAR,CACD,CACF,CANc,CAMZ,CANY,CAAf,CAQF;;aAGC,CAbD,IAaO,IAAI,QAAUA,MAAd,CAAqB,CAC1B;;eAGAG,WAAapP,WAAW,UAAM,CAC5B;;iBAGA,GAAIiP,OAASA,MAAMyB,WAAnB,CAAgC,CAC9B,GAAIzB,OAASA,MAAM3W,EAAnB,CAAuB,CACrB2W,MAAM3W,EAAN,CAAS+V,OAAT,CAAiB,WAAjB,EACAY,MAAQ,EAAR,CACD,CAEF,CAND,IAMO,CACL;;mBAGAC,aAAelP,WAAW,UAAM,CAC9BkP,aAAe,IAAf,CACA,GAAID,OAASA,MAAM3W,EAAnB,CAAuB,CACrB2W,MAAM3W,EAAN,CAAS+V,OAAT,CAAiB,KAAjB,EACAY,MAAQ,EAAR,CACA,MAAO,MAAP,CACD,CACF,CAPc,CAOZK,cAPY,CAAf,CAQD,CACF,CAvBY,CAuBV,CAvBU,CAAb,CAwBD,CAEF,CA/CD,IA+CO,CACL,OACD,CACF,CArDD,EAsDAzU,KAAKyJ,EAAL,CAAQ,aAAR,CAAuB4L,SAAvB,EACD,CA9HD,EAgIA;;OAGA,CAAC,KAAD,CAAQ,WAAR,CAAqB,SAArB,CAAgC,WAAhC,CAA6C,YAA7C,CAA2D,SAA3D,CAAsE,WAAtE,EAAmFpZ,OAAnF,CAA2F,iBAAU,CACnGW,EAAE0E,EAAF,CAAKN,MAAL,CAAY,CACV8U,OAAQ,gBAAS/Y,QAAT,CAAmB,CACzB,MAAO,MAAK0M,EAAL,CAAQqM,OAAR,CAAgB/Y,QAAhB,CAAP,CACD,CAHS,CAAZ,EAKD,CAND,EAOD,CA5LD,IA8LA;;KAGA,GAAIgZ,aAAc,CAChB9W,SAAU,EADM,CAAlB,CAGArC,EAAE0E,EAAF,CAAKN,MAAL,CAAY,CACVvE,IADU,eACL6I,GADK,CACAtI,KADA,CACO,CACf,GAAI,CAAC,KAAKuQ,IAAL,EAAL,CAAkB,MAAO,IAAIpS,SAAJ,EAAP,CAClB,GAAI8V,KAAM1U,SAAV,CACA,GAAI+V,IAAK/V,SAAT,CACA,GAAML,KAAM,KAAKb,KAAL,CAAW,CAAX,CAAZ,CACA,GAAI,CAACa,IAAIoW,EAAT,CAAa,CACXpW,IAAIoW,EAAJ,CAAS1V,EAAE+E,IAAF,EAAT,CACD,CACD2Q,GAAKpW,IAAIoW,EAAT,CACA,GAAI,CAACyD,YAAY9W,QAAZ,CAAqBqT,EAArB,CAAL,CAA+B,CAC7ByD,YAAY9W,QAAZ,CAAqBqT,EAArB,EAA2B,EAA3B,CACD,CACD,GAAIhN,MAAQ,WAAR,EAAuBA,MAAQ,IAAnC,CAAyC,CACvC,OACD,CACD,GAAItI,OAASA,QAAU,CAAvB,CAA0B,CACxBiU,IAAMjU,KAAN,CACA,GAAIoB,KAAM,EAAV,CACAA,IAAIkH,GAAJ,EAAWtI,KAAX,CAEA+Y,YAAY9W,QAAZ,CAAqBqT,EAArB,EAAyBhN,GAAzB,EAAgCtI,KAAhC,CACD,CAND,IAMO,CACL,GAAI,CAAC+Y,YAAY9W,QAAZ,CAAqBqT,EAArB,CAAL,CAA+B,OAC/B,GAAIyD,YAAY9W,QAAZ,CAAqBqT,EAArB,EAAyBhN,GAAzB,IAAkC,CAAtC,CAAyC,CACvC,MAAOyQ,aAAY9W,QAAZ,CAAqBqT,EAArB,EAAyBhN,GAAzB,CAAP,CACD,CACD,GAAI,CAACyQ,YAAY9W,QAAZ,CAAqBqT,EAArB,EAAyBhN,GAAzB,CAAL,CAAoC,OACpC,MAAOyQ,aAAY9W,QAAZ,CAAqBqT,EAArB,EAAyBhN,GAAzB,CAAP,CACD,CACD,MAAO,KAAP,CACD,CA/BS,CAiCV0Q,UAjCU,qBAiCC1Q,GAjCD,CAiCM,iBACd,GAAI,CAAC,KAAKiI,IAAL,EAAL,CAAkB,MAAO,KAAP,CAClB,KAAKtR,OAAL,CAAa,SAACuH,OAAD,CAAa,CACxB,GAAM8O,IAAK9O,QAAQ8O,EAAnB,CACA,GAAI,CAACA,EAAL,CAAS,cACT,GAAI,CAACyD,YAAY9W,QAAZ,CAAqBqT,EAArB,CAAL,CAA+B,CAC7B,cACD,CACD,GAAI,CAAChN,GAAL,CAAU,CACR,MAAOyQ,aAAY9W,QAAZ,CAAqBqT,EAArB,CAAP,CACA,cACD,CACD,GAAIhS,OAAOC,IAAP,CAAYwV,YAAY9W,QAAZ,CAAqBqT,EAArB,CAAZ,EAAsChX,MAAtC,GAAiD,CAArD,CAAwD,CACtD,MAAOya,aAAY9W,QAAZ,CAAqBqT,EAArB,CAAP,CACD,CAFD,IAEO,CACL,MAAOyD,aAAY9W,QAAZ,CAAqBqT,EAArB,EAAyBhN,GAAzB,CAAP,CACD,CACD,cACD,CAhBD,EAiBD,CApDS,CAAZ,EAuDF;;GAGA1I,EAAEoE,MAAF,CAAS,CACPxD,KAAM,oBAAQ,CACZ,aAAeA,MAAf,mCAAeA,KAAf,GACE,IAAK,SAAL,CACE,MAAO,SAAP,CACF,IAAK,QAAL,CACE,MAAO,QAAP,CACF,IAAK,QAAL,CACE,MAAO,QAAP,CACF,IAAK,UAAL,CACE,MAAO,UAAP,CACF,IAAK,QAAL,CACE,GAAIhC,MAAMC,OAAN,CAAc+B,KAAd,CAAJ,CAAyB,CACvB,MAAO,OAAP,CACD,CAFD,IAEO,IAAI8C,OAAOzE,SAAP,CAAiBkC,QAAjB,CAA0Bd,IAA1B,CAA+BO,KAA/B,IAAyC,eAA7C,CAA8D,CACnE,MAAO,MAAP,CACD,CAFM,IAEA,IAAI8C,OAAOzE,SAAP,CAAiBkC,QAAjB,CAA0Bd,IAA1B,CAA+BO,KAA/B,IAAyC,gBAA7C,CAA+D,CACpE,MAAO,OAAP,CACD,CAFM,IAEA,IAAI8C,OAAOzE,SAAP,CAAiBkC,QAAjB,CAA0Bd,IAA1B,CAA+BO,KAA/B,IAAyC,iBAA7C,CAAgE,CACrE,MAAO,QAAP,CACD,CAFM,IAEA,IAAI8C,OAAOzE,SAAP,CAAiBkC,QAAjB,CAA0Bd,IAA1B,CAA+BO,KAA/B,IAAyC,iBAA7C,CAAgE,CACnE,GAAIA,MAAKjC,UAAL,EAAmBiC,MAAKjC,UAAL,GAAoB,UAA3C,CAAuD,CACrD,MAAO,UAAP,CACA,sDACD,CAHD,IAGO,IAAIiC,MAAKyY,IAAT,CAAe,CACpB,MAAO,SAAP,CACA,4CACD,CAHM,IAGA,CACL,MAAO,QAAP,CACD,CACJ,CAVM,IAUA,IAAI3V,OAAOzE,SAAP,CAAiBkC,QAAjB,CAA0Bd,IAA1B,CAA+BO,KAA/B,IAAyC,iBAA7C,CAAgE,CACrE,MAAO,QAAP,CACD,CAFM,IAEA,IAAI8C,OAAOzE,SAAP,CAAiBkC,QAAjB,CAA0Bd,IAA1B,CAA+BO,KAA/B,IAAyC,iBAA7C,CAAgE,CACrE,MAAO,QAAP,CACD,CAFM,IAEA,IAAI8C,OAAOzE,SAAP,CAAiBkC,QAAjB,CAA0Bd,IAA1B,CAA+BO,KAA/B,IAAyC,kBAA7C,CAAiE,CACtE,MAAO,SAAP,CACD,CAFM,IAEA,IAAI8C,OAAOzE,SAAP,CAAiBkC,QAAjB,CAA0Bd,IAA1B,CAA+BO,KAA/B,IAAyC,kBAA7C,CAAiE,CACtE,MAAO,SAAP,CACD,CApCL,CAsCD,CAxCM,CAAT,EA2CA;;GAGAZ,EAAEoE,MAAF,CAAS,CACP2L,SAAU,yBAAU,CAClB,GAAI,MAAOyB,OAAP,GAAkB,QAAtB,CACE,OACF,MAAOA,QAAO/L,OAAP,CAAe,QAAf,CAAyB,SAACrE,KAAD,CAAQkY,MAAR,CAAmB,CACjD,MAAOA,QAAOC,WAAP,EAAP,CACD,CAFM,CAAP,CAGD,CAPM,CASPC,WAAY,2BAAU,CACpB,GAAI,MAAOhI,OAAP,GAAkB,QAAtB,CACE,OACF,MAAOA,QAAO/L,OAAP,CAAe,UAAf,CAA2B,KAA3B,EAAkC0K,WAAlC,EAAP,CACD,CAbM,CAePsJ,WAAY,oBAACjI,MAAD,CAASkI,GAAT,CAAiB,CAC3B,GAAM1X,eAAN,CACA,GAAI,CAACwP,MAAL,CAAa,CACX,OACD,CACD,GAAI,MAAOA,OAAP,GAAkB,QAAtB,CACE,OACF,GAAIkI,GAAJ,CAAS,sBACP,GAAM/P,KAAM6H,OAAOhP,KAAP,CAAa,GAAb,CAAZ,CACA,GAAImX,QAAS,EAAb,CACAhQ,IAAItK,OAAJ,CAAY,cAAQ,CAClB,MAAOsa,QAAO/Z,IAAP,CAAYoC,KAAKyX,UAAL,CAAgB9Q,IAAhB,CAAZ,CAAP,CACD,CAFD,EAGA,SAAOgR,OAAO5P,IAAP,CAAY,GAAZ,CAAP,EANO,yFAOR,CAPD,IAOO,CACL,MAAOyH,QAAOoI,MAAP,CAAc,CAAd,EAAiBL,WAAjB,GAAiC/H,OAAOqI,SAAP,CAAiB,CAAjB,EAAoB1J,WAApB,EAAxC,CACD,CACF,CAhCM,CAAT,EAmCA;;GAGAnQ,EAAE0E,EAAF,CAAKN,MAAL,CAAY,CACV/E,OADU,kBACFc,QADE,CACQ,CAChB,KAAKsI,IAAL,CAAU,SAAClJ,GAAD,CAAMD,GAAN,CAAc,CACtBa,SAASE,IAAT,CAAcf,GAAd,CAAmBA,GAAnB,CAAwBC,GAAxB,EACD,CAFD,EAGD,CALS,CAOV0U,OAPU,mBAOA,CACR,GAAI,CAAC,KAAKtD,IAAL,EAAL,CAAkB,MAAO3Q,IAAP,CAClB,KAAKX,OAAL,CAAa,cAAQ,CACnBoB,KAAKuS,SAAL,CAAeC,GAAf,CAAmB,UAAnB,EACAxS,KAAKyT,QAAL,CAAgB,IAAhB,CACAzT,KAAKqP,KAAL,CAAWqE,MAAX,CAAoB,SAApB,CACD,CAJD,EAKA,MAAO,KAAP,CACD,CAfS,CAiBVC,MAjBU,kBAiBD,CACP,GAAI,CAAC,KAAKzD,IAAL,EAAL,CAAkB,MAAO3Q,IAAP,CAClB,KAAKX,OAAL,CAAa,cAAQ,CACnBoB,KAAKuS,SAAL,CAAepB,MAAf,CAAsB,UAAtB,EACAnR,KAAK8S,eAAL,CAAqB,UAArB,EACA9S,KAAKqP,KAAL,CAAWqE,MAAX,CAAoB,MAApB,CACD,CAJD,EAKA,MAAO,KAAP,CACD,CAzBS,CA2BV2F,EA3BU,aA2BPhY,QA3BO,CA2BG,CACX,GAAMrC,KAAMO,GAAZ,CACA,KAAKX,OAAL,CAAa,aAAO,CAClB,GAAIW,EAAEV,GAAF,EAAOmO,EAAP,CAAU3L,QAAV,CAAJ,CAAyB,CACvBrC,IAAIG,IAAJ,CAASN,GAAT,EACD,CACF,CAJD,EAKA,MAAOG,IAAP,CACD,CAnCS,CAqCVsa,IArCU,eAqCLjY,QArCK,CAqCK,CACb,GAAMrC,KAAMO,GAAZ,CACA,KAAKyI,IAAL,CAAU,SAACuR,CAAD,CAAI1a,GAAJ,CAAY,CACpB,GAAI,CAACU,EAAEV,GAAF,EAAOmO,EAAP,CAAU3L,QAAV,CAAL,CAA0B,CACxBrC,IAAIG,IAAJ,CAASN,GAAT,EACD,CACF,CAJD,EAKA,MAAOG,IAAP,CACD,CA7CS,CA+CVwa,GA/CU,cA+CNnY,QA/CM,CA+CI,CACZ,GAAIrC,KAAM,GAAIlB,SAAJ,EAAV,CACA,KAAKc,OAAL,CAAa,iBAAW,CACtB,GAAIW,EAAE4G,OAAF,EAAWoH,GAAX,CAAelM,QAAf,EAAyB,CAAzB,CAAJ,CAAiC,CAC/BrC,IAAIG,IAAJ,CAASgH,OAAT,EACD,CACF,CAJD,EAKA,MAAOnH,IAAP,CACD,CAvDS,CAyDVya,KAzDU,gBAyDJpY,QAzDI,CAyDM,CACd,GAAIrC,KAAM,GAAIlB,SAAJ,EAAV,CACA,KAAKc,OAAL,CAAa,iBAAW,CACtB,GAAI,CAACW,EAAE4G,OAAF,EAAWoH,GAAX,CAAelM,QAAf,EAAyB,CAAzB,CAAL,CAAkC,CAChCrC,IAAIG,IAAJ,CAASgH,OAAT,EACD,CACF,CAJD,EAKA,MAAOnH,IAAP,CACD,CAjES,CAmEV0a,QAnEU,mBAmEDrH,SAnEC,CAmEU,CAClB,GAAIA,SAAJ,CAAe,CACb,MAAO,MAAKgH,EAAL,CAAQ,IAAMhH,SAAd,CAAP,CACD,CAFD,IAEO,CACL,MAAO,IAAIvU,SAAJ,EAAP,CACD,CACF,CAzES,CA2EV6b,UA3EU,qBA2ECtH,SA3ED,CA2EY,CACpB,GAAIA,SAAJ,CAAe,CACb,MAAO,MAAKiH,IAAL,CAAU,IAAMjH,SAAhB,CAAP,CACD,CAFD,IAEO,CACL,MAAO,IAAIvU,SAAJ,EAAP,CACD,CACF,CAjFS,CAmFV8b,OAnFU,kBAmFF1G,SAnFE,CAmFS,CACjB,GAAIA,SAAJ,CAAe,CACb,MAAO,MAAKmG,EAAL,CAAQ,IAAMnG,SAAN,CAAkB,GAA1B,CAAP,CACD,CAFD,IAEO,CACL,MAAO,IAAIpV,SAAJ,EAAP,CACD,CACF,CAzFS,CA2FV+b,SA3FU,oBA2FA3G,SA3FA,CA2FW,CACnB,GAAIA,SAAJ,CAAe,CACb,MAAO,MAAKoG,IAAL,CAAU,IAAMpG,SAAN,CAAkB,GAA5B,CAAP,CACD,CAFD,IAEO,CACL,MAAO,IAAIpV,SAAJ,EAAP,CACD,CACF,CAjGS,CAAZ,EAoGA;;GAIA;;GAGA,GAAMgc,mBAAoB,QAApBA,kBAAoB,CAAC3T,OAAD,CAAU4T,KAAV,CAAoB,CAC5C,GAAIA,KAAJ,CAAW,CACTxa,EAAE4G,OAAF,EAAWzC,IAAX,CAAgB,OAAhB,CAAyB,IAAzB,EACAnE,EAAE4G,OAAF,EAAWzC,IAAX,CAAgB,SAAhB,CAA2B,KAA3B,EACAnE,EAAE4G,OAAF,EAAWiM,QAAX,CAAoB,OAApB,EAA6BQ,WAA7B,CAAyC,SAAzC,EACD,CAJD,IAIO,CACLrT,EAAE4G,OAAF,EAAWzC,IAAX,CAAgB,OAAhB,CAAyB,KAAzB,EACAnE,EAAE4G,OAAF,EAAWzC,IAAX,CAAgB,SAAhB,CAA2B,IAA3B,EACAnE,EAAE4G,OAAF,EAAWiM,QAAX,CAAoB,SAApB,EAA+BQ,WAA/B,CAA2C,OAA3C,EACD,CACF,CAVD,CAYA;;GAGA,GAAMoH,eAAgB,QAAhBA,cAAgB,CAAC7T,OAAD,CAAU8T,UAAV,CAAyB,CAC7C,GAAIA,UAAJ,CAAgB,CACdH,kBAAkB3T,OAAlB,CAA2B,IAA3B,EACD,CAFD,IAEO,CACL2T,kBAAkB3T,OAAlB,CAA2B,KAA3B,EACD,CACD,MAAO8T,WAAP,CACD,CAPD,CASA1a,EAAE0E,EAAF,CAAKN,MAAL,CAAY,CACVuW,WAAY,oBAASrb,GAAT,CAAc,CACxB,GAAI,KAAK,CAAL,EAAQwS,QAAR,GAAqB,OAAzB,CAAkC,OAClC,MAAO2I,eAAc,IAAd,CAAoB,KAAK,CAAL,EAAQ3I,QAAR,GAAqB,OAArB,EAAgC,KAAK,CAAL,EAAQ1R,KAA5D,CAAP,CACD,CAJS,CAMVwa,mBAAoB,6BAAW,CAC7B,GAAI,KAAK,CAAL,EAAQ9I,QAAR,GAAqB,OAAzB,CAAkC,OAClC,GAAM+I,SAAU,aAAhB,CACA,GAAMza,OAAQ,KAAK,CAAL,EAAQ0R,QAAR,GAAqB,OAArB,EAAgC,KAAK,CAAL,EAAQ1R,KAAtD,CACAqa,cAAc,IAAd,CAAoBra,MAAMgB,KAAN,CAAYyZ,OAAZ,CAApB,EACA,GAAIza,KAAJ,CAAW,CACT,MAAOqa,eAAc,IAAd,CAAoBra,MAAMgB,KAAN,CAAYyZ,OAAZ,CAApB,CAAP,CACD,CACF,CAdS,CAgBVC,aAAc,uBAAW,CACvB,GAAI,KAAK,CAAL,EAAQhJ,QAAR,GAAqB,OAAzB,CAAkC,OAClC,GAAM+I,SAAU,eAAhB,CACA,GAAMza,OAAQ,KAAK,CAAL,EAAQ0R,QAAR,GAAqB,OAArB,EAAgC,KAAK,CAAL,EAAQ1R,KAAtD,CACAqa,cAAc,IAAd,CAAoBra,MAAMgB,KAAN,CAAYyZ,OAAZ,CAApB,EACA,GAAIza,KAAJ,CAAW,CACT,MAAOqa,eAAc,IAAd,CAAoBra,MAAMgB,KAAN,CAAYyZ,OAAZ,CAApB,CAAP,CACD,CACF,CAxBS,CA0BVE,eAAgB,yBAAW,CACzB,GAAI,KAAK,CAAL,EAAQjJ,QAAR,GAAqB,OAAzB,CAAkC,OAClC,GAAMkJ,SAAU,oBAAhB,CACA,GAAM5a,OAAQ,KAAK,CAAL,EAAQ0R,QAAR,GAAqB,OAArB,EAAgC,KAAK,CAAL,EAAQ1R,KAAtD,CACAqa,cAAc,IAAd,CAAoBra,MAAMgB,KAAN,CAAY4Z,OAAZ,CAApB,EACA,GAAI5a,KAAJ,CAAW,CACT,MAAOqa,eAAc,IAAd,CAAoBra,MAAMgB,KAAN,CAAY4Z,OAAZ,CAApB,CAAP,CACD,CACF,CAlCS,CAoCVC,qBAAsB,+BAAW,CAC/B,GAAI,KAAK,CAAL,EAAQnJ,QAAR,GAAqB,OAAzB,CAAkC,OAClC,GAAM+I,SAAU,gBAAhB,CACA,GAAMza,OAAQ,KAAK,CAAL,EAAQ0R,QAAR,GAAqB,OAArB,EAAgC,KAAK,CAAL,EAAQ1R,KAAtD,CACAqa,cAAc,IAAd,CAAoBra,MAAMgB,KAAN,CAAYyZ,OAAZ,CAApB,EACA,GAAIza,KAAJ,CAAW,CACT,MAAOqa,eAAc,IAAd,CAAoBra,MAAMgB,KAAN,CAAYyZ,OAAZ,CAApB,CAAP,CACD,CACF,CA5CS,CA8CVK,iBAAkB,0BAASC,OAAT,CAAkB,CAClC,GAAI,KAAK,CAAL,EAAQrJ,QAAR,GAAqB,OAAzB,CAAkC,OAClC,GAAM+I,SAAU,gBAAhB,CACA,GAAMO,UAAW,KAAK,CAAL,EAAQhb,KAAzB,CACA,GAAI,CAACgb,QAAL,CAAe,MAAOX,eAAc,IAAd,CAAoBW,QAApB,CAAP,CACf,GAAID,SAAWC,SAASha,KAAT,CAAeyZ,OAAf,CAAf,CAAwC,CACtC,GAAIO,SAAS1c,MAAT,EAAmByc,OAAvB,CAAgC,CAC9B,MAAOV,eAAc,IAAd,CAAoBW,QAApB,CAAP,CACD,CAFD,IAEO,CACL,MAAOX,eAAc,IAAd,CAAoB,KAApB,CAAP,CACD,CACF,CAND,IAMO,CACL,MAAOA,eAAc,IAAd,CAAoBA,cAAc,IAAd,CAAoBW,SAASha,KAAT,CAAeyZ,OAAf,CAApB,CAApB,CAAP,CACD,CACF,CA5DS,CA8DVQ,cAAe,wBAAW,CACxB,GAAI,KAAK,CAAL,EAAQvJ,QAAR,GAAqB,OAAzB,CAAkC,OAClC,GAAM1R,OAAQ,KAAK,CAAL,EAAQA,KAAtB,CACA,GAAMkb,OAAQ,+CAAd,CACA,GAAIlb,KAAJ,CAAW,CACT,MAAOqa,eAAc,IAAd,CAAoBra,MAAMgB,KAAN,CAAYka,KAAZ,CAApB,CAAP,CACD,CAFD,IAEO,CACL,MAAOb,eAAc,IAAd,CAAoB,KAApB,CAAP,CACD,CACF,CAvES,CAyEVc,oBAAqB,6BAASC,GAAT,CAAc,CACjC,GAAI,KAAK,CAAL,EAAQ1J,QAAR,GAAqB,OAAzB,CAAkC,OAClC,GAAI2J,OAAQ9b,SAAZ,CACA,GAAI+b,aAAc/b,SAAlB,CACA,GAAMgc,yBAA0B,QAA1BA,wBAA0B,OAAS,CACvC,GAAIC,aAAc,EAAlB,CACAxb,MAAQA,MAAM+P,WAAN,EAAR,CACA,GAAMpR,KAAMqB,MAAM1B,MAAlB,CACA,IAAK,GAAII,GAAI,CAAb,CAAgBA,EAAIC,GAApB,CAAyBD,GAAzB,CAA8B,CAC5B,GAAI+c,WAAYzb,MAAMwZ,MAAN,CAAa9a,CAAb,CAAhB,CACA,OAAQ+c,SAAR,EACE,IAAK,GAAL,CACED,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACA,IAAK,GAAL,CACA,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACA,IAAK,GAAL,CACA,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACA,IAAK,GAAL,CACA,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACA,IAAK,GAAL,CACA,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACA,IAAK,GAAL,CACA,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACA,IAAK,GAAL,CACA,IAAK,GAAL,CACA,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACA,IAAK,GAAL,CACA,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MACF,IAAK,GAAL,CACA,IAAK,GAAL,CACA,IAAK,GAAL,CACA,IAAK,GAAL,CACEA,aAAe,GAAf,CACA,MA3EJ,CA6ED,CACD,MAAOA,YAAP,CACD,CArFD,CAsFA,GAAI,KAAK,CAAL,EAAQxb,KAAZ,CAAmB,CAEjB;;SAGA,GAAIob,GAAJ,CAAS,CACPE,YAAc,KAAK,CAAL,EAAQtb,KAAR,CAAcqF,OAAd,CAAsB,eAAtB,CAAuC,EAAvC,CAAd,CACA,MAAOgV,eAAc,IAAd,CAAoB,KAAKE,UAAL,IAAqB,CAACmB,MAAMJ,WAAN,CAA1C,CAAP,CAEA;;WAGD,CAPD,IAOO,CACLA,YAAc,KAAK,CAAL,EAAQtb,KAAR,CAAcqF,OAAd,CAAsB,eAAtB,CAAuC,EAAvC,CAAd,CACAiW,YAAcC,wBAAwBD,WAAxB,CAAd,CACAD,MAAQ,0DAAR,CACA,MAAOhB,eAAc,IAAd,CAAoBiB,YAAYta,KAAZ,CAAkBqa,KAAlB,CAApB,CAAP,CACD,CACF,CAlBD,IAkBO,CACL,MAAOhB,eAAc,IAAd,CAAoB,KAApB,CAAP,CACD,CACF,CAxLS,CA0LVsB,YAAa,sBAAW,CACtB,GAAI,KAAK,CAAL,EAAQjK,QAAR,GAAqB,OAAzB,CAAkC,OAClC,GAAI,KAAK,CAAL,EAAQ1R,KAAZ,CAAmB,CACjB,GAAM4b,KAAM,gGAAZ,CACA,MAAOvB,eAAc,IAAd,CAAoB,KAAK,CAAL,EAAQra,KAAR,CAAcgB,KAAd,CAAoB4a,GAApB,CAApB,CAAP,CACD,CAHD,IAGO,CACL,MAAOvB,eAAc,IAAd,CAAoB,KAApB,CAAP,CACD,CACF,CAlMS,CAoMVwB,YAAa,qBAASd,OAAT,CAAkB,CAC7B,GAAI,KAAK,CAAL,EAAQrJ,QAAR,GAAqB,OAAzB,CAAkC,OAClC,GAAMoK,KAAM,KAAK,CAAL,EAAQ9b,KAApB,CACA,GAAG,CAAC8b,GAAJ,CAAS,CACP,MAAOzB,eAAc,IAAd,CAAoB,KAApB,CAAP,CACD,CAFD,IAEO,IAAIyB,KAAOf,OAAX,CAAoB,CACzB,MAAOV,eAAc,IAAd,CAAoByB,KAAOf,OAA3B,CAAP,CACD,CAFM,IAEA,IAAIe,GAAJ,CAAS,CACd,MAAOzB,eAAc,IAAd,CAAoB,IAApB,CAAP,CACD,CAFM,IAEA,CACL,MAAOA,eAAc,IAAd,CAAoB,KAApB,CAAP,CACD,CACF,CAhNS,CAkNV0B,iBAAkB,2BAAW,CAC3B,GAAI,KAAK,CAAL,EAAQrK,QAAR,GAAqB,OAAzB,CAAkC,OAClC,GAAI,KAAK,CAAL,EAAQA,QAAR,GAAqB,OAArB,EAAgC,KAAK,CAAL,EAAQlR,IAAR,GAAiB,UAArD,CAAiE,CAC/D,MAAO6Z,eAAc,IAAd,CAAoB,KAAK,CAAL,EAAQ2B,OAAR,GAAoB,IAAxC,CAAP,CACD,CACF,CAvNS,CAyNVC,qBAAsB,+BAAW,CAC/B,GAAI,KAAK,CAAL,EAAQvK,QAAR,GAAqB,OAAzB,CAAkC,OAClC,GAAIwK,QAAS,KAAb,CACA,GAAI,KAAK,CAAL,EAAQxK,QAAR,GAAqB,OAArB,EAAgC,KAAK,CAAL,EAAQlR,IAAR,GAAiB,OAArD,CAA8D,CAC5DZ,EAAEyI,IAAF,CAAO,IAAP,CAAa,SAASlJ,GAAT,CAAcgd,MAAd,CAAsB,CACjC,GAAIA,OAAOH,OAAP,GAAmB,IAAvB,CAA6B,CAC3BE,OAAS,IAAT,CACD,CACF,CAJD,EAKA,MAAO7B,eAAc,IAAd,CAAoB6B,MAApB,CAAP,CACD,CACF,CApOS,CAsOVE,kBAAmB,4BAAW,CAC5B,GAAI,KAAK,CAAL,EAAQ1K,QAAR,GAAqB,QAAzB,CAAmC,CACjC,MAAO2I,eAAc,IAAd,CAAoB,KAAK,CAAL,EAAQgC,aAA5B,CAAP,CACD,CAFD,IAEO,CACL,OACD,CACF,CA5OS,CA8OVC,eAAgB,yBAAW,CACzB,GAAMC,UAAW,KAAKzZ,IAAL,CAAU,sBAAV,EAAkC,CAAlC,CAAjB,CACA,GAAIyZ,SAASP,OAAb,CAAsB,CACpB,MAAO,KAAP,CACD,CAFD,IAEO,CACL,MAAO,MAAP,CACD,CACF,CArPS,CAuPVQ,mBAAoB,6BAAW,CAC7B,GAAMC,OAAQ,KAAK3Z,IAAL,CAAU,mBAAV,CAAd,CACA,GAAI2Z,MAAM/C,EAAN,CAAS,WAAT,EAAsB,CAAtB,CAAJ,CAA8B,CAC5B,MAAO,KAAP,CACD,CAFD,IAEO,CACL,MAAO,MAAP,CACD,CACF,CA9PS,CA+PVgD,wBAAyB,kCAAW,CAClC,GAAMC,YAAa,KAAK7Z,IAAL,CAAU,sBAAV,CAAnB,CACA,GAAIkZ,SAAU,KAAd,CACAW,WAAW1d,OAAX,CAAmB,SAASsJ,IAAT,CAAe,CAChC,GAAI3I,EAAE2I,IAAF,EAAQxE,IAAR,CAAa,SAAb,CAAJ,CAA6B,CAC3BiY,QAAU,IAAV,CACD,CACF,CAJD,EAKA,GAAIA,OAAJ,CAAa,CACX,MAAO,KAAP,CACD,CAFD,IAEO,CACL,MAAO,MAAP,CACD,CACF,CA5QS,CAAZ,EA+QApc,EAAEoE,MAAF,CAAS,CACP4Y,iBAAkB,0BAASC,MAAT,CAAiBC,MAAjB,CAAyB/B,OAAzB,CAAkC,CAClD,GAAIA,SAAWnb,EAAEid,MAAF,EAAU5I,GAAV,GAAgB3V,MAAhB,CAAyByc,OAApC,EAA+Cnb,EAAEkd,MAAF,EAAU7I,GAAV,GAAgB3V,MAAhB,CAAyByc,OAA5E,CAAqF,CACnFnb,EAAEid,MAAF,EAAUpK,QAAV,CAAmB,SAAnB,EAA8BQ,WAA9B,CAA0C,OAA1C,EACArT,EAAEkd,MAAF,EAAUrK,QAAV,CAAmB,SAAnB,EAA8BQ,WAA9B,CAA0C,OAA1C,EACA,MAAO,MAAP,CACD,CAJD,IAIO,CACL,GAAMwH,SAAU,+BAAhB,CACA,GAAI,CAACA,QAAQ9X,IAAR,CAAa/C,EAAEid,MAAF,EAAU5I,GAAV,EAAb,CAAD,EAAkC,CAACwG,QAAQ9X,IAAR,CAAa/C,EAAEkd,MAAF,EAAU7I,GAAV,EAAb,CAAvC,CAAsE,MAAO,MAAP,CACtE,GAAIrU,EAAEid,MAAF,EAAU5I,GAAV,KAAoBrU,EAAEkd,MAAF,EAAU7I,GAAV,EAAxB,CAAyC,CACvCrU,EAAEid,MAAF,EAAU5J,WAAV,CAAsB,SAAtB,EAAiCR,QAAjC,CAA0C,OAA1C,EACA7S,EAAEkd,MAAF,EAAU7J,WAAV,CAAsB,SAAtB,EAAiCR,QAAjC,CAA0C,OAA1C,EACD,CAHD,IAGO,CACL7S,EAAEid,MAAF,EAAUpK,QAAV,CAAmB,SAAnB,EAA8BQ,WAA9B,CAA0C,OAA1C,EACArT,EAAEkd,MAAF,EAAUrK,QAAV,CAAmB,SAAnB,EAA8BQ,WAA9B,CAA0C,OAA1C,EACD,CACD,MAAOrT,GAAEid,MAAF,EAAU5I,GAAV,KAAoBrU,EAAEkd,MAAF,EAAU7I,GAAV,EAA3B,CACD,CACF,CAlBM,CAoBP8I,kBAAmB,2BAASC,KAAT,CAAgBC,KAAhB,CAAuB,CACxC,GAAI,CAACD,KAAD,EAAU,CAACC,KAAf,CAAsB,CACpB5G,QAAQC,KAAR,CAAc,4CAAd,EACA,OACD,CACD,GAAMtW,OAAQJ,EAAEod,KAAF,EAAS/I,GAAT,EAAd,CACA,GAAIjU,KAAJ,CAAW,CACT,MAAOqa,eAAc2C,KAAd,CAAqBhd,MAAMgB,KAAN,CAAYic,KAAZ,CAArB,CAAP,CACD,CACF,CA7BM,CA+BPC,iBAAkB,EA/BX,CAiCPC,wBAAyB,iCAASrK,IAAT,CAAemK,KAAf,CAAsB,CAC7C,KAAKC,gBAAL,CAAsB1d,IAAtB,CAA2B,CAACsT,KAAMA,IAAP,CAAamK,MAAOA,KAApB,CAA3B,EACD,CAnCM,CAAT,EAsCA;;GAGArd,EAAE0E,EAAF,CAAKN,MAAL,CAAY,CACVoZ,cADU,0BACO,CACf,GAAItK,MAAOvT,SAAX,CACA,GAAIiB,MAAOjB,SAAX,CACA,GAAIF,KAAM,EAAV,CACA,GAAMwT,KAAM,QAANA,IAAM,OAAS,CACnB,GAAIjT,EAAEY,IAAF,CAAOR,KAAP,IAAkB,OAAtB,CAA+B,CAC7B,MAAOA,OAAMf,OAAN,CAAc4T,GAAd,CAAP,CACD,CACDxT,IAAIG,IAAJ,CAAS,CACPsT,KAAMA,IADC,CAEP9S,MAAOA,KAFA,CAAT,EAID,CARD,CASA,GAAI,KAAK,CAAL,CAAJ,CAAa,CACXJ,EAAEyI,IAAF,CAAO,GAAGvJ,KAAH,CAASC,KAAT,CAAe,KAAK,CAAL,EAAQkD,QAAvB,CAAP,CAAyC,SAAC9C,GAAD,CAAMke,KAAN,CAAgB,CACvD7c,KAAO6c,MAAM7c,IAAb,CACAsS,KAAOuK,MAAMvK,IAAb,CACA,GAAIA,MAAQuK,MAAM3L,QAAN,CAAe3B,WAAf,IAAgC,UAAxC,EACF,CAACsN,MAAMvJ,QADL,EACiBtT,MAAQ,QADzB,EACqCA,MAAQ,OAD7C,EACwDA,MAAQ,QADhE,EAC4EA,MAAQ,MADpF,GAEAA,MAAQ,OAAR,EAAmBA,MAAQ,UAA5B,EAA2C6c,MAAMrB,OAFhD,CAAJ,CAE8D,CAC5DnJ,IAAIjT,EAAEyd,KAAF,EAASpJ,GAAT,EAAJ,EACD,CACF,CARD,EASD,CACD,MAAO5U,IAAP,CACD,CA1BS,CA4BV;;KAGAie,SA/BU,qBA+BE,CACV,GAAIje,KAAM,EAAV,CACA,KAAK+d,cAAL,GAAsBne,OAAtB,CAA8B,iBAAW,CACvCI,IAAIG,IAAJ,CAAS4J,mBAAmB5C,QAAQsM,IAA3B,EAAmC,GAAnC,CAAyC1J,mBAAmB5C,QAAQxG,KAA3B,CAAlD,EACD,CAFD,EAGA,MAAOX,KAAIsK,IAAJ,CAAS,GAAT,CAAP,CACD,CArCS,CAAZ,EAwCA;;GAGA/J,EAAEoE,MAAF,CAAS,CACP;;KAGAuZ,KAAM,sBAAW,CACf,GAAI,CAACnS,OAAD,EAAYxL,EAAEY,IAAF,CAAO4K,OAAP,IAAoB,OAApC,CAA6C,OAE7C,GAAIoS,UAAW,KAAf,CACA,GAAIC,UAAW,EAAf,CACA,GAAIC,UAAW,EAAf,CAEA;;OAGA,QAASC,gBAAT,CAAyBpV,IAAzB,CAA+B,CAC7B,GAAI,CAACA,IAAL,CAAW,OACX,GAAI,CAACiV,QAAL,CAAe,CACbC,SAASje,IAAT,CAAc,CACZgH,QAAS+B,KAAK/B,OADF,CAEZhG,KAAM+H,KAAK/H,IAFC,CAAd,EAIA,GAAI+H,KAAKxI,QAAT,CAAmBwI,KAAKxI,QAAL,GACpB,CAND,IAMO,CACL6d,gBAAgBhe,EAAE2I,KAAK/B,OAAP,EAAgB8M,IAAhB,CAAqB,MAArB,CAAhB,CAA8C1T,EAAE2I,KAAK/B,OAAP,EAAgByN,GAAhB,EAA9C,EACD,CACF,CAED;;OAGA,QAAS2J,gBAAT,CAAyB9K,IAAzB,CAA+B9S,KAA/B,CAAsC,CACpC0d,SAASle,IAAT,CAAc,CACZsT,KAAMA,IADM,CAEZ9S,MAAOA,KAFK,CAAd,EAID,CAED;;OAGA,QAAS6d,oBAAT,CAA6Bpe,IAA7B,CAAmC,CACjC,GAAMqe,WAAY,GAAlB,CACA,GAAIha,QAAS,EAAb,CACA,GAAIia,QAAS,EAAb,CACAte,KAAKR,OAAL,CAAa,cAAQ,CACnB,GAAMe,OAAQuI,KAAKvI,KAAnB,CACA,GAAIA,QAAU,EAAd,CAAkB,CAChB,GAAI8S,MAAOvK,KAAKuK,IAAhB,CACA,GAAIkL,WAAYlL,KAAK1Q,KAAL,CAAW0b,SAAX,CAAhB,CACA,GAAIG,YAAana,MAAjB,CACA,IAAK,GAAIoa,GAAI,CAAb,CAAgBA,EAAIF,UAAU1f,MAA9B,CAAsC4f,GAAtC,CAA2C,CACzC,GAAMC,UAAWH,UAAUE,CAAV,CAAjB,CACA,GAAIE,SAAU7e,SAAd,CACA,GAAI4e,SAAS5d,OAAT,CAAiB,IAAjB,EAAyB,CAAC,CAA1B,EAA+B2d,IAAMF,UAAU1f,MAAV,CAAmB,CAA5D,CAA+D,CAE7D8f,QAAUD,SAASE,MAAT,CAAgB,CAAhB,CAAmBF,SAAS5d,OAAT,CAAiB,GAAjB,CAAnB,CAAV,CACA,GAAI,CAAC0d,WAAWG,OAAX,CAAL,CAA0B,CACxBH,WAAWG,OAAX,EAAsB,EAAtB,CACD,CACDH,WAAWG,OAAX,EAAoB5e,IAApB,CAAyBQ,KAAzB,EACD,CAPD,IAOO,CACL,GAAIme,SAAS5d,OAAT,CAAiB,GAAjB,EAAwB,CAAC,CAA7B,CAAgC,CAC9B6d,QAAUD,SAASE,MAAT,CAAgB,CAAhB,CAAmBF,SAAS5d,OAAT,CAAiB,GAAjB,CAAnB,CAAV,CACA,GAAM+d,QAASH,SAAS9Y,OAAT,CAAiB,iBAAjB,CAAoC,EAApC,CAAf,CACA,GAAI,CAAC0Y,OAAOK,OAAP,CAAL,CAAsB,CACpBL,OAAOK,OAAP,EAAkB,EAAlB,CACD,CACD,GAAI,CAACH,WAAWG,OAAX,CAAL,CAA0B,CACxBH,WAAWG,OAAX,EAAsB,EAAtB,CACD,CACD,GAAIF,IAAMF,UAAU1f,MAAV,CAAmB,CAA7B,CAAgC,CAC9B2f,WAAWG,OAAX,EAAoB5e,IAApB,CAAyBQ,KAAzB,EACD,CAFD,IAEO,CACL,GAAI,CAAC+d,OAAOK,OAAP,EAAgBE,MAAhB,CAAL,CAA8B,CAC5BL,WAAWG,OAAX,EAAoB5e,IAApB,CAAyB,EAAzB,EACAue,OAAOK,OAAP,EAAgBE,MAAhB,EAA0BL,WAAWG,OAAX,EAAoBH,WAAWG,OAAX,EAAoB9f,MAApB,CAA6B,CAAjD,CAA1B,CACD,CACF,CACD2f,WAAaF,OAAOK,OAAP,EAAgBE,MAAhB,CAAb,CACD,CAlBD,IAkBO,CACL,GAAIJ,EAAIF,UAAU1f,MAAV,CAAmB,CAA3B,CAA8B,CAC5B,GAAI,CAAC2f,WAAWE,QAAX,CAAL,CAA2B,CACzBF,WAAWE,QAAX,EAAuB,EAAvB,CACD,CACDF,WAAaA,WAAWE,QAAX,CAAb,CACD,CALD,IAKO,CACLF,WAAWE,QAAX,EAAuBne,KAAvB,CACD,CACF,CACF,CACF,CACF,CACF,CAhDD,EAiDA,MAAO8D,OAAP,CACD,CAED;;OAGAsH,QAAQnM,OAAR,CAAgB,cAAQ,CACtB,GAAI,CAACW,EAAE2I,KAAK/B,OAAP,EAAgB,CAAhB,CAAL,CAAyB,OACzB,GAAI,CAAC+B,KAAK/H,IAAV,CAAgB,CACdod,gBAAgBhe,EAAE2I,KAAK/B,OAAP,EAAgB8M,IAAhB,CAAqB,MAArB,CAAhB,CAA8C1T,EAAE2I,KAAK/B,OAAP,EAAgByN,GAAhB,EAA9C,EACA,OACD,CACD,OAAQ1L,KAAK/H,IAAb,EACE,IAAK,UAAL,CACEgd,SAAWG,gBAAgBpV,KAAK/B,OAArB,CAA8B+B,KAAK/H,IAAnC,CAAX,CACAid,SAASje,IAAT,CAAc,CACZgH,QAAS+B,KAAK/B,OADF,CAEZhG,KAAM+H,KAAK/H,IAFC,CAAd,EAIA,OACF,IAAK,QAAL,CACEgd,SAAW5d,EAAE2I,KAAK/B,OAAP,EAAgBmU,cAAhB,EAAX,CACAgD,gBAAgBpV,IAAhB,EACA,OACF,IAAK,MAAL,CACEiV,SAAW5d,EAAE2I,KAAK/B,OAAP,EAAgBkU,YAAhB,EAAX,CACAiD,gBAAgBpV,IAAhB,EACA,OACF,IAAK,cAAL,CACEiV,SAAW5d,EAAE2I,KAAK/B,OAAP,EAAgBqU,oBAAhB,EAAX,CACA8C,gBAAgBpV,IAAhB,EACA,OACF,IAAK,UAAL,CACEiV,SAAW5d,EAAE2I,KAAK/B,OAAP,EAAgBsU,gBAAhB,CAAiCvS,KAAKgW,GAAtC,CAAX,CACAZ,gBAAgBpV,IAAhB,EACA,OACF,IAAK,OAAL,CACEiV,SAAW5d,EAAE2I,KAAK/B,OAAP,EAAgByU,aAAhB,EAAX,CACA0C,gBAAgBpV,IAAhB,EACA,OACF,IAAK,OAAL,CACEiV,SAAW5d,EAAE2I,KAAK/B,OAAP,EAAgB2U,mBAAhB,EAAX,CACAwC,gBAAgBpV,IAAhB,EACA,OACF,IAAK,KAAL,CACEiV,SAAW5d,EAAE2I,KAAK/B,OAAP,EAAgBmV,WAAhB,EAAX,CACAgC,gBAAgBpV,IAAhB,EACA,OACF,IAAK,KAAL,CACEiV,SAAW5d,EAAE2I,KAAK/B,OAAP,EAAgBqV,WAAhB,CAA4BtT,KAAKgW,GAAjC,CAAX,CACAZ,gBAAgBpV,IAAhB,EACA,OACF,IAAK,UAAL,CACEiV,SAAW5d,EAAE2I,KAAK/B,OAAP,EAAgBuV,gBAAhB,EAAX,CACA,GAAIyB,QAAJ,CAAc,CACZG,gBAAgBpV,IAAhB,EACD,CACD,OACF,IAAK,OAAL,CACEiV,SAAW5d,EAAE2I,KAAK/B,OAAP,EAAgByV,oBAAhB,EAAX,CACA0B,gBAAgBpV,IAAhB,EACA,OACF,IAAK,WAAL,CACEiV,SAAW5d,EAAE2I,KAAK/B,OAAP,EAAgB4V,iBAAhB,EAAX,CACAuB,gBAAgBpV,IAAhB,EACA,OACF,IAAK,UAAL,CACEiV,SAAW5d,EAAEgd,gBAAF,CAAmBrU,KAAK/B,OAAxB,CAAiC+B,KAAKiW,QAAtC,CAAgDjW,KAAKgW,GAArD,CAAX,CACAd,SAASje,IAAT,CAAc,CACZgH,QAAS+B,KAAK/B,OADF,CAEZgY,SAAUjW,KAAKiW,QAFH,CAGZhe,KAAM+H,KAAK/H,IAHC,CAAd,EAKA,OACF,IAAK,QAAL,CACEgd,SAAW5d,EAAE2I,KAAK/B,OAAP,EAAgB8V,cAAhB,EAAX,CACA,GAAIkB,QAAJ,CAAc,CACZG,gBAAgBpV,IAAhB,EACD,CACD,OACF,IAAK,YAAL,CACEiV,SAAW5d,EAAE2I,KAAK/B,OAAP,EAAgBgW,kBAAhB,EAAX,CACA,GAAIgB,QAAJ,CAAc,CACZG,gBAAgBpV,IAAhB,EACD,CACH,IAAK,iBAAL,CACEiV,SAAW5d,EAAE2I,KAAK/B,OAAP,EAAgBkW,uBAAhB,EAAX,CACA,GAAI+B,QAASlf,SAAb,CACA,GAAIie,QAAJ,CAAc,CACZiB,OAAS7e,EAAE2I,KAAK/B,OAAP,EAAgB1D,IAAhB,CAAqB,sBAArB,CAAT,CACA2b,OAAOxf,OAAP,CAAe,cAAQ,CACrB,GAAIsJ,KAAKyT,OAAT,CAAkB,CAChB4B,gBAAgBrV,KAAKuK,IAArB,CAA2BvK,KAAKvI,KAAhC,EACD,CACF,CAJD,EAKD,CAnFL,CAqFA,GAAIuI,KAAK/H,IAAL,CAAUQ,KAAV,CAAgB,QAAhB,CAAJ,CAA+B,CAC7B,GAAM0d,IAAK9e,EAAEsd,gBAAF,CAAmB/c,MAAnB,CAA0B,mBAAa,CAChD,MAAQwe,WAAU7L,IAAX,GAAqBvK,KAAK/H,IAAjC,CACD,CAFU,CAAX,CAGA,GAAIke,EAAJ,CAAQ,CACN,GAAM5a,QAASlE,EAAEmd,iBAAF,CAAoBxU,KAAK/B,OAAzB,CAAkCkY,GAAG,CAAH,EAAMzB,KAAxC,CAAf,CACA,GAAInZ,MAAJ,CAAY,CACV,GAAMrD,MAAKb,EAAE2I,KAAK/B,OAAP,CAAX,CACAoX,gBAAgBnd,KAAG,CAAH,EAAMqS,IAAtB,CAA4BrS,KAAG,CAAH,EAAMT,KAAlC,EACD,CAHD,IAGO,CACLyd,SAASje,IAAT,CAAc,CACZgH,QAAS+B,KAAK/B,OADF,CAEZhG,KAAM+H,KAAK/H,IAFC,CAAd,EAIA,GAAI+H,KAAKxI,QAAT,CAAmBwI,KAAKxI,QAAL,GACpB,CACF,CACF,CACF,CA7GD,EAiHA,MAAO,CACL6e,SADK,qBACO,CACV,GAAInB,SAASnf,MAAb,CAAqB,CACnB,MAAOmf,SAAP,CACD,CACF,CALI,CAOL5I,MAPK,kBAOI,CACP,GAAI4I,SAASnf,MAAb,CAAqB,CACnB,MAAO,KAAP,CACD,CACF,CAXI,CAaLugB,GAbK,eAaC,CACJ,MAAOhB,qBAAoBH,QAApB,CAAP,CACD,CAfI,CAAP,CAiBD,CArOM,CAAT,EAwOA;;GAIA9d,EAAEoE,MAAF,CAAS,CACP;;KAGA8a,YAJO,uBAIM7O,MAJN,CAIc8O,SAJd,CAIyBC,OAJzB,CAIkC,CACvC,GAAMC,KAAMF,WAAa,GAAzB,CACA;;OAGA,GAAIC,UAAY,CAAhB,CAAmB,CACjB,GAAME,KAAMha,KAAK4M,KAAL,CAAW7B,MAAX,CAAZ,CACA,MAAOkP,QAAOD,GAAP,EAAYne,QAAZ,GAAuBsE,OAAvB,CAA+B,uBAA/B,CAAwD4Z,GAAxD,CAAP,CACD,CACD,GAAID,UAAYzf,SAAhB,CAA2B,CACzB;;SAGA,GAAI,MAAO0Q,OAAP,GAAkB,QAAlB,EAA8BA,OAAS,CAAT,GAAe,CAAjD,CAAoD,CAClD,MAAOkP,QAAOlP,MAAP,EAAelP,QAAf,GAA0BsE,OAA1B,CAAkC,mBAAlC,CAAuD,KAAO4Z,GAA9D,CAAP,CACA;;WAGD,CALD,IAKO,CACL,MAAOE,QAAOlP,MAAP,EAAelP,QAAf,GAA0BsE,OAA1B,CAAkC,uBAAlC,CAA2D4Z,GAA3D,CAAP,CACD,CACD;;SAGD,CAfD,IAeO,CACL,MAAOE,QAAOlP,MAAP,EAAemP,OAAf,CAAuBJ,OAAvB,EAAgC3Z,OAAhC,CAAwC,mBAAxC,CAA6D,KAAO4Z,GAApE,CAAP,CACD,CACF,CA/BM,CAiCP;;KAGAI,GApCO,cAoCHrK,GApCG,CAoCE,CACP,GAAI3V,KAAME,SAAV,CACA,GAAIf,MAAMC,OAAN,CAAcuW,GAAd,GAAsBA,IAAI1W,MAA9B,CAAsC,CACpCe,IAAM2V,GAAN,CACD,CAFD,IAEO,CACL3V,IAAM,GAAGP,KAAH,CAASC,KAAT,CAAeC,SAAf,CAAN,CACD,CACD,MAAOK,KAAIigB,MAAJ,CAAW,SAASjL,CAAT,CAAYC,CAAZ,CAAe,CAC/B,MAAOD,GAAIC,CAAX,CACD,CAFM,CAAP,CAGD,CA9CM,CAgDP;;KAGAiL,QAnDO,mBAmDEtP,MAnDF,CAmDUuP,MAnDV,CAmDkBT,SAnDlB,CAmD6BC,OAnD7B,CAmDsC,CAC3C,GAAMS,KAAMD,QAAU,GAAtB,CACA,GAAMP,KAAMF,WAAa,GAAzB,CACA,GAAMW,KAAMV,SAAW,CAAvB,CACA,GAAIW,MAAO,KAAX,CACA,GAAIX,UAAY,CAAhB,CAAmB,CACjBW,KAAO,IAAP,CACD,CACD,yCACA,GAAMb,cAAe,QAAfA,aAAe,CAAS7O,MAAT,CAAiBgP,GAAjB,CAAsB,CACzC;;SAGA,GAAIU,IAAJ,CAAU,CACR,GAAMT,KAAMha,KAAK4M,KAAL,CAAW7B,MAAX,CAAZ,CACA,MAAOkP,QAAOD,GAAP,EAAYne,QAAZ,GAAuBsE,OAAvB,CAA+B,KAA/B,CAAsC,EAAtC,EAA0CA,OAA1C,CAAkD,uBAAlD,CAA2E4Z,GAA3E,CAAP,CACD,CAHD,IAGO,CACL;;WAGA,MAAOE,QAAOlP,MAAP,EAAemP,OAAf,CAAuBM,GAAvB,EAA4Bra,OAA5B,CAAoC,KAApC,CAA2C,EAA3C,EAA+CA,OAA/C,CAAuD,mBAAvD,CAA4E,KAAO4Z,GAAnF,CAAP,CACD,CACF,CAbD,CAcA,MAAOQ,KAAMX,aAAa7O,MAAb,CAAqBgP,GAArB,CAAb,CACD,CA3EM,CA6EP;;KAGAW,UAhFO,qBAgFIC,IAhFJ,CAgFU,CACf,GAAMvgB,MAAOugB,KAAKzd,KAAL,CAAW,GAAX,CAAb,CACA,GAAM0d,OAAQxgB,KAAK,CAAL,EAAU,GAAV,CAAgBA,KAAK,CAAL,CAA9B,CACA,GAAMygB,MAAOF,KAAKzd,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAb,CACA,MAAO0d,OAAQ,GAAR,CAAcC,IAArB,CACD,CArFM,CAuFPC,QAvFO,mBAuFEC,KAvFF,CAuFSC,KAvFT,CAuFgB,CACrB,MAAO,IAAIrb,KAAJ,CAASob,KAAT,EAAkB,GAAIpb,KAAJ,CAASqb,KAAT,CAAzB,CACD,CAzFM,CA2FP;;KAGAC,WA9FO,sBA8FK9L,CA9FL,CA8FQC,CA9FR,CA8FW,CAChB,MAAOD,GAAIC,CAAX,CACD,CAhGM,CAkGP8L,qBAlGO,gCAkGe/L,CAlGf,CAkGkBC,CAlGlB,CAkGqB,CAC1B,MAAOA,GAAID,CAAX,CACD,CApGM,CAAT,EAuGA;;GAGA,CAAC,UAAM,CACL,GAAMgM,mBAAoB,CACxB7L,GAAI,CACF8L,oBAAqB,uNADnB,CAEFC,iBAAkB,mJAFhB,CAGFC,kBAAmB,yMAHjB,CAIFC,yBAA0B,qNAJxB,CAKFC,yBAA0B,+FALxB,CAMFC,sBAAuB,sGANrB,CAOFC,cAAe,+GAPb,CAQFC,mBAAoB,kGARlB,CASFC,oBAAqB,kIATnB,CAUFC,eAAgB,sJAVd,CAWFC,cAAe,8KAXb,CAYFC,kBAAmB,yLAZjB,CAaFC,cAAe,wLAbb,CADoB,CAgBxBtM,GAAI,CACF0L,oBAAqB,oQADnB,CAEFC,iBAAkB,4LAFhB,CAGFC,kBAAmB,2OAHjB,CAIFC,yBAA0B,6PAJxB,CAKFC,yBAA0B,qJALxB,CAMFC,sBAAuB,6HANrB,CAOFC,cAAe,4IAPb,CAQFC,mBAAoB,mHARlB,CASFC,oBAAqB,wLATnB,CAUFC,eAAgB,6JAVd,CAWFC,cAAe,wNAXb,CAYFC,kBAAmB,4LAZjB,CAaFC,cAAe,6OAbb,CAhBoB,CAA1B,CAkCA,GAAIrM,QAAStV,SAAb,CACA,GAAIK,EAAE,MAAF,EAAU0T,IAAV,CAAe,MAAf,GAA0B,IAA9B,CAAoCuB,OAASwL,kBAAkB7L,EAA3B,CACpC,GAAI5U,EAAE,MAAF,EAAU0T,IAAV,CAAe,MAAf,GAA0B,IAA9B,CAAoCuB,OAASwL,kBAAkBzL,EAA3B,CAEpC;;KAGA,QAASuM,UAAT,EAAqB,CAEnB;;OAGA,GAAIC,aAAc,IAAlB,CAEA;;OAGA,GAAMC,eAAgB,CACpBC,YAAa,IADO,CAEpBC,YAAa,IAFO,CAGpBC,KAAM,IAHc,CAIpBC,SAAU,IAJU,CAKpBC,WAAY,IALQ,CAMpBC,WAAY,IANQ,CAOpBC,UAAW,IAPS,CAQpBC,WAAY,IARQ,CASpBC,QAAS,IATW,CAUpBC,MAAO,IAVa,CAWpBC,QAAS,IAXW,CAYpBC,OAAQ,IAZY,CAapBC,OAAQ,IAbY,CAcpBC,KAAM,IAdc,CAAtB,CAiBA;;OAGA,QAASC,iBAAT,CAA0BhX,OAA1B,CAAmC,CACjC,GAAI,EAAE,eAAgBgX,iBAAlB,CAAJ,CAAyC,CACvC,MAAO,IAAIA,iBAAJ,CAAqBhX,OAArB,CAAP,CACD,CACDA,UAAYA,QAAU,EAAtB,EACAA,QAAQiX,MAAR,CAAiB,CAACjX,QAAQ5H,cAAR,CAAuB,QAAvB,CAAD,CAAoC,IAApC,CAA2C,CAAC,CAAC4H,QAAQiX,MAAtE,CACAjX,QAAQkX,IAAR,CAAelX,QAAQ5H,cAAR,CAAuB,MAAvB,EAAiC4H,QAAQkX,IAAzC,CAAgD,IAA/D,CAEA,KAAKC,MAAL,CAAc,IAAd,CACA,KAAKC,OAAL,CAAe,IAAf,CAEA;;SAGA,KAAKnT,GAAL,CAAW,SAAU7I,OAAV,CAAmB0J,MAAnB,CAA2BxO,QAA3B,CAAqC,CAC9C,GAAIwO,QAAU,IAAd,CAAoB,MAAO,EAAP,CACpB,GAAI,KAAKqS,MAAL,EAAe,IAAnB,CAAyB,CACvB,KAAKA,MAAL,CAAcnB,YAAeA,aAAeqB,kBAA5C,CACD,CACD/gB,SAAW8E,OAAX,CAEA,GAAMkc,OAAQC,gBAAgBjhB,QAAhB,CAA0BwO,MAA1B,CAAd,CACA,GAAI9E,QAAQiX,MAAR,EAAkBjX,QAAQkX,IAAR,GAAiB,EAAvC,CAA2C,CACzCI,MAAMzjB,OAAN,CAAc,SAAS2jB,GAAT,CAAc,CAC1B,GAAIxX,QAAQkX,IAAR,GAAiB,EAArB,CAAyB,CACvBO,QAAQD,IAAI,CAAJ,CAAR,CAAgBxX,QAAQkX,IAAxB,EACD,CACF,CAJD,EAKD,CACDQ,YAAYJ,KAAZ,CAAmB,KAAKH,MAAxB,EACD,CAhBD,CAkBD,CAED;;OAGA,QAASE,iBAAT,EAA4B,CAC1B,GAAI7jB,SAASmkB,IAAT,EAAiB,IAArB,CAA2B,CACzB,KAAM,IAAIpb,MAAJ,CAAU,8FAAV,CAAN,CACD,CACD,GAAM+H,OAAQ9Q,SAAS6H,aAAT,CAAuB,OAAvB,CAAd,CACAiJ,MAAM4F,EAAN,CAAW,eAAiB1V,EAAE+E,IAAF,EAA5B,CACA/F,SAASmkB,IAAT,CAActS,WAAd,CAA0Bf,KAA1B,EACA,MAAOA,OAAMsT,KAAb,CACD,CAED;;OAGA,QAASL,gBAAT,CAAyBjhB,QAAzB,CAAmCwO,MAAnC,CAA2C,CACzC,GAAI,CAAC1R,MAAMC,OAAN,CAAcyR,MAAd,CAAL,CAA4BA,OAAS,CAACA,MAAD,CAAT,CAC5B,GAAMR,OAAQ,EAAd,CACA,GAAIgT,OAAQ,EAAZ,CACAxS,OAAStQ,EAAEmL,OAAF,CAAUmF,MAAV,CAAT,CACAA,OAAOjR,OAAP,CAAe,SAASgkB,KAAT,CAAgB,CAC7B,IAAK,GAAMlf,KAAX,GAAmBkf,MAAnB,CAA0B,CACxB,GAAIjjB,OAAQijB,MAAMlf,IAAN,CAAZ,CACA,GAAImf,cAAcljB,KAAd,GAAwBxB,MAAMC,OAAN,CAAcuB,KAAd,CAA5B,CAAkD,CAChD0iB,MAAQA,MAAMhjB,MAAN,CACNijB,gBAAgBQ,iBAAiBzhB,QAAjB,CAA2BqC,IAA3B,CAAhB,CAAkD/D,KAAlD,CADM,CAAR,CAGD,CAJD,IAIO,CACL,GAAI+D,OAAS,SAAb,CAAwB/D,MAAQ,IAAIA,KAAJ,CAAU,GAAlB,CACxB0P,MAAM3L,IAAN,EAAc/D,KAAd,CACD,CACF,CACF,CAZD,EAaA0iB,MAAMljB,IAAN,CAAW,CAAEkC,QAAF,CAAYgO,KAAZ,CAAX,EACA,MAAOgT,MAAP,CACD,CAED;;OAGA,QAASI,YAAT,CAAqBJ,KAArB,CAA4BM,KAA5B,CAAmC,CACjC,QAASI,UAAT,CAAmB7Z,GAAnB,CAAwB,CACtB,MAAOA,KAAIlE,OAAJ,CAAY,QAAZ,CAAsB,SAASge,EAAT,CAAa,CAAE,MAAO,IAAIA,GAAGtT,WAAH,EAAX,CAA8B,CAAnE,CAAP,CACD,CACD2S,MAAMzjB,OAAN,CAAc,SAASqkB,IAAT,CAAe,CAC3B,GAAMC,OAAQ,EAAd,CACA,IAAK,GAAMxf,KAAX,GAAmBuf,MAAK,CAAL,CAAnB,CAA4B,CAC1BC,MAAM/jB,IAAN,CAAW4jB,UAAUrf,IAAV,EAAkB,GAAlB,CAAwBuf,KAAK,CAAL,EAAQvf,IAAR,CAAnC,EACD,CACD,GAAIwf,MAAMjlB,MAAN,CAAe,CAAnB,CAAsB,CACpB0kB,MAAMQ,UAAN,CAAiBF,KAAK,CAAL,EAAU,GAAV,CAAgBC,MAAM5Z,IAAN,CAAW,GAAX,CAAhB,CAAkC,GAAnD,CAAwD,CAAxD,EACD,CACF,CARD,EASD,CAED;;OAGA,QAASwZ,iBAAT,CAA0BhV,MAA1B,CAAkCsV,KAAlC,CAAyC,CACvC,GAAMC,UAAW,QAAjB,CACA,GAAMxU,SAAUf,OAAO/L,KAAP,CAAa,GAAb,CAAhB,CAAmCgL,SAAWqW,MAAMrhB,KAAN,CAAY,GAAZ,CAA9C,CACA,MAAO8M,SAAQ9O,GAAR,CAAY,SAAS+N,MAAT,CAAiB,CAClC,MAAOf,UAAShN,GAAT,CAAa,SAASujB,IAAT,CAAe,CACjC,GAAI5E,WAAY2E,SAAS/gB,IAAT,CAAcghB,IAAd,EAAsB,EAAtB,CAA2B,GAA3C,CACA,MAAOxV,QAAS4Q,SAAT,CAAqB4E,IAA5B,CACD,CAHM,EAGJha,IAHI,CAGC,GAHD,CAAP,CAID,CALM,EAKJA,IALI,CAKC,GALD,CAAP,CAMD,CAED;;OAGA,QAASkZ,QAAT,CAAiBnT,KAAjB,CAAwB4S,IAAxB,CAA8B,CAC5B,IAAK,GAAMve,KAAX,GAAmB2L,MAAnB,CAA0B,CACxB,GAAI1P,OAAQ0P,MAAM3L,IAAN,EAAc,EAA1B,CACA,GAAI,CAAC2X,MAAM1b,KAAN,CAAD,EAAiB,CAACqhB,cAActd,IAAd,CAAtB,CAA2C,CACzC/D,MAAQA,MAAQsiB,IAAhB,CACD,CACD5S,MAAM3L,IAAN,EAAc/D,KAAd,CACD,CACD,MAAO0P,MAAP,CACD,CAED,GAAMA,OAAQ9Q,SAAS6H,aAAT,CAAuB,KAAvB,EAA8BiJ,KAA5C,CACA,QAASkU,SAAT,CAAkB7f,IAAlB,CAAwB/D,KAAxB,CAA+B,CAC7B0P,MAAM3L,IAAN,EAAc,EAAd,CACA2L,MAAM3L,IAAN,EAAc/D,KAAd,CACA,MAAO,CAAC,CAAC0P,MAAM3L,IAAN,CAAT,CACD,CAED,QAASmf,cAAT,CAAuB9hB,GAAvB,CAA4B,CAC1B,MAAOA,OAAQkC,OAAOlC,GAAP,CAAR,EAAuBkC,OAAOzE,SAAP,CAAiBkC,QAAjB,GAA8BK,IAAIL,QAAhE,CACD,CAED,GAAM8iB,aAAc,EAApB,CACAA,YAAYxU,GAAZ,CAAkB+S,mBAAmB/S,GAArC,CACA,MAAOwU,YAAP,CACD,CAEDjkB,EAAEoE,MAAF,CAAS,CAEP,qFACA8f,KAAM,CACJ1kB,MAAO,CADH,CAHC,CAOP2kB,QAAS,EAPF,CASPC,aAAc,+BAAY,CACxBpkB,EAAEoE,MAAF,CAASpE,EAAEmkB,OAAX,CAAoBhkB,QAApB,EACD,CAXM,CAaPkkB,KAAM,sBAAW,CACf;;;;;;;;;;;;;;;;;;;QAqBA;;SAGA,GAAIC,WAAY3kB,SAAhB,CACA,GAAI4kB,eAAgB5kB,SAApB,CACA,GAAI,CAAC6L,OAAL,CAAcA,QAAU,EAAV,CACd,GAAIA,SAAWA,QAAQ5E,OAAvB,CAAgC,CAC9B2d,cAAgB/Y,QAAQ5E,OAAxB,CACA0d,UAAYtkB,EAAEwL,QAAQ5E,OAAV,CAAZ,CACD,CACD,GAAI4d,YAAahZ,QAAQiZ,QAAzB,CACA,GAAIC,QAASlZ,QAAQ3L,IAArB,CACA,GAAI8kB,SAAUnZ,QAAQoZ,KAAtB,CACA,GAAIC,SAAUrZ,QAAQhM,KAAR,EAAiB,CAA/B,CACA,GAAIslB,YAAa,KAAjB,CACA,GAAIC,YAAavZ,QAAQwZ,QAAR,EAAoB,MAArC,CACA,GAAIC,UAAWzZ,QAAQmL,MAAR,EAAkB,EAAjC,CACA,GAAIuO,kBAAmB1Z,QAAQ2Z,cAAR,EAA0B,KAAjD,CACA,GAAI3Z,QAAQ2Z,cAAR,GAA2B,CAA/B,CAAkCD,iBAAmB,CAAnB,CAClC,GAAME,MAAO,aAAb,CACA,GAAIC,YAAa7Z,QAAQ8Z,QAAR,EAAoB,KAArC,CACA,GAAIC,eAAgB/Z,QAAQga,WAAR,EAAuB,KAA3C,CACA,GAAIC,cAAeja,QAAQka,UAAR,EAAsB,KAAzC,CACA,GAAMC,MAAO3lB,EAAE+E,IAAF,EAAb,CACA,GAAI6gB,UAAWpa,QAAQ8E,MAAvB,CAEA;;SAIA,GAAIuV,gBAAiBlmB,SAArB,CAEA,GAAMmmB,WAAY,QAAZA,UAAY,CAACrB,QAAD,CAAWO,QAAX,CAAwB,CACxC,GAAI,CAACP,QAAL,CAAe,CACbhO,QAAQC,KAAR,CAAczB,OAAO4L,wBAArB,EACA,OACD,CACD,GAAMkF,aAAc,oBAApB,CACAf,SAAWA,UAAY,MAAvB,CACAP,SAAShf,OAAT,CAAiB,GAAjB,CAAsB,IAAtB,EACA,yBACA,GAAMugB,UAAW,GAAIC,SAAJ,CAAajB,QAAb,CACf,YAAc,UAAd,CAA2BP,SAC1Bhf,OAD0B,CAClB,WADkB,CACL,GADK,EAE1BjD,KAF0B,CAEpB,GAFoB,EAEfuH,IAFe,CAEV,KAFU,EAG1BtE,OAH0B,CAGlBsgB,WAHkB,CAGL,QAHK,CAI3B;;aAJ2B,CAO1BvjB,KAP0B,CAOpB,IAPoB,EAOduH,IAPc,CAOT,KAPS,EAQ1BvH,KAR0B,CAQpB,IARoB,EAQduH,IARc,CAQT,UARS,CAA3B,CAQgC,KARhC,CASA,oBAVe,CAAjB,CAWA,MAAOic,SAAP,CACA,uBACD,CAtBD,CAwBA;;SAGA,GAAME,cAAe,QAAfA,aAAe,EAAM,CACzB,GAAI,CAAC5B,SAAL,CAAgB,OAChB,GAAIW,SAASvmB,MAAb,CAAqB,CACnBumB,SAAS5lB,OAAT,CAAiB,cAAQ,CACvB,GAAM8mB,QAASxd,KAAKwd,MAAL,EAAe,KAA9B,CACA,GAAIxd,MAAQA,KAAK/B,OAAL,GAAiB,MAAzB,EAAmC+B,MAAQ,CAACA,KAAK/B,OAArD,CAA8D,CAC5D0d,UAAUzX,EAAV,CAAalE,KAAK6M,KAAlB,CAAyB7M,KAAKxI,QAA9B,CAAwCgmB,MAAxC,EACD,CAFD,IAEO,CACL7B,UAAUzX,EAAV,CAAalE,KAAK6M,KAAlB,CAAyB7M,KAAK/B,OAA9B,CAAuC+B,KAAKxI,QAA5C,CAAsDgmB,MAAtD,EACD,CACF,CAPD,EAQD,CACF,CAZD,CAcA;;SAGA,GAAMC,iBAAkB,QAAlBA,gBAAkB,EAAM,CAC5B,GAAI,CAAC9B,SAAD,EAAc,CAACA,UAAU3T,IAAV,EAAf,EAAmC8U,YAAvC,CAAqD,CACnD,OACD,CACD,GAAIF,aAAJ,CAAmB,OACnB,GAAI,CAACf,UAAL,CAAiB,CACf,GAAIF,UAAU9W,QAAV,GAAqB,CAArB,GAA2B8W,UAAU9W,QAAV,GAAqB2B,EAArB,CAAwB,CAAxB,EAA2B1B,EAA3B,CAA8B,QAA9B,CAA/B,CAAwE,CACtE+W,WAAaF,UAAU9W,QAAV,CAAmB,QAAnB,EAA6BxK,IAA7B,EAAb,CACAshB,UAAU/R,KAAV,GACD,CAHD,IAGO,IAAI+R,UAAU9W,QAAV,GAAqB,CAArB,GAA2B8W,UAAU9W,QAAV,GAAqB2B,EAArB,CAAwB,CAAxB,EAA2B1B,EAA3B,CAA8B,UAA9B,CAA/B,CAA0E,CAC/E+W,WAAaF,UAAU9W,QAAV,CAAmB,UAAnB,EAA+BxK,IAA/B,EAAb,CACAshB,UAAU/R,KAAV,GACD,CAHM,IAGA,IAAI,CAAC+R,UAAU,CAAV,EAAand,UAAb,CAAwBzI,MAA7B,CAAqC,CAC1C+X,QAAQC,KAAR,CAAczB,OAAO4L,wBAArB,EACA,OACD,CAHM,IAGA,CACL,GAAIyD,UAAU,CAAV,GAAgBA,UAAU,CAAV,EAAand,UAAb,CAAwBzI,MAA5C,CAAoD,CAClD,GAAI,CAAC8lB,UAAL,CAAiBA,WAAaF,UAAUthB,IAAV,EAAb,CAClB,CACDshB,UAAU/R,KAAV,GACD,CACD,GAAIiS,UAAJ,CAAgBA,WAAaA,WAAW/e,OAAX,CAAmB2f,IAAnB,CAAyB,KAAzB,CAAb,CAEhBU,UAAUtB,UAAV,CAAsBO,UAAtB,EACD,CAnBD,IAmBO,CACLP,WAAaA,WAAW/e,OAAX,CAAmB2f,IAAnB,CAAyB,KAAzB,CAAb,CACAU,UAAUtB,UAAV,CAAsBO,UAAtB,EACD,CACD,GAAIa,UAAYpa,QAAQ5E,OAAxB,CAAiC,CAC/B,GAAI,CAAC5G,EAAEwL,QAAQ5E,OAAV,EAAmB,CAAnB,CAAL,CAA4B,OAC5B,GAAM0J,QAASiR,WAAf,CACA,GAAIvhB,EAAEY,IAAF,CAAOglB,QAAP,IAAqB,QAAzB,CAAmC,CACjC,GAAI5lB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOqM,aAArB,EACA,OACD,CACDhR,OAAOb,GAAP,CAAWjE,QAAQ5E,OAAnB,CAA4Bgf,QAA5B,EACD,CACF,CAtCD,CAuCAC,eAAiBO,iBAAjB,CAEA,GAAInB,QAAJ,CAAc,CACZiB,aAAajB,QAAb,EACD,CAED;;SAGA,GAAMf,MAAO,EAAb,CACA,GAAIrkB,MAAOF,SAAX,CAGA,GAAM0mB,aAAc,QAAdA,YAAc,CAACzB,KAAD,CAAQV,IAAR,CAAiB,CACnC,GAAIU,KAAJ,CAAW,CACTA,MAAM0B,UAAN,CAAiB1mB,IAAjB,CAAsBskB,IAAtB,EACD,CACF,CAJD,CAMAmC,YAAY1B,OAAZ,CAAqBT,IAArB,EAEAlkB,EAAEoE,MAAF,CAAS8f,IAAT,CAAe,CAEbxO,GAAIiQ,IAFS,CAIbY,MAJa,iBAIN1mB,IAJM,CAIAqR,MAJA,CAIQ,CACnB,GAAI,CAACoT,SAAL,CAAgB,CACd,GAAItkB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO0L,gBAArB,EACA,OACD,CACD,QAAS6F,aAAT,CAAsB9Y,GAAtB,CAA2B,CACzB,GAAI1N,EAAEY,IAAF,CAAO8M,GAAP,IAAgB,QAApB,CAA8B,CAC5B,MAAO+Y,QAAO/Y,GAAP,CAAP,CACD,CAFD,IAEO,CACL,MAAOA,IAAP,CACD,CACF,CACDnK,OAAOijB,YAAP,CAAsBA,YAAtB,CACA3mB,KAAO2mB,aAAa3mB,IAAb,CAAP,CACA6kB,OAAS8B,aAAa9B,MAAb,CAAT,CACA,GAAI,CAAC7kB,IAAD,EAAS,CAAC6kB,MAAV,EAAoB,CAACC,OAAzB,CAAkC,CAChC,GAAI3kB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOyL,mBAArB,EACA,OACD,CACD,GAAI,CAAC7gB,IAAD,EAAS6kB,MAAb,CAAqB,CACnB7kB,KAAO6kB,MAAP,CACD,CAFD,IAEO,IAAI,CAAC7kB,IAAD,EAAS8kB,OAAb,CAAsB,CAC3B9kB,KAAO8kB,QAAQ1F,GAAR,EAAP,CACD,CAED;;;aAKA;;aAGA,GAAMyH,oBAAqB,QAArBA,mBAAqB,MAAQ,CACjC,GAAMC,MAAO9mB,KAAOA,IAAP,CAAc6kB,MAA3B,CACAJ,UAAUjR,WAAV,CAAsB,OAAtB,EACA,GAAIiR,UAAUzkB,IAAV,CAAe,OAAf,CAAJ,CAA6B,CAC3BglB,QAAUtF,OAAO+E,UAAUzkB,IAAV,CAAe,OAAf,CAAP,CAAV,CACAG,EAAEkkB,IAAF,CAAO1kB,KAAP,CAAe+f,OAAO+E,UAAUzkB,IAAV,CAAe,OAAf,CAAP,CAAf,CACD,CAHD,IAGO,CACLglB,QAAU,CAAV,CACA7kB,EAAEkkB,IAAF,CAAO1kB,KAAP,CAAe,CAAf,CACD,CACDonB,wBAAwBD,IAAxB,EACD,CAXD,CAaA;;aAGA,GAAInC,YAAcxkB,EAAEY,IAAF,CAAO4jB,UAAP,IAAuB,QAAzC,CAAmD,CACjDqB,eAAiBC,UAAUtB,UAAV,CAAsBO,UAAtB,CAAjB,CACD,CAED;;;aAIA,GAAI/kB,EAAEY,IAAF,CAAOf,IAAP,IAAiB,OAArB,CAA8B,CAC5BG,EAAEkkB,IAAF,CAAO1kB,KAAP,CAAe0lB,kBAAoB,CAAnC,CACA,GAAIA,mBAAqB,CAAzB,CAA4BllB,EAAEkkB,IAAF,CAAO1kB,KAAP,CAAe,CAAf,CAC5B,GAAI,CAAC0R,MAAL,CAAaoT,UAAU/R,KAAV,GACb1S,KAAKR,OAAL,CAAa,cAAQ,CACnB,GAAI,CAACgmB,UAAL,CAAiB,CACf1c,KAAO3I,EAAEyJ,UAAF,CAAad,IAAb,CAAP,CACD,CACD,GAAI,CAACkd,cAAD,EAAmB,CAACJ,YAAxB,CAAsC,CACpC,GAAIzlB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO4L,wBAArB,EACA,OACD,CACDyD,UAAUpT,MAAV,CAAiB2U,eAAeld,IAAf,CAAjB,EAAwC;AACxC3I,EAAEkkB,IAAF,CAAO1kB,KAAP,EAAgB,CAAhB,CACAqlB,SAAW,CAAX,CACD,CAZD,EAaAC,WAAa,IAAb,CACA9kB,EAAEkkB,IAAF,CAAO1kB,KAAP,CAAe,CAAf,CACA8kB,UAAUjR,WAAV,CAAsB,OAAtB,EACA,OAEA;;eAGD,CAzBD,IAyBO,IAAIrT,EAAEY,IAAF,CAAOf,IAAP,IAAiB,QAAjB,EAA6BG,EAAEY,IAAF,CAAOf,IAAP,IAAiB,QAA9C,EAA0DG,EAAEY,IAAF,CAAOf,IAAP,IAAiB,QAA/E,CAAyF,CAC9F,GAAI,CAACgmB,cAAL,CAAqB,CACnB,GAAI7lB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO4L,wBAArB,EACA,OACD,CACD7gB,EAAEkkB,IAAF,CAAO1kB,KAAP,CAAe0lB,kBAAoB,CAAnC,CACA,GAAI,CAAChU,MAAL,CAAaoT,UAAU/R,KAAV,GACb,GAAI,CAAC8S,UAAL,CAAiB,CACfxlB,KAAOG,EAAEyJ,UAAF,CAAa5J,IAAb,CAAP,CACD,CACDykB,UAAUpT,MAAV,CAAiB2U,eAAehmB,IAAf,CAAjB,EAAwC;AACxCykB,UAAUjR,WAAV,CAAsB,OAAtB,EACAyR,WAAa,IAAb,CACA,OACD,CACF,CAxGY,CA0GbvS,KA1Ga,iBA0GL,CACN,GAAI,CAAC+R,SAAL,CAAgB,CACd,GAAItkB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO0L,gBAArB,EACA,OACD,CACD2D,UAAU/R,KAAV,GACD,CAjHY,CAmHbsU,UAnHa,sBAmHA,CACX,GAAI,CAACvC,SAAL,CAAgB,CACd,GAAItkB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO0L,gBAArB,EACA,OACD,CACDkE,QAAU,CAAV,CACAP,UAAUzkB,IAAV,CAAe,OAAf,CAAwB,CAAxB,EACAG,EAAEkkB,IAAF,CAAO1kB,KAAP,CAAe,CAAf,CACD,CA5HY,CA8Hb2lB,cA9Ha,yBA8HE9b,MA9HF,CA8HU,CACrB,GAAI,CAACib,SAAL,CAAgB,CACd,GAAItkB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO0L,gBAArB,EACA,OACD,CACD,GAAItX,SAAW,CAAX,EAAiBA,QAAU,CAACyS,MAAMzS,MAAN,CAAhC,CAAgD,CAC9C6b,iBAAmB7b,MAAnB,CACArJ,EAAEkkB,IAAF,CAAO1kB,KAAP,CAAe6J,MAAf,CACA6a,KAAKqC,MAAL,GACD,CACF,CAzIY,CA2IbO,UA3Ia,sBA2IA,CACX,GAAI,CAACxC,SAAL,CAAgB,CACd,GAAItkB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO0L,gBAArB,EACA,OACD,CAJD,IAIO,CACL,MAAO2D,UAAP,CACD,CACF,CAnJY,CAqJbyC,UArJa,qBAqJFngB,OArJE,CAqJO,CAClB,GAAI,CAACA,OAAL,CAAc,CACZ,GAAI5G,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO0L,gBAArB,EACA,OACD,CACD2D,UAAYtkB,EAAE4G,OAAF,CAAZ,CACA5G,EAAE4G,OAAF,EAAW2L,KAAX,GACA2T,eACA,GAAM5V,QAASiR,WAAf,CACAjR,OAAOb,GAAP,CAAW7I,OAAX,CAAoBgf,QAApB,EACD,CAhKY,CAkKboB,WAlKa,uBAkKC,CACZ,GAAI,CAACxC,UAAL,CAAiB,CACf,GAAIxkB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOoM,iBAArB,EACA,OACD,CAJD,IAIO,CACL,MAAOmD,WAAP,CACD,CACF,CA1KY,CA4KbyC,WA5Ka,sBA4KDxC,QA5KC,CA4KS,CACpB,GAAI,CAACA,QAAL,CAAe,CACb,GAAIzkB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO8L,qBAArB,EACA,OACD,CAJD,IAIO,CACLyD,WAAaC,SAAShf,OAAT,CAAiB2f,IAAjB,CAAuB,KAAvB,CAAb,CACAS,eAAiBC,UAAUtB,UAAV,CAAjB,CACD,CACF,CArLY,CAuLb0C,SAvLa,oBAuLHtC,KAvLG,CAuLI,CACf,GAAI,CAACA,KAAL,CAAY,CACV,GAAI5kB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOiM,mBAArB,EACA,OACD,CACD,KAAKiG,WAAL,CAAiBxC,OAAjB,EACAA,QAAUC,KAAV,CACA,GAAIF,MAAJ,CAAYA,OAAS/kB,SAAT,CACZ0mB,YAAY1B,OAAZ,CAAqBT,IAArB,EACD,CAjMY,CAmMbiD,WAnMa,uBAmMC,CACZ,GAAIxC,OAAJ,CAAa,CACX,GAAM9V,KAAM8V,QAAQ2B,UAAR,CAAmBc,SAAnB,CAA6B,SAASlD,IAAT,CAAe,CACtD,MAAOA,MAAKxO,EAAL,CAAUiQ,IAAjB,CACD,CAFW,CAAZ,CAGAhB,QAAQ2B,UAAR,CAAmBhmB,MAAnB,CAA0BuO,GAA1B,CAA8B,CAA9B,EACD,CACD8V,QAAUhlB,SAAV,CACD,CA3MY,CA6Mb0nB,QA7Ma,oBA6MF,CACT,GAAI1C,OAAJ,CAAa,CACX,MAAOA,QAAP,CACD,CAFD,IAEO,CACL,GAAI3kB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOkM,cAArB,EACD,CACF,CApNY,CAsNbmG,UAtNa,sBAsNA,CACX,MAAOxC,WAAP,CACD,CAxNY,CA0NbyC,OA1Na,mBA0NH,CACR,GAAI,CAACjD,SAAL,CAAgB,CACd,GAAItkB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO0L,gBAArB,EACA,OACD,CACD,GAAI2D,UAAU,CAAV,EAAa9W,QAAb,CAAsB9O,MAA1B,CAAkC,CAChC,MAAO,MAAP,CACD,CAFD,IAEO,CACL,MAAO,KAAP,CACD,CACF,CArOY,CAuOb8oB,QAvOa,mBAuOJ7Q,MAvOI,CAuOIlR,OAvOJ,CAuOa,CACxB,GAAI,CAACkR,MAAL,CAAa,CACX,GAAI3W,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO+L,aAArB,EACA,OACD,CACD,GAAIvb,OAAJ,CAAa,CACXwf,SAAWtO,OAASA,OAAOjY,MAAhB,CAAyBiY,MAAzB,CAAkC,CAACA,MAAD,CAA7C,CACD,CAFD,IAEO,CACL,GAAIA,QAAUA,OAAOjY,MAArB,CAA6B,CAC3BiY,OAAOtX,OAAP,CAAe,eAAS,CACtB4lB,SAASrlB,IAAT,CAAc4V,KAAd,EACD,CAFD,EAGD,CAJD,IAIO,IAAImB,MAAJ,CAAY,CACjBsO,SAASrlB,IAAT,CAAc+W,MAAd,EACD,CACF,CACDuP,eACD,CAzPY,CA2Pb;;WAGAjd,GA9Pa,cA8PTuM,KA9PS,CA8PF5O,OA9PE,CA8POzG,QA9PP,CA8PiB,CAC5BmkB,UAAUrb,GAAV,CAAcuM,KAAd,CAAqB5O,OAArB,CAA8BzG,QAA9B,EACD,CAhQY,CAkQbmlB,QAlQa,mBAkQJmC,OAlQI,CAkQK,CAChB,GAAIA,OAAJ,CAAa,CACXpC,WAAa,IAAb,CACD,CAFD,IAEO,CACLA,WAAa,KAAb,CACD,CACF,CAxQY,CA0QbqC,cA1Qa,0BA0QI,CACf,MAAO,CAACrC,UAAR,CACD,CA5QY,CA8QbpkB,OA9Qa,mBA8QH,CACR,GAAIyjB,MAAJ,CAAY,CACV,MAAOA,OAAP,CACD,CAFD,IAEO,CACL,GAAI1kB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOmM,aAArB,EACA,OACD,CACF,CAtRY,CAwRbuG,OAxRa,kBAwRL9nB,IAxRK,CAwRC,CACZ,GAAI,CAACA,IAAL,CAAW,CACT,GAAIG,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOgM,kBAArB,EACA,OACD,CACD,GAAIphB,IAAJ,CAAU,CACR,GAAI8kB,OAAJ,CAAaA,QAAUhlB,SAAV,CACb+kB,OAAS7kB,IAAT,CACD,CACF,CAlSY,CAoSb;;WAGA+nB,KAvSa,iBAuSL,CACNtD,UAAYtkB,EAAEukB,aAAF,CAAZ,CACA2B,eACA,GAAM5V,QAASiR,WAAf,CACAjR,OAAOb,GAAP,CAAWjE,QAAQ5E,OAAnB,CAA4Bgf,QAA5B,EACD,CA5SY,CAAf,EA+SA,MAAO1B,KAAP,CACD,CA3dM,CAAT,EA6dD,CA3qBD,IA8qBA;;GAGAlkB,EAAEoE,MAAF,CAAS,CACPyjB,UAAW,2BAAW,CACpB,GAAMC,MAAO9nB,EAAE6nB,SAAf,CACA7nB,EAAEwL,QAAQ0H,IAAV,EAAkB,UAAM,CACtB4U,KAAKtc,OAAL,CAAeA,OAAf,CACA,MAAOsc,MAAKtc,OAAL,CAAa0H,IAApB,CACA,MAAOlT,GAAEqkB,IAAF,CAAOyD,KAAKtc,OAAZ,CAAP,CACD,CAJD,CAKD,CARM,CAAT,EAWA;;GAGA,CAAC,UAAW,CACV;;KAIA,GAAIpH,QAASzE,SAAb,CACA,GAAIooB,OAAQpoB,SAAZ,CACA,GAAIqoB,OAAQroB,SAAZ,CACAyE,OAAS,gBAAS5C,GAAT,CAAc0R,IAAd,CAAoBmB,GAApB,CAAyB4T,MAAzB,CAAiC,CACxC,MAAOvkB,QAAOY,cAAP,CAAsB9C,GAAtB,CAA2B0R,IAA3B,CAAiC,CACtC9S,MAAOiU,GAD+B,CAEtC9P,SAAU,IAF4B,CAGtCE,aAAcwjB,SAAW,KAHa,CAAjC,CAAP,CAKD,CAND,CAOAD,MAAS,UAAW,CAClB,GAAI9Y,OAAQvP,SAAZ,CACA,GAAIyM,MAAOzM,SAAX,CACA,GAAIgJ,MAAOhJ,SAAX,CACA,QAASuoB,KAAT,CAAc5c,IAAd,CAAoBtJ,IAApB,CAA0B,CACxB,KAAKsJ,IAAL,CAAYA,IAAZ,CACA,KAAKtJ,IAAL,CAAYA,IAAZ,CACA,KAAK8M,IAAL,CAAYnP,SAAZ,CACD,CACD,MAAO,CACLsT,GADK,cACD3H,IADC,CACKtJ,IADL,CACW,CACd2G,KAAO,GAAIuf,KAAJ,CAAS5c,IAAT,CAAetJ,IAAf,CAAP,CACA,GAAIoK,IAAJ,CAAU,CACRA,KAAK0C,IAAL,CAAYnG,IAAZ,CACD,CAFD,IAEO,CACLuG,MAAQvG,IAAR,CACD,CACDyD,KAAOzD,IAAP,CACAA,KAAOhJ,SAAP,CACD,CAVI,CAWLM,OAXK,mBAWK,CACR,GAAIkoB,GAAIjZ,KAAR,CACAA,MAAQ9C,KAAO2b,MAAQpoB,SAAvB,CACA,MAAOwoB,CAAP,CAAU,CACRA,EAAE7c,IAAF,CAAOjL,IAAP,CAAY8nB,EAAEnmB,IAAd,EACAmmB,EAAIA,EAAErZ,IAAN,CACD,CACF,CAlBI,CAAP,CAoBD,CA7BO,EAAR,CA8BA,QAASsZ,SAAT,CAAkB9c,IAAlB,CAAwBtJ,IAAxB,CAA8B,CAC5BgmB,MAAM/U,GAAN,CAAU3H,IAAV,CAAgBtJ,IAAhB,EACA,GAAI,CAAC+lB,KAAL,CAAY,CACVA,MAAQxf,WAAWyf,MAAM/nB,OAAjB,CAAR,CACD,CACF,CACD;;KAGA,QAASooB,WAAT,CAAoB7mB,GAApB,CAAyB,CACvB,GAAI8mB,OAAQ3oB,SAAZ,CACA,GAAI4oB,gBAAkB/mB,IAAlB,mCAAkBA,GAAlB,CAAJ,CACA,GAAIA,MAAQ,IAAR,GACD+mB,WAAa,QAAb,EAAyBA,WAAa,UADrC,CAAJ,CACsD,CACpDD,MAAQ9mB,IAAI6X,IAAZ,CACD,CACD,MAAO,OAAOiP,MAAP,GAAiB,UAAjB,CAA8BA,KAA9B,CAAsC,KAA7C,CACD,CACD,QAASE,OAAT,EAAkB,CAChB,IAAK,GAAI1pB,GAAI,CAAb,CAAgBA,EAAI,KAAK2pB,KAAL,CAAW/pB,MAA/B,CAAuCI,GAAvC,CAA4C,CAC1C4pB,eAAe,IAAf,CAAsB,KAAKC,KAAL,GAAe,CAAhB,CAAqB,KAAKF,KAAL,CAAW3pB,CAAX,EAAc8pB,OAAnC,CAA6C,KAAKH,KAAL,CAAW3pB,CAAX,EAAc+pB,OAAhF,CAAyF,KAAKJ,KAAL,CAAW3pB,CAAX,CAAzF,EACD,CACD,KAAK2pB,KAAL,CAAW/pB,MAAX,CAAoB,CAApB,CACD,CACD,QAASgqB,eAAT,CAAwB1mB,IAAxB,CAA8B7B,QAA9B,CAAwCsoB,KAAxC,CAA+C,CAC7C,GAAIhpB,KAAME,SAAV,CACA,GAAI2oB,OAAQ3oB,SAAZ,CACA,GAAI,CACF,GAAIQ,WAAa,KAAjB,CAAwB,CACtBsoB,MAAMngB,MAAN,CAAatG,KAAK8mB,GAAlB,EACD,CAFD,IAEO,CACL,GAAI3oB,WAAa,IAAjB,CAAuB,CACrBV,IAAMuC,KAAK8mB,GAAX,CACD,CAFD,IAEO,CACLrpB,IAAMU,SAASE,IAAT,CAAcV,SAAd,CAAyBqC,KAAK8mB,GAA9B,CAAN,CACD,CACD,GAAIrpB,MAAQgpB,MAAMM,OAAlB,CAA2B,CACzBN,MAAMngB,MAAN,CAAa,GAAIrE,UAAJ,CAAc,qBAAd,CAAb,EACD,CAFD,IAEO,IAAIqkB,MAAQD,WAAW5oB,GAAX,CAAZ,CAA6B,CAAE;AACpC6oB,MAAMjoB,IAAN,CAAWZ,GAAX,CAAgBgpB,MAAMpgB,OAAtB,CAA+BogB,MAAMngB,MAArC,EACD,CAFM,IAEA,CACLmgB,MAAMpgB,OAAN,CAAc5I,GAAd,EACD,CACF,CACF,CAAC,MAAO6D,GAAP,CAAY,CACZmlB,MAAMngB,MAAN,CAAahF,GAAb,EACD,CACF,CACD,QAAS+E,QAAT,CAAiBygB,GAAjB,CAAsB,CACpB,GAAIR,OAAQ3oB,SAAZ,CACA,GAAIqpB,UAAWrpB,SAAf,CACA,GAAIqC,MAAO,IAAX,CACA,GAAIA,KAAKinB,SAAT,CAAoB,CAClB,OACD,CACDjnB,KAAKinB,SAAL,CAAiB,IAAjB,CACA,GAAIjnB,KAAKgnB,QAAT,CAAmB,CACjBhnB,KAAOA,KAAKgnB,QAAZ,CACD,CACD,GAAI,CACF,GAAIV,MAAQD,WAAWS,GAAX,CAAZ,CAA6B,CAAG;AAC9BV,SAAS,UAAW,CAClB,GAAMc,kBAAmB,GAAIC,aAAJ,CAAiBnnB,IAAjB,CAAzB,CACA,GAAI,CACFsmB,MAAMjoB,IAAN,CAAWyoB,GAAX,CAAgB,UAAW,CAAEzgB,QAAQlJ,KAAR,CAAc+pB,gBAAd,CAAgC9pB,SAAhC,EAA6C,CAA1E,CAA4E,UAAW,CAAEkJ,OAAOnJ,KAAP,CAAa+pB,gBAAb,CAA+B9pB,SAA/B,EAA4C,CAArI,EACD,CAAC,MAAOkE,GAAP,CAAY,CACZgF,OAAOjI,IAAP,CAAY6oB,gBAAZ,CAA8B5lB,GAA9B,EACD,CACF,CAPD,EAQD,CATD,IASO,CACLtB,KAAK8mB,GAAL,CAAWA,GAAX,CACA9mB,KAAK2mB,KAAL,CAAa,CAAb,CACA,GAAI3mB,KAAKymB,KAAL,CAAW/pB,MAAX,CAAoB,CAAxB,CAA2B,CACzB0pB,SAASI,MAAT,CAAiBxmB,IAAjB,EACD,CACF,CACF,CAAC,MAAOsB,GAAP,CAAY,CACZgF,OAAOjI,IAAP,CAAY,GAAI8oB,aAAJ,CAAiBnnB,IAAjB,CAAZ,CAAoCsB,GAApC,EACD,CACF,CACD,QAASgF,OAAT,CAAgBwgB,GAAhB,CAAqB,CACnB,GAAI9mB,MAAO,IAAX,CACA,GAAIA,KAAKinB,SAAT,CAAoB,CAClB,OACD,CACDjnB,KAAKinB,SAAL,CAAiB,IAAjB,CACA,GAAIjnB,KAAKgnB,QAAT,CAAmB,CACjBhnB,KAAOA,KAAKgnB,QAAZ,CACD,CACDhnB,KAAK8mB,GAAL,CAAWA,GAAX,CACA9mB,KAAK2mB,KAAL,CAAa,CAAb,CACA,GAAI3mB,KAAKymB,KAAL,CAAW/pB,MAAX,CAAoB,CAAxB,CAA2B,CACzB0pB,SAASI,MAAT,CAAiBxmB,IAAjB,EACD,CACF,CACD,QAASonB,gBAAT,CAAyBC,WAAzB,CAAsCjU,GAAtC,CAA2CkU,QAA3C,CAAqDC,QAArD,CAA+D,CAC7D,IAAK,GAAIhqB,KAAM,CAAf,CAAkBA,IAAM6V,IAAI1W,MAA5B,CAAoCa,KAApC,CAA2C,CACzC,CAAC,QAASiqB,KAAT,CAAcjqB,GAAd,CAAmB,CAClB8pB,YAAYhhB,OAAZ,CAAoB+M,IAAI7V,GAAJ,CAApB,EACG8Z,IADH,CACQ,SAASyP,GAAT,CAAc,CACpBQ,SAAS/pB,GAAT,CAAcupB,GAAd,EACD,CAHD,CAGGS,QAHH,EAID,CALD,EAKGhqB,GALH,EAMD,CACF,CACD,QAAS4pB,aAAT,CAAsBnnB,IAAtB,CAA4B,CAC1B,KAAKgnB,QAAL,CAAgBhnB,IAAhB,CACA,KAAKinB,SAAL,CAAiB,KAAjB,CACD,CACD,QAASQ,SAAT,CAAkBznB,IAAlB,CAAwB,CACtB,KAAK+mB,OAAL,CAAe/mB,IAAf,CACA,KAAK2mB,KAAL,CAAa,CAAb,CACA,KAAKM,SAAL,CAAiB,KAAjB,CACA,KAAKR,KAAL,CAAa,EAAb,CACA,KAAKK,GAAL,CAAWnpB,SAAX,CACD,CACD,QAASyI,QAAT,CAAiBshB,QAAjB,CAA2B,CACzB,GAAI,MAAOA,SAAP,GAAoB,UAAxB,CAAoC,CAClC,KAAM,IAAIzlB,UAAJ,CAAc,gBAAd,CAAN,CACD,CACD,GAAI,KAAK0lB,cAAL,GAAwB,CAA5B,CAA+B,CAC7B,KAAM,IAAI1lB,UAAJ,CAAc,eAAd,CAAN,CACD,CACD;;OAGA,KAAK0lB,cAAL,CAAsB,CAAtB,CACA,GAAIX,UAAW,GAAIS,SAAJ,CAAa,IAAb,CAAf,CACA,KAAKpQ,IAAL,CAAY,SAASuP,OAAT,CAAkBC,OAAlB,CAA2B,CACrC,GAAIrnB,KAAM,CACRonB,QAAS,MAAOA,QAAP,GAAmB,UAAnB,CAAgCA,OAAhC,CAA0C,IAD3C,CAERC,QAAS,MAAOA,QAAP,GAAmB,UAAnB,CAAgCA,OAAhC,CAA0C,KAF3C,CAAV,CAIA;;SAGArnB,IAAIunB,OAAJ,CAAc,GAAI,MAAK7nB,WAAT,CAAqB,QAAS0oB,aAAT,CAAsBvhB,OAAtB,CAA+BC,MAA/B,CAAuC,CACxE,GAAI,MAAOD,QAAP,GAAmB,UAAnB,EAAiC,MAAOC,OAAP,GAAkB,UAAvD,CAAmE,CACjE,KAAM,IAAIrE,UAAJ,CAAc,gBAAd,CAAN,CACD,CACDzC,IAAI6G,OAAJ,CAAcA,OAAd,CACA7G,IAAI8G,MAAJ,CAAaA,MAAb,CACD,CANa,CAAd,CAOA0gB,SAASP,KAAT,CAAe7oB,IAAf,CAAoB4B,GAApB,EACA,GAAIwnB,SAASL,KAAT,GAAmB,CAAvB,CAA0B,CACxBP,SAASI,MAAT,CAAiBQ,QAAjB,EACD,CACD,MAAOxnB,KAAIunB,OAAX,CACD,CApBD,CAqBA,KAAKc,KAAL,CAAa,SAAShB,OAAT,CAAkB,CAC7B,MAAO,MAAKxP,IAAL,CAAU1Z,SAAV,CAAqBkpB,OAArB,CAAP,CACD,CAFD,CAGA,GAAI,CACFa,SAASrpB,IAAT,CAAcV,SAAd,CAAyB,SAASmpB,GAAT,CAAc,CACrCzgB,QAAQhI,IAAR,CAAa2oB,QAAb,CAAuBF,GAAvB,EACD,CAFD,CAEG,SAASA,GAAT,CAAc,CACfxgB,OAAOjI,IAAP,CAAY2oB,QAAZ,CAAsBF,GAAtB,EACD,CAJD,EAKD,CAAC,MAAOxlB,GAAP,CAAY,CACZgF,OAAOjI,IAAP,CAAY2oB,QAAZ,CAAsB1lB,GAAtB,EACD,CACF,CACD,GAAMwmB,kBAAmB1lB,OAAO,EAAP,CAAW,aAAX,CAA0BgE,OAA1B,CAAmC,KAAnC,CAAzB,CACAhE,OAAOgE,OAAP,CAAgB,WAAhB,CAA6B0hB,gBAA7B,CAA+C,KAA/C,EAEA;;KAGA1lB,OAAO0lB,gBAAP,CAAyB,gBAAzB,CAA2C,CAA3C,CAA8C,KAA9C,EACA1lB,OAAOgE,OAAP,CAAgB,SAAhB,CAA2B,SAAS0gB,GAAT,CAAc,CACvC,GAAMO,aAAc,IAApB,CAEA;;OAGA,GAAIP,KAAO,OAAOA,IAAP,mCAAOA,GAAP,KAAe,QAAtB,EAAkCA,IAAIa,cAAJ,GAAuB,CAA7D,CAAgE,CAC9D,MAAOb,IAAP,CACD,CACD,MAAO,IAAIO,YAAJ,CAAgB,QAASK,SAAT,CAAkBrhB,OAAlB,CAA2BC,MAA3B,CAAmC,CACxD,GAAI,MAAOD,QAAP,GAAmB,UAAnB,EAAiC,MAAOC,OAAP,GAAkB,UAAvD,CAAmE,CACjE,KAAM,IAAIrE,UAAJ,CAAc,gBAAd,CAAN,CACD,CACDoE,QAAQygB,GAAR,EACD,CALM,CAAP,CAMD,CAfD,EAgBA1kB,OAAOgE,OAAP,CAAgB,QAAhB,CAA0B,SAAS0gB,GAAT,CAAc,CACtC,MAAO,IAAI,KAAJ,CAAS,QAASY,SAAT,CAAkBrhB,OAAlB,CAA2BC,MAA3B,CAAmC,CACjD,GAAI,MAAOD,QAAP,GAAmB,UAAnB,EAAiC,MAAOC,OAAP,GAAkB,UAAvD,CAAmE,CACjE,KAAM,IAAIrE,UAAJ,CAAc,gBAAd,CAAN,CACD,CACDqE,OAAOwgB,GAAP,EACD,CALM,CAAP,CAMD,CAPD,EAQA1kB,OAAOgE,OAAP,CAAgB,KAAhB,CAAuB,SAASgN,GAAT,CAAc,CACnC,GAAMiU,aAAc,IAApB,CAEA;;OAGA,GAAI3lB,OAAOzE,SAAP,CAAiBkC,QAAjB,CAA0Bd,IAA1B,CAA+B+U,GAA/B,IAAwC,gBAA5C,CAA8D,CAC5D,MAAOiU,aAAY/gB,MAAZ,CAAmB,GAAIrE,UAAJ,CAAc,cAAd,CAAnB,CAAP,CACD,CACD,GAAImR,IAAI1W,MAAJ,GAAe,CAAnB,CAAsB,CACpB,MAAO2qB,aAAYhhB,OAAZ,CAAoB,EAApB,CAAP,CACD,CACD,MAAO,IAAIghB,YAAJ,CAAgB,QAASK,SAAT,CAAkBrhB,OAAlB,CAA2BC,MAA3B,CAAmC,CACxD,GAAI,MAAOD,QAAP,GAAmB,UAAnB,EAAiC,MAAOC,OAAP,GAAkB,UAAvD,CAAmE,CACjE,KAAM,IAAIrE,UAAJ,CAAc,gBAAd,CAAN,CACD,CACD,GAAMlF,KAAMqW,IAAI1W,MAAhB,CACA,GAAIqrB,MAAO,GAAInrB,MAAJ,CAAUG,GAAV,CAAX,CACA,GAAIirB,OAAQ,CAAZ,CACAZ,gBAAgBC,WAAhB,CAA6BjU,GAA7B,CAAkC,QAASkU,SAAT,CAAkB/pB,GAAlB,CAAuBupB,GAAvB,CAA4B,CAC5DiB,KAAKxqB,GAAL,EAAYupB,GAAZ,CACA,GAAI,EAAEkB,KAAF,GAAYjrB,GAAhB,CAAqB,CACnBsJ,QAAQ0hB,IAAR,EACD,CACF,CALD,CAKGzhB,MALH,EAMD,CAbM,CAAP,CAcD,CA1BD,EA2BAlE,OAAOgE,OAAP,CAAgB,MAAhB,CAAwB,SAASgN,GAAT,CAAc,CACpC,GAAMiU,aAAc,IAApB,CAEA;;OAGA,GAAI3lB,OAAOzE,SAAP,CAAiBkC,QAAjB,CAA0Bd,IAA1B,CAA+B+U,GAA/B,IAAwC,gBAA5C,CAA8D,CAC5D,MAAOiU,aAAY/gB,MAAZ,CAAmB,GAAIrE,UAAJ,CAAc,cAAd,CAAnB,CAAP,CACD,CACD,MAAO,IAAIolB,YAAJ,CAAgB,QAASK,SAAT,CAAkBrhB,OAAlB,CAA2BC,MAA3B,CAAmC,CACxD,GAAI,MAAOD,QAAP,GAAmB,UAAnB,EAAiC,MAAOC,OAAP,GAAkB,UAAvD,CAAmE,CACjE,KAAM,IAAIrE,UAAJ,CAAc,gBAAd,CAAN,CACD,CACDmlB,gBAAgBC,WAAhB,CAA6BjU,GAA7B,CAAkC,QAASkU,SAAT,CAAkB/pB,GAAlB,CAAuBupB,GAAvB,CAA4B,CAC5DzgB,QAAQygB,GAAR,EACD,CAFD,CAEGxgB,MAFH,EAGD,CAPM,CAAP,CAQD,CAjBD,EAmBA;;KAGA,GAAI,WAAa/E,OAAb,EAAuB,WAAaA,QAAO6E,OAA3C,EAAsD,UAAY7E,QAAO6E,OAAzE,EAAoF,OAAS7E,QAAO6E,OAApG,EAA+G,QAAU7E,QAAO6E,OAApI,CAA6I,CAC3I,OACD,CAFD,IAEO,CAEL;;OAGA,MAAO7E,QAAO6E,OAAP,CAAiBA,OAAxB,CACD,CACF,CAxSD,IA0SA;;GAGA,CAAC,UAAW,CAEV;;;KAIApI,EAAEoE,MAAF,CAAS,CACP,kCACA6lB,eAAgB,EAFT,CAGP,mBACAC,MAAO,eAASlO,GAAT,CAAcmO,IAAd,CAAoB,CACzB,GAAIC,UAAW,CACb3e,QAAS,IADI,CAEb4e,aAAc,UAFD,CAGbC,MAAO,IAHM,CAAf,CAKA,GAAIH,IAAJ,CAAU,CACRnqB,EAAEoE,MAAF,CAASgmB,QAAT,CAAmBD,IAAnB,EACD,CACD;;SAGA,QAASI,qBAAT,EAAgC,CAC9B,GAAMF,cAAeD,SAASC,YAAT,CAAwB,GAAxB,EAA+BrqB,EAAEiqB,cAAF,CAAiBvrB,MAAjB,CAA0B,CAAzD,CAArB,CACAsB,EAAEiqB,cAAF,CAAiBrqB,IAAjB,CAAsByqB,YAAtB,EACA,MAAOA,aAAP,CACD,CACD,GAAMA,cAAeE,sBAArB,CACA;;SAGA,MAAO,IAAIniB,QAAJ,CAAY,SAASC,OAAT,CAAkBC,MAAlB,CAA0B,CAC3C,GAAImD,SAAU9L,SAAd,CACA4D,OAAO2mB,KAAP,CAAe3mB,OAAO2mB,KAAP,EAAgB,EAA/B,CACA3mB,OAAO2mB,KAAP,CAAaG,YAAb,EAA6B,SAASG,QAAT,CAAmB,CAC9CniB,QAAQ,CACNoiB,GAAI,IADE,CAENC,KAAM,eAAW,CACf,MAAOtiB,SAAQC,OAAR,CAAgBmiB,QAAhB,CAAP,CACD,CAJK,CAAR,EAMA,GAAI/e,OAAJ,CAAa,CACXM,aAAaN,OAAb,EACD,CACF,CAVD,CAWA;;WAGA,GAAMhE,QAASzI,SAAS6H,aAAT,CAAuB,QAAvB,CAAf,CACAY,OAAOS,KAAP,CAAe,IAAf,CACAT,OAAOkjB,KAAP,CAAe,IAAf,CACAljB,OAAOH,GAAP,CAAa0U,KAAOA,IAAIrb,OAAJ,CAAY,GAAZ,EAAmB,CAAC,CAApB,CAAwB,GAAxB,CAA8B,GAArC,EAA4C,iBAA5C,CAAgE0pB,YAA7E,CACArrB,SAASoE,IAAT,CAAcyN,WAAd,CAA0BpJ,MAA1B,EACA;;WAGAc,WAAW,UAAW,CACpBd,OAAO3G,UAAP,CAAkB8R,WAAlB,CAA8BnL,MAA9B,EACD,CAFD,EAGA;;WAGA,GAAI2iB,SAASE,KAAb,CAAoB,CAClB,GAAMzb,KAAM7O,EAAEiqB,cAAF,CAAiBtpB,OAAjB,CAAyB0pB,YAAzB,CAAZ,CACArqB,EAAEiqB,cAAF,CAAiB3pB,MAAjB,CAAwBuO,GAAxB,CAA6B,CAA7B,EACD,CACD;;WAGApD,QAAUlD,WAAW,UAAW,CAC9BD,OAAO,GAAIP,MAAJ,CAAU,oBAAsBiU,GAAtB,CAA4B,YAAtC,CAAP,EACD,CAFS,CAEPoO,SAAS3e,OAFF,CAAV,CAGD,CAzCM,CAAP,CA0CD,CAnEM,CAoEP;;;;OAKAif,KAAM,cAASF,QAAT,CAAmB,CACvB,MAAOA,UAASE,IAAT,EAAP,CACD,CA3EM,CAAT,EA6EA,GAAInnB,QAAUA,OAAOqnB,KAArB,CAA4B,CAC1B,OACD,CACD,GAAM5oB,MAAOuB,MAAb,CAEA,QAASsnB,cAAT,CAAuB3X,IAAvB,CAA6B,CAC3B,GAAI,MAAOA,KAAP,GAAgB,QAApB,CAA8B,CAC5BA,KAAOuT,OAAOvT,IAAP,CAAP,CACD,CACD,GAAI,6BAA6BnQ,IAA7B,CAAkCmQ,IAAlC,CAAJ,CAA6C,CAC3C,KAAM,IAAIjP,UAAJ,CAAc,wCAAd,CAAN,CACD,CACD,MAAOiP,MAAK/C,WAAL,EAAP,CACD,CAED,QAAS2a,eAAT,CAAwB1qB,KAAxB,CAA+B,CAC7B,GAAI,MAAOA,MAAP,GAAiB,QAArB,CAA+B,CAC7BA,MAAQqmB,OAAOrmB,KAAP,CAAR,CACD,CACD,MAAOA,MAAP,CACD,CAED,QAAS2qB,QAAT,CAAiBC,OAAjB,CAA0B,CACxB,KAAKxqB,GAAL,CAAW,EAAX,CAEA,GAAIwqB,kBAAmBD,QAAvB,CAAgC,CAC9BC,QAAQ3rB,OAAR,CAAgB,SAASe,KAAT,CAAgB8S,IAAhB,CAAsB,CACpC,KAAKhC,MAAL,CAAYgC,IAAZ,CAAkB9S,KAAlB,EACD,CAFD,CAEG,IAFH,EAID,CALD,IAKO,IAAI4qB,OAAJ,CAAa,CAClBtnB,OAAOunB,mBAAP,CAA2BD,OAA3B,EAAoC3rB,OAApC,CAA4C,SAAS6T,IAAT,CAAe,CACzD,KAAKhC,MAAL,CAAYgC,IAAZ,CAAkB8X,QAAQ9X,IAAR,CAAlB,EACD,CAFD,CAEG,IAFH,EAGD,CACF,CAED6X,QAAQ9rB,SAAR,CAAkBiS,MAAlB,CAA2B,SAASgC,IAAT,CAAe9S,KAAf,CAAsB,CAC/C8S,KAAO2X,cAAc3X,IAAd,CAAP,CACA9S,MAAQ0qB,eAAe1qB,KAAf,CAAR,CACA,GAAI8qB,MAAO,KAAK1qB,GAAL,CAAS0S,IAAT,CAAX,CACA,GAAI,CAACgY,IAAL,CAAW,CACTA,KAAO,EAAP,CACA,KAAK1qB,GAAL,CAAS0S,IAAT,EAAiBgY,IAAjB,CACD,CACDA,KAAKtrB,IAAL,CAAUQ,KAAV,EACD,CATD,CAWA2qB,QAAQ9rB,SAAR,CAAkB,QAAlB,EAA8B,SAASiU,IAAT,CAAe,CAC3C,MAAO,MAAK1S,GAAL,CAASqqB,cAAc3X,IAAd,CAAT,CAAP,CACD,CAFD,CAIA6X,QAAQ9rB,SAAR,CAAkBggB,GAAlB,CAAwB,SAAS/L,IAAT,CAAe,CACrC,GAAMiY,QAAS,KAAK3qB,GAAL,CAASqqB,cAAc3X,IAAd,CAAT,CAAf,CACA,MAAOiY,QAASA,OAAO,CAAP,CAAT,CAAqB,IAA5B,CACD,CAHD,CAKAJ,QAAQ9rB,SAAR,CAAkBmsB,MAAlB,CAA2B,SAASlY,IAAT,CAAe,CACxC,MAAO,MAAK1S,GAAL,CAASqqB,cAAc3X,IAAd,CAAT,GAAiC,EAAxC,CACD,CAFD,CAIA6X,QAAQ9rB,SAAR,CAAkB+O,GAAlB,CAAwB,SAASkF,IAAT,CAAe,CACrC,MAAO,MAAK1S,GAAL,CAASoD,cAAT,CAAwBinB,cAAc3X,IAAd,CAAxB,CAAP,CACD,CAFD,CAIA6X,QAAQ9rB,SAAR,CAAkB+jB,GAAlB,CAAwB,SAAS9P,IAAT,CAAe9S,KAAf,CAAsB,CAC5C,KAAKI,GAAL,CAASqqB,cAAc3X,IAAd,CAAT,EAAgC,CAAC4X,eAAe1qB,KAAf,CAAD,CAAhC,CACD,CAFD,CAIA2qB,QAAQ9rB,SAAR,CAAkBI,OAAlB,CAA4B,SAASc,QAAT,CAAmBkrB,OAAnB,CAA4B,CACtD3nB,OAAOunB,mBAAP,CAA2B,KAAKzqB,GAAhC,EAAqCnB,OAArC,CAA6C,SAAS6T,IAAT,CAAe,CAC1D,KAAK1S,GAAL,CAAS0S,IAAT,EAAe7T,OAAf,CAAuB,SAASe,KAAT,CAAgB,CACrCD,SAASE,IAAT,CAAcgrB,OAAd,CAAuBjrB,KAAvB,CAA8B8S,IAA9B,CAAoC,IAApC,EACD,CAFD,CAEG,IAFH,EAGD,CAJD,CAIG,IAJH,EAKD,CAND,CAQA,QAASoY,SAAT,CAAkBloB,IAAlB,CAAwB,CACtB,GAAIA,KAAKmoB,QAAT,CAAmB,CACjB,MAAOnjB,SAAQE,MAAR,CAAe,GAAIrE,UAAJ,CAAc,cAAd,CAAf,CAAP,CACD,CACDb,KAAKmoB,QAAL,CAAgB,IAAhB,CACD,CAED,QAASC,gBAAT,CAAyBC,MAAzB,CAAiC,CAC/B,MAAO,IAAIrjB,QAAJ,CAAY,SAASC,OAAT,CAAkBC,MAAlB,CAA0B,CAC3CmjB,OAAOxjB,MAAP,CAAgB,UAAW,CACzBI,QAAQojB,OAAOvnB,MAAf,EACD,CAFD,CAGAunB,OAAOlkB,OAAP,CAAiB,UAAW,CAC1Be,OAAOmjB,OAAO/U,KAAd,EACD,CAFD,CAGD,CAPM,CAAP,CAQD,CAED,QAASgV,sBAAT,CAA+BC,IAA/B,CAAqC,CACnC,GAAMF,QAAS,GAAIG,WAAJ,EAAf,CACAH,OAAOI,iBAAP,CAAyBF,IAAzB,EACA,MAAOH,iBAAgBC,MAAhB,CAAP,CACD,CAED,QAASK,eAAT,CAAwBH,IAAxB,CAA8B,CAC5B,GAAMF,QAAS,GAAIG,WAAJ,EAAf,CACAH,OAAOM,UAAP,CAAkBJ,IAAlB,EACA,MAAOH,iBAAgBC,MAAhB,CAAP,CACD,CAED,GAAMO,SAAU,CACdL,KAAM,cAAgB3pB,KAAhB,EAAwB,QAAUA,KAAlC,EAA2C,UAAW,CAC1D,GAAI,CACF,GAAIiqB,KAAJ,GACA,MAAO,KAAP,CACD,CAAC,MAAM5V,CAAN,CAAS,CACT,MAAO,MAAP,CACD,CACF,CAP+C,EADlC,CASd6V,SAAU,YAAclqB,KATV,CAUdmqB,YAAa,eAAiBnqB,KAVhB,CAAhB,CAaA,QAASoqB,KAAT,EAAgB,CACd,KAAKb,QAAL,CAAgB,KAAhB,CAGA,KAAKc,SAAL,CAAiB,SAASjpB,IAAT,CAAe,CAC9B,KAAKkpB,SAAL,CAAiBlpB,IAAjB,CACA,GAAI,MAAOA,KAAP,GAAgB,QAApB,CAA8B,CAC5B,KAAKmpB,SAAL,CAAiBnpB,IAAjB,CACD,CAFD,IAEO,IAAI4oB,QAAQL,IAAR,EAAgBM,KAAKhtB,SAAL,CAAeutB,aAAf,CAA6BppB,IAA7B,CAApB,CAAwD,CAC7D,KAAKqpB,SAAL,CAAiBrpB,IAAjB,CACD,CAFM,IAEA,IAAI4oB,QAAQE,QAAR,EAAoBQ,SAASztB,SAAT,CAAmButB,aAAnB,CAAiCppB,IAAjC,CAAxB,CAAgE,CACrE,KAAKupB,aAAL,CAAqBvpB,IAArB,CACD,CAFM,IAEA,IAAI,CAACA,IAAL,CAAW,CAChB,KAAKmpB,SAAL,CAAiB,EAAjB,CACD,CAFM,IAEA,IAAIP,QAAQG,WAAR,EAAuBS,YAAY3tB,SAAZ,CAAsButB,aAAtB,CAAoCppB,IAApC,CAA3B,CAAsE,CAC3E;;;WAID,CALM,IAKA,CACL,KAAM,IAAI2E,MAAJ,CAAU,2BAAV,CAAN,CACD,CACD,GAAI,CAAC,KAAKijB,OAAL,CAAa/L,GAAb,CAAiB,cAAjB,CAAL,CAAuC,CACrC,GAAI,MAAO7b,KAAP,GAAgB,QAApB,CAA8B,CAC5B,KAAK4nB,OAAL,CAAahI,GAAb,CAAiB,cAAjB,CAAiC,0BAAjC,EACD,CAFD,IAEO,IAAI,KAAKyJ,SAAL,EAAkB,KAAKA,SAAL,CAAe7rB,IAArC,CAA2C,CAChD,KAAKoqB,OAAL,CAAahI,GAAb,CAAiB,cAAjB,CAAiC,KAAKyJ,SAAL,CAAe7rB,IAAhD,EACD,CACF,CACF,CAzBD,CA2BA,GAAIorB,QAAQL,IAAZ,CAAkB,CAChB,KAAKA,IAAL,CAAY,UAAW,CACrB,GAAMkB,UAAWvB,SAAS,IAAT,CAAjB,CACA,GAAIuB,QAAJ,CAAc,CACZ,MAAOA,SAAP,CACD,CAED,GAAI,KAAKJ,SAAT,CAAoB,CAClB,MAAOrkB,SAAQC,OAAR,CAAgB,KAAKokB,SAArB,CAAP,CACD,CAFD,IAEO,IAAI,KAAKE,aAAT,CAAwB,CAC7B,KAAM,IAAI5kB,MAAJ,CAAU,sCAAV,CAAN,CACD,CAFM,IAEA,CACL,MAAOK,SAAQC,OAAR,CAAgB,GAAI4jB,KAAJ,CAAS,CAAC,KAAKM,SAAN,CAAT,CAAhB,CAAP,CACD,CACF,CAbD,CAeA,KAAKJ,WAAL,CAAmB,UAAW,CAC5B,MAAO,MAAKR,IAAL,GAAYtS,IAAZ,CAAiBqS,qBAAjB,CAAP,CACD,CAFD,CAIA,KAAKjZ,IAAL,CAAY,UAAW,CACrB,GAAMoa,UAAWvB,SAAS,IAAT,CAAjB,CACA,GAAIuB,QAAJ,CAAc,CACZ,MAAOA,SAAP,CACD,CAED,GAAI,KAAKJ,SAAT,CAAoB,CAClB,MAAOX,gBAAe,KAAKW,SAApB,CAAP,CACD,CAFD,IAEO,IAAI,KAAKE,aAAT,CAAwB,CAC7B,KAAM,IAAI5kB,MAAJ,CAAU,sCAAV,CAAN,CACD,CAFM,IAEA,CACL,MAAOK,SAAQC,OAAR,CAAgB,KAAKkkB,SAArB,CAAP,CACD,CACF,CAbD,CAcD,CAlCD,IAkCO,CACL,KAAK9Z,IAAL,CAAY,UAAW,CACrB,GAAMoa,UAAWvB,SAAS,IAAT,CAAjB,CACA,MAAOuB,UAAWA,QAAX,CAAsBzkB,QAAQC,OAAR,CAAgB,KAAKkkB,SAArB,CAA7B,CACD,CAHD,CAID,CAED,GAAIP,QAAQE,QAAZ,CAAsB,CACpB,KAAKA,QAAL,CAAgB,UAAW,CACzB,MAAO,MAAKzZ,IAAL,GAAY4G,IAAZ,CAAiByT,MAAjB,CAAP,CACD,CAFD,CAGD,CAED,KAAKpC,IAAL,CAAY,UAAW,CACrB,MAAO,MAAKjY,IAAL,GAAY4G,IAAZ,CAAiB3X,KAAKoI,KAAtB,CAAP,CACD,CAFD,CAIA,MAAO,KAAP,CACD,CAED;;KAGA,GAAMijB,SAAU,CAAC,QAAD,CAAW,KAAX,CAAkB,MAAlB,CAA0B,SAA1B,CAAqC,MAArC,CAA6C,KAA7C,CAAhB,CAEA,QAASC,gBAAT,CAAyB9T,MAAzB,CAAiC,CAC/B,GAAM+T,SAAU/T,OAAOK,WAAP,EAAhB,CACA,MAAQwT,SAAQpsB,OAAR,CAAgBssB,OAAhB,EAA2B,CAAC,CAA7B,CAAkCA,OAAlC,CAA4C/T,MAAnD,CACD,CAED,QAASgU,QAAT,CAAiB9P,KAAjB,CAAwB5R,OAAxB,CAAiC,CAC/BA,QAAUA,SAAW,EAArB,CACA,GAAIpI,MAAOoI,QAAQpI,IAAnB,CACA,GAAI8pB,QAAQjuB,SAAR,CAAkButB,aAAlB,CAAgCpP,KAAhC,CAAJ,CAA4C,CAC1C,GAAIA,MAAMmO,QAAV,CAAoB,CAClB,KAAM,IAAItnB,UAAJ,CAAc,cAAd,CAAN,CACD,CACD,KAAK+X,GAAL,CAAWoB,MAAMpB,GAAjB,CACA,KAAKmR,WAAL,CAAmB/P,MAAM+P,WAAzB,CACA,GAAI,CAAC3hB,QAAQwf,OAAb,CAAsB,CACpB,KAAKA,OAAL,CAAe,GAAID,QAAJ,CAAY3N,MAAM4N,OAAlB,CAAf,CACD,CACD,KAAK9R,MAAL,CAAckE,MAAMlE,MAApB,CACA,KAAKkU,IAAL,CAAYhQ,MAAMgQ,IAAlB,CACA,GAAI,CAAChqB,IAAL,CAAW,CACTA,KAAOga,MAAMkP,SAAb,CACAlP,MAAMmO,QAAN,CAAiB,IAAjB,CACD,CACF,CAfD,IAeO,CACL,KAAKvP,GAAL,CAAWoB,KAAX,CACD,CAED,KAAK+P,WAAL,CAAmB3hB,QAAQ2hB,WAAR,EAAuB,KAAKA,WAA5B,EAA2C,MAA9D,CACA,GAAI3hB,QAAQwf,OAAR,EAAmB,CAAC,KAAKA,OAA7B,CAAsC,CACpC,KAAKA,OAAL,CAAe,GAAID,QAAJ,CAAYvf,QAAQwf,OAApB,CAAf,CACD,CACD,KAAK9R,MAAL,CAAc8T,gBAAgBxhB,QAAQ0N,MAAR,EAAkB,KAAKA,MAAvB,EAAiC,KAAjD,CAAd,CACA,KAAKkU,IAAL,CAAY5hB,QAAQ4hB,IAAR,EAAgB,KAAKA,IAArB,EAA6B,IAAzC,CACA,KAAKC,QAAL,CAAgB,IAAhB,CAEA,GAAI,CAAC,KAAKnU,MAAL,GAAgB,KAAhB,EAAyB,KAAKA,MAAL,GAAgB,MAA1C,GAAqD9V,IAAzD,CAA+D,CAC7D,KAAM,IAAIa,UAAJ,CAAc,2CAAd,CAAN,CACD,CACD,KAAKooB,SAAL,CAAejpB,IAAf,EACD,CAED8pB,QAAQjuB,SAAR,CAAkBoS,KAAlB,CAA0B,UAAW,CACnC,MAAO,IAAI6b,QAAJ,CAAY,IAAZ,CAAP,CACD,CAFD,CAIA,QAASJ,OAAT,CAAgB1pB,IAAhB,CAAsB,CACpB,GAAMkqB,MAAO,GAAIZ,SAAJ,EAAb,CACAtpB,KAAKN,IAAL,GAAYN,KAAZ,CAAkB,GAAlB,EAAuBnD,OAAvB,CAA+B,SAASkuB,KAAT,CAAgB,CAC7C,GAAIA,KAAJ,CAAW,CACT,GAAM/qB,OAAQ+qB,MAAM/qB,KAAN,CAAY,GAAZ,CAAd,CACA,GAAM0Q,MAAO1Q,MAAMtC,KAAN,GAAcuF,OAAd,CAAsB,KAAtB,CAA6B,GAA7B,CAAb,CACA,GAAMrF,OAAQoC,MAAMuH,IAAN,CAAW,GAAX,EAAgBtE,OAAhB,CAAwB,KAAxB,CAA+B,GAA/B,CAAd,CACA6nB,KAAKpc,MAAL,CAAYsc,mBAAmBta,IAAnB,CAAZ,CAAsCsa,mBAAmBptB,KAAnB,CAAtC,EACD,CACF,CAPD,EAQA,MAAOktB,KAAP,CACD,CAED,QAAStC,QAAT,CAAiByC,GAAjB,CAAsB,CACpB,GAAMtK,MAAO,GAAI4H,QAAJ,EAAb,CACA,GAAMpH,OAAQ8J,IAAIC,qBAAJ,GAA4B5qB,IAA5B,GAAmCN,KAAnC,CAAyC,IAAzC,CAAd,CACAmhB,MAAMtkB,OAAN,CAAc,SAASsuB,MAAT,CAAiB,CAC7B,GAAMnrB,OAAQmrB,OAAO7qB,IAAP,GAAcN,KAAd,CAAoB,GAApB,CAAd,CACA,GAAMkG,KAAMlG,MAAMtC,KAAN,GAAc4C,IAAd,EAAZ,CACA,GAAM1C,OAAQoC,MAAMuH,IAAN,CAAW,GAAX,EAAgBjH,IAAhB,EAAd,CACAqgB,KAAKjS,MAAL,CAAYxI,GAAZ,CAAiBtI,KAAjB,EACD,CALD,EAMA,MAAO+iB,KAAP,CACD,CAEDiJ,KAAK/rB,IAAL,CAAU6sB,QAAQjuB,SAAlB,EAEA,QAAS2uB,SAAT,CAAkBC,QAAlB,CAA4BriB,OAA5B,CAAqC,CACnC,GAAI,CAACA,OAAL,CAAc,CACZA,QAAU,EAAV,CACD,CAED,KAAK5K,IAAL,CAAY,SAAZ,CACA,KAAKktB,MAAL,CAActiB,QAAQsiB,MAAtB,CACA,KAAKrD,EAAL,CAAU,KAAKqD,MAAL,EAAe,GAAf,EAAsB,KAAKA,MAAL,CAAc,GAA9C,CACA,KAAKC,UAAL,CAAkBviB,QAAQuiB,UAA1B,CACA,KAAK/C,OAAL,CAAexf,QAAQwf,OAAR,WAA2BD,QAA3B,CAAqCvf,QAAQwf,OAA7C,CAAuD,GAAID,QAAJ,CAAYvf,QAAQwf,OAApB,CAAtE,CACA,KAAKhP,GAAL,CAAWxQ,QAAQwQ,GAAR,EAAe,EAA1B,CACA,KAAKqQ,SAAL,CAAewB,QAAf,EACD,CAEDzB,KAAK/rB,IAAL,CAAUutB,SAAS3uB,SAAnB,EAEA2uB,SAAS3uB,SAAT,CAAmBoS,KAAnB,CAA2B,UAAW,CACpC,MAAO,IAAIuc,SAAJ,CAAa,KAAKtB,SAAlB,CAA6B,CAClCwB,OAAQ,KAAKA,MADqB,CAElCC,WAAY,KAAKA,UAFiB,CAGlC/C,QAAS,GAAID,QAAJ,CAAY,KAAKC,OAAjB,CAHyB,CAIlChP,IAAK,KAAKA,GAJwB,CAA7B,CAAP,CAMD,CAPD,CASA4R,SAASlX,KAAT,CAAiB,UAAW,CAC1B,GAAM8T,UAAW,GAAIoD,SAAJ,CAAa,IAAb,CAAmB,CAACE,OAAQ,CAAT,CAAYC,WAAY,EAAxB,CAAnB,CAAjB,CACAvD,SAAS5pB,IAAT,CAAgB,OAAhB,CACA,MAAO4pB,SAAP,CACD,CAJD,CAMA,GAAMwD,kBAAmB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAAgB,GAAhB,CAAqB,GAArB,CAAzB,CAEAJ,SAASK,QAAT,CAAoB,SAASjS,GAAT,CAAc8R,MAAd,CAAsB,CACxC,GAAIE,iBAAiBrtB,OAAjB,CAAyBmtB,MAAzB,IAAqC,CAAC,CAA1C,CAA6C,CAC3C,KAAM,IAAII,WAAJ,CAAe,qBAAf,CAAN,CACD,CAED,MAAO,IAAIN,SAAJ,CAAa,IAAb,CAAmB,CAACE,OAAQA,MAAT,CAAiB9C,QAAS,CAACmD,SAAUnS,GAAX,CAA1B,CAAnB,CAAP,CACD,CAND,CAQAha,KAAK+oB,OAAL,CAAeA,OAAf,CACA/oB,KAAKkrB,OAAL,CAAeA,OAAf,CACAlrB,KAAK4rB,QAAL,CAAgBA,QAAhB,CAEA5rB,KAAK4oB,KAAL,CAAa,SAASxN,KAAT,CAAgBgR,IAAhB,CAAsB,CACjC,MAAO,IAAIhmB,QAAJ,CAAY,SAASC,OAAT,CAAkBC,MAAlB,CAA0B,CAC3C,GAAI+lB,SAAU1uB,SAAd,CACA,GAAIutB,QAAQjuB,SAAR,CAAkButB,aAAlB,CAAgCpP,KAAhC,GAA0C,CAACgR,IAA/C,CAAqD,CACnDC,QAAUjR,KAAV,CACD,CAFD,IAEO,CACLiR,QAAU,GAAInB,QAAJ,CAAY9P,KAAZ,CAAmBgR,IAAnB,CAAV,CACD,CAED,GAAMX,KAAM,GAAIa,eAAJ,EAAZ,CAEA,QAASC,YAAT,EAAuB,CACrB,GAAI,eAAiBd,IAArB,CAA0B,CACxB,MAAOA,KAAIc,WAAX,CACD,CAED,2EACA,GAAI,mBAAmBxrB,IAAnB,CAAwB0qB,IAAIC,qBAAJ,EAAxB,CAAJ,CAA0D,CACxD,MAAOD,KAAIe,iBAAJ,CAAsB,eAAtB,CAAP,CACD,CAED,OACD,CAEDf,IAAIxlB,MAAJ,CAAa,UAAW,CACtB,GAAMuD,SAAU,CACdsiB,OAAQL,IAAIK,MADE,CAEdC,WAAYN,IAAIM,UAFF,CAGd/C,QAASA,QAAQyC,GAAR,CAHK,CAIdzR,IAAKuS,aAJS,CAAhB,CAMA,GAAMnrB,MAAO,YAAcqqB,IAAd,CAAoBA,IAAIjD,QAAxB,CAAmCiD,IAAIgB,YAApD,CACApmB,QAAQ,GAAIulB,SAAJ,CAAaxqB,IAAb,CAAmBoI,OAAnB,CAAR,EACD,CATD,CAWAiiB,IAAIlmB,OAAJ,CAAc,UAAW,CACvBe,OAAO,GAAIrE,UAAJ,CAAc,wBAAd,CAAP,EACD,CAFD,CAIAwpB,IAAIiB,IAAJ,CAASL,QAAQnV,MAAjB,CAAyBmV,QAAQrS,GAAjC,CAAsC,IAAtC,EAEA,GAAIqS,QAAQlB,WAAR,GAAwB,SAA5B,CAAuC,CACrCM,IAAIkB,eAAJ,CAAsB,IAAtB,CACD,CAED,GAAI,gBAAkBlB,IAAlB,EAAyBzB,QAAQL,IAArC,CAA2C,CACzC8B,IAAImB,YAAJ,CAAmB,MAAnB,CACD,CAEDP,QAAQrD,OAAR,CAAgB3rB,OAAhB,CAAwB,SAASe,KAAT,CAAgB8S,IAAhB,CAAsB,CAC5Cua,IAAIoB,gBAAJ,CAAqB3b,IAArB,CAA2B9S,KAA3B,EACD,CAFD,EAIAqtB,IAAIvgB,IAAJ,CAAS,MAAOmhB,SAAQ/B,SAAf,GAA6B,WAA7B,CAA2C,IAA3C,CAAkD+B,QAAQ/B,SAAnE,EACD,CArDM,CAAP,CAsDD,CAvDD,CAwDAtqB,KAAK4oB,KAAL,CAAWkE,QAAX,CAAsB,IAAtB,CACD,CAndD,IAqdA;;;;GAMA,GAAI,CAAClwB,MAAMK,SAAN,CAAgBiE,IAArB,CAA2B,CACzBlD,EAAEoE,MAAF,CAASxF,MAAMK,SAAf,CAA0B,CACxBiE,IADwB,eACnB6rB,SADmB,CACR,CACd,GAAI,MAAQ,IAAZ,CAAkB,CAChB,KAAM,IAAI9qB,UAAJ,CAAc,kDAAd,CAAN,CACD,CACD,GAAI,MAAO8qB,UAAP,GAAqB,UAAzB,CAAqC,CACnC,KAAM,IAAI9qB,UAAJ,CAAc,8BAAd,CAAN,CACD,CACD,GAAIinB,MAAOxnB,OAAO,IAAP,CAAX,CACA,GAAIhF,QAASwsB,KAAKxsB,MAAL,GAAgB,CAA7B,CACA,GAAI2sB,SAAUjsB,UAAU,CAAV,CAAd,CACA,GAAIgB,OAAQT,SAAZ,CAEA,IAAK,GAAIb,GAAI,CAAb,CAAgBA,EAAIJ,MAApB,CAA4BI,GAA5B,CAAiC,CAC/BsB,MAAQ8qB,KAAKpsB,CAAL,CAAR,CACA,GAAIiwB,UAAU1uB,IAAV,CAAegrB,OAAf,CAAwBjrB,KAAxB,CAA+BtB,CAA/B,CAAkCosB,IAAlC,CAAJ,CAA6C,CAC3C,MAAO9qB,MAAP,CACD,CACF,CACD,MAAOT,UAAP,CACD,CApBuB,CAA1B,EAsBD,CACD,GAAI,CAACf,MAAMK,SAAN,CAAgBmoB,SAArB,CAAgC,CAC9BpnB,EAAEoE,MAAF,CAASxF,MAAMK,SAAf,CAA0B,CACxBmoB,SADwB,oBACd2H,SADc,CACH,CACnB,GAAI,OAAS,IAAb,CAAmB,CACjB,KAAM,IAAI9qB,UAAJ,CAAc,uDAAd,CAAN,CACD,CACD,GAAI,MAAO8qB,UAAP,GAAqB,UAAzB,CAAqC,CACnC,KAAM,IAAI9qB,UAAJ,CAAc,8BAAd,CAAN,CACD,CACD,GAAIinB,MAAOxnB,OAAO,IAAP,CAAX,CACA,GAAIhF,QAASwsB,KAAKxsB,MAAL,GAAgB,CAA7B,CACA,GAAI2sB,SAAUjsB,UAAU,CAAV,CAAd,CACA,GAAIgB,OAAQT,SAAZ,CAEA,IAAK,GAAIb,GAAI,CAAb,CAAgBA,EAAIJ,MAApB,CAA4BI,GAA5B,CAAiC,CAC/BsB,MAAQ8qB,KAAKpsB,CAAL,CAAR,CACA,GAAIiwB,UAAU1uB,IAAV,CAAegrB,OAAf,CAAwBjrB,KAAxB,CAA+BtB,CAA/B,CAAkCosB,IAAlC,CAAJ,CAA6C,CAC3C,MAAOpsB,EAAP,CACD,CACF,CACD,MAAO,CAAC,CAAR,CACD,CApBuB,CAA1B,EAsBD,CAED,GAAI,CAACF,MAAMK,SAAN,CAAgB+vB,KAArB,CAA4B,CAC1BhvB,EAAEoE,MAAF,CAASxF,MAAMK,SAAf,CAA0B,CACxB+vB,KADwB,gBAClB7qB,IADkB,CACZ,CACV,GAAI1E,KAAM,EAAV,CACA,KAAKJ,OAAL,CAAa,SAASsJ,IAAT,CAAe,CAC1B,GAAIA,KAAKxE,IAAL,CAAJ,CAAgB,CACd1E,IAAIG,IAAJ,CAAS+I,KAAKxE,IAAL,CAAT,EACD,CACF,CAJD,EAKA,MAAO1E,IAAP,CACD,CATuB,CAA1B,EAWD,CAED,GAAI,CAACb,MAAMK,SAAN,CAAgBgwB,UAArB,CAAiC,CAC/BjvB,EAAEoE,MAAF,CAASxF,MAAMK,SAAf,CAA0B,CACxBgwB,UADwB,qBACbxa,CADa,CACV,CACZ,MAAO,MAAKlU,MAAL,CAAY,SAASmM,KAAT,CAAgB,CACjC,MAAO,CAAC+H,EAAEiL,MAAF,CAAS,SAASwP,KAAT,CAAgBziB,MAAhB,CAAwB,CACvC,GAAI,CAACyiB,KAAL,CAAY,CACVA,MAAQ,IAAR,CACA,IAAK,GAAIxmB,IAAT,GAAgB+D,OAAhB,CAAwB,CACtB,GAAIA,OAAO7I,cAAP,CAAsB8E,GAAtB,CAAJ,CAAgC,CAC5BwmB,MAAQA,OAAUziB,OAAO/D,GAAP,IAAgBgE,MAAMhE,GAAN,CAAlC,CACH,CACF,CACF,CACD,MAAOwmB,MAAP,CACD,CAVO,CAUL,KAVK,CAAR,CAWD,CAZM,CAAP,CAaD,CAfuB,CAA1B,EAiBD,CAED,GAAI,CAACtwB,MAAMK,SAAN,CAAgBkwB,YAArB,CAAmC,CACjCnvB,EAAEoE,MAAF,CAASxF,MAAMK,SAAf,CAA0B,CACxBkwB,YADwB,uBACX1wB,KADW,CACJ,CAClB,GAAMuD,MAAO,IAAb,CACA,GAAMotB,MAAOptB,KAAKitB,UAAL,CAAgBxwB,KAAhB,CAAb,CACA,MAAO,MAAKwwB,UAAL,CAAgBG,IAAhB,CAAP,CACD,CALuB,CAA1B,EAOD,CAED,GAAI,CAACxwB,MAAMK,SAAN,CAAgB+K,KAArB,CAA4B,CAC1BhK,EAAEoE,MAAF,CAASxF,MAAMK,SAAf,CAA0B,CACxB+K,KADwB,gBAClBvL,KADkB,CACX,CACX,GAAIuD,MAAO,IAAX,CACA,GAAIvC,KAAM,KAAKK,MAAL,CAAYrB,KAAZ,CAAV,CACAgB,IAAImJ,MAAJ,GACA5G,KAAK1B,MAAL,CAAY,CAAZ,EACAb,IAAIJ,OAAJ,CAAY,SAASsJ,IAAT,CAAe,CACzB3G,KAAKpC,IAAL,CAAU+I,IAAV,EACD,CAFD,EAGD,CATuB,CAA1B,EAWD,CAED,GAAI,CAAC/J,MAAMK,SAAN,CAAgB2J,MAArB,CAA6B,CAC3B5I,EAAEoE,MAAF,CAASxF,MAAMK,SAAf,CAA0B,CACxB2J,MADwB,kBACf,CACP,GAAM7J,KAAM,KAAKL,MAAjB,CACA,GAAI8C,KAAM,EAAV,CACA,GAAI/B,KAAM,EAAV,CACA,IAAK,GAAIX,GAAI,CAAb,CAAgBA,EAAIC,GAApB,CAAyBD,GAAzB,CAA8B,CAC5B,GAAM2C,WAAYC,KAAKC,SAAL,CAAe,KAAK7C,CAAL,CAAf,CAAlB,CACA,GAAM8C,gBAAiB,KAAK9C,CAAL,CAAvB,CACA,GAAI0C,IAAIC,SAAJ,IAAmB9B,SAAvB,CAAkC,CAChCF,IAAIG,IAAJ,CAASgC,cAAT,EACAJ,IAAIC,SAAJ,EAAiB,CAAjB,CACD,CAHD,IAGO,CACLD,IAAIC,SAAJ,IACD,CACF,CACD,KAAK/C,MAAL,CAAc,CAAd,CACA,GAAMsD,MAAO,IAAb,CACAvC,IAAIJ,OAAJ,CAAY,SAASsJ,IAAT,CAAe,CACzB3G,KAAKpC,IAAL,CAAU+I,IAAV,EACD,CAFD,EAGD,CApBuB,CAA1B,EAsBD,CAED;;GAGA,CAAC,UAAM,aACL,GAAM0mB,oBAAqB,CACzBza,SACE0a,sBAAuB,sFADzB,CAEEC,gBAAiB,oFAFnB,CAGEC,mBAAoB,kFAHtB,CAIEC,gBAAiB,sFAJnB,CAKEC,wBAAyB,+IAL3B,CAMEC,cAAe,sFANjB,CAOEC,qBAAsB,wIAPxB,CAQEC,kBAAmB,6LARrB,CASEC,uBAAwB,sIAT1B,CAUEC,sBAAuB,kIAVzB,CAWEC,eAAgB,8HAXlB,CAYEC,gBAAiB,mMAZnB,CAaEC,mBAAoB,gHAbtB,CAcEC,oBAAqB,uJAdvB,CAeEC,kBAAmB,4HAfrB,CAgBEC,oBAAqB,mKAhBvB,CAiBEC,mBAAoB,2MAjBtB,CAkBEC,qBAAsB,iJAlBxB,4CAmBuB,wKAnBvB,4CAoBuB,uFApBvB,8CAqByB,wGArBzB,2CAsBsB,wHAtBtB,6CAuBwB,kMAvBxB,4CAwBuB,gHAxBvB,8CAyByB,4KAzBzB,8CA0ByB,kQA1BzB,4CA2BuB,8QA3BvB,0CA4BqB,uHA5BrB,+CA6B0B,iIA7B1B,4CA8BuB,uIA9BvB,uCA+BkB,iHA/BlB,yCAgCoB,wGAhCpB,gDAiC2B,6NAjC3B,6CAkCwB,kGAlCxB,+CAmC0B,iOAnC1B,+CAoC0B,sIApC1B,uDAqCkC,8HArClC,MADyB,CAwCzBvb,SACEsa,sBAAuB,0HADzB,CAEEC,gBAAiB,+HAFnB,CAGEC,mBAAoB,sGAHtB,CAIEC,gBAAiB,sGAJnB,CAKEC,wBAAyB,+KAL3B,CAMEC,cAAe,6GANjB,CAOEC,qBAAsB,oLAPxB,CAQEC,kBAAmB,kMARrB,CASEC,uBAAwB,0KAT1B,CAUEC,sBAAuB,mKAVzB,CAWEC,eAAgB,+JAXlB,CAYEC,gBAAiB,6OAZnB,CAaEC,mBAAoB,6IAbtB,CAcEC,oBAAqB,mLAdvB,CAeEC,kBAAmB,gKAfrB,CAgBEC,oBAAqB,uLAhBvB,CAiBEC,mBAAoB,qPAjBtB,CAkBEC,qBAAsB,yLAlBxB,4CAmBuB,yMAnBvB,4CAoBuB,2HApBvB,8CAqByB,4HArBzB,2CAsBsB,+JAtBtB,6CAuBwB,+PAvBxB,4CAwBuB,6KAxBvB,8CAyByB,+KAzBzB,8CA0ByB,sRA1BzB,4CA2BuB,kWA3BvB,0CA4BqB,4JA5BrB,+CA6B0B,wLA7B1B,4CA8BuB,0KA9BvB,uCA+BkB,kJA/BlB,yCAgCoB,+HAhCpB,gDAiC2B,mTAjC3B,6CAkCwB,+HAlCxB,+CAmC0B,sSAnC1B,+CAoC0B,2HApC1B,uDAqCkC,mOArClC,MAxCyB,CAA3B,CAiFA,GAAItb,QAAStV,SAAb,CACA,GAAIK,EAAE,MAAF,EAAU0T,IAAV,CAAe,MAAf,GAA0B,IAA9B,CAAoCuB,OAASoa,mBAAmBza,EAA5B,CACpC,GAAI5U,EAAE,MAAF,EAAU0T,IAAV,CAAe,MAAf,GAA0B,IAA9B,CAAoCuB,OAASoa,mBAAmBra,EAA5B,CAEpC,GAAMwb,WAAY,CAChB9a,GAAI1V,EAAE+E,IAAF,EADY,CAAlB,CAtFK,GA0FC0rB,OA1FD,YA2FH,eAAa5wB,IAAb,CAAmB,6BACjB,GAAImF,GAAIrF,SAAR,CACA,GAAIK,EAAEY,IAAF,CAAOf,IAAP,GAAgB,OAApB,CAA6B,CAC3BmF,EAAInF,KAAKX,KAAL,EAAJ,CACD,CAFD,IAEO,IAAIc,EAAEY,IAAF,CAAOf,IAAP,GAAgB,QAApB,CAA8B,CACnCmF,EAAItB,OAAOgtB,MAAP,CAAc7wB,IAAd,CAAJ,CACD,CAFM,IAEA,CACLmF,EAAInF,IAAJ,CACD,CACD,KAAK6V,EAAL,CAAU1V,EAAE+E,IAAF,EAAV,CACA,KAAKyrB,SAAL,EAAkBxrB,CAAlB,CACA,KAAK2R,MAAL,CAAc,EAAd,CACA,KAAKga,OAAL,CAAe,KAAf,CACA,KAAKrK,UAAL,CAAkB,EAAlB,CACD,CAED;;OA3GG,6EA8GgB,CACjB,8BACA,GAAI,CAAC,KAAKA,UAAN,EAAoB,CAAC,KAAKA,UAAL,CAAgB5nB,MAAzC,CAAiD,CAC/C,OACD,CAED;;SAGA,KAAK4nB,UAAL,CAAgBjnB,OAAhB,CAAwB,SAAS6kB,IAAT,CAAe,CACrCA,KAAKqC,MAAL,GACD,CAFD,EAGD,CAED;;OA5HG,mCA+HI,CACN,KAAKoK,OAAL,CAAe,IAAf,CACA,CAED;;OAnIG,qCAsIK,CACN,KAAKA,OAAL,CAAe,KAAf,CACD,CAED;;OA1IG,6CA6IS,CACV,MAAO,MAAKA,OAAZ,CACD,CAED;;;;OAjJG,gCAsJCjhB,QAtJD,CAsJW,CACZ,GAAIA,UAAY1P,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,QAA5C,CAAsD,CACpD,MAAO,MAAKA,SAAL,EAAgB9gB,QAAhB,CAAP,CACD,CAFD,IAEO,CACL,MAAO,MAAK8gB,SAAL,CAAP,CACD,CACF,CAED;;;OA9JG,gCAkKC9gB,QAlKD,CAkKW7P,IAlKX,CAkKiB,CAClB,GAAI,CAAC6P,QAAL,CAAe,CACb,GAAI1P,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOqa,qBAArB,EACA,OACD,CAJD,IAIO,IAAI,CAACzvB,IAAL,CAAW,CAChB,GAAIG,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOsa,eAAP,CAAyB7f,QAAvC,EACA,OACD,CACD,GAAI1P,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,QAAhC,CAA0C,CACxC,KAAKA,SAAL,EAAgB9gB,QAAhB,EAA4B7P,IAA5B,CACA,KAAK+wB,gBAAL,GACD,CACF,CAED;;;OAlLG,qCAsLK,CACN,GAAI5wB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,QAAhC,CAA0C,CACxC,KAAKA,SAAL,EAAkB,EAAlB,CACD,CAFD,IAEO,IAAIxwB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CAC9C,KAAKA,SAAL,EAAkB,EAAlB,CACD,CAFM,IAEA,CACL,KAAKA,SAAL,EAAkB7wB,SAAlB,CACD,CACF,CAED;;;;OAhMG,oCAqMG6B,GArMH,CAqMQ,CACT,GAAI,CAACA,GAAL,CAAU,CACR,GAAIxB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOwa,eAArB,EACA,OACD,CAJD,IAIO,IAAIzvB,EAAEY,IAAF,CAAOY,GAAP,IAAgB,QAApB,CAA8B,CACnC,GAAIxB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOya,uBAArB,EACD,CAHM,IAGA,IAAI1vB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,QAAhC,CAA0C,CAC/C,IAAK,GAAI9nB,IAAT,GAAgBlH,IAAhB,CAAqB,CACnB,KAAKgvB,SAAL,EAAgB9nB,GAAhB,EAAuBlH,IAAIkH,GAAJ,CAAvB,CACD,CACD,KAAKkoB,gBAAL,GACD,CACF,CAED;;;;;OArNG,oCA2NG/wB,IA3NH,CA2NS,CACV,GAAI,CAACA,IAAL,CAAW,CACT,GAAIG,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO0a,aAArB,EACA,OACD,CACD,GAAI3vB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,QAAhC,CAA0C,CACxC,IAAK,GAAI9nB,IAAT,GAAgB7I,KAAhB,CAAsB,CACpB;;aAGA,GAAI,EAAE6I,MAAO,MAAK8nB,SAAL,CAAT,CAAJ,CAA+B,CAC7B,KAAKA,SAAL,EAAgB9nB,GAAhB,EAAuB7I,KAAK6I,GAAL,CAAvB,CACA,KAAKkoB,gBAAL,GACD,CACF,CACF,CAVD,IAUO,IAAI5wB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CAC9C,KAAKA,SAAL,EAAkB,KAAKA,SAAL,EAAgB1wB,MAAhB,CAAuBD,IAAvB,EAA6B+I,MAA7B,EAAlB,CACA,KAAKgoB,gBAAL,GACD,CACF,CAED;;;OAjPG,wCAqPK/wB,IArPL,CAqPW,CACZ,GAAIA,IAAJ,CAAU,CACV,GAAImF,GAAIrF,SAAR,CACA,GAAIK,EAAEY,IAAF,CAAOf,IAAP,GAAgB,OAApB,CAA6B,CAC3BmF,EAAInF,KAAKX,KAAL,EAAJ,CACD,CAFD,IAEO,IAAIc,EAAEY,IAAF,CAAOf,IAAP,GAAgB,QAApB,CAA8B,CACnCmF,EAAItB,OAAOgtB,MAAP,CAAc7wB,IAAd,CAAJ,CACD,CAFM,IAEA,CACLmF,EAAInF,IAAJ,CACD,CACC,KAAK2wB,SAAL,EAAkBxrB,CAAlB,CACA,KAAK4rB,gBAAL,CAAsB,IAAtB,EACD,CAXD,IAWO,CACL,GAAI5wB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO4b,sBAArB,EACD,CACF,CAED;;;OAvQG,sCA2QI1sB,IA3QJ,CA2QU,CACX,GAAI,CAACA,IAAL,CAAW,CACT,GAAInE,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOua,kBAArB,EACA,OACD,CACD,GAAIxvB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,QAAhC,CAA0C,OAC1C,MAAO,MAAKA,SAAL,EAAgBrsB,IAAhB,CAAP,CACA,KAAKysB,gBAAL,GACD,CAED;;OAtRG,8BAyRApb,KAzRA,CAyROrV,QAzRP,CAyRiB,CAClB,GAAI,KAAKwwB,OAAT,CAAkB,OAClB,GAAI,CAACnb,KAAL,CAAY,CACV,GAAIxV,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO4a,iBAArB,EACA,OACD,CAJD,IAIO,IAAI,CAAC1vB,QAAL,CAAe,CACpB,GAAIH,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO2a,oBAArB,EACA,OACD,CACD,GAAI,CAAC,KAAKjZ,MAAL,CAAYnB,KAAZ,CAAL,CAAyB,CACvB,KAAKmB,MAAL,CAAYnB,KAAZ,EAAqB,CAACrV,QAAD,CAArB,CACD,CAFD,IAEO,CACL,KAAKwW,MAAL,CAAYnB,KAAZ,EAAmB5V,IAAnB,CAAwBO,QAAxB,EACD,CACF,CAED;;OA3SG,wCA8SKqV,KA9SL,CA8SY3V,IA9SZ,CA8SkB,CACnB,GAAI,KAAK8wB,OAAT,CAAkB,OAClB,GAAI,CAACnb,KAAL,CAAY,CACV,GAAIxV,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO6a,sBAArB,EACA,OACD,CACDjwB,MAAQF,SAAR,CAAoBE,IAApB,CAA2B,EAA3B,CACA,KAAK8W,MAAL,CAAYnB,KAAZ,EAAmBnW,OAAnB,CAA2B,cAAQ,CAC/BsJ,KAAK9I,IAAL,EACH,CAFD,EAGD,CAED;;;OA3TG,gCA+TC2V,KA/TD,CA+TQ,CACT,GAAI,CAACA,KAAL,CAAY,CACV,KAAKmB,MAAL,CAAc,EAAd,CACD,CAFD,IAEO,CACL,MAAO,MAAKA,MAAL,CAAYnB,KAAZ,CAAP,CACD,CACF,CAED;;OAvUG,4CA2UO9F,QA3UP,CA2UiBF,QA3UjB,CA2U2B,CAC5B,GAAI,CAACE,QAAL,CAAe,CACb,GAAI1P,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOgb,eAArB,EACA,OACD,CAJD,IAIO,IAAIzgB,WAAa7P,SAAjB,CAA4B,CACjC,GAAIK,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO+a,cAArB,EACA,OACD,CACD,GAAIhwB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CACvC,GAAIhhB,SAAW,CAAf,CAAkB,CAChB,GAAMX,KAAM,KAAK2hB,SAAL,EAAgB9xB,MAAhB,CAAyB8Q,QAArC,CACA,MAAO,MAAKghB,SAAL,EAAgB3hB,GAAhB,EAAqBa,QAArB,CAAP,CACD,CAHD,IAGO,IAAIF,SAAW,KAAKghB,SAAL,EAAgB9xB,MAA/B,CAAuC,CAC5C+X,QAAQC,KAAR,CAAczB,OAAO+a,cAArB,EACA,OACD,CAHM,IAGA,CACL,MAAO,MAAKQ,SAAL,EAAgBhhB,QAAhB,EAA0BE,QAA1B,CAAP,CACD,CACF,CACF,CAhWE,4CAkWOA,QAlWP,CAkWiBtP,KAlWjB,CAkWwBoP,QAlWxB,CAkWkC,CACnC,GAAI,CAACE,QAAL,CAAe,CACb,GAAI1P,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOqb,kBAArB,EACA,OACD,CAJD,IAIO,IAAIlwB,QAAUT,SAAd,CAAyB,CAC9B,GAAIK,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOob,mBAArB,EACA,OACD,CAJM,IAIA,IAAI7gB,WAAa7P,SAAjB,CAA4B,CACjC,GAAIK,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOmb,iBAArB,EACA,OACD,CAJM,IAIA,IAAI5gB,SAAW,KAAKghB,SAAL,EAAgB9xB,MAAhB,CAAwB,CAAvC,CAA0C,CAC/C,GAAIsB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO6b,8BAArB,EACA,OACD,CACD,GAAI9wB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CACvC,GAAIhhB,SAAW,CAAf,CAAkB,CAChB,GAAMX,KAAM,KAAK2hB,SAAL,EAAgB9xB,MAAhB,CAAyB8Q,QAArC,CACA,KAAKghB,SAAL,EAAgB3hB,GAAhB,EAAqBa,QAArB,EAAiCtP,KAAjC,CACA,KAAKwwB,gBAAL,GACD,CAJD,IAIO,CACL,KAAKJ,SAAL,EAAgBhhB,QAAhB,EAA0BE,QAA1B,EAAsCtP,KAAtC,CACA,KAAKwwB,gBAAL,GACD,CACF,CACF,CA9XE,kCAgYE/wB,IAhYF,CAgYQ,CACT,GAAI,CAACA,IAAL,CAAW,CACT,GAAIG,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO8b,mBAArB,EACA,OACD,CACD,GAAI/wB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CACvC,KAAKA,SAAL,EAAgB5wB,IAAhB,CAAqBC,IAArB,EACA,KAAK+wB,gBAAL,GACD,CACF,CA1YE,iCA4YG,CACJ,GAAI5wB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CACvC,KAAKA,SAAL,EAAgBzwB,GAAhB,GACA,KAAK6wB,gBAAL,GACD,CACF,CAjZE,wCAmZK/wB,IAnZL,CAmZW,CACZ,GAAI,CAACA,IAAL,CAAW,CACT,GAAIG,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO+b,qBAArB,EACA,OACD,CAJD,IAIO,IAAIhxB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CAC9C,KAAKA,SAAL,EAAgBvwB,OAAhB,CAAwBJ,IAAxB,EACA,KAAK+wB,gBAAL,GACD,CACF,CA5ZE,qCA8ZK,CACN,GAAI5wB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CACvC,KAAKA,SAAL,EAAgBtwB,KAAhB,GACA,KAAK0wB,gBAAL,GACD,CACF,CAnaE,oCAsaGK,KAtaH,CAsaUC,GAtaV,CAsae,CAChB,GAAIA,MAAQvxB,SAAZ,CAAuB,CACrB,GAAIK,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOkc,kBAArB,EACA,OACD,CAJD,IAIO,IAAIF,QAAUtxB,SAAd,CAAyB,CAC9B,GAAIK,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOmc,oBAArB,EACA,OACD,CACD,GAAIpxB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CACvC,MAAO,MAAKA,SAAL,EAAgBtxB,KAAhB,CAAsB+xB,KAAtB,CAA6BC,GAA7B,CAAP,CACD,CACF,CAnbE,sCAqbID,KArbJ,CAqbWC,GArbX,CAqbgBrxB,IArbhB,CAqbsB,CACvB,GAAIqxB,MAAQvxB,SAAZ,CAAuB,CACrB,GAAIK,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOoc,mBAArB,EACA,OACD,CAJD,IAIO,IAAIJ,QAAUtxB,SAAd,CAAyB,CAC9B,GAAIK,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOqc,qBAArB,EACA,OACD,CACD,GAAItxB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAA5B,EAAuC3wB,IAA3C,CAAiD,CAC/C,KAAK2wB,SAAL,EAAgBlwB,MAAhB,CAAuB2wB,KAAvB,CAA8BC,GAA9B,CAAmCrxB,IAAnC,EACA,KAAK+wB,gBAAL,GACD,CAHD,IAGO,IAAI5wB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CAC9C,GAAGS,OAAS,IAAT,EAAiB,CAACC,GAArB,CAA0B,OAC1B,KAAKV,SAAL,EAAgBlwB,MAAhB,CAAuB2wB,KAAvB,CAA8BC,GAA9B,EACA,KAAKN,gBAAL,GACD,CACF,CAED;;OAzcG,sCA4cIphB,QA5cJ,CA4cc3P,IA5cd,CA4coB,CACrB,GAAIA,OAASF,SAAb,CAAwB,CACtB,GAAIK,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOsc,qBAArB,EACA,OACD,CAJD,IAIO,IAAI/hB,WAAa7P,SAAb,EAA0BK,EAAEY,IAAF,CAAO4O,QAAP,IAAqB,QAAnD,CAA6D,CAClE,GAAIxP,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOuc,mBAArB,EACA,OACD,CACD,GAAIxxB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CACvC,GAAIxwB,EAAEY,IAAF,CAAO4O,QAAP,IAAqB,QAAzB,CAAmC,OACnC,KAAKghB,SAAL,EAAgBlwB,MAAhB,CAAuBkP,QAAvB,CAAiC,CAAjC,CAAoC3P,IAApC,EACA,KAAK+wB,gBAAL,GACD,CACF,CAED;;OA7dG,oCAgeGlhB,QAheH,CAgea,CACd,GAAI,CAACA,QAAL,CAAe,CACb,GAAI1P,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOwc,iBAArB,EACA,OACD,CAJD,IAIO,CACL,GAAIhyB,KAAM,EAAV,CACA,GAAI,KAAK+wB,SAAL,GAAmB,KAAKA,SAAL,EAAgB9xB,MAAvC,CAA+C,CAC7C,GAAMK,KAAM,KAAKyxB,SAAL,EAAgB9xB,MAA5B,CACA,IAAK,GAAII,GAAI,CAAb,CAAgBA,EAAIC,GAApB,CAAyBD,GAAzB,CAA8B,CAC5BW,IAAIG,IAAJ,CAAS,KAAK4wB,SAAL,EAAgB1xB,CAAhB,EAAmB4Q,QAAnB,CAAT,EACD,CACD,MAAOjQ,IAAP,CACD,CACF,CACF,CAED;;OAjfG,wCAofKmH,OApfL,CAofc8qB,SApfd,CAofyB,CAC1B,GAAI,CAAC9qB,OAAL,CAAc,CACZ,GAAI5G,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO0c,mBAArB,EACA,OACD,CAJD,IAIO,IAAI3xB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CAC9C,MAAO,MAAKA,SAAL,EAAgB7vB,OAAhB,CAAwBiG,OAAxB,CAAiC8qB,SAAjC,CAAP,CACD,CACF,CAED;;OA9fG,kCAigBEvxB,QAjgBF,CAigBY,CACb,GAAI,CAACA,QAAL,CAAe,CACb,GAAIH,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO2c,sBAArB,EACA,OACD,CAJD,IAIO,IAAI5xB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CAC9C,MAAO,MAAKA,SAAL,EAAgBttB,IAAhB,CAAqB/C,QAArB,CAAP,CACD,CACF,CAzgBE,4CA2gBOA,QA3gBP,CA2gBiB,CAClB,GAAI,CAACA,QAAL,CAAe,CACb,GAAIH,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO4c,qBAArB,EACA,OACD,CAJD,IAIO,IAAI7xB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CAC9C,MAAO,MAAKA,SAAL,EAAgBpJ,SAAhB,CAA0BjnB,QAA1B,CAAP,CACD,CACF,CAnhBE,wCAqhBKA,QArhBL,CAqhBe,CAChB,GAAI,CAACA,QAAL,CAAe,CACb,GAAIH,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAO6c,oBAArB,EACA,OACD,CACD,GAAI,KAAKtB,SAAL,GAAmB,KAAKA,SAAL,EAAgB9xB,MAAvC,CAA+C,CAC7C,GAAI0B,OAAQT,SAAZ,CACA,GAAIb,GAAI,CAAC,CAAT,CACA,GAAMC,KAAM,KAAKyxB,SAAL,EAAgB9xB,MAA5B,CACA,MAAO,EAAEI,CAAF,CAAMC,GAAb,CAAkB,CAChBqB,MAAQD,SAASE,IAAT,CAAc,KAAKmwB,SAAL,EAAgB1xB,CAAhB,CAAd,CAAkC,KAAK0xB,SAAL,EAAgB1xB,CAAhB,CAAlC,CAAsDA,CAAtD,CAAR,CACA,GAAIsB,QAAU,KAAd,CAAqB,CACnB,MACD,CACF,CACF,CACF,CAtiBE,uCAwiBa,CACd,GAAI,KAAKowB,SAAL,GAAmB,KAAKA,SAAL,EAAgB9xB,MAAvC,CAA+C,gCADvCF,IACuC,8CADvCA,IACuC,4BAC7C,MAAO,MAAKgyB,SAAL,EAAgBjwB,MAAhB,CAAuBpB,KAAvB,CAA6B,KAAKqxB,SAAL,CAA7B,CAA8ChyB,IAA9C,CAAP,CACD,CACF,CA5iBE,iCA8iBU,CACX,GAAI,KAAKgyB,SAAL,GAAmB,KAAKA,SAAL,EAAgB9xB,MAAvC,CAA+C,iCAD1CF,IAC0C,gDAD1CA,IAC0C,4BAC7C,MAAO,MAAKgyB,SAAL,EAAgBhwB,GAAhB,CAAoBrB,KAApB,CAA0B,KAAKqxB,SAAL,CAA1B,CAA2ChyB,IAA3C,CAAP,CACD,CACF,CAljBE,yCAojBO,CACR,GAAI,KAAKgyB,SAAL,GAAmB,KAAKA,SAAL,EAAgB9xB,MAAvC,CAA+C,CAC7C,KAAK8xB,SAAL,EAAgBnvB,OAAhB,GACA,KAAKuvB,gBAAL,GACD,CACF,CAzjBE,kCA2jBEmB,eA3jBF,CA2jBmB,CACpB,GAAI,KAAKvB,SAAL,GAAmB,KAAKA,SAAL,EAAgB9xB,MAAvC,CAA+C,CAC7C,GAAIqzB,eAAJ,CAAqB,CACnB,KAAKvB,SAAL,EAAgB7lB,IAAhB,CAAqBonB,eAArB,EACA,KAAKnB,gBAAL,GACD,CAHD,IAGO,CACL,KAAKJ,SAAL,EAAgB7lB,IAAhB,GACA,KAAKimB,gBAAL,GACD,CACF,CACF,CAED;;OAvkBG,yCA0kBe,iCAAPoB,KAAO,gDAAPA,KAAO,4BAChB,GAAI,CAACA,KAAD,EAAU,CAACA,MAAMtzB,MAArB,CAA6B,CAC3B,GAAIsB,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOgd,gBAArB,EACA,OACD,CACD,GAAMC,SAAU,QAAVA,QAAU,CAAC1zB,IAAD,CAAU,CACxB,MAAO,UAACiW,CAAD,CAAIC,CAAJ,CAAU,CACf,GAAMyd,gBAAiB,QAAjBA,eAAiB,CAACziB,QAAD,CAAc,CACnC;;eAGA,GAAI0iB,WAAY,CAAhB,CACA;;eAGA,GAAI1iB,SAAS,CAAT,IAAgB,GAApB,CAAyB,CACvB0iB,UAAY,CAAC,CAAb,CACA;;iBAGA1iB,SAAWA,SAAS+O,MAAT,CAAgB,CAAhB,CAAX,CACD,CACD;;eAGA,MAAO,UAAChK,CAAD,CAAIC,CAAJ,CAAU,CACf,GAAMxQ,QAAUuQ,EAAE/E,QAAF,EAAcgF,EAAEhF,QAAF,CAAf,CAA8B,CAAC,CAA/B,CAAoC+E,EAAE/E,QAAF,EAAcgF,EAAEhF,QAAF,CAAf,CAA8B,CAA9B,CAAkC,CAApF,CACA,MAAOxL,QAASkuB,SAAhB,CACD,CAHD,CAID,CAtBD,CAwBA;;aAGA,GAAItzB,GAAI,CAAR,CACA,GAAIoF,QAAS,CAAb,CACA,GAAMmuB,oBAAqBL,MAAMtzB,MAAjC,CACA,MAAOwF,SAAW,CAAX,EAAgBpF,EAAIuzB,kBAA3B,CAA+C,CAC7C;;eAGAnuB,OAASiuB,eAAeH,MAAMlzB,CAAN,CAAf,EAAyB2V,CAAzB,CAA4BC,CAA5B,CAAT,CACA5V,IACD,CACD,MAAOoF,OAAP,CACD,CAvCD,CAwCD,CAzCD,CA0CA,GAAI,KAAKssB,SAAL,GAAmB,KAAKA,SAAL,EAAgB9xB,MAAvC,CAA+C,CAC7C,KAAK8xB,SAAL,EAAgB7lB,IAAhB,CAAqBunB,QAAQ/yB,KAAR,CAAc,IAAd,CAAoB6yB,KAApB,CAArB,EACA,KAAKpB,gBAAL,GACD,CACF,CAED;;;OAhoBG,sCAooBI/wB,IApoBJ,CAooBU,CACX,GAAI,CAACA,IAAL,CAAW,CACT,GAAIG,EAAEuN,oBAAN,CAA4B,OAC5BkJ,QAAQC,KAAR,CAAczB,OAAOqd,cAArB,EACA,OACD,CACD,GAAItyB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CACvC,GAAI9wB,MAAO,KAAK8wB,SAAL,EAAgB1wB,MAAhB,CAAuBD,IAAvB,CAAX,CACA,KAAK2wB,SAAL,EAAkB9wB,IAAlB,CACA,KAAKkxB,gBAAL,GACD,CACF,CAED;;OAjpBG,uCAopBM,CACP,GAAI5wB,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CACvC,GAAI9wB,MAAO,KAAK8wB,SAAL,EAAgB5nB,MAAhB,EAAX,CACA,KAAK4nB,SAAL,EAAkB9wB,IAAlB,CACA,KAAKkxB,gBAAL,GACD,CACF,CAED;;OA5pBG,8BA+pBAphB,QA/pBA,CA+pBU,CACX,GAAIxP,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CACvC,MAAO,MAAKA,SAAL,EAAgBhhB,QAAhB,CAAP,CACD,CACF,CAED;;;OArqBG,mCAyqBI,CACL,GAAIxP,EAAEY,IAAF,CAAO,KAAK4vB,SAAL,CAAP,IAA4B,OAAhC,CAAyC,CACvC,MAAO,MAAKA,SAAL,EAAgB9xB,MAAvB,CACD,CACF,CA7qBE,qBAgrBLsB,EAAEoE,MAAF,CAAS,CACPqsB,MAAO,eAAS5wB,IAAT,CAAe,CACpB,MAAO,IAAI4wB,OAAJ,CAAU5wB,IAAV,CAAP,CACD,CAHM,CAAT,EAMD,CAtrBD,IAwrBA;;GAGAG,EAAEoE,MAAF,CAASpE,CAAT,CAAY,CACVuyB,SAAU,YAAYxvB,IAAZ,CAAiBuU,UAAUC,SAA3B,CADA,CAEVib,OAAQ,UAAUzvB,IAAV,CAAeuU,UAAUC,SAAzB,CAFE,CAGVkb,OAAQ,UAAU1vB,IAAV,CAAeuU,UAAUC,SAAzB,CAHE,CAIVmb,MAAO,oBAAoB3vB,IAApB,CAAyBuU,UAAUC,SAAnC,CAJG,CAKVO,UAAY,aAAa/U,IAAb,CAAkBuU,UAAUC,SAA5B,GAA0C,CAAC,aAAaxU,IAAb,CAAkBuU,UAAUC,SAA5B,CAL7C,CAMVob,eAAgB,CAAC,aAAa5vB,IAAb,CAAkBuU,UAAUC,SAA5B,CAAD,EAA2C,CAAC,UAAUxU,IAAV,CAAeuU,UAAUC,SAAzB,CAA5C,EAAmF,eAAiBvY,SAN1G,CAOV4zB,SAAUtb,UAAUub,MAPV,CAQVC,aAAcxb,UAAUyb,UAAV,EAAwB,KAR5B,CASVC,SAAW,CAAC,aAAajwB,IAAb,CAAkBuU,UAAUC,SAA5B,CAAD,EAA2C,CAAC,UAAUxU,IAAV,CAAeuU,UAAUC,SAAzB,CAA5C,EAAmF,YAAYxU,IAAZ,CAAiBuU,UAAUC,SAA3B,CATpF,CAUV0b,UAAY,CAAC,YAAYlwB,IAAZ,CAAiBuU,UAAUC,SAA3B,CAVH,CAWV2b,SAAW,YAAYnwB,IAAZ,CAAiBuU,UAAUC,SAA3B,CAXD,CAYV4b,SAAW,CAAC,UAAUpwB,IAAV,CAAeuU,UAAUC,SAAzB,CAAD,EAAwC,CAAC,YAAYxU,IAAZ,CAAiBuU,UAAUC,SAA3B,CAAzC,EAAkF,YAAYxU,IAAZ,CAAiBuU,UAAUC,SAA3B,CAAlF,EAA2H,CAAC,aAAaxU,IAAb,CAAkBuU,UAAUC,SAA5B,CAZ7H,CAaV6b,SAAU,CAAC,aAAarwB,IAAb,CAAkBuU,UAAUC,SAA5B,CAAD,EAA2C,CAAC,UAAUxU,IAAV,CAAeuU,UAAUC,SAAzB,CAA5C,EAAmF,YAAYxU,IAAZ,CAAiBuU,UAAUC,SAA3B,CAAnF,EAA4H,EAAE,CAAC,aAAaxU,IAAb,CAAkBuU,UAAUC,SAA5B,GAA0C,kBAAkBxU,IAAlB,CAAuBuU,UAAUC,SAAjC,CAA1C,EAAyF,SAASxU,IAAT,CAAcuU,UAAUC,SAAxB,CAAzF,EAA+H,QAAQxU,IAAR,CAAauU,UAAUC,SAAvB,CAAhI,GAAsK,CAAC,aAAaxU,IAAb,CAAkBuU,UAAUC,SAA5B,CAAvK,EAAiN,CAAC,UAAUxU,IAAV,CAAeuU,UAAUC,SAAzB,CAAlN,EAAyP,WAAWxU,IAAX,CAAgBuU,UAAUC,SAA1B,CAAzP,EAAiS,UAAUxU,IAAV,CAAeuU,UAAUC,SAAzB,CAAnS,CAb5H,CAcV8b,gBAAkB,CAAC,aAAatwB,IAAb,CAAkBuU,UAAUC,SAA5B,GAA0C,kBAAkBxU,IAAlB,CAAuBuU,UAAUC,SAAjC,CAA1C,EAAyF,SAASxU,IAAT,CAAcuU,UAAUC,SAAxB,CAAzF,EAA+H,UAAUxU,IAAV,CAAeuU,UAAUC,SAAzB,CAAhI,GAAwK,CAAC,aAAaxU,IAAb,CAAkBuU,UAAUC,SAA5B,CAAzK,EAAmN,CAAC,UAAUxU,IAAV,CAAeuU,UAAUC,SAAzB,CAApN,EAA2P,WAAWxU,IAAX,CAAgBuU,UAAUC,SAA1B,CAA3P,EAAmS,UAAUxU,IAAV,CAAeuU,UAAUC,SAAzB,CAAnS,GAA2U,aAAaxU,IAAb,CAAkBuwB,YAAlB,GAAmC,aAAavwB,IAAb,CAAkBuU,UAAUC,SAA5B,CAA9W,CAdR,CAAZ,EAiBA;;GAGAvX,EAAE,UAAY,CACZ,GAAI,CAAC,8BAA8B+C,IAA9B,CAAmCuU,UAAUC,SAA7C,CAAL,CAA8D,CAC5DvX,EAAE,MAAF,EAAU6S,QAAV,CAAmB,WAAnB,EACD,CACD,GAAI7S,EAAE,iBAAF,EAAqB,CAArB,CAAJ,CAA6B,CAC3BA,EAAE,MAAF,EAAU6S,QAAV,CAAmB,YAAnB,EACA7S,EAAEuzB,KAAF,CAAU,KAAV,CACD,CAHD,IAGO,IAAIvzB,EAAE,qBAAF,EAAyB,CAAzB,CAAJ,CAAiC,CACtCA,EAAE,MAAF,EAAU6S,QAAV,CAAmB,gBAAnB,EACA7S,EAAEuzB,KAAF,CAAU,SAAV,CACD,CACDvzB,EAAEwzB,GAAF,CAAQ,KAAR,CACA,GAAIxzB,EAAE,MAAF,EAAU0T,IAAV,CAAe,KAAf,IAA0B,KAA9B,CAAqC,CACnC1T,EAAEwzB,GAAF,CAAQ,KAAR,CACD,CACF,CAfD,EAiBA;;GAGAxzB,EAAE0E,EAAF,CAAKN,MAAL,CAAY,CACV;;KAGAqvB,KAAM,cAASjoB,OAAT,CAAkB,CACtB,GAAI4e,UAAW,CACbzZ,KAAM,EADO,CAEb+iB,MAAO,MAFM,CAAf,CAIA1zB,EAAEoE,MAAF,CAASgmB,QAAT,CAAmB5e,OAAnB,EAEA,GAAM4D,OAAQ,IAAd,CACA,GAAIukB,SAAUh0B,SAAd,CACA;;OAGA,GAAMi0B,SAAU,QAAVA,QAAU,EAAM,CACpB,GAAIC,OAAQl0B,SAAZ,CACA;;SAGA,GAAI4Q,SAAS6Z,SAASzZ,IAAlB,CAAwB,EAAxB,EAA8B,EAAlC,CAAsC,CACpCgjB,kDAAkDvJ,SAASzZ,IAA3D,kBAAgFyZ,SAASzZ,IAAzF,4QAEgEyZ,SAASsJ,KAFzE,iJAGgEtJ,SAASsJ,KAHzE,kJAIgEtJ,SAASsJ,KAJzE,kJAKgEtJ,SAASsJ,KALzE,mJAMgEtJ,SAASsJ,KANzE,mJAOgEtJ,SAASsJ,KAPzE,mJAQgEtJ,SAASsJ,KARzE,mJASgEtJ,SAASsJ,KATzE,+EAYAtkB,MAAM8B,MAAN,CAAayiB,OAAb,EACF;;SAGC,CAjBD,IAiBO,CACLA,4CAA4CvJ,SAASzZ,IAArD,kBAA0EyZ,SAASzZ,IAAnF,oRAEgEyZ,SAASsJ,KAFzE,iJAGgEtJ,SAASsJ,KAHzE,kJAIgEtJ,SAASsJ,KAJzE,kJAKgEtJ,SAASsJ,KALzE,kJAMgEtJ,SAASsJ,KANzE,mJAOgEtJ,SAASsJ,KAPzE,mJAQgEtJ,SAASsJ,KARzE,mJASgEtJ,SAASsJ,KATzE,mJAUgEtJ,SAASsJ,KAVzE,mJAWgEtJ,SAASsJ,KAXzE,mJAYgEtJ,SAASsJ,KAZzE,mJAagEtJ,SAASsJ,KAbzE,+EAgBAtkB,MAAM8B,MAAN,CAAayiB,OAAb,EACD,CACF,CAzCD,CA2CA;;OAGA,GAAMG,aAAc,QAAdA,YAAc,EAAM,CACxB1J,SAAS1U,EAAT,CAAc1V,EAAE+E,IAAF,EAAd,CACA,GAAIgvB,0BAA2B,IAA/B,CACA,GAAI/zB,EAAEqzB,eAAN,CAAuB,CACrBU,qEAAwE3J,SAAS1U,EAAjF,+KAEyB0U,SAASsJ,KAFlC,gPAI2BtJ,SAASsJ,KAJpC,6IAOAtkB,MAAM8B,MAAN,CAAa6iB,wBAAb,EACA,OACD,CAVD,IAUO,CACLA,qCAAwC3J,SAAS1U,EAAjD,8HACAtG,MAAM8B,MAAN,CAAa6iB,wBAAb,EACA3kB,MAAMyD,QAAN,CAAe,sBAAf,EACA,GAAIrH,QAAQkoB,KAAZ,CAAmB,CACjB1zB,EAAE,IAAMoqB,SAAS1U,EAAjB,EAAqBxS,IAArB,CAA0B,QAA1B,EAAoCuM,GAApC,CAAwC,QAAxC,CAAkDjE,QAAQkoB,KAA1D,EACD,CACF,CACD1zB,EAAE,IAAMoqB,SAAS1U,EAAjB,EAAqBjG,GAArB,CAAyB,CACvB,SAAU2a,SAASzZ,IAAT,CAAgB,IADH,CAEvB,QAASyZ,SAASzZ,IAAT,CAAgB,IAFF,CAAzB,EAID,CAzBD,CA2BA;;OAGA,GAAI3Q,EAAEuzB,KAAF,GAAY,SAAhB,CAA2B,CACzBO,YAAYtoB,OAAZ,EACD,CAFD,IAEO,IAAIxL,EAAEuzB,KAAF,GAAY,KAAhB,CAAuB,CAC5BK,QAAQpoB,OAAR,EACD,CACF,CAjGS,CAAZ,EAoGA;;GAGAxL,EAAEoE,MAAF,CAAS,CAEP;;KAGA4vB,MAAO,uBAAW,CAChB9R,QAAUA,4BAA8BA,OAA9B,gCAAV,CACA,GAAIliB,EAAE,OAAF,EAAW,CAAX,CAAJ,CAAmB,OACnBA,EAAE,MAAF,EAAUkR,MAAV,uBAAsCgR,OAAtC,YACAliB,EAAE,gBAAF,EAAoB0T,IAApB,CAAyB,aAAzB,CAAwC,IAAxC,EACD,CAVM,CAYP;;KAGAugB,QAAS,kBAAM,CACbj0B,EAAE,OAAF,EAAW4R,MAAX,GACA5R,EAAE,gBAAF,EAAoB+T,UAApB,CAA+B,aAA/B,EACD,CAlBM,CAAT,EAqBA;;GAGA,GAAMmgB,siBAAN,CASAl0B,EAAE0E,EAAF,CAAKN,MAAL,CAAY,CACV+vB,mBAAoB,6BAAW,CAC7B,GAAIn0B,EAAE,IAAF,EAAQmT,QAAR,CAAiB,MAAjB,GAA4BnT,EAAE,IAAF,EAAQmT,QAAR,CAAiB,QAAjB,CAAhC,CAA4D,CAC1D,KAAK9T,OAAL,CAAa,gBAAU,CACrB,GAAM+0B,YAAap0B,EAAEuc,MAAF,EAAU9J,IAAV,EAAnB,CACAzS,EAAEuc,MAAF,EAAUvZ,IAAV,UAAyBoxB,UAAzB,YACAp0B,EAAEuc,MAAF,EAAUxL,OAAV,CAAkBmjB,iBAAlB,EACD,CAJD,EAKD,CACF,CATS,CAAZ,EAWAl0B,EAAE,UAAY,CACZA,EAAE,OAAF,EAAWm0B,kBAAX,GACAn0B,EAAE,SAAF,EAAam0B,kBAAb,GACD,CAHD,EAKA;;GAGAn0B,EAAE0E,EAAF,CAAKN,MAAL,CAAY,CACV;;KAGAiwB,OAAQ,gBAAS7kB,QAAT,CAAmB,CACzB,GAAI,CAAC,KAAK,CAAL,CAAL,CAAc,OACd,GAAMJ,OAAQpP,EAAE,IAAF,CAAd,CACA,GAAMuO,QAASa,MAAMb,MAAN,EAAf,CACA,GAAIiB,QAAJ,CAAc,CACZxP,EAAE,KAAKyP,GAAL,CAAS,UAAT,CAAqBD,QAArB,CAAF,EACD,CAFD,IAEO,IAAIJ,MAAMK,GAAN,CAAU,UAAV,IAA0B,UAA9B,CAA0C,CAC/CD,SAAW,UAAX,CACD,CAFM,IAEA,CACLA,SAAW,UAAX,CACD,CACD,GAAIgB,QAAS7Q,SAAb,CACA,GAAIyQ,OAAQzQ,SAAZ,CACA,GAAI20B,cAAe30B,SAAnB,CACA,GAAI40B,aAAc50B,SAAlB,CACA,GAAI6P,WAAa,UAAjB,CAA6B,CAC3BgB,OAASpB,MAAM,CAAN,EAASolB,YAAlB,CACApkB,MAAQhB,MAAM,CAAN,EAASqlB,WAAjB,CACAH,aAAe/lB,OAAO,CAAP,EAAUimB,YAAzB,CACAD,YAAchmB,OAAO,CAAP,EAAUkmB,WAAxB,CACD,CALD,IAKO,CACLjkB,OAASD,SAASnB,MAAMK,GAAN,CAAU,QAAV,CAAT,CAA8B,EAA9B,CAAT,CACAW,MAAQG,SAASnB,MAAMK,GAAN,CAAU,OAAV,CAAT,CAA6B,EAA7B,CAAR,CACA6kB,aAAe/jB,SAAShC,OAAOkB,GAAP,CAAW,QAAX,CAAT,CAA+B,EAA/B,CAAf,CACA8kB,YAAchkB,SAAShC,OAAOkB,GAAP,CAAW,OAAX,CAAT,CAA8B,EAA9B,CAAd,CACAzP,EAAE,IAAF,EAAQyP,GAAR,CAAY,CACV,cAAe,MADL,CAEV,eAAgB,MAFN,CAAZ,EAID,CACD,GAAIilB,QAAS/0B,SAAb,CACA,GAAIg1B,SAAUh1B,SAAd,CACA,GAAI4O,OAAO,CAAP,EAAUuD,QAAV,GAAuB,MAA3B,CAAmC,CACjC4iB,OAAWnxB,OAAOqxB,WAAP,CAAqB,CAAtB,CAA2BrxB,OAAOsxB,WAAnC,CAAkDrkB,OAAS,CAA3D,CAA+D,IAAxE,CACAmkB,QAAYpxB,OAAOuxB,UAAP,CAAoB,CAArB,CAA2B1kB,MAAQ,CAAnC,CAAwC,IAAnD,CACD,CAHD,IAGO,CACLskB,OAAUJ,aAAe,CAAhB,CAAsB9jB,OAAS,CAA/B,CAAoC,IAA7C,CACAmkB,QAAWJ,YAAc,CAAf,CAAqBnkB,MAAQ,CAA7B,CAAkC,IAA5C,CACD,CACD,GAAIZ,WAAa,UAAjB,CAA6BmlB,QAAU,CAAV,CAC7BvlB,MAAMK,GAAN,CAAU,CACR0C,KAAMwiB,OADE,CAER1iB,IAAKyiB,MAFG,CAAV,EAIA,MAAOtlB,MAAP,CACD,CAjDS,CAAZ,EAoDA;;GAGApP,EAAEoE,MAAF,CAAS,CACP;;KAGA2wB,SAAU,kBAASvpB,OAAT,CAAkB,CAC1B;;;;;;;;;;;;;MAcA,GAAM4e,UAAW,CACf4K,UAAW,MADI,CAEfC,UAAW,MAFI,CAGfC,YAAa,QAHE,CAIfC,YAAa,QAJE,CAKfh1B,SAAUH,EAAE8E,IALG,CAMfswB,UAAW,IANI,CAOfC,QAAS,IAPM,CAQfzQ,MAAOjlB,SARQ,CASf21B,UAAW,IATI,CAUfpR,KAAMvkB,SAVS,CAAjB,CAaA,GAAI+kB,QAAS,EAAb,CACA,GAAI6Q,YAAa,KAAjB,CACA,GAAI,CAAC/pB,OAAL,CAAc,CACZ,OACD,CACDxL,EAAEoE,MAAF,CAASgmB,QAAT,CAAmB5e,OAAnB,EACA,GAAMmZ,SAAUyF,SAASxF,KAAT,EAAkB,KAAlC,CAEA,GAAI,CAACwF,SAASgL,SAAV,EAAuB,CAAChL,SAASiL,OAArC,CAA8C,CAC5C,OACD,CACD,GAAMG,QAASpL,SAASlG,IAAxB,CAEA,GAAI1Y,OAAJ,CAAaxL,EAAEoE,MAAF,CAASgmB,QAAT,CAAmB5e,OAAnB,EAEb,GAAIiqB,cAAe91B,SAAnB,CACA,GAAI+1B,YAAa/1B,SAAjB,CACA,GAAIg2B,mBAAoBh2B,SAAxB,CACA,GAAI4c,QAAS5c,SAAb,CACA,GAAIi2B,iBAAkB,YAAtB,CACA,GAAIC,iBAAkB,WAAtB,CACA,GAAIC,iBAAkBn2B,SAAtB,CACA,GAAIo2B,mBAAoBp2B,SAAxB,CACA,GAAIiH,SAAUwjB,SAASxjB,OAAvB,CACA,GAAIsuB,aAAcv1B,SAAlB,CAEA,GAAI6zB,KAAMxzB,EAAE,MAAF,EAAU0T,IAAV,CAAe,KAAf,CAAV,CACA8f,IAAMA,IAAMA,IAAIrjB,WAAJ,EAAN,CAA0B,EAAhC,CACA,GAAIqjB,MAAQ,KAAZ,CAAmB,CACjBoC,gBAAkB,WAAlB,CACAC,gBAAkB,YAAlB,CACD,CAED,GAAIzL,SAASgL,SAAb,CAAwB,CACtBK,0DAEcrL,SAAS8K,WAFvB,y8BAaAS,+zBAcA31B,EAAE4G,OAAF,EAAWiM,QAAX,CAAoB,WAApB,EACD,CACD,GAAIuX,SAASiL,OAAb,CAAsB,CACpBS,okBAWAC,ykBAWA/1B,EAAE4G,OAAF,EAAWiM,QAAX,CAAoB,UAApB,EACD,CAED6iB,mCAAsCtL,SAAS4K,SAA/C,aACA,GAAMgB,QAASh2B,EAAE4G,OAAF,EAAW2I,OAAX,CAAmB,QAAnB,CAAf,CACA,GAAM0mB,KAAMj2B,EAAE4G,OAAF,EAAW2I,OAAX,CAAmB,QAAnB,EAA6BrM,IAA7B,CAAkC,KAAlC,CAAZ,CACA+yB,IAAI/kB,MAAJ,CAAWwkB,UAAX,EACAO,IAAI/yB,IAAJ,CAAS,OAAT,EAAkBoR,IAAlB,GACA2hB,IAAIllB,OAAJ,2BAAuCqZ,SAAS+K,WAAhD,cACAc,IAAI/yB,IAAJ,CAAS,SAAT,EAAoBoR,IAApB,GACAtU,EAAEk2B,kBAAF,CAAqBl2B,EAAE4G,OAAF,EAAW2I,OAAX,CAAmB,QAAnB,CAArB,EAEAgN,OAASvc,EAAE4G,OAAF,EAAW2I,OAAX,CAAmB,QAAnB,EAA6BrM,IAA7B,CAAkC,OAAlC,CAAT,CACAlD,EAAE4G,OAAF,EAAW1D,IAAX,CAAgB,IAAhB,EAAsB7D,OAAtB,CAA8B,SAAUC,GAAV,CAAe,CAC3C,GAAI,CAACU,EAAEV,GAAF,EAAO0O,GAAP,CAAW,qBAAX,EAAkCtP,MAAvC,CAA+C,CAC7C,GAAI0rB,SAASgL,SAAb,CAAwB,CACtBp1B,EAAEV,GAAF,EAAOyR,OAAP,CAAe4kB,iBAAf,EACD,CACD,GAAIvL,SAASiL,OAAb,CAAsB,CACpBr1B,EAAEV,GAAF,EAAO4R,MAAP,CAAc6kB,iBAAd,EACA/1B,EAAEV,GAAF,EAAO4R,MAAP,CAAc4kB,eAAd,EACD,CACD,GAAI1L,SAASgL,SAAb,CAAwB,CACtBp1B,EAAEV,GAAF,EAAO4R,MAAP,CAAcukB,YAAd,EACD,CACF,CACF,CAbD,EAeA;;OAGA,GAAMU,cAAe,QAASA,aAAT,CAAsBh2B,QAAtB,CAAgC+qB,IAAhC,CAAsC3O,MAAtC,CAA8C,CACjEvc,EAAE,UAAY,CAEZ;;WAGA,GAAIw1B,MAAJ,CAAY,CACV,GAAM91B,MAAOM,EAAE,aAAF,CAAb,CACAN,KAAK,CAAL,EAAQsR,kBAAR,CAA2B,YAA3B,CAAyCwkB,OAAOxO,WAAP,EAAzC,EACAtnB,KAAKwD,IAAL,CAAU,IAAV,EAAgB6N,OAAhB,CAAwB4kB,iBAAxB,EACAj2B,KAAKwD,IAAL,CAAU,IAAV,EAAgBgO,MAAhB,CAAuB6kB,iBAAvB,EACAr2B,KAAKwD,IAAL,CAAU,IAAV,EAAgBgO,MAAhB,CAAuB4kB,eAAvB,EACA,GAAMrR,UAAW/kB,KAAKsD,IAAL,EAAjB,CACAwyB,OAAOvO,WAAP,CAAmBxC,QAAnB,EACD,CAEDlI,OAAO1P,EAAP,CAAU,KAAV,CAAiB,UAAY,CAC3B,GAAMuC,OAAQ,IAAd,CAEA;;aAGA,GAAI,KAAK4D,SAAL,CAAeI,QAAf,CAAwB,MAAxB,CAAJ,CAAqC,CACnCpT,EAAEkrB,IAAF,EAAQrY,QAAR,CAAiB,SAAjB,EACAtK,WAAW,UAAY,CACrB6G,MAAM4D,SAAN,CAAgBpB,MAAhB,CAAuB,MAAvB,EACAxC,MAAM4D,SAAN,CAAgBC,GAAhB,CAAoB,MAApB,EACAjT,EAAEoP,KAAF,EAASqD,IAAT,CAAc2X,SAAS6K,SAAvB,EACAj1B,EAAEkrB,IAAF,EAAQrY,QAAR,CAAiB,gBAAjB,EACA7S,EAAEoP,KAAF,EAASf,QAAT,CAAkB,OAAlB,EAA2BiG,IAA3B,GACAtU,EAAEoP,KAAF,EAASf,QAAT,CAAkB,SAAlB,EAA6BmG,IAA7B,GACAxU,EAAEk2B,kBAAF,CAAqBF,MAArB,EACD,CARD,EAUA;;eAGD,CAfD,IAeO,IAAI,KAAKhjB,SAAL,CAAeI,QAAf,CAAwB,MAAxB,CAAJ,CAAqC,CAC1CpT,EAAEkrB,IAAF,EAAQ7X,WAAR,CAAoB,SAApB,EACA;;eAGA9K,WAAW,UAAY,CACrB6G,MAAM4D,SAAN,CAAgBpB,MAAhB,CAAuB,MAAvB,EACAxC,MAAM4D,SAAN,CAAgBC,GAAhB,CAAoB,MAApB,EACAjT,EAAEoP,KAAF,EAASqD,IAAT,CAAc2X,SAAS4K,SAAvB,EACAh1B,EAAEkrB,IAAF,EAAQ7X,WAAR,CAAoB,gBAApB,EACArT,EAAEkrB,IAAF,EAAQhoB,IAAR,CAAa,IAAb,EAAmBmQ,WAAnB,CAA+B,UAA/B,EACArT,EAAEoP,KAAF,EAASf,QAAT,CAAkB,SAAlB,EAA6BiG,IAA7B,GACA,GAAI8V,SAASgL,SAAb,CAAwB,CACtB,GAAIp1B,EAAEkrB,IAAF,EAAQhoB,IAAR,CAAa,eAAb,EAA8B,CAA9B,CAAJ,CAAsC,OACtClD,EAAEkrB,IAAF,EAAQhoB,IAAR,CAAa,IAAb,EAAmBgO,MAAnB,CAA0BukB,YAA1B,EACD,CACDz1B,EAAEk2B,kBAAF,CAAqBF,MAArB,EACD,CAZD,EAaA,GAAI,CAACT,UAAL,CAAiB,OACjB,GAAMa,YAAa,EAAnB,CACAp2B,EAAEkrB,IAAF,EAAQhoB,IAAR,CAAa,IAAb,EAAmB7D,OAAnB,CAA2B,SAAUC,GAAV,CAAeC,GAAf,CAAoB,CAC7CmlB,OAAO9kB,IAAP,CAAYI,EAAEV,GAAF,EAAOoU,IAAP,CAAY,SAAZ,CAAZ,EACD,CAFD,EAIA;;eAGA,GAAIiR,OAAJ,CAAa,CACX,CAAC,UAAY,CACX,GAAI0R,YAAa,EAAjB,CACA3R,OAAOnkB,MAAP,CAAc,SAAUoI,IAAV,CAAgB,CAC5B,GAAMlJ,KAAMklB,QAAQpkB,MAAR,CAAe,SAAUmU,CAAV,CAAa,CACtC,MAAOA,GAAE0V,SAASkL,SAAX,GAAyB3sB,IAAhC,CACD,CAFW,CAAZ,CAGA0tB,WAAWz2B,IAAX,CAAgBH,IAAI,CAAJ,CAAhB,EACD,CALD,EAMAilB,OAAS,EAAT,CACAC,QAAQtP,KAAR,GACAsP,QAAQlf,OAAR,CAAgB4wB,UAAhB,CAA4B,KAA5B,EACAA,WAAa,EAAb,CACD,CAZD,IAaD,CACD,GAAIr2B,EAAEkrB,IAAF,EAAQrrB,IAAR,CAAa,WAAb,CAAJ,CAA+B,CAC7BM,SAASE,IAAT,CAAcF,QAAd,CAAwBwkB,OAAxB,EACD,CACD4Q,WAAa,KAAb,CACD,CACDhtB,WAAW,UAAY,CACrBvI,EAAEk2B,kBAAF,CAAqBF,MAArB,EACD,CAFD,EAGD,CAvED,EAyEA;;WAGAh2B,EAAEkrB,IAAF,EAAQjiB,GAAR,CAAY,KAAZ,CAAmB,qBAAnB,EACAjJ,EAAEkrB,IAAF,EAAQre,EAAR,CAAW,KAAX,CAAkB,qBAAlB,CAAyC,UAAY,CACnD,GAAI7M,EAAE,IAAF,EAAQuP,OAAR,CAAgB,IAAhB,EAAsB4D,QAAtB,CAA+B,UAA/B,CAAJ,CAAgD,CAC9CnT,EAAE,IAAF,EAAQuP,OAAR,CAAgB,IAAhB,EAAsB8D,WAAtB,CAAkC,UAAlC,EACA,OACD,CAHD,IAGO,CACLrT,EAAE,IAAF,EAAQuP,OAAR,CAAgB,IAAhB,EAAsBsD,QAAtB,CAA+B,UAA/B,EACD,CACF,CAPD,EASA;;WAGA7S,EAAEkrB,IAAF,EAAQre,EAAR,CAAW+oB,eAAX,CAA4B,IAA5B,CAAkC,UAAY,CAC5C;;aAGA,GAAI,CAACxL,SAASgL,SAAd,CAAyB,OACzB;;aAGAp1B,EAAE,IAAF,EAAQqT,WAAR,CAAoB,UAApB,EACD,CATD,EAWArT,EAAEkrB,IAAF,EAAQre,EAAR,CAAWgpB,eAAX,CAA4B,IAA5B,CAAkC,UAAY,CAC5C;;aAGA,GAAI,CAACzL,SAASgL,SAAd,CAAyB,OACzB;;aAGAp1B,EAAE,IAAF,EAAQ6S,QAAR,CAAiB,UAAjB,EACD,CATD,EAWA;;WAGA7S,EAAEkrB,IAAF,EAAQre,EAAR,CAAW,KAAX,CAAkB,UAAlB,CAA8B,SAAUwJ,CAAV,CAAa,CACzC,GAAMigB,OAAQ,IAAd,CACAf,WAAa,IAAb,CAEA,GAAI5sB,MAAO3I,EAAE,IAAF,EAAQuP,OAAR,CAAgB,IAAhB,CAAX,CACA,GAAI5G,KAAK8E,EAAL,CAAQ,gBAAR,CAAJ,CAA+B,CAC7B,OACD,CAFD,IAEO,CACL,CAAC,UAAY,CACX;;iBAGAzN,EAAEkrB,IAAF,EAAQrrB,IAAR,CAAa,WAAb,CAA0B,IAA1B,EACA8I,KAAO3I,EAAEs2B,KAAF,EAAS/mB,OAAT,CAAiB,IAAjB,CAAP,CACA,GAAMrB,MAAOvF,KAAKuF,IAAL,EAAb,CACA;;iBAGA,GAAMqoB,WAAY5tB,KAAK0I,KAAL,EAAlB,CACA,GAAMmlB,WAAYtoB,KAAKmD,KAAL,EAAlB,CACA,GAAMb,QAAS7H,KAAK,CAAL,EAAQ8tB,YAAvB,CACA9tB,KAAK8G,GAAL,CAAS,CACP,oBAAqB,kBAAoBe,MAApB,CAA6B,OAD3C,CAEP,YAAa,kBAAoBA,MAApB,CAA6B,OAFnC,CAAT,EAKAtC,KAAKuB,GAAL,CAAS,CACP,oBAAqB,iBAAmBe,MAAnB,CAA4B,OAD1C,CAEP,YAAa,iBAAmBA,MAAnB,CAA4B,OAFlC,CAAT,EAIAjI,WAAW,UAAY,CACrBvI,EAAEyF,OAAF,CAAU+wB,SAAV,CAAqB7tB,IAArB,EACA3I,EAAEyF,OAAF,CAAU8wB,SAAV,CAAqBroB,IAArB,EACA;;mBAGAlO,EAAE,eAAF,EAAmB4R,MAAnB,GACD,CAPD,CAOG,GAPH,EAQD,CA9BD,IA+BD,CACF,CAxCD,EA0CA;;WAGA5R,EAAEkrB,IAAF,EAAQre,EAAR,CAAW,KAAX,CAAkB,YAAlB,CAAgC,SAAUwJ,CAAV,CAAa,CAC3Ckf,WAAa,IAAb,CACA,GAAM5sB,MAAO3I,EAAE,IAAF,EAAQuP,OAAR,CAAgB,IAAhB,CAAb,CACA,GAAMT,MAAOnG,KAAKmG,IAAL,EAAb,CACA,GAAInG,KAAK8E,EAAL,CAAQ,eAAR,CAAJ,CAA8B,CAC5B,OACD,CAFD,IAEO,CACL,CAAC,UAAY,CACX;;iBAGA,GAAM8oB,WAAY5tB,KAAK0I,KAAL,EAAlB,CACA,GAAMqlB,WAAY5nB,KAAKuC,KAAL,EAAlB,CACA;;iBAGArR,EAAEkrB,IAAF,EAAQrrB,IAAR,CAAa,WAAb,CAA0B,IAA1B,EAEA,GAAM2Q,QAAS7H,KAAK,CAAL,EAAQ8tB,YAAvB,CACA9tB,KAAK8G,GAAL,CAAS,CACP,oBAAqB,iBAAmBe,MAAnB,CAA4B,OAD1C,CAEPmmB,UAAW,iBAAmBnmB,MAAnB,CAA4B,OAFhC,CAAT,EAIA1B,KAAKW,GAAL,CAAS,CACP,oBAAqB,kBAAoBe,MAApB,CAA6B,OAD3C,CAEP,YAAa,kBAAoBA,MAApB,CAA6B,OAFnC,CAAT,EAIAjI,WAAW,UAAY,CAErBvI,EAAEyF,OAAF,CAAUixB,SAAV,CAAqB/tB,IAArB,EACA3I,EAAEyF,OAAF,CAAU8wB,SAAV,CAAqBznB,IAArB,EACA;;mBAGA9O,EAAE,eAAF,EAAmB4R,MAAnB,GACD,CARD,CAQG,GARH,EASD,CA7BD,IA8BD,CACF,CAtCD,EAwCA;;WAGA5R,EAAEkrB,IAAF,EAAQre,EAAR,CAAW,KAAX,CAAkB,SAAlB,CAA6B,UAAY,CACvC,GAAMuC,OAAQ,IAAd,CACAmmB,WAAa,IAAb,CACA,GAAMqB,UAAW52B,EAAE,IAAF,EAAQuO,MAAR,EAAjB,CAEA;;aAGAvO,EAAEkrB,IAAF,EAAQrrB,IAAR,CAAa,WAAb,CAA0B,IAA1B,EACA,GAAIg3B,WAAY,QAAhB,CACA,GAAI72B,EAAE,MAAF,EAAU0T,IAAV,CAAe,KAAf,IAA0B,KAA9B,CAAqCmjB,UAAY,OAAZ,CACrC72B,EAAE,IAAF,EAAQqO,QAAR,GAAmBoB,GAAnB,CAAuB,CACrB,oBAAqB,eAAiBonB,SAAjB,CAA6B,OAD7B,CAErB,qBAAsB,iBAFD,CAGrB,YAAa,eAAiBA,SAAjB,CAA6B,OAHrB,CAIrB,aAAc,iBAJO,CAAvB,EAOAtuB,WAAW,UAAY,CACrBquB,SAAShlB,MAAT,GACD,CAFD,CAEG,GAFH,EAGD,CArBD,EAuBA;;WAGAqkB,IAAI/yB,IAAJ,CAAS,SAAT,EAAoB2J,EAApB,CAAuB,KAAvB,CAA8B,UAAY,CACxC0oB,WAAa,KAAb,CACAU,IAAI/yB,IAAJ,CAAS,OAAT,EAAkBsR,IAAlB,GACAxU,EAAE,IAAF,EAAQsU,IAAR,GACAkhB,OAAOjP,MAAP,GACA0P,IAAI/yB,IAAJ,CAAS,OAAT,EAAkB2P,QAAlB,CAA2B,MAA3B,EAAmCQ,WAAnC,CAA+C,MAA/C,EAAuDZ,IAAvD,CAA4D2X,SAAS4K,SAArE,EACAh1B,EAAEkrB,IAAF,EAAQ7X,WAAR,CAAoB,gBAApB,EACArT,EAAEkrB,IAAF,EAAQhoB,IAAR,CAAa,IAAb,EAAmBmQ,WAAnB,CAA+B,UAA/B,EACArT,EAAE,IAAF,EAAQsU,IAAR,GACA,GAAI8V,SAASgL,SAAb,CAAwB,CACtBp1B,EAAEkrB,IAAF,EAAQhoB,IAAR,CAAa,IAAb,EAAmBgO,MAAnB,CAA0BukB,YAA1B,EACD,CACF,CAZD,EAaD,CAhQD,EAiQD,CAlQD,CAmQA;;OAGAU,aAAa/L,SAASjqB,QAAtB,CAAgCyG,OAAhC,CAAyC2V,MAAzC,EAEA,MAAO,CACL8K,SAAU,QAASA,SAAT,EAAoB,CAC5B,MAAO1C,QAAP,CACD,CAHI,CAKLmS,QAAS,QAASA,QAAT,EAAmB,CAC1B,MAAOtB,OAAP,CACD,CAPI,CAAP,CASD,CAtaM,CAAT,EAyaA;;GAGAx1B,EAAEoE,MAAF,CAAS,CACP;;KAGA2yB,gBAAiB,iCAAW,CAC1B,GAAI,CAACvrB,OAAD,EAAY,CAACA,QAAQ5E,OAAzB,CAAkC,OAClC,GAAIwjB,UAAW,CACbxjB,QAASjH,SADI,CAEbq3B,SAAU,EAFG,CAGb9jB,KAAMlT,EAAE+E,IAAF,GAAW,IAHJ,CAIb5E,SAAUH,EAAE8E,IAJC,CAKb8f,MAAOjlB,SALM,CAAf,CAOA,GAAIs3B,aAAc,EAAlB,CACAj3B,EAAEoE,MAAF,CAASgmB,QAAT,CAAmB5e,OAAnB,EACA,GAAI0rB,YAAa9M,SAAS4M,QAA1B,CACA,GAAM9jB,MAAOkX,SAASlX,IAAtB,CACA,GAAMgY,MAAOlrB,EAAEoqB,SAASxjB,OAAX,CAAb,CACAskB,KAAKrY,QAAL,CAAc,mBAAd,EACAqY,KAAKhoB,IAAL,CAAU,IAAV,EAAgB7D,OAAhB,CAAwB,SAASC,GAAT,CAAcC,GAAd,CAAmB,CACzC,GAAIa,OAAQd,IAAIgU,YAAJ,CAAiB,aAAjB,IAAoC,IAApC,CAA2ChU,IAAIgU,YAAJ,CAAiB,aAAjB,CAA3C,CAA6E,EAAzF,CACA4jB,WAAW73B,OAAX,CAAmB,SAASsJ,IAAT,CAAe,CAChC,GAAIA,KAAKnJ,KAAL,GAAeD,GAAnB,CAAwB,CACtB03B,YAAYr3B,IAAZ,CAAiB,CACfJ,MAAOD,GADQ,CAEfa,MAAOA,KAFQ,CAAjB,EAID,CACF,CAPD,EASAd,IAAIuU,YAAJ,CAAiB,MAAjB,CAAyB,UAAzB,EACA7T,EAAEV,GAAF,EAAO+T,WAAP,CAAmB,UAAnB,EAA+BnQ,IAA/B,CAAoC,OAApC,EAA6C6Q,UAA7C,CAAwD,SAAxD,EACA/T,EAAEV,GAAF,EAAOyR,OAAP,qxBAaA/Q,EAAEV,GAAF,EAAO4R,MAAP,iCAA+CgC,IAA/C,aAAiE9S,KAAjE,OACA,GAAI82B,WAAWx4B,MAAf,CAAuB,CACrBw4B,WAAW73B,OAAX,CAAmB,SAAS83B,GAAT,CAAc,CAC/B,GAAIA,MAAQ53B,GAAZ,CAAiB,CACfD,IAAIuU,YAAJ,CAAiB,cAAjB,CAAiC,MAAjC,EACAvU,IAAI0T,SAAJ,CAAcC,GAAd,CAAkB,UAAlB,EACAjT,EAAEV,GAAF,EAAO4D,IAAP,CAAY,OAAZ,EAAqBiB,IAArB,CAA0B,SAA1B,CAAqC,IAArC,EAA2CuP,IAA3C,CAAgD,OAAhD,CAAyDtT,KAAzD,EACA62B,YAAYr3B,IAAZ,CAAiB,CACfJ,MAAO23B,GADQ,CAEf/2B,MAAOA,KAFQ,CAAjB,EAID,CACF,CAVD,EAYD,CACF,CAzCD,EA2CA8qB,KAAKre,EAAL,CAAQ,KAAR,CAAe,IAAf,CAAqB,UAAW,uCAC9B,GAAMlE,MAAO3I,EAAE,IAAF,CAAb,CACA,GAAI2I,KAAKwK,QAAL,CAAc,UAAd,CAAJ,CAA+B,aAC7BxK,KAAK0K,WAAL,CAAiB,UAAjB,EAA6BU,UAA7B,CAAwC,cAAxC,EACApL,KAAKzF,IAAL,CAAU,OAAV,EAAmB8Q,UAAnB,CAA8B,SAA9B,EACA,GAAIojB,SAAU,CACZ53B,MAAOmJ,KAAKnJ,KAAL,EADK,CAEZY,MAAOuI,KAAK+K,IAAL,CAAU,aAAV,CAFK,CAAd,CAIA,GAAI7E,KAAMlP,SAAV,CACAs3B,YAAY53B,OAAZ,CAAoB,SAASsJ,IAAT,CAAepJ,GAAf,CAAoB,CACtC,GAAIoJ,KAAKnJ,KAAL,GAAe43B,QAAQ53B,KAAvB,EAAgCmJ,KAAKvI,KAAL,GAAeg3B,QAAQh3B,KAA3D,CAAkE,CAChEyO,IAAMtP,GAAN,CACD,CACF,CAJD,EAKA03B,YAAY32B,MAAZ,CAAmBuO,GAAnB,CAAwB,CAAxB,EAEAub,SAASjqB,QAAT,CAAkBhB,KAAlB,qBAf6B,KAgB9B,CAhBD,IAgBO,CACL83B,YAAYr3B,IAAZ,CAAiB,CACfJ,MAAOmJ,KAAKnJ,KAAL,EADQ,CAEfY,MAAOuI,KAAK+K,IAAL,CAAU,aAAV,CAFQ,CAAjB,EAIAujB,YAAYruB,MAAZ,GACAD,KAAKkK,QAAL,CAAc,UAAd,EACAlK,KAAK+K,IAAL,CAAU,cAAV,CAA0B,IAA1B,EACA/K,KAAKzF,IAAL,CAAU,OAAV,EAAmBiB,IAAnB,CAAwB,SAAxB,CAAmC,IAAnC,EAEAimB,SAASjqB,QAAT,CAAkBhB,KAAlB,CAAwB,IAAxB,CAA8BC,SAA9B,EACD,CAEF,CA/BD,EAiCA,MAAO,CACLiV,IAAK,qBAAM4iB,YAAN,EADA,CAELI,aAAc,8BAAMJ,YAAN,EAFT,CAAP,CAID,CAnGM,CAAT,EAsGA;;GAGAj3B,EAAE,UAAM,CAEN;;;KAIAA,EAAEoE,MAAF,CAAS,CAEP;;OAGAkzB,UAAW,KALJ,CAOPpB,mBAAoB,4BAASF,MAAT,CAAiB,CACnC,GAAI,CAACh2B,EAAE,iBAAF,EAAqB,CAArB,CAAL,CAA8B,OAC9B,GAAIhB,SAASoE,IAAT,EAAiBpE,SAASoE,IAAT,CAAc0Q,YAAd,CAA2B,gBAA3B,CAArB,CAAmE,CACjE,OACD,CACDkiB,OAASh2B,EAAEg2B,MAAF,CAAT,CACA,GAAI,CAACA,OAAO,CAAP,CAAL,CAAe,CACf,GAAMuB,IAAKvB,OAAO9yB,IAAP,CAAY,IAAZ,CAAX,CACA,GAAIq0B,GAAGpkB,QAAH,CAAY,eAAZ,CAAJ,CAAkC,OAClC,GAAM9E,UAAWkpB,GAAGlpB,QAAH,EAAjB,CACA,GAAImpB,WAAY73B,SAAhB,CACA,GAAI83B,cAAe93B,SAAnB,CACA,GAAM+3B,KAAM13B,EAAE,MAAF,EAAU0T,IAAV,CAAe,KAAf,IAA0B,KAAtC,CACA,GAAIrD,QAAS,CAAb,CACA,GAAIsnB,QAAS,KAAb,CACA,GAAIC,gBAAiBj4B,SAArB,CAEA,GAAMk4B,kBAAmB,QAASA,iBAAT,CAA0BpjB,CAA1B,CAA6BC,CAA7B,CAAgC,CACvD,GAAIojB,QAASrjB,EAAE,CAAF,EAAKggB,WAAlB,CACA,GAAIsD,QAASrjB,EAAE,CAAF,EAAK+f,WAAlB,CACA,GAAI,CAACqD,MAAL,CAAa,CACXA,OAAS,CAAT,CACAN,UAAY,cAAZ,CACAC,aAAe,aAAf,CACA,GAAIC,GAAJ,CAAS,CACPF,UAAY,aAAZ,CACAC,aAAe,cAAf,CACD,CACF,CACD,GAAI,CAACM,MAAL,CAAa,CACXA,OAAS,CAAT,CACAP,UAAY,aAAZ,CACAC,aAAe,cAAf,CACA,GAAIC,GAAJ,CAAS,CACPF,UAAY,cAAZ,CACAC,aAAe,aAAf,CACD,CACF,CACD,GAAIM,OAASD,MAAb,CAAqB,CACnBN,UAAY,aAAZ,CACAC,aAAe,cAAf,CACA,GAAIC,GAAJ,CAAS,CACPF,UAAY,cAAZ,CACAC,aAAe,aAAf,CACD,CACDpnB,OAAS0nB,OAASD,MAAlB,CACD,CARD,IAQO,IAAIA,OAASC,MAAb,CAAqB,CAC1BP,UAAY,cAAZ,CACAC,aAAe,aAAf,CACA,GAAIC,GAAJ,CAAS,CACPF,UAAY,aAAZ,CACAC,aAAe,cAAf,CACD,CACDpnB,OAASynB,OAASC,MAAlB,CACD,CARM,IAQA,CACL1nB,OAAS,CAAT,CACD,CACF,CAxCD,CA0CA,QAAS2nB,iBAAT,CAA0BC,GAA1B,CAA+B,CAC7B,GAAMC,SAAUD,KAAOV,GAAGlpB,QAAH,EAAvB,CACAgC,OAAS6nB,QAAQ,CAAR,EAAWzD,WAApB,CACA,GAAIyD,QAAQzqB,EAAR,CAAW,cAAX,CAAJ,CAAgC,CAC9B+pB,UAAY,cAAZ,CACAC,aAAe,aAAf,CACA,GAAIC,GAAJ,CAAS,CACPF,UAAY,aAAZ,CACAC,aAAe,cAAf,CACD,CACF,CAPD,IAOO,IAAIS,QAAQzqB,EAAR,CAAW,aAAX,CAAJ,CAA+B,CACpC+pB,UAAY,aAAZ,CACAC,aAAe,cAAf,CACA,GAAIC,GAAJ,CAAS,CACPF,UAAY,cAAZ,CACAC,aAAe,aAAf,CACD,CACF,CACF,CAED;;SAGA,GAAIppB,SAAS3P,MAAT,GAAoB,CAAxB,CAA2B,CACzBs5B,mBAEA;;WAGD,CAND,IAMO,IAAI3pB,SAAS3P,MAAT,GAAoB,CAAxB,CAA2B,CAC9B2P,SAAShP,OAAT,CAAiB,SAAUsJ,IAAV,CAAgB,CAC/B,GAAI3I,EAAE2I,IAAF,EAAQ8G,GAAR,CAAY,SAAZ,IAA2B,MAA/B,CAAuC,CACrCkoB,OAAS,IAAT,CACD,CAFD,IAEO,CACLC,eAAiB53B,EAAE2I,IAAF,CAAjB,CACD,CACF,CAND,EAOA,GAAIgvB,MAAJ,CAAY,CACVK,iBAAiBJ,cAAjB,EACD,CAFD,IAEO,CACLC,iBAAiBxpB,SAASc,EAAT,CAAY,CAAZ,CAAjB,CAAiCd,SAASc,EAAT,CAAY,CAAZ,CAAjC,EACD,CAED;;aAGH,CAjBM,IAiBA,CACLqoB,UAAY,aAAZ,CACAC,aAAe,cAAf,CACApnB,OAAS,CAAT,CACD,CACD,GAAI2hB,OAAQ,EAAZ,CACAA,MAAMwF,SAAN,EAAmBnnB,MAAnB,CACA2hB,MAAMyF,YAAN,EAAsB,CAAtB,CACA,GAAIU,UAAW,CAAf,CACA,GAAI9pB,SAASsC,IAAT,EAAJ,CAAqB,CACnBtC,SAAShP,OAAT,CAAiB,SAAUsJ,IAAV,CAAgB,CAC/BwvB,UAAYn4B,EAAE2I,IAAF,EAAQ,CAAR,EAAW8rB,WAAvB,CACD,CAFD,EAGD,CACD,GAAI2D,aAAcpC,OAAO9yB,IAAP,CAAY,KAAZ,EAAmBkN,KAAnB,GAA6B,CAA/C,CACA,GAAI+nB,SAAW,EAAX,CAAgBC,WAApB,CAAiC,CAC/Bb,GAAG9nB,GAAH,CAAO,CACL,cAAe,CADV,CAEL,eAAgB,CAFX,CAAP,EAID,CALD,IAKO,CACL8nB,GAAG9nB,GAAH,CAAOuiB,KAAP,EACD,CACF,CAvIM,CAAT,EAyIAzpB,WAAW,UAAW,CACpB,GAAI,CAACvI,EAAE,YAAF,EAAgB,CAAhB,CAAL,CAAyB,CACvBA,EAAE,MAAF,EAAU+Q,OAAV,CAAkB,4BAAlB,EACD,CACD/Q,EAAE,QAAF,EAAYX,OAAZ,CAAoB,SAAS22B,MAAT,CAAiB,CACnCh2B,EAAEk2B,kBAAF,CAAqBF,MAArB,EACD,CAFD,EAGD,CAPD,EAQD,CAvJD,EAyJA;;GAIAh2B,EAAE,UAAM,CACN;;KAGA,GAAIq4B,cAAe,KAAnB,CACA;;KAGA,GAAMC,WAAY,QAAZA,UAAY,eAAUt4B,GAAE,IAAMg2B,MAAR,CAAV,EAAlB,CAEA;;KAGA,GAAMuC,mBAAoB,QAApBA,kBAAoB,QAAU,CAClCvC,OAASh2B,EAAEg2B,MAAF,CAAT,CACAA,OAAOnjB,QAAP,CAAgB,SAAhB,EACAmjB,OAAO3iB,WAAP,CAAmB,UAAnB,EACA2iB,OAAO3iB,WAAP,CAAmB,MAAnB,EACD,CALD,CAMA,GAAMmlB,oBAAqB,QAArBA,mBAAqB,QAAU,CACnCxC,OAASh2B,EAAEg2B,MAAF,CAAT,CACAA,OAAO3iB,WAAP,CAAmB,SAAnB,EACA2iB,OAAO3iB,WAAP,CAAmB,MAAnB,EACA2iB,OAAOnjB,QAAP,CAAgB,UAAhB,EACD,CALD,CAMA,GAAM4lB,gBAAiB,QAAjBA,eAAiB,QAAU,CAC/BzC,OAASh2B,EAAEg2B,MAAF,CAAT,CACAA,OAAO3iB,WAAP,CAAmB,SAAnB,EACA2iB,OAAO3iB,WAAP,CAAmB,UAAnB,EACA2iB,OAAOnjB,QAAP,CAAgB,MAAhB,EACD,CALD,CAOA7S,EAAEoE,MAAF,CAAS,CAEP;;OAGAs0B,WAAY,gCAAe,CACzB,GAAI14B,EAAEq4B,YAAN,CAAoB,OACpBr4B,EAAEq4B,YAAF,CAAiB,IAAjB,CACA9vB,WAAW,UAAY,CACrBvI,EAAEq4B,YAAF,CAAiB,KAAjB,CACD,CAFD,CAEG,GAFH,EAGAr4B,EAAE24B,UAAF,CAAa/4B,IAAb,CAAkBg5B,WAAlB,EACA,GAAMC,eAAgB74B,EAAE84B,OAAF,CAAUC,UAAV,EAAtB,CACA,GAAMC,mBAAoB,UAAY,CACpC,GAAIt5B,MAAOC,SAAX,CACA,GAAM0d,OAAQ,MAAd,CACA3d,KAAO2d,MAAMta,IAAN,CAAW61B,WAAX,EAA0BA,YAAYp2B,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAA1B,CAAsDo2B,WAA7D,CACA,MAAON,WAAU54B,IAAV,CAAP,CACD,CALyB,EAA1B,CAMA,GAAIm5B,cAAc,CAAd,CAAJ,CAAsBA,cAAc,CAAd,EAAiBI,SAAjB,CAA6B,CAA7B,CACtB,GAAID,kBAAkB,CAAlB,CAAJ,CAA0BA,kBAAkB,CAAlB,EAAqBC,SAArB,CAAiC,CAAjC,CAC1BT,mBAAmBK,aAAnB,EACAN,kBAAkBS,iBAAlB,EACAh5B,EAAEk5B,MAAF,CAASC,QAAT,CAAkBP,WAAlB,EACD,CAxBM,CA0BP;;OAGAQ,OAAQ,iBAAM,CACZ,GAAIp5B,EAAEq4B,YAAN,CAAoB,OACpBr4B,EAAEq4B,YAAF,CAAiB,IAAjB,CACA,GAAMQ,eAAgB74B,EAAE84B,OAAF,CAAUC,UAAV,EAAtB,CACA/4B,EAAE24B,UAAF,CAAa54B,GAAb,GACA,GAAM64B,aAAc54B,EAAE24B,UAAF,CAAa34B,EAAE24B,UAAF,CAAaj6B,MAAb,CAAsB,CAAnC,CAApB,CACA,GAAMs6B,mBAAoB,UAAY,CACpC,GAAIt5B,MAAOC,SAAX,CACA,GAAM0d,OAAQ,MAAd,CACA3d,KAAO2d,MAAMta,IAAN,CAAW61B,WAAX,EAA0BA,YAAYp2B,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAA1B,CAAsDo2B,WAA7D,CACA,MAAON,WAAU54B,IAAV,CAAP,CACD,CALyB,EAA1B,CAMA,GAAIm5B,cAAc,CAAd,CAAJ,CAAsBA,cAAc,CAAd,EAAiBI,SAAjB,CAA6B,CAA7B,CACtB,GAAID,kBAAkB,CAAlB,CAAJ,CAA0BA,kBAAkB,CAAlB,EAAqBC,SAArB,CAAiC,CAAjC,CAC1BR,eAAeI,aAAf,EACAN,kBAAkBS,iBAAlB,EACAh5B,EAAEk5B,MAAF,CAASC,QAAT,CAAkBP,WAAlB,EACArwB,WAAW,UAAY,CACrBvI,EAAEq4B,YAAF,CAAiB,KAAjB,CACD,CAFD,CAEG,GAFH,EAGD,CAjDM,CAmDPA,aAAc,KAnDP,CAqDP;;OAGAgB,eAAgB,oCAAe,CAC7B,GAAM7pB,UAAWxP,EAAE24B,UAAF,CAAavR,SAAb,CAAuB,SAASkS,IAAT,CAAe,CACrD,MAAOA,MAAOV,WAAd,CACD,CAFgB,CAAjB,CAGA,GAAMI,mBAAoBV,UAAUM,WAAV,CAA1B,CACA,MAAO54B,EAAE24B,UAAF,CAAaj6B,MAAb,CAAsB8Q,SAAW,CAAxC,CAA2C,CACzC,GAAI+pB,OAAQv5B,EAAE24B,UAAF,CAAa54B,GAAb,EAAZ,CACAw5B,MAAQA,MAAM/2B,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAR,CACA,GAAIwzB,QAASsC,UAAUiB,KAAV,CAAb,CACAd,eAAezC,MAAf,EACD,CACDuC,kBAAkBS,iBAAlB,EACAh5B,EAAEk5B,MAAF,CAASC,QAAT,CAAkBP,WAAlB,EACD,CArEM,CAAT,EAwEA;;KAGA54B,EAAE,MAAF,EAAU6M,EAAV,CAAa,KAAb,CAAoB,OAApB,CAA6B,UAAY,CACvC,GAAI,KAAKiH,YAAL,CAAkB,UAAlB,CAAJ,CAAmC,OACnC9T,EAAEo5B,MAAF,GACD,CAHD,EAKA;;KAGA,GAAMI,uBAAwB,QAAxBA,sBAAwB,SAAW,CACvC5yB,QAAU5G,EAAE4G,OAAF,CAAV,CACA,GAAI5G,EAAEq4B,YAAN,CAAoB,OACpB,GAAI,CAACzxB,QAAQyT,OAAR,CAAgB,WAAhB,EAA6B,CAA7B,CAAL,CAAsC,OACtC,GAAIzT,QAAQ2I,OAAR,CAAgB,IAAhB,EAAsB9B,EAAtB,CAAyB,YAAzB,CAAJ,CAA4C,OAC5C,GAAImrB,aAAchyB,QAAQ8M,IAAR,CAAa,WAAb,CAAlB,CACA,GAAI,CAACklB,WAAL,CAAkB,OAClBhyB,QAAQiM,QAAR,CAAiB,UAAjB,EACAtK,WAAW,iBAAM3B,SAAQyM,WAAR,CAAoB,UAApB,CAAN,EAAX,CAAkD,IAAlD,EACA;;OAGArT,EAAE04B,UAAF,CAAaE,WAAb,EACD,CAbD,CAeA54B,EAAE,MAAF,EAAU6M,EAAV,CAAa,KAAb,CAAoB,IAApB,CAA0B,UAAY,CACpC2sB,sBAAsBx5B,EAAE,IAAF,CAAtB,EACD,CAFD,EAIAA,EAAE,MAAF,EAAU6M,EAAV,CAAa,WAAb,CAA0B,IAA1B,CAAgC,UAAY,CAC1C,GAAI,CAAC7M,EAAEq4B,YAAP,CAAqB,CACnBmB,sBAAsBx5B,EAAE,IAAF,CAAtB,EACD,CACF,CAJD,EAKD,CA3ID,EA6IA;;GAGAA,EAAEoE,MAAF,CAAS,CACP;;KAGAq1B,OAAQ,wBAAW,CACjB,GAAI,CAACjuB,OAAD,EAAY,CAACA,QAAQ5E,OAAzB,CAAkC,OAClC,GAAMovB,QAASh2B,EAAEwL,QAAQ5E,OAAV,CAAf,CACA,GAAM8yB,OACJ;;;;;;;aADF,CAUA15B,EAAEg2B,MAAF,EAAU9yB,IAAV,CAAe,KAAf,EAAsBgO,MAAtB,CAA6BwoB,KAA7B,EAEA,GAAMC,gBAAiB35B,EAAEg2B,MAAF,EAAU9yB,IAAV,CAAe,SAAf,CAAvB,CAEA,GAAM02B,UAAW,QAAXA,SAAW,EAAW,CAC1B,MAAOD,gBAAez2B,IAAf,CAAoB,SAApB,EAA+BxE,MAAtC,CACD,CAFD,CAGAsB,EAAEk2B,kBAAF,CAAqBF,MAArB,EAEA;;OAGA,GAAM6D,aAAc,QAAdA,YAAc,aAAe,CACjC,GAAID,WAAa,CAAjB,CAAoB,OACpBE,YAAY5rB,IAAZ,GAAmBmF,WAAnB,CAA+B,UAA/B,EACAymB,YAAYjnB,QAAZ,CAAqB,UAArB,EACA,GAAIknB,gBAAiBp6B,SAArB,CACA,GAAIm6B,YAAY,CAAZ,GAAkBA,YAAY,CAAZ,EAAe9mB,SAAf,CAAyBI,QAAzB,CAAkC,UAAlC,CAAtB,CAAqE,OACrE2mB,eAAiBJ,eAAez2B,IAAf,CAAoB,iBAApB,CAAjB,CACA,GAAI62B,eAAev6B,KAAf,KAA2Bo6B,WAAa,CAA5C,CAA+C,CAC7C;;WAGAG,eAAe1mB,WAAf,CAA2B,SAA3B,EAAsCR,QAAtC,CAA+C,MAA/C,EACAknB,eAAe1rB,QAAf,GAA0BgF,WAA1B,CAAsC,UAAtC,EAAkDR,QAAlD,CAA2D,MAA3D,EACA8mB,eAAez2B,IAAf,CAAoB,SAApB,EAA+BiM,EAA/B,CAAkC,CAAlC,EAAqC0D,QAArC,CAA8C,SAA9C,EAAyDQ,WAAzD,CAAqE,UAArE,EAAiFA,WAAjF,CAA6F,MAA7F,EACD,CAPD,IAOO,CACL0mB,eAAe1mB,WAAf,CAA2B,SAA3B,EAAsCR,QAAtC,CAA+C,UAA/C,EACAknB,eAAejrB,IAAf,GAAsBuE,WAAtB,CAAkC,MAAlC,EAA0CR,QAA1C,CAAmD,SAAnD,EACD,CACDtK,WAAW,UAAW,CACpBuxB,YAAYzmB,WAAZ,CAAwB,UAAxB,EACD,CAFD,CAEG,GAFH,EAGD,CArBD,CAuBA,GAAM2mB,UAAW,QAAXA,SAAW,aAAe,CAC9B,GAAIJ,aAAe,CAAnB,CAAsB,OACtBE,YAAYhrB,IAAZ,GAAmBuE,WAAnB,CAA+B,UAA/B,EACAymB,YAAYjnB,QAAZ,CAAqB,UAArB,EACA,GAAIknB,gBAAiBp6B,SAArB,CACAo6B,eAAiBJ,eAAez2B,IAAf,CAAoB,iBAApB,CAAjB,CAEA,GAAI62B,eAAev6B,KAAf,KAA2B,CAA/B,CAAkC,CAChCu6B,eAAe1mB,WAAf,CAA2B,SAA3B,EACA0mB,eAAe1rB,QAAf,GAA0Bc,EAA1B,CAA6B,CAAC,CAA9B,EAAiC0D,QAAjC,CAA0C,SAA1C,EAAqDQ,WAArD,CAAiE,MAAjE,EACA0mB,eAAe1rB,QAAf,GAA0Bc,EAA1B,CAA6B,CAAC,CAA9B,EAAiCd,QAAjC,GAA4CgF,WAA5C,CAAwD,MAAxD,EAAgER,QAAhE,CAAyE,UAAzE,EACD,CAJD,IAIO,CACLknB,eAAe1mB,WAAf,CAA2B,SAA3B,EAAsCR,QAAtC,CAA+C,MAA/C,EACAknB,eAAe7rB,IAAf,GAAsBmF,WAAtB,CAAkC,UAAlC,EAA8CR,QAA9C,CAAuD,SAAvD,EACD,CACDtK,WAAW,UAAM,CACfuxB,YAAYzmB,WAAZ,CAAwB,UAAxB,EACD,CAFD,CAEG,GAFH,EAGD,CAlBD,CAoBArT,EAAE,QAAF,EAAY6M,EAAZ,CAAe7M,EAAEiX,UAAjB,CAA6B,qBAA7B,CAAoD,UAAM,CACxD4iB,YAAY75B,YAAZ,EACD,CAFD,EAGAA,EAAE,QAAF,EAAY6M,EAAZ,CAAe7M,EAAEiX,UAAjB,CAA6B,sBAA7B,CAAqD,UAAM,CACzD+iB,SAASh6B,YAAT,EACD,CAFD,EAID,CA/EM,CAAT,EAkFA;;GAGAA,EAAEoE,MAAF,CAAS,CACP;;KAGA61B,QAAS,yBAAW,CAClB;;;;MAKAzuB,QAAUA,SAAW,EAArB,CACA,GAAI4e,UAAW,CACb1U,GAAI1V,EAAE+E,IAAF,EADS,CAEb5E,SAAUH,EAAE8E,IAFC,CAGbo1B,MAAO,EAHM,CAAf,CAKAl6B,EAAEoE,MAAF,CAASgmB,QAAT,CAAmB5e,OAAnB,EACA,GAAIA,SAAWA,QAAQiF,OAAvB,CAAgC,CAC9B2Z,SAAS3Z,OAAT,CAAmBjF,QAAQiF,OAA3B,CACD,CAFD,IAEO,CACL2Z,SAAS3Z,OAAT,CAAmB,EAAnB,CACD,CACD,GAAMkd,uBAAyBvD,SAAS8P,KAAlC,iBAAN,CACA,GAAMC,qCAAuC/P,SAAS1U,EAAhD,MAAyDiY,MAAzD,4BAAN,CACA,GAAMyM,WAAY,IAAMhQ,SAAS1U,EAAjC,CAEA;;OAGA,GAAM2kB,cAAe,QAAfA,aAAe,SAAW,CAC9B,GAAMtoB,QAAS/R,EAAE4G,OAAF,EAAWmL,MAAX,EAAf,CACA,GAAII,MAAOJ,OAAOI,IAAlB,CACA,GAAImoB,UAAW36B,SAAf,CACA,GAAI46B,SAAU56B,SAAd,CACA,GAAIw6B,SAAUn6B,EAAEo6B,SAAF,CAAd,CACA,GAAMI,eAAgBL,QAAQpoB,MAAR,EAAtB,CACAuoB,SAAWE,cAAcroB,IAAzB,CACAooB,QAAUxoB,OAAOE,GAAP,CAAajS,EAAE4G,OAAF,EAAW,CAAX,EAAc4tB,YAArC,CACA,GAAK2F,QAAQ/pB,KAAR,GAAkB2B,OAAOI,IAA1B,CAAkC5O,OAAOuxB,UAA7C,CAAyD,CACvDqF,QAAQ1qB,GAAR,CAAY,CACV,OAAUlM,OAAOuxB,UAAP,CAAoBqF,QAAQ/pB,KAAR,EAArB,CAAwC,EAAzC,CAA+C,IAD7C,CAEV,MAAQmqB,OAAD,CAAY,EAAZ,CAAiB,IAFd,CAAZ,EAID,CALD,IAKO,CACLJ,QAAQ1qB,GAAR,CAAY,CACV,OAAQ0C,KAAO,IADL,CAEV,MAAQooB,QAAU,EAAX,CAAiB,IAFd,CAAZ,EAID,CACF,CApBD,CAsBA,GAAIv6B,EAAE,OAAF,EAAW,CAAX,CAAJ,CAAmB,CACjBA,EAAEy6B,YAAF,GACAz6B,EAAE,MAAF,EAAUi0B,OAAV,GACA,OACD,CACDj0B,EAAEg0B,KAAF,CAAQ,IAAR,EACAh0B,EAAE,MAAF,EAAUkR,MAAV,CAAiBipB,OAAjB,EACA,GAAIn6B,EAAE,MAAF,EAAUmT,QAAV,CAAmB,gBAAnB,CAAJ,CAA0C,CACxC5K,WAAW,UAAM,CACfvI,EAAEo6B,SAAF,EAAavnB,QAAb,CAAsB,QAAtB,EACD,CAFD,CAEG,GAFH,EAGD,CACD7S,EAAEo6B,SAAF,EAAav6B,IAAb,CAAkB,WAAlB,CAA+BuqB,SAASxT,OAAxC,EACA5W,EAAEo6B,SAAF,EAAal3B,IAAb,CAAkB,SAAlB,EAA6BgO,MAA7B,CAAoCkZ,SAAS3Z,OAA7C,EACA2Z,SAASjqB,QAAT,CAAkBE,IAAlB,CAAuB+pB,SAASjqB,QAAhC,CAA0CiqB,SAASxT,OAAnD,EACAyjB,aAAajQ,SAASxT,OAAtB,EAED,CApEM,CAsEP8jB,aAAc,uBAAM,CAClB,GAAIP,SAAUn6B,EAAE,UAAF,CAAd,CACA,GAAI,CAACm6B,QAAQz7B,MAAb,CAAqB,OACrB,GAAMi8B,WAAYR,QAAQt6B,IAAR,CAAa,WAAb,CAAlB,CACA,GAAMkS,QAAS/R,EAAE26B,SAAF,EAAa5oB,MAAb,EAAf,CACA,GAAMI,MAAOJ,OAAOI,IAApB,CACA,GAAKnS,EAAEm6B,OAAF,EAAW/pB,KAAX,GAAqB2B,OAAOI,IAA7B,CAAqC5O,OAAOuxB,UAAhD,CAA4D,CAC1DqF,QAAQ1qB,GAAR,CAAY,CACV,OAAUlM,OAAOuxB,UAAP,CAAoB90B,EAAEm6B,OAAF,EAAW/pB,KAAX,EAArB,CAA2C,EAA5C,CAAkD,IADhD,CAAZ,EAGD,CAJD,IAIO,CACL+pB,QAAQ1qB,GAAR,CAAY,CACV,OAAQ0C,KAAO,IADL,CAAZ,EAGD,CACF,CArFM,CAuFPsoB,aAAc,uBAAM,CAClBz6B,EAAEi0B,OAAF,GACAj0B,EAAE,UAAF,EAAcyP,GAAd,CAAkB,CAACknB,UAAW,WAAZ,CAAlB,EACApuB,WAAW,UAAM,CACfvI,EAAE,UAAF,EAAciJ,GAAd,GACAjJ,EAAE,UAAF,EAAc4R,MAAd,GACD,CAHD,CAGG,GAHH,EAID,CA9FM,CAAT,EAiGA5R,EAAE,UAAM,CACN;;KAGAuD,OAAOq3B,QAAP,CAAkB,UAAM,CACtB56B,EAAE06B,YAAF,GACD,CAFD,CAGA;AACA16B,EAAE,MAAF,EAAU6M,EAAV,CAAa7M,EAAEiX,UAAf,CAA2B,OAA3B,CAAoC,WAAK,CACvC;AACA;AACA;AACE;AACAjX,EAAEy6B,YAAF,GACF;AACD,CAPD,EAQD,CAhBD,EAkBA;;GAGAz6B,EAAEoE,MAAF,CAAS,CACP;;KAGAy2B,MAAO,eAASrvB,OAAT,CAAkB,CACvB;;;;;;;;;;;MAYA,GAAI,CAACA,OAAL,CAAc,OACd,GAAI4e,UAAW,EAAf,CACAA,SAAS1U,EAAT,CAAc1V,EAAE+E,IAAF,EAAd,CACAqlB,SAAS3Z,OAAT,CAAmB,IAAnB,CACAzQ,EAAEoE,MAAF,CAASgmB,QAAT,CAAmB5e,OAAnB,EACA,GAAI4E,OAAQ,EAAZ,CACA,GAAIga,SAASha,KAAb,CAAoB,CAClBA,sBAAwBga,SAASha,KAAjC,QACD,CAED,GAAMsF,IAAK0U,SAAS1U,EAApB,CACA,GAAMwkB,OAAQ9P,SAAS8P,KAAT,gBAAgC9P,SAAS8P,KAAzC,kBAAiE,EAA/E,CACA,GAAMY,SAAU1Q,SAAS0Q,OAAT,mBAAqCtvB,QAAQsvB,OAA7C,QAA6D,EAA7E,CACA,GAAMC,cAAevvB,QAAQuvB,YAAR,yCAA+D3Q,SAAS2Q,YAAxE,aAAkG,EAAvH,CACA,GAAMC,gBAAiB5Q,SAAS4Q,cAAT,2CAAoE5Q,SAAS4Q,cAA7E,aAAyG,EAAhI,CACA,GAAM76B,UAAWiqB,SAASjqB,QAAT,EAAqBH,EAAE8E,IAAxC,CACA,GAAIm2B,OAAQt7B,SAAZ,CACA,GAAIyqB,SAAS7X,KAAb,CAAoB,CAClB0oB,kBAAoBvlB,EAApB,yBAA8CtF,KAA9C,mDACD,CAFD,IAEO,CACL6qB,gCAAkCvlB,EAAlC,gEAAmGwkB,KAAnG,CAA2GY,OAA3G,kBAAmIC,YAAnI,CAAkJC,cAAlJ,yBACD,CACDh7B,EAAE,IAAM0V,EAAR,EAAY9D,MAAZ,GACA5R,EAAE,MAAF,EAAUkR,MAAV,CAAiB+pB,KAAjB,EACA,GAAI7Q,SAAS7X,KAAb,CAAoB,YAClBvS,EAAE,SAAF,EAAayP,GAAb,UACE,UAAW,cADb,CAEE,0BAA2B,QAF7B,CAGE,sBAAuB,QAHzB,mCAIa,MAJb,yBAKE,iBALF,CAKqB,QALrB,yBAME,aANF,CAMiB,QANjB,WAQD,CACD,GAAItP,UAAY66B,cAAhB,CAAgC,CAC9Bh7B,EAAE,IAAM0V,EAAR,EAAYxS,IAAZ,CAAiB,WAAjB,EAA8B2J,EAA9B,CAAiC,KAAjC,CAAwC,UAAY,CAClD,GAAMuC,OAAQpP,EAAE,IAAF,CAAd,CACA,GAAIA,EAAE8X,SAAF,EAAe9X,EAAEozB,QAArB,CAA+B,CAC7BhkB,MAAMyD,QAAN,CAAe,UAAf,EACAtK,WAAW,UAAY,CACrB6G,MAAMiE,WAAN,CAAkB,UAAlB,EACArT,EAAE,QAAF,EAAYk7B,UAAZ,GACA/6B,SAASE,IAAT,CAAcF,QAAd,EACD,CAJD,CAIG,GAJH,EAKD,CAPD,IAOO,CACLH,EAAE,IAAM0V,EAAR,EAAYwlB,UAAZ,GACA/6B,SAASE,IAAT,CAAcF,QAAd,EACD,CACF,CAbD,EAcAH,EAAE,IAAM0V,EAAR,EAAYxS,IAAZ,CAAiB,SAAjB,EAA4B2J,EAA5B,CAA+B,KAA/B,CAAsC,UAAY,CAChD,GAAMuC,OAAQpP,EAAE,IAAF,CAAd,CACA,GAAIA,EAAE8X,SAAF,EAAe9X,EAAEozB,QAArB,CAA+B,CAC7BhkB,MAAMyD,QAAN,CAAe,UAAf,EACAtK,WAAW,UAAY,CACrB6G,MAAMiE,WAAN,CAAkB,UAAlB,EACArT,EAAE,IAAM0V,EAAR,EAAYwlB,UAAZ,GACD,CAHD,CAGG,GAHH,EAID,CAND,IAMO,CACLl7B,EAAE,IAAM0V,EAAR,EAAYwlB,UAAZ,GACD,CACF,CAXD,EAYD,CAEDl7B,EAAE,QAAF,EAAY6M,EAAZ,CAAe,KAAf,CAAsB,SAAUwJ,CAAV,CAAa,CACjCrW,EAAE,IAAF,EAAQqT,WAAR,CAAoB,QAApB,EACD,CAFD,EAGD,CAnFM,CAAT,EAsFArT,EAAE0E,EAAF,CAAKN,MAAL,CAAY,CACV;;KAGA+2B,UAAW,QAASA,UAAT,EAAqB,CAC9B,GAAMn5B,MAAOhC,EAAE,IAAF,CAAb,CACAgC,KAAKqR,WAAL,CAAiB,UAAjB,EACArR,KAAK6Q,QAAL,CAAc,QAAd,EACAtK,WAAW,UAAW,CACpBvG,KAAKkB,IAAL,CAAU,QAAV,EAAoB2P,QAApB,CAA6B,QAA7B,EACD,CAFD,CAEG,CAFH,EAGD,CAXS,CAaV;;KAGAqoB,WAAY,QAASA,WAAT,EAAsB,CAChC,GAAMl5B,MAAOhC,EAAE,IAAF,CAAb,CACAgC,KAAKqR,WAAL,CAAiB,QAAjB,EACArR,KAAKkB,IAAL,CAAU,QAAV,EAAoBmQ,WAApB,CAAgC,QAAhC,EACD,CApBS,CAAZ,EAuBA;;GAGArT,EAAE0E,EAAF,CAAKN,MAAL,CAAY,CACV;;KAGAg3B,MAAO,gBAAW,CAChB,GAAI,KAAK,CAAL,EAAQtpB,QAAR,GAAqB,OAAzB,CAAkC,OAClC,GAAIsL,OAAQpd,EAAE,IAAF,CAAZ,CACA,GAAIq7B,UAAW17B,SAAf,CACA,GAAMyQ,OAAQgN,MAAMhN,KAAN,EAAd,CACA,GAAMkrB,UAAW,CAACle,MAAM/I,GAAN,GAAc+I,MAAM1J,IAAN,CAAW,KAAX,CAAf,GAAqC0J,MAAM1J,IAAN,CAAW,KAAX,EAAoB0J,MAAM1J,IAAN,CAAW,KAAX,CAAzD,CAAjB,CACA,GAAI3B,QAAS,CAAC,GAAd,CACA,GAAIupB,SAAW,CAAf,CAAkB,CAChBD,SAAW,CAAX,CACD,CAFD,IAEO,IAAIC,SAAW,CAAf,CAAkB,CACvBD,SAAWjrB,KAAX,CACD,CAFM,IAEA,CACLirB,SAAWjrB,MAAQkrB,QAAR,CAAmBvpB,MAA9B,CACAA,QAAUupB,QAAV,CACD,CACD,GAAIt7B,EAAEuzB,KAAF,GAAY,SAAhB,CAA2B,CACzBnW,MAAM3N,GAAN,CAAU,CACR,kBAAmBnK,KAAK4M,KAAL,CAAWmpB,QAAX,EAAuB,kBADlC,CAAV,EAGD,CAJD,IAIO,CACLje,MAAM3N,GAAN,CAAU,CACR,kBAAmBnK,KAAK4M,KAAL,CAAWmpB,QAAX,EAAuB,SADlC,CAAV,EAGD,CACF,CA5BS,CAAZ,EA8BAr7B,EAAE,UAAM,CACNA,EAAE,mBAAF,EAAuBX,OAAvB,CAA+B,aAAO,CACpCW,EAAEV,GAAF,EAAO87B,KAAP,GACD,CAFD,EAGAp7B,EAAE,MAAF,EAAU6M,EAAV,CAAa,OAAb,CAAsB,mBAAtB,CAA2C,UAAW,CACpD7M,EAAE,IAAF,EAAQo7B,KAAR,GACD,CAFD,EAGD,CAPD,EASA;;GAGAp7B,EAAEoE,MAAF,CAAS,CACP;;KAGAu0B,WAAY,EAJL,CAMPO,OAAQ,iBAAM,CAEZ,MAAO,CACLqC,SAAU,0BAAW,CACnB,GAAIv7B,EAAEY,IAAF,CAAO4K,OAAP,IAAoB,OAAxB,CAAiC,CAC/BA,QAAQnM,OAAR,CAAgB,qBAAQW,GAAE6M,EAAF,CAAKlE,KAAK4wB,KAAV,CAAiB5wB,KAAKxI,QAAtB,CAAR,EAAhB,EACD,CACF,CALI,CAOLq7B,aAAc,8BAAMx7B,GAAE24B,UAAF,CAAa5uB,IAAb,CAAkB,GAAlB,CAAN,EAPT,CASL0xB,cAAe,wBAAM,CACnB,GAAM/7B,MAAO,UAAK87B,YAAL,GAAoBh5B,KAApB,CAA0B,GAA1B,CAAb,CACA,MAAO9C,MAAKA,KAAKhB,MAAL,CAAc,CAAnB,CAAP,CACD,CAZI,CAcLy6B,SAAU,wBAAS,CACjB,GAAIz5B,MAAOC,SAAX,CACA,GAAI+V,IAAK/V,SAAT,CACA,GAAI45B,MAAMn4B,KAAN,CAAY,IAAZ,CAAJ,CAAuB,CACrB1B,KAAO65B,MAAM/2B,KAAN,CAAY,GAAZ,CAAP,CACAkT,GAAKhW,KAAK,CAAL,CAAL,CACA65B,MAAQ75B,KAAK,CAAL,CAAR,CACD,CACDM,EAAEkN,IAAF,CAAOqsB,KAAP,EACD,CAvBI,CAAP,CAyBD,CAjCM,CAAT,EAoCAv5B,EAAEoE,MAAF,CAASpE,EAAEk5B,MAAX,CAAmB,CACjBC,SAAU,wBAAS,CACjB,GAAI,CAACI,KAAL,CAAY,OACZ,GAAI75B,MAAOC,SAAX,CACA,GAAI+V,IAAK/V,SAAT,CACA,GAAI45B,MAAMn4B,KAAN,CAAY,IAAZ,CAAJ,CAAuB,CACrB1B,KAAO65B,MAAM/2B,KAAN,CAAY,GAAZ,CAAP,CACAkT,GAAKhW,KAAK,CAAL,CAAL,CACA65B,MAAQ75B,KAAK,CAAL,CAAR,CACD,CACDM,EAAEkN,IAAF,CAAOqsB,KAAP,CAAc7jB,EAAd,EACD,CAXgB,CAAnB,EAcA1V,EAAEoE,MAAF,CAASpE,EAAE24B,UAAX,CAAuB,CACrB6C,aAAc,QAASA,aAAT,EAAwB,CACpC,MAAO,MAAKzxB,IAAL,CAAU,GAAV,CAAP,CACD,CAHoB,CAAvB,EAMA/J,EAAE,UAAM,CACN;;KAGA,GAAIA,EAAE,QAAF,EAAY2Q,IAAZ,IAAsB,CAAC3Q,EAAE24B,UAAF,CAAaj6B,MAAxC,CAAgD,CAC9CsB,EAAE24B,UAAF,CAAa/4B,IAAb,CAAkBI,EAAE,QAAF,EAAY,CAAZ,EAAe0V,EAAjC,EACD,CACF,CAPD,EASA;;GAGA1V,EAAE,UAAM,CACN;;KAGAA,EAAEoE,MAAF,CAAS,CACP00B,QAAS94B,EAAE,QAAF,CADF,CAAT,EAGAA,EAAEoE,MAAF,CAASpE,EAAE84B,OAAX,CAAoB,CAClBC,WAAY,qBAAW,CACrB,MAAO,MAAK5e,QAAL,CAAc,SAAd,CAAP,CACD,CAHiB,CAKlBuhB,QAAS,kBAAW,CAClB,MAAO,MAAKvhB,QAAL,CAAc,MAAd,CAAP,CACD,CAPiB,CASlBwhB,YAAa,sBAAW,CACtB,MAAO,MAAKxhB,QAAL,CAAc,UAAd,CAAP,CACD,CAXiB,CAApB,EAaD,CApBD,EAsBA;;GAGAna,EAAE,UAAM,CACNA,EAAEoE,MAAF,CAAS,CACP;;OAGAw3B,UAAW,mBAASpwB,OAAT,CAAkB,CAC3B,GAAI,CAACA,OAAD,EAAY,CAACA,QAAQ5E,OAAzB,CAAkC,OAClC;;;;;;;QAQA,GAAIwjB,UAAW,CACb4M,SAAU,CADG,CAEb72B,SAAUH,EAAE8E,IAFC,CAAf,CAIA9E,EAAEoE,MAAF,CAASgmB,QAAT,CAAmB5e,OAAnB,EAEA,GAAIqwB,WAAYl8B,SAAhB,CACA,GAAMm8B,QAAU1R,SAAS0R,MAAV,CAAoB1R,SAAS0R,MAA7B,CAAsC,EAArD,CACA,GAAI7E,aAAct3B,SAAlB,CACA,GAAI2kB,WAAY8F,SAASxjB,OAAzB,CAEA,QAASm1B,sBAAT,EAAiC,CAC/B,GAAIC,2BAA4B,EAAhC,CACA,GAAIh8B,EAAEuzB,KAAF,CAAU,SAAd,CAAyB,CACvByI,0BAA4B,8CAA5B,CACD,CACD,GAAIC,aAAc,CAAC,yBAAD,CAAlB,CACAH,OAAOz8B,OAAP,CAAe,SAASC,GAAT,CAAcC,GAAd,CAAmB,CAChC,GAAI6qB,SAAS4M,QAAT,GAAsBz3B,GAA1B,CAA+B,CAC7B08B,YAAYr8B,IAAZ,CAAiB,4DAAjB,EACAq3B,YAAc13B,GAAd,CACD,CAHD,IAGO,CACL08B,YAAYr8B,IAAZ,CAAiB,uBAAjB,EACD,CAEDq8B,YAAYr8B,IAAZ,CAAiBN,GAAjB,EACA28B,YAAYr8B,IAAZ,CAAiB,WAAjB,EACD,CAVD,EAWAq8B,YAAYr8B,IAAZ,CAAiBo8B,0BAA4B,QAA7C,EACAH,UAAYI,YAAYlyB,IAAZ,CAAiB,EAAjB,CAAZ,CACA/J,EAAEoqB,SAASxjB,OAAX,EAAoBsK,MAApB,CAA2B2qB,SAA3B,EAGD,CACDE,wBAEA;;SAGA,GAAIG,wBAAyBv8B,SAA7B,CACA,GAAIK,EAAEuzB,KAAF,GAAY,SAAhB,CAA2B,CACzB2I,uBAAyBl8B,EAAEskB,SAAF,EAAaphB,IAAb,CAAkB,yBAAlB,CAAzB,CACA,GAAIi5B,gBAAiBn8B,EAAEskB,SAAF,EAAaphB,IAAb,CAAkB,QAAlB,EAA4BiM,EAA5B,CAA+Bib,SAAS4M,QAAxC,CAArB,CACA,GAAI5mB,OAAQ+rB,eAAe/rB,KAAf,EAAZ,CACA,GAAI+B,MAAOgqB,eAAepqB,MAAf,GAAwBI,IAAxB,CAA8B,EAAzC,CACA,GAAInS,EAAEwzB,GAAF,GAAU,KAAd,CAAqB,CACnBrhB,KAAOgqB,eAAepqB,MAAf,GAAwBI,IAAxB,CAA8B,EAArC,CACD,CACD+pB,uBAAuBzsB,GAAvB,CAA2B,CAACW,MAAOA,MAAQ,IAAhB,CAAsB+B,KAAMA,KAAO,IAAnC,CAA3B,EACD,CAED,GAAMhS,UAAWiqB,SAASjqB,QAA1B,CACAH,EAAEskB,SAAF,EAAazX,EAAb,CAAgB,KAAhB,CAAuB,qBAAvB,CAA8C,SAASwJ,CAAT,CAAY,CACxD,GAAIjH,OAAQpP,EAAE,IAAF,CAAZ,CACA,GAAI,KAAKc,UAAL,CAAgBkS,SAAhB,CAA0BI,QAA1B,CAAmC,QAAnC,CAAJ,CAAkD,OAClDhE,MAAMf,QAAN,CAAe,QAAf,EAAyBgF,WAAzB,CAAqC,UAArC,EACAjE,MAAMf,QAAN,CAAe,QAAf,EAAyB0F,UAAzB,CAAoC,cAApC,EACA3E,MAAMyD,QAAN,CAAe,UAAf,EACAokB,YAAc7nB,MAAM5P,KAAN,EAAd,CACA8kB,UAAYtkB,EAAE,IAAF,CAAZ,CACAoP,MAAMsE,IAAN,CAAW,cAAX,CAA2B,IAA3B,EACAvT,SAASE,IAAT,CAAc,IAAd,CAAoBgW,CAApB,EAEA;;WAGA,GAAIrW,EAAEuzB,KAAF,GAAY,SAAhB,CAA2B,CACzB,GAAInjB,QAAQhB,MAAMgB,KAAN,EAAZ,CACA,GAAI+B,OAAO/C,MAAM2C,MAAN,GAAeI,IAAf,CAAqB,EAAhC,CACA,GAAInS,EAAEwzB,GAAF,GAAU,KAAd,CAAqB,CACnBrhB,MAAO/C,MAAM2C,MAAN,GAAeI,IAAf,CAAqB,EAA5B,CACD,CACD+pB,uBAAuBzsB,GAAvB,CAA2B,CAACW,MAAOA,OAAQ,IAAhB,CAAsB+B,KAAMA,MAAO,IAAnC,CAA3B,EACD,CACF,CAtBD,EAwBA,MAAO,CACLkC,IAAK,cAAW,CACd,MAAO,CACL7U,MAAOy3B,WADF,CAELrwB,QAAS0d,SAFJ,CAAP,CAID,CANI,CAOL+S,aAAc,uBAAW,CACvB,MAAO,CACL73B,MAAOy3B,WADF,CAELrwB,QAAS0d,SAFJ,CAAP,CAID,CAZI,CAAP,CAcD,CAxGM,CAAT,EA0GD,CA3GD,EA6GA;;GAGAtkB,EAAEoE,MAAF,CAAS,CACP;;KAGAg4B,WAAY,oBAAS5wB,OAAT,CAAkB,CAC5B,GAAI,CAACA,OAAD,EAAY,CAACA,QAAQ5E,OAAzB,CAAkC,OAClC,GAAIwjB,UAAW,CACbxjB,QAASjH,SADI,CAEbq3B,SAAUr3B,SAFG,CAGbuT,KAAMlT,EAAE+E,IAAF,EAHO,CAIb5E,SAAUH,EAAE8E,IAJC,CAKb8f,MAAOjlB,SALM,CAAf,CAOA,GAAIs3B,aAAc,EAAlB,CAEAj3B,EAAEoE,MAAF,CAASgmB,QAAT,CAAmB5e,OAAnB,EACA,GAAM0H,MAAOkX,SAASlX,IAAtB,CACA,GAAIgY,MAAOlrB,EAAEoqB,SAASxjB,OAAX,CAAX,CACAskB,KAAKrY,QAAL,CAAc,aAAd,EACAqY,KAAKhoB,IAAL,CAAU,IAAV,EAAgB7D,OAAhB,CAAwB,SAACC,GAAD,CAAMC,GAAN,CAAc,CACpC,GAAMa,OAAQd,IAAIgU,YAAJ,CAAiB,aAAjB,IAAoC,IAApC,CAA2ChU,IAAIgU,YAAJ,CAAiB,aAAjB,CAA3C,CAA6E,EAA3F,CACAhU,IAAIuU,YAAJ,CAAiB,MAAjB,CAAyB,OAAzB,EACA7T,EAAEV,GAAF,EAAO+T,WAAP,CAAmB,UAAnB,EAA+BnQ,IAA/B,CAAoC,OAApC,EAA6C6Q,UAA7C,CAAwD,SAAxD,EACA/T,EAAEV,GAAF,EAAO4R,MAAP,uwBAYA,GAAIkZ,SAAS4M,QAAT,GAAsBz3B,GAA1B,CAA+B,CAC7BD,IAAIuU,YAAJ,CAAiB,cAAjB,CAAiC,MAAjC,EACAvU,IAAI0T,SAAJ,CAAcC,GAAd,CAAkB,UAAlB,EACA,GAAI,CAACjT,EAAEV,GAAF,EAAO4D,IAAP,CAAY,OAAZ,EAAqB,CAArB,CAAL,CAA8B,CAC5BlD,EAAEV,GAAF,EAAO4R,MAAP,gDAA8DgC,IAA9D,aAAgF9S,KAAhF,OACD,CAFD,IAEO,CACLJ,EAAEV,GAAF,EAAO4D,IAAP,CAAY,OAAZ,EAAqBiB,IAArB,CAA0B,SAA1B,CAAqC,IAArC,EAA2CuP,IAA3C,CAAgD,OAAhD,CAAyDtT,KAAzD,EACD,CACD62B,YAAc,CACZz3B,MAAO4qB,SAAS4M,QADJ,CAEZ52B,MAAOA,KAFK,CAAd,CAID,CAZD,IAYO,CACL,GAAI,CAACJ,EAAEV,GAAF,EAAO4D,IAAP,CAAY,OAAZ,EAAqB,CAArB,CAAL,CAA8B,CAC5BlD,EAAEV,GAAF,EAAO4R,MAAP,8BAA4CgC,IAA5C,aAA8D9S,KAA9D,OACD,CACF,CACF,CAjCD,EAkCA8qB,KAAKre,EAAL,CAAQ,KAAR,CAAe,IAAf,CAAqB,UAAW,CAC9B,GAAMlE,MAAO3I,EAAE,IAAF,CAAb,CACAi3B,YAAc,CACZz3B,MAAOmJ,KAAKnJ,KAAL,EADK,CAEZY,MAAOuI,KAAKzF,IAAL,CAAU,OAAV,EAAmBmR,GAAnB,EAFK,CAAd,CAIA1L,KAAK0F,QAAL,CAAc,IAAd,EAAoBgF,WAApB,CAAgC,UAAhC,EACA1K,KAAK0F,QAAL,CAAc,IAAd,EAAoB0F,UAApB,CAA+B,cAA/B,EACApL,KAAK0F,QAAL,CAAc,IAAd,EAAoBnL,IAApB,CAAyB,OAAzB,EAAkC8Q,UAAlC,CAA6C,SAA7C,EACArL,KAAKkK,QAAL,CAAc,UAAd,EACAlK,KAAK+K,IAAL,CAAU,cAAV,CAA0B,IAA1B,EACA/K,KAAKzF,IAAL,CAAU,OAAV,EAAmBiB,IAAnB,CAAwB,SAAxB,CAAmC,IAAnC,EACAimB,SAASjqB,QAAT,CAAkBhB,KAAlB,CAAwB,IAAxB,CAA8BC,SAA9B,EACD,CAbD,EAeA,MAAO,CACLiV,IAAK,qBAAM4iB,YAAN,EADA,CAELI,aAAc,8BAAMJ,YAAN,EAFT,CAAP,CAID,CAxEM,CAAT,EA2EA;;GAGAj3B,EAAEoE,MAAF,CAAS,CACP;;KAGAi4B,MAAO,uBAAW,CAChB;;;;;;;MAQA,GAAI,CAAC7wB,OAAL,CAAc,OACd,GAAI4e,UAAW,CACb1U,GAAI1V,EAAE+E,IAAF,EADS,CAEbu3B,WAAY,EAFC,CAGbC,OAAQ,IAHK,CAIbC,UAAW,KAJE,CAAf,CAOAx8B,EAAEoE,MAAF,CAASgmB,QAAT,CAAmB5e,OAAnB,EAEA,GAAI4e,SAASkS,UAAb,CAAyBlS,SAASkS,UAAT,CAAsB,4BAA8BlS,SAASkS,UAAvC,CAAoD,IAA1E,CACzB,GAAIlS,SAASoS,SAAT,GAAuB,KAA3B,CAAkC,CAChCpS,SAASqS,SAAT,CAAqB,qBAArB,CACD,CAFD,IAEO,CACLrS,SAASoS,SAAT,CAAqB,EAArB,CACD,CACD,GAAIpS,SAASmS,MAAT,GAAoB,KAAxB,CAA+BnS,SAASmS,MAAT,CAAkB,EAAlB,CAA/B,IACKnS,UAASmS,MAAT,8iBASL,GAAMnZ,qBAAuBgH,SAAS1U,EAAhC,KAAwC0U,SAASqS,SAAjD,CAA+DrS,SAASkS,UAAxE,KAAwFlS,SAASmS,MAAjG,8BAAN,CAEAv8B,EAAE,MAAF,EAAUkR,MAAV,CAAiBkS,KAAjB,EAEApjB,EAAE,IAAMoqB,SAAS1U,EAAjB,EAAqBxS,IAArB,CAA0B,mBAA1B,EAA+C2J,EAA/C,CAAkD7M,EAAEiX,UAApD,CAAgE,UAAM,CACpEjX,EAAE08B,SAAF,CAAY,IAAMtS,SAAS1U,EAA3B,EACD,CAFD,EAGD,CA9CM,CA+CPinB,UAAW,sBAAM,CACf,GAAIvZ,OAAQ1N,GAAKA,EAAL,CAAU,QAAtB,CACA1V,EAAE,gBAAF,EAAoB6S,QAApB,CAA6B,SAA7B,EACA,GAAI7S,EAAE8X,SAAF,EAAe9X,EAAEozB,QAArB,CAA+B,CAC7BpzB,EAAEojB,KAAF,EAAS3T,GAAT,CAAa,SAAb,CAAwB,OAAxB,EACAlH,WAAW,UAAW,CACpBvI,EAAEojB,KAAF,EAASvQ,QAAT,CAAkB,QAAlB,EACD,CAFD,CAEG,EAFH,EAGD,CALD,IAKO,CACL7S,EAAEojB,KAAF,EAASvQ,QAAT,CAAkB,QAAlB,EACD,CACF,CA1DM,CA2DP6pB,UAAW,sBAAM,CACf18B,EAAE0V,EAAF,EAAMrC,WAAN,CAAkB,QAAlB,EACArT,EAAE,gBAAF,EAAoB6S,QAApB,CAA6B,gBAA7B,EACAtK,WAAW,UAAM,CACfvI,EAAE,QAAF,EAAYqT,WAAZ,CAAwB,SAAxB,EACArT,EAAE,QAAF,EAAYqT,WAAZ,CAAwB,gBAAxB,EACD,CAHD,CAGG,GAHH,EAID,CAlEM,CAAT,EAqEA;;GAGArT,EAAEoE,MAAF,CAAS,CACP;;KAGAw4B,SAAU,mBAAM,CACd,GAAMC,YAAa78B,EAAE+E,IAAF,EAAnB,CACA,GAAM+3B,UAAW98B,EAAE+E,IAAF,EAAjB,CACA,GAAMg4B,gBAAiB/8B,iBAAkB88B,QAAlB,wCAAvB,CACA,GAAME,2BAA6BH,UAA7B,mCAAN,CACA78B,EAAE,MAAF,EAAU+Q,OAAV,CAAkBisB,QAAlB,EACAh9B,EAAE,MAAF,EAAUkR,MAAV,CAAiB6rB,cAAjB,EACA;;OAGA,GAAIE,UAAWj9B,MAAO68B,UAAP,CAAf,CACA,GAAIK,aAAcl9B,MAAO88B,QAAP,CAAlB,CAEA;;OAGAG,SAASvpB,IAAT,CAAc,aAAd,CAA6B,IAA7B,EACA1T,EAAE,SAAF,EAAa0T,IAAb,CAAkB,aAAlB,CAAiC,IAAjC,EACA1T,EAAE,SAAF,EAAamP,EAAb,CAAgB,CAAhB,EAAmB0D,QAAnB,CAA4B,MAA5B,EAAoCa,IAApC,CAAyC,aAAzC,CAAwD,OAAxD,EAEA;;OAGAwpB,YAAYrwB,EAAZ,CAAe,KAAf,CAAsB,UAAW,CAC/B7M,EAAE,IAAF,EAAQwT,WAAR,CAAoB,SAApB,EACA,GAAIypB,SAAS9pB,QAAT,CAAkB,MAAlB,CAAJ,CAA+B,CAC7B8pB,SAAS5pB,WAAT,CAAqB,MAArB,EACA4pB,SAASlpB,UAAT,CAAoB,aAApB,EACA/T,EAAE,aAAF,EAAiBqT,WAAjB,CAA6B,UAA7B,EAAyCW,UAAzC,CAAoD,UAApD,EACAhU,EAAE,eAAF,EAAmBqT,WAAnB,CAA+B,UAA/B,EAA2CW,UAA3C,CAAsD,UAAtD,EACD,CALD,IAKO,CACLipB,SAASpqB,QAAT,CAAkB,MAAlB,EACAoqB,SAASvpB,IAAT,CAAc,aAAd,CAA6B,IAA7B,EACA1T,EAAE,aAAF,EAAiB6S,QAAjB,CAA0B,UAA1B,EAAsC1O,IAAtC,CAA2C,UAA3C,CAAuD,IAAvD,EACAnE,EAAE,eAAF,EAAmB6S,QAAnB,CAA4B,UAA5B,EAAwC1O,IAAxC,CAA6C,UAA7C,CAAyD,IAAzD,EACD,CACF,CAbD,EAeAnE,MAAO68B,UAAP,EAAsBhwB,EAAtB,CAAyB,KAAzB,CAAgC,IAAhC,CAAsC,UAAW,CAC/C,GAAIswB,WAAYF,SAAS/5B,IAAT,CAAc,eAAd,CAAhB,CACA+5B,SAASvpB,IAAT,CAAc,aAAd,CAA6B,MAA7B,EAEA;;SAGAwpB,YAAY1pB,WAAZ,CAAwB,SAAxB,EAEAxT,EAAE,aAAF,EAAiBqT,WAAjB,CAA6B,UAA7B,EAAyCW,UAAzC,CAAoD,UAApD,EACAhU,EAAE,eAAF,EAAmBqT,WAAnB,CAA+B,UAA/B,EAA2CW,UAA3C,CAAsD,UAAtD,EAEA;;SAGAmpB,UAAUhjB,QAAV,CAAmB,UAAnB,EAA+B9G,WAA/B,CAA2C,UAA3C,EACArT,EAAE84B,OAAF,CAAU3e,QAAV,CAAmB,MAAnB,EAA2B9G,WAA3B,CAAuC,MAAvC,EAA+CK,IAA/C,CAAoD,aAApD,CAAmE,IAAnE,EACA,GAAM0pB,cAAe,IAAMp9B,EAAE,IAAF,EAAQ0T,IAAR,CAAa,WAAb,EAA0BlR,KAA1B,CAAgC,GAAhC,EAAqC,CAArC,CAA3B,CACA;;SAGA+F,WAAW,UAAW,CACpBvI,EAAEo9B,YAAF,EAAgB,CAAhB,EAAmBpqB,SAAnB,CAA6BpB,MAA7B,CAAoC,MAApC,EACD,CAFD,CAEG,GAFH,EAGA5R,EAAEo9B,YAAF,EAAgB,CAAhB,EAAmBpqB,SAAnB,CAA6BC,GAA7B,CAAiC,MAAjC,EACAjT,EAAEo9B,YAAF,EAAgB1pB,IAAhB,CAAqB,aAArB,CAAoC,KAApC,EACA1T,EAAE,gBAAF,EAAoB6S,QAApB,CAA6B,MAA7B,EAAqCQ,WAArC,CAAiD,SAAjD,EACArT,EAAE,iBAAF,EAAqB6S,QAArB,CAA8B,MAA9B,EAAsCQ,WAAtC,CAAkD,UAAlD,EACA;;SAGArT,EAAEk5B,MAAF,CAASC,QAAT,CAAkBn5B,EAAE,IAAF,EAAQ0T,IAAR,CAAa,WAAb,CAAlB,EACA,GAAI1T,EAAE24B,UAAF,CAAaj6B,MAAb,CAAsB,CAA1B,CAA6BsB,EAAE24B,UAAF,CAAa54B,GAAb,GAE7B;;SAGAk9B,SAAS5pB,WAAT,CAAqB,MAArB,EACD,CAtCD,EAwCA,MAAO,CACLgqB,SAAU,0BAAW,CACnB,GAAMJ,UAAWj9B,MAAO68B,UAAP,CAAjB,CACA,GAAI,CAACI,SAAS,CAAT,CAAL,CAAkB,OAClB,GAAI,CAACzxB,OAAL,CAAc,CACZ,OACD,CAFD,IAEO,aACLyxB,SAAS/5B,IAAT,CAAc,SAAd,EAAyBgO,MAAzB,CAAgC,wBAAhC,EACA,GAAIga,MAAO+R,SAAS/5B,IAAT,CAAc,IAAd,CAAX,CACAsI,QAAQnM,OAAR,CAAgB,aAAO,CACrB,IAAK,GAAIqJ,IAAT,GAAgBpJ,IAAhB,CAAqB,CACnB,GAAIoJ,MAAQ,QAAZ,CAAsB,CACpBwiB,KAAKha,MAAL,CAAY,+BAAiC5R,IAAIoJ,GAAJ,CAAjC,CAA4C,YAAxD,EACD,CAFD,IAEO,CACLwiB,KAAKha,MAAL,CAAY,kBAAoBxI,GAApB,CAA0B,QAA1B,CAAqCpJ,IAAIoJ,GAAJ,CAArC,CAAgD,YAA5D,EACD,CACF,CACF,CARD,EASAu0B,SAAS/5B,IAAT,CAAc,IAAd,EAAoBiM,EAApB,CAAuB,CAAvB,EAA0B0D,QAA1B,CAAmC,UAAnC,EAZK,KAaN,CACF,CApBI,CAAP,CAsBD,CAxGM,CAAT,EA2GA;;GAGA7S,EAAEoE,MAAF,CAAS,CACP;;KAGAk5B,QAAS,yBAAW,CAClB,GAAI,CAAC9xB,OAAL,CAAc,OACd,GAAI,CAACA,QAAQ5E,OAAb,CAAsB,OACtB,GAAI,CAAC4E,QAAQmT,GAAb,CAAkB,OAClB,GAAI,CAACnT,QAAQ+xB,GAAb,CAAkB,OAElB,GAAIC,SAAUx9B,EAAEwL,QAAQ5E,OAAV,CAAd,CACA,GAAM+X,KAAMnT,QAAQmT,GAApB,CACA,GAAM4e,KAAM/xB,QAAQ+xB,GAApB,CACA,GAAME,cAAejyB,QAAQiyB,YAAR,CAAuBjyB,QAAQiyB,YAA/B,CAA8CjyB,QAAQmT,GAA3E,CACA,GAAI+e,gBAAiB,GAArB,CACA,GAAIC,gBAAiB,GAArB,CACA,GAAIC,kBAAmB,EAAvB,CACA,GAAIC,kBAAmB,EAAvB,CACA,GAAIlf,MAAQ8e,YAAZ,CAA0B,CACxBG,iBAAmB,YAAnB,CACD,CAFD,IAEO,IAAIL,MAAQE,YAAZ,CAA0B,CAC/BI,iBAAmB,YAAnB,CACD,CACD,GAAMC,gBAAiB,WAAaF,gBAAb,CAAgC,2CAAvD,CACA,GAAMG,iBAAmBN,YAAnB,sCAAsEA,YAAtE,KAAN,CACA,GAAMO,gBAAiB,WAAaH,gBAAb,CAAgC,4CAAvD,CACAL,QAAQtsB,MAAR,CAAe4sB,eAAiBC,KAAjB,CAAyBC,cAAxC,EACAR,QAAQ39B,IAAR,CAAa,YAAb,CAA2B,CACzB8e,IAAKA,GADoB,CAEzB4e,IAAKA,GAFoB,CAGzBE,aAAcA,YAHW,CAA3B,EAMA,GAAMQ,sBAAuB,QAAvBA,qBAAuB,EAAW,CACtC,GAAMC,cAAeV,QAAQt6B,IAAR,CAAa,OAAb,EAAsBmR,GAAtB,EAArB,CACA,GAAMjU,OAAQo9B,QAAQ39B,IAAR,CAAa,YAAb,CAAd,CACA,GAAM09B,KAAMn9B,MAAMm9B,GAAlB,CACA,GAAIY,UAAWx+B,SAAf,CACAw+B,SAAW5tB,SAAS2tB,YAAT,CAAuB,EAAvB,EAA6B,CAAxC,CACAV,QAAQt6B,IAAR,CAAa,sBAAb,EAAqC6Q,UAArC,CAAgD,UAAhD,EACAypB,QAAQt6B,IAAR,CAAa,OAAb,EAAsBuP,IAAtB,CAA2B0rB,QAA3B,EACAX,QAAQt6B,IAAR,CAAa,OAAb,EAAsB,CAAtB,EAAyB9C,KAAzB,CAAiC+9B,QAAjC,CACA,GAAIA,WAAaZ,GAAjB,CAAsB,CACpBv9B,EAAE,IAAF,EAAQ0T,IAAR,CAAa,UAAb,CAAyB,UAAzB,EACD,CACF,CAZD,CAcA,GAAM0qB,sBAAuB,QAAvBA,qBAAuB,EAAW,CACtC,GAAMF,cAAeV,QAAQt6B,IAAR,CAAa,OAAb,EAAsBmR,GAAtB,EAArB,CACA,GAAMjU,OAAQo9B,QAAQ39B,IAAR,CAAa,YAAb,CAAd,CACA,GAAIs+B,UAAWx+B,SAAf,CACAw+B,SAAW5tB,SAAS2tB,YAAT,CAAuB,EAAvB,EAA6B,CAAxC,CACAV,QAAQt6B,IAAR,CAAa,qBAAb,EAAoC6Q,UAApC,CAA+C,UAA/C,EACAypB,QAAQt6B,IAAR,CAAa,OAAb,EAAsBuP,IAAtB,CAA2B0rB,QAA3B,EACAX,QAAQt6B,IAAR,CAAa,OAAb,EAAsB,CAAtB,EAAyB9C,KAAzB,CAAiC+9B,QAAjC,CACA,GAAIA,WAAaxf,GAAjB,CAAsB,CACpB3e,EAAE,IAAF,EAAQ0T,IAAR,CAAa,UAAb,CAAyB,UAAzB,EACD,CACF,CAXD,CAaA8pB,QAAQt6B,IAAR,CAAa,qBAAb,EAAoC2J,EAApC,CAAuC7M,EAAEiX,UAAzC,CAAqD,UAAW,CAC9DgnB,qBAAqB59B,IAArB,CAA0B,IAA1B,CAAgCm9B,OAAhC,EACD,CAFD,EAIAA,QAAQt6B,IAAR,CAAa,sBAAb,EAAqC2J,EAArC,CAAwC7M,EAAEiX,UAA1C,CAAsD,UAAW,CAC/DmnB,qBAAqB/9B,IAArB,CAA0B,IAA1B,CAAgCm9B,OAAhC,EACD,CAFD,EAIA,MAAO,CACLnpB,IAAK,qBAAMmpB,SAAQt6B,IAAR,CAAa,OAAb,EAAsBmR,GAAtB,EAAN,EADA,CAELgqB,SAAU,0BAAMb,SAAQt6B,IAAR,CAAa,OAAb,EAAsBmR,GAAtB,EAAN,EAFL,CAAP,CAID,CAxEM,CAAT,EA2EA;;GAGArU,EAAEoE,MAAF,CAAS,CACP;;KAGAk6B,OAAQ,wBAAW,CACjB,GAAI,CAAC9yB,OAAD,EAAY,CAACA,QAAQ5E,OAAzB,CAAkC,OAClC,GAAI23B,WAAY,KAAhB,CACA,GAAInU,UAAW,CACbxjB,QAASjH,SADI,CAEbuT,KAAMvT,SAFO,CAGbS,MAAOT,SAHM,CAIbyc,QAAS,KAJI,CAKbvP,GAAI7M,EAAE8E,IALO,CAMbmE,IAAKjJ,EAAE8E,IANM,CAOb05B,WAAYx+B,EAAE8E,IAPD,CAQb25B,YAAaz+B,EAAE8E,IARF,CAAf,CAWA9E,EAAEoE,MAAF,CAASgmB,QAAT,CAAmB5e,OAAnB,EACA,GAAIyrB,aAAc,CAChB7a,QAASmiB,SADO,CAEhBn+B,MAAOgqB,SAAShqB,KAFA,CAAlB,CAKA,GAAIkkB,WAAYtkB,EAAEoqB,SAASxjB,OAAX,CAAhB,CACA23B,UAAYnU,SAAShO,OAArB,CAEA;;OAGA,GAAIsiB,SAAU,YAAd,CACA,GAAIC,UAAW,WAAf,CACA,GAAI3/B,SAAS4/B,eAAT,CAAyBpL,GAAzB,GAAiC,KAArC,CAA4C,CAC1CkL,QAAU,WAAV,CACAC,SAAW,YAAX,CACD,CAED,GAAIE,YAAazU,SAAShO,OAAT,CAAmB,UAAnB,CAAgC,EAAjD,CACA,GAAM0iB,mDAAqD1U,SAASlX,IAA9D,MAAyE2rB,UAAzE,YAAgGzU,SAAShqB,KAAzG,KAAN,CAEAkkB,UAAUpT,MAAV,CAAiB4tB,QAAjB,EAEA,GAAIP,SAAJ,CAAe,CACbja,UAAUzR,QAAV,CAAmB,SAAnB,EACAyR,UAAU5Q,IAAV,CAAe,MAAf,CAAuB,UAAvB,EACD,CAED4Q,UAAUzX,EAAV,CAAa,KAAb,CAAoB,UAAW,CAC7B,GAAM8P,UAAW,KAAK5b,aAAL,CAAmB,OAAnB,CAAjB,CACA,GAAI,KAAKiS,SAAL,CAAeI,QAAf,CAAwB,SAAxB,CAAJ,CAAwC,CACtC,KAAKJ,SAAL,CAAepB,MAAf,CAAsB,SAAtB,EACA,KAAKiC,YAAL,CAAkB,cAAlB,CAAkC,KAAlC,EACA8I,SAASpJ,eAAT,CAAyB,SAAzB,EACA0jB,YAAY7a,OAAZ,CAAsB,KAAtB,CACAmiB,UAAY,KAAZ,CACA,GAAI/yB,QAAQizB,WAAZ,CAAyB,CACvBrU,SAASqU,WAAT,CAAqBp+B,IAArB,CAA0B,IAA1B,EACD,CAFD,IAEO,CACL+pB,SAASnhB,GAAT,CAAa5I,IAAb,CAAkB,IAAlB,EACD,CACF,CAXD,IAWO,CACL,KAAK2S,SAAL,CAAeC,GAAf,CAAmB,SAAnB,EACA0J,SAAS9I,YAAT,CAAsB,SAAtB,CAAiC,SAAjC,EACA,KAAKA,YAAL,CAAkB,cAAlB,CAAkC,IAAlC,EACAojB,YAAY7a,OAAZ,CAAsB,IAAtB,CACAmiB,UAAY,IAAZ,CACA,GAAI/yB,QAAQgzB,UAAZ,CAAwB,CACtBpU,SAASoU,UAAT,CAAoBn+B,IAApB,CAAyB,IAAzB,EACD,CAFD,IAEO,CACL+pB,SAASvd,EAAT,CAAYxM,IAAZ,CAAiB,IAAjB,EACD,CAEF,CACF,CA1BD,EA2BAikB,UAAUzX,EAAV,CAAa6xB,OAAb,CAAsB,UAAW,CAC/B,GAAM/hB,UAAW,KAAK5b,aAAL,CAAmB,OAAnB,CAAjB,CACA,GAAI,KAAKiS,SAAL,CAAeI,QAAf,CAAwB,SAAxB,CAAJ,CAAwC,CACtC,KAAKJ,SAAL,CAAepB,MAAf,CAAsB,SAAtB,EACA,KAAKiC,YAAL,CAAkB,cAAlB,CAAkC,KAAlC,EACA8I,SAASpJ,eAAT,CAAyB,SAAzB,EACA0jB,YAAY7a,OAAZ,CAAsB,IAAtB,CACAmiB,UAAY,IAAZ,CACA,GAAI/yB,QAAQgzB,UAAZ,CAAwB,CACtBpU,SAASoU,UAAT,CAAoBn+B,IAApB,CAAyB,IAAzB,EACD,CAFD,IAEO,CACL+pB,SAASvd,EAAT,CAAYxM,IAAZ,CAAiB,IAAjB,EACD,CACF,CACF,CAdD,EAeAikB,UAAUzX,EAAV,CAAa8xB,QAAb,CAAuB,UAAW,CAChC,GAAMhiB,UAAW,KAAK5b,aAAL,CAAmB,OAAnB,CAAjB,CACA,GAAI,CAAC,KAAKiS,SAAL,CAAeI,QAAf,CAAwB,SAAxB,CAAL,CAAyC,CACvC,KAAKJ,SAAL,CAAeC,GAAf,CAAmB,SAAnB,EACA0J,SAAS9I,YAAT,CAAsB,SAAtB,CAAiC,SAAjC,EACA,KAAKA,YAAL,CAAkB,cAAlB,CAAkC,IAAlC,EACAojB,YAAY7a,OAAZ,CAAsB,KAAtB,CACAmiB,UAAY,KAAZ,CACA,GAAI/yB,QAAQizB,WAAZ,CAAyB,CACvBrU,SAASqU,WAAT,CAAqBp+B,IAArB,CAA0B,IAA1B,EACD,CAFD,IAEO,CACL+pB,SAASnhB,GAAT,CAAa5I,IAAb,CAAkB,IAAlB,EACD,CACF,CACF,CAdD,EAgBA,MAAO,CACLgU,IAAK,qBAAM4iB,YAAN,EADA,CAELoH,SAAU,0BAAMpH,YAAN,EAFL,CAAP,CAID,CA7GM,CAAT,EAgHA;;GAGAj3B,EAAEoE,MAAF,CAAS,CACP;;KAGA26B,OAAQ,wBAAW,CACjB;;;;;;;;;MAUA,GAAI,CAACvzB,OAAL,CAAc,OACd,GAAIkK,IAAK1V,EAAE+E,IAAF,EAAT,CACA,GAAIqlB,UAAW,CACb4M,SAAU,CADG,CAAf,CAGAh3B,EAAEoE,MAAF,CAASgmB,QAAT,CAAmB5e,OAAnB,EACA,GAAI,CAAC4e,SAAS4U,KAAT,CAAetgC,MAApB,CAA4B,CAC1B0rB,SAAS4U,KAAT,CAAiB5U,SAAS0R,MAA1B,CACD,CACD,GAAI,CAAC1R,SAAS1U,EAAd,CAAkB,CAChB0U,SAAS1U,EAAT,CAAcA,EAAd,CACD,CAFD,IAEO,CACLA,GAAK0U,SAAS1U,EAAd,CACD,CAED;;OAGA,GAAIupB,iBAAkBj/B,GAAtB,CAEA,GAAI84B,SAAU94B,GAAd,CACA,GAAMk/B,cAAe,GAArB,CAEA,GAAI9U,SAAS0O,OAAb,CAAsB,CACpB1O,SAAS0O,OAAT,CAAiBz5B,OAAjB,CAAyB,SAAU22B,MAAV,CAAkB,CACzC,GAAI,CAAC,kBAAkBjzB,IAAlB,CAAuBizB,MAAvB,CAAL,CAAqC,CACnCiJ,gBAAgBr/B,IAAhB,CAAqBI,EAAEk/B,aAAelJ,MAAjB,EAAyB,CAAzB,CAArB,EACAh2B,EAAEk/B,aAAelJ,MAAjB,EAAyBnjB,QAAzB,CAAkC,WAAlC,EACD,CAHD,IAGO,CACLosB,gBAAgBn/B,MAAhB,CAAuBE,EAAEg2B,MAAF,EAAU,CAAV,CAAvB,EACAh2B,EAAEg2B,MAAF,EAAUnjB,QAAV,CAAmB,WAAnB,EACD,CACF,CARD,EASD,CAVD,IAUO,CACLuX,SAAS0R,MAAT,CAAgBz8B,OAAhB,CAAwB,SAAU22B,MAAV,CAAkBz2B,GAAlB,CAAuB,CAC7C0/B,gBAAgBr/B,IAAhB,CAAqBk5B,QAAQ3pB,EAAR,CAAW5P,GAAX,CAArB,EACD,CAFD,EAGD,CACD,GAAI4/B,gBAAiBx/B,SAArB,CACA,GAAIq8B,2BAA4B,EAAhC,CACA,GAAIh8B,EAAEuzB,KAAF,GAAY,SAAhB,CAA2B,CACzByI,0BAA4B,8CAA5B,CACD,CACD,GAAMoD,WAAYhV,SAASgV,SAAT,CAAqB,qBAArB,CAA6C,EAA/D,CAEA;;OAGA,GAAMC,cAAe,QAAfA,aAAe,SAAW,CAC9Br/B,EAAE4G,OAAF,EAAWyM,WAAX,CAAuB,UAAvB,EAAmCA,WAAnC,CAA+C,MAA/C,EAAuDR,QAAvD,CAAgE,SAAhE,EACA7S,EAAE4G,OAAF,EAAW8M,IAAX,CAAgB,aAAhB,CAA+B,OAA/B,EACD,CAHD,CAKA;;OAGA,GAAM4rB,WAAY,QAAZA,UAAY,SAAW,CAC3Bt/B,EAAE4G,OAAF,EAAWyM,WAAX,CAAuB,SAAvB,EAAkCR,QAAlC,CAA2C,MAA3C,EACA7S,EAAE4G,OAAF,EAAW8M,IAAX,CAAgB,aAAhB,CAA+B,MAA/B,EACD,CAHD,CAKA;;OAGA,GAAM6rB,SAAU,QAAVA,QAAU,CAACxB,KAAD,CAAQyB,IAAR,CAAcjgC,GAAd,CAAsB,CACpC,GAAIkgC,KAAM,6BAA+BD,IAAzC,CACA,GAAIpV,SAAS4M,QAAT,GAAsBz3B,GAA1B,CAA+B,CAC7BkgC,KAAO,WAAP,CACD,CACDA,KAAO,GAAP,CACA,GAAIrV,SAAS0O,OAAT,EAAoB1O,SAAS0O,OAAT,CAAiBp6B,MAAzC,CAAiD,CAC/C+gC,kBAAqBrV,SAAS0O,OAAT,CAAiBv5B,GAAjB,CAArB,KACD,CACDkgC,0CAA6CrV,SAAS0R,MAAT,CAAgBv8B,GAAhB,CAA7C,qBACA,MAAOkgC,IAAP,CACD,CAXD,CAYA;;OAGA,GAAIC,YAAa1/B,4BAA6Bo/B,SAA7B,KAA4CpD,yBAA5C,aAAjB,CACA0D,WAAW,CAAX,EAAchqB,EAAd,CAAmB0U,SAAS1U,EAA5B,CACAgqB,WAAW7sB,QAAX,CAAoB,QAApB,EAEAysB,UAAUt/B,EAAE,QAAF,CAAV,EACAm/B,eAAiBn/B,EAAE,QAAF,EAAYmP,EAAZ,CAAeib,SAAS4M,QAAxB,CAAjB,CACAqI,aAAaF,cAAb,EAEA,GAAI/U,SAAS0R,MAAT,CAAgBp9B,MAApB,CAA4B,CAC1B0rB,SAAS0R,MAAT,CAAgBz8B,OAAhB,CAAwB,SAAU0+B,KAAV,CAAiBx+B,GAAjB,CAAsB,CAC5CmgC,WAAWxuB,MAAX,CAAkBquB,QAAQxB,KAAR,CAAe3T,SAAS4U,KAAT,CAAez/B,GAAf,CAAf,CAAoCA,GAApC,CAAlB,EACD,CAFD,EAGD,CAED;;OAGAS,EAAE,MAAF,EAAU+Q,OAAV,CAAkB2uB,UAAlB,EAEA;;OAGA,GAAMC,QAAS3/B,EAAE,IAAMoqB,SAAS1U,EAAjB,CAAf,CACA,GAAMkqB,mBAAoBD,OAAOz8B,IAAP,CAAY,iBAAZ,CAA1B,CAGA;;OAGA,GAAM28B,iBAAkBF,OAAOz8B,IAAP,CAAY,QAAZ,CAAxB,CACA,GAAM48B,wBAAyBD,gBAAgB1wB,EAAhB,CAAmBib,SAAS4M,QAA5B,CAA/B,CACA,GAAM+I,wBAAyBd,gBAAgB9vB,EAAhB,CAAmBib,SAAS4M,QAA5B,CAA/B,CAEA;;OAGA,GAAMkF,wBAAyByD,OAAOz8B,IAAP,CAAY,yBAAZ,CAA/B,CACA,QAAS88B,6BAAT,CAAsCP,GAAtC,CAA2C,CACzC,GAAIrvB,OAAQpQ,EAAEy/B,GAAF,EAAOrvB,KAAP,EAAZ,CACA,GAAI+B,MAAOnS,EAAEy/B,GAAF,EAAO1tB,MAAP,GAAgBI,IAA3B,CACA+pB,uBAAuBzsB,GAAvB,CAA2B,CAACW,MAAOA,MAAQ,IAAhB,CAAsB+B,KAAMA,KAAO,IAAnC,CAA3B,EACD,CACD,GAAInS,EAAEuzB,KAAF,GAAY,SAAhB,CAA2B,CACzByM,6BAA6BJ,iBAA7B,EACD,CAED;;OAGA5/B,EAAE,UAAM,CAENA,EAAE24B,UAAF,CAAe,EAAf,CACA34B,EAAE24B,UAAF,CAAa/4B,IAAb,CAAkBq/B,gBAAgB9vB,EAAhB,CAAmBib,SAAS4M,QAA5B,EAAsC,CAAtC,EAAyCthB,EAA3D,EAEA,GAAMuqB,eAAgBN,OAAOz8B,IAAP,CAAY,QAAZ,CAAtB,CACAlD,EAAEk5B,MAAF,CAASC,QAAT,CAAkB4G,uBAAuB,CAAvB,EAA0BrqB,EAA5C,EACAuqB,cAAc5gC,OAAd,CAAsB,SAAUkd,MAAV,CAAkBhd,GAAlB,CAAuB,CAC3CS,EAAEuc,MAAF,EAAU1c,IAAV,CAAe,YAAf,CAA6Bo/B,gBAAgB9vB,EAAhB,CAAmB5P,GAAnB,EAAwB,CAAxB,EAA2BmW,EAAxD,EACD,CAFD,EAIA;;SAGAiqB,OAAO9yB,EAAP,CAAU,KAAV,CAAiB,QAAjB,CAA2B,UAAY,CACrC,GAAM4yB,KAAMz/B,EAAE,IAAF,CAAZ,CACA,GAAMkgC,QAAST,IAAI5/B,IAAJ,CAAS,YAAT,EAAuB2C,KAAvB,CAA6B,GAA7B,CAAf,CACA,GAAM29B,WAAYngC,EAAE24B,UAAF,CAAa5uB,IAAb,CAAkB,GAAlB,CAAlB,CACA,GAAIq2B,eAAgBX,IAAI5/B,IAAJ,CAAS,YAAT,CAApB,CACA,GAAMwgC,WAAYD,cAAc59B,KAAd,CAAoB,GAApB,CAAlB,CAEA;;WAGA,GAAI09B,OAAOxhC,MAAP,CAAgB,CAApB,CAAuB,CACrBmhC,gBAAgB1lB,QAAhB,CAAyB,UAAzB,EAAqCta,IAArC,CAA0C,YAA1C,CAAwDsgC,SAAxD,EACAN,gBAAgB1lB,QAAhB,CAAyB,UAAzB,EAAqC9G,WAArC,CAAiD,UAAjD,EAA6DR,QAA7D,CAAsE,MAAtE,EACAutB,cAAgBpgC,EAAE,IAAF,EAAQH,IAAR,CAAa,YAAb,CAAhB,CACA;;aAGA4/B,IAAI5sB,QAAJ,CAAa,UAAb,EACA;;aAGA7S,EAAE,SAAF,EAAaqT,WAAb,CAAyB,SAAzB,EAAoCR,QAApC,CAA6C,MAA7C,EAAqDa,IAArD,CAA0D,aAA1D,CAAyE,IAAzE,EACA1T,EAAE,SAAF,EAAaqT,WAAb,CAAyB,UAAzB,EAAqCR,QAArC,CAA8C,MAA9C,EAAsDa,IAAtD,CAA2D,aAA3D,CAA0E,IAA1E,EACA,GAAM2sB,YAAYD,cAAc59B,KAAd,CAAoB,GAApB,CAAlB,CACA69B,WAAUhhC,OAAV,CAAmB,SAASk6B,KAAT,CAAgBh6B,GAAhB,CAAqB,CACtC,GAAM+gC,SAAU/G,MAAM/2B,KAAN,CAAY,GAAZ,CAAhB,CACA,GAAI+9B,YAAaD,QAAQ,CAAR,CAAjB,CACA,GAAI/gC,MAAQ2gC,OAAOxhC,MAAP,CAAgB,CAA5B,CAA+B,CAC7BsB,EAAE,IAAMugC,UAAR,EAAoBltB,WAApB,CAAgC,MAAhC,EAAwCR,QAAxC,CAAiD,UAAjD,EAA6Da,IAA7D,CAAkE,aAAlE,CAAiF,IAAjF,EACD,CAFD,IAEO,CACL1T,EAAE,IAAMugC,UAAR,EAAoBltB,WAApB,CAAgC,MAAhC,EAAwCR,QAAxC,CAAiD,SAAjD,EAA4Da,IAA5D,CAAiE,aAAjE,CAAgF,KAAhF,EACD,CACF,CARD,EASA;;aAGA1T,EAAE24B,UAAF,CAAeuH,MAAf,CACAlgC,EAAEk5B,MAAF,CAASC,QAAT,CAAkB+G,OAAOA,OAAOxhC,MAAP,CAAgB,CAAvB,CAAlB,EAEA;;aAGA,GAAIsB,EAAEuzB,KAAF,GAAY,SAAhB,CAA2B,CACzByM,6BAA6BP,GAA7B,EACD,CAED;;aAGD,CAvCD,IAuCO,CACL,GAAMzJ,QAASh2B,EAAE,QAAF,EAAYmP,EAAZ,CAAeswB,IAAIjgC,KAAJ,EAAf,CAAf,CACAqgC,gBAAgB1lB,QAAhB,CAAyB,UAAzB,EAAqCta,IAArC,CAA0C,YAA1C,CAAwDsgC,SAAxD,EACAN,gBAAgB1lB,QAAhB,CAAyB,UAAzB,EAAqC9G,WAArC,CAAiD,UAAjD,EAA6DR,QAA7D,CAAsE,MAAtE,EACA;;aAGA7S,EAAE,QAAF,EAAYqT,WAAZ,CAAwB,SAAxB,EAAmCR,QAAnC,CAA4C,MAA5C,EAAoDa,IAApD,CAAyD,aAAzD,CAAwE,IAAxE,EACA1T,EAAE,QAAF,EAAYqT,WAAZ,CAAwB,UAAxB,EAAoCR,QAApC,CAA6C,MAA7C,EAAqDa,IAArD,CAA0D,aAA1D,CAAyE,IAAzE,EACA;;aAGA+rB,IAAI5sB,QAAJ,CAAa,UAAb,EACA,GAAI7S,EAAEuzB,KAAF,GAAY,SAAhB,CAA2B,CACzByM,6BAA6BP,GAA7B,EACD,CAEDS,OAAO7gC,OAAP,CAAe,SAAUk6B,KAAV,CAAiBh6B,GAAjB,CAAsB,CACnC,GAAM+gC,SAAU/G,MAAM/2B,KAAN,CAAY,GAAZ,CAAhB,CACA,GAAM+9B,YAAaD,QAAQ,CAAR,CAAnB,CACA,GAAI/gC,MAAQ2gC,OAAOxhC,MAAP,CAAgB,CAA5B,CAA+B,CAC7BsB,EAAE,IAAMugC,UAAR,EAAoBltB,WAApB,CAAgC,MAAhC,EAAwCR,QAAxC,CAAiD,UAAjD,EAA6Da,IAA7D,CAAkE,aAAlE,CAAiF,IAAjF,EACD,CAFD,IAEO,CACL1T,EAAE,IAAMugC,UAAR,EAAoBltB,WAApB,CAAgC,MAAhC,EAAwCR,QAAxC,CAAiD,SAAjD,EAA4Da,IAA5D,CAAiE,aAAjE,CAAgF,KAAhF,EACD,CACF,CARD,EAUA;;aAGA1T,EAAE24B,UAAF,CAAeuH,MAAf,CACAlgC,EAAEk5B,MAAF,CAASC,QAAT,CAAkBgH,SAAlB,EACD,CACF,CAlFD,EAmFD,CAjGD,EAmGA,MAAO,CACLK,eAAgB,yBAAM,CACpB,MAAOV,uBAAP,CACD,CAHI,CAKLW,kBAAmB,4BAAM,CACvB,MAAOV,uBAAP,CACD,CAPI,CASLW,eAAgB,wBAAClxB,QAAD,CAAc,CAC5BmwB,OAAOz8B,IAAP,CAAY,QAAZ,EAAsB4W,EAAtB,CAAyB,WAAzB,EAAsCzG,WAAtC,CAAkD,UAAlD,EAA8DR,QAA9D,CAAuE,MAAvE,EACA8sB,OAAOnyB,QAAP,CAAgB,QAAhB,EAA0B2B,EAA1B,CAA6BK,QAA7B,EAAuCqD,QAAvC,CAAgD,UAAhD,EACAysB,UAAUL,gBAAgBnlB,EAAhB,CAAmB,UAAnB,EAA+B,CAA/B,CAAV,EACAulB,aAAaJ,gBAAgB9vB,EAAhB,CAAmBK,QAAnB,EAA6B,CAA7B,CAAb,EACD,CAdI,CAAP,CAgBD,CAlQM,CAAT,EAqQA;;GAGAxP,EAAEoE,MAAF,CAAS,CACP;;;;;;;;;;;;;KAcAu8B,UAAW,mBAASjN,KAAT,CAAgB,CACzB,KAAKjJ,EAAL,CAAU,KAAV,CACA;;;OAIA,GAAIiJ,MAAM9Z,MAAN,CAAa,CAAb,GAAmB,GAAvB,CAA4B,CAC1B8Z,MAAQA,MAAMjV,MAAN,CAAa,CAAb,CAAe,CAAf,CAAR,CACD,CACDiV,MAAQA,MAAMvjB,WAAN,EAAR,CAGA;;;;OAKA,GAAMywB,YAAa,CACjB,CACE,0DACAC,GAAI,0DAFN,CAGEC,QAAS,iBAASC,IAAT,CAAe,CACtB,MAAO,CACLxwB,SAASwwB,KAAK,CAAL,CAAT,CADK,CAELxwB,SAASwwB,KAAK,CAAL,CAAT,CAFK,CAGLxwB,SAASwwB,KAAK,CAAL,CAAT,CAHK,CAAP,CAKD,CATH,CADiB,CAYjB,CACE,oCACAF,GAAI,yBAFN,CAGEC,QAAS,iBAASC,IAAT,CAAe,CACtB,MAAO,CACLxwB,SAASwwB,KAAK,CAAL,CAAT,CAAkB,EAAlB,CADK,CAELxwB,SAASwwB,KAAK,CAAL,CAAT,CAAkB,EAAlB,CAFK,CAGLxwB,SAASwwB,KAAK,CAAL,CAAT,CAAkB,EAAlB,CAHK,CAAP,CAKD,CATH,CAZiB,CAuBjB,CACE;;WAGAF,GAAI,yBAJN,CAKEC,QAAS,iBAASC,IAAT,CAAe,CACtB,MAAO,CACLxwB,SAASwwB,KAAK,CAAL,EAAUA,KAAK,CAAL,CAAnB,CAA4B,EAA5B,CADK,CAELxwB,SAASwwB,KAAK,CAAL,EAAUA,KAAK,CAAL,CAAnB,CAA4B,EAA5B,CAFK,CAGLxwB,SAASwwB,KAAK,CAAL,EAAUA,KAAK,CAAL,CAAnB,CAA4B,EAA5B,CAHK,CAAP,CAKD,CAXH,CAvBiB,CAAnB,CAsCA;;OAGA,IAAK,GAAIjiC,GAAI,CAAb,CAAgBA,EAAI,CAApB,CAAuBA,GAAvB,CAA4B,CAC1B,GAAM+hC,IAAKD,WAAW9hC,CAAX,EAAc+hC,EAAzB,CACA,GAAMG,WAAYJ,WAAW9hC,CAAX,EAAcgiC,OAAhC,CACA,GAAMC,MAAOF,GAAG/5B,IAAH,CAAQ4sB,KAAR,CAAb,CACA,GAAIqN,IAAJ,CAAU,CACR,GAAME,UAAWD,UAAUD,IAAV,CAAjB,CACA,KAAKp7B,CAAL,CAASs7B,SAAS,CAAT,CAAT,CACA,KAAKC,CAAL,CAASD,SAAS,CAAT,CAAT,CACA,KAAKvsB,CAAL,CAASusB,SAAS,CAAT,CAAT,CACA,KAAKxW,EAAL,CAAU,IAAV,CACD,CACF,CAED;;OAGA,KAAK9kB,CAAL,CAAU,KAAKA,CAAL,CAAS,CAAT,EAAcmW,MAAM,KAAKnW,CAAX,CAAf,CAAgC,CAAhC,CAAsC,KAAKA,CAAL,CAAS,GAAV,CAAiB,GAAjB,CAAuB,KAAKA,CAA1E,CACA,KAAKu7B,CAAL,CAAU,KAAKA,CAAL,CAAS,CAAT,EAAcplB,MAAM,KAAKolB,CAAX,CAAf,CAAgC,CAAhC,CAAsC,KAAKA,CAAL,CAAS,GAAV,CAAiB,GAAjB,CAAuB,KAAKA,CAA1E,CACA,KAAKxsB,CAAL,CAAU,KAAKA,CAAL,CAAS,CAAT,EAAcoH,MAAM,KAAKpH,CAAX,CAAf,CAAgC,CAAhC,CAAsC,KAAKA,CAAL,CAAS,GAAV,CAAiB,GAAjB,CAAuB,KAAKA,CAA1E,CAEA,KAAKysB,KAAL,CAAa,UAAW,CACtB,GAAIx7B,GAAI,KAAKA,CAAL,CAAOxE,QAAP,CAAgB,EAAhB,CAAR,CACA,GAAI+/B,GAAI,KAAKA,CAAL,CAAO//B,QAAP,CAAgB,EAAhB,CAAR,CACA,GAAIuT,GAAI,KAAKA,CAAL,CAAOvT,QAAP,CAAgB,EAAhB,CAAR,CACA,GAAIwE,EAAEjH,MAAF,EAAY,CAAhB,CAAmBiH,EAAI,IAAMA,CAAV,CACnB,GAAIu7B,EAAExiC,MAAF,EAAY,CAAhB,CAAmBwiC,EAAI,IAAMA,CAAV,CACnB,GAAIxsB,EAAEhW,MAAF,EAAY,CAAhB,CAAmBgW,EAAI,IAAMA,CAAV,CACnB,MAAO,IAAM/O,CAAN,CAAUu7B,CAAV,CAAcxsB,CAArB,CACD,CARD,CAUA,KAAK0sB,KAAL,CAAa,UAAW,CACtB,MAAO,OAAS,KAAKz7B,CAAd,CAAiB,GAAjB,CAAuB,KAAKu7B,CAA5B,CAAgC,GAAhC,CAAsC,KAAKxsB,CAA3C,CAA+C,GAAtD,CACD,CAFD,CAGD,CA1GM,CA4GP;;;;KAKA2sB,cAAe,uBAAS3N,KAAT,CAAgB,CAC7B,GAAI1zB,EAAEY,IAAF,CAAO8yB,KAAP,IAAkB,QAAtB,CAAgCA,MAAQ1zB,EAAE2gC,SAAF,CAAYjN,KAAZ,CAAR,CAChC,MAAQA,OAAM/tB,CAAN,CAAU,IAAX,CAAoB+tB,MAAMwN,CAAN,CAAU,IAA9B,CAAuCxN,MAAMhf,CAAN,CAAU,IAAxD,CACD,CApHM,CAsHP;;;KAIA4sB,aAAc,sBAAS5N,KAAT,CAAgB6N,OAAhB,CAAyB,CACrC,GAAMjiB,KAAM/O,SAASmjB,MAAMx0B,KAAN,CAAY,CAAZ,CAAT,CAAyB,EAAzB,CAAZ,CACA,GAAMsiC,KAAMl8B,KAAK4M,KAAL,CAAW,KAAOqvB,OAAlB,CAAZ,CACA,GAAIE,GAAI,CAACniB,KAAO,EAAR,EAAckiB,GAAtB,CACA,GAAIE,GAAI,CAACpiB,KAAO,CAAP,CAAW,MAAZ,EAAsBkiB,GAA9B,CACA,GAAIG,GAAI,CAACriB,IAAM,QAAP,EAAmBkiB,GAA3B,CACA,MAAO,IAAM,CAAC,UAAY,CAACC,EAAI,GAAJ,CAAUA,EAAI,CAAJ,CAAQ,CAAR,CAAYA,CAAtB,CAA0B,GAA3B,EAAkC,OAA9C,CAAwD,CAACC,EAAI,GAAJ,CAAUA,EAAI,CAAJ,CAAQ,CAAR,CAAYA,CAAtB,CAA0B,GAA3B,EAAkC,KAA1F,EAAmGC,EAAI,GAAJ,CAAUA,EAAI,CAAJ,CAAQ,CAAR,CAAYA,CAAtB,CAA0B,GAA7H,CAAD,EAAoIxgC,QAApI,CAA6I,EAA7I,EAAiJjC,KAAjJ,CAAuJ,CAAvJ,CAAb,CACD,CAjIM,CAmIP;;;KAIA0iC,YAAa,qBAASlO,KAAT,CAAgB6N,OAAhB,CAAyB,CACpC,GAAMjiB,KAAM/O,SAASmjB,MAAMx0B,KAAN,CAAY,CAAZ,CAAT,CAAyB,EAAzB,CAAZ,CACA,GAAMsiC,KAAMl8B,KAAK4M,KAAL,CAAW,KAAOqvB,OAAlB,CAAZ,CACA,GAAIE,GAAI,CAACniB,KAAO,EAAR,EAAckiB,GAAtB,CACA,GAAIE,GAAI,CAACpiB,KAAO,CAAP,CAAW,MAAZ,EAAsBkiB,GAA9B,CACA,GAAIG,GAAI,CAACriB,IAAM,QAAP,EAAmBkiB,GAA3B,CACA,MAAO,IAAM,CAAC,UAAY,CAACC,EAAI,GAAJ,CAAUA,EAAI,CAAJ,CAAQ,CAAR,CAAYA,CAAtB,CAA0B,GAA3B,EAAkC,OAA9C,CAAwD,CAACC,EAAI,GAAJ,CAAUA,EAAI,CAAJ,CAAQ,CAAR,CAAYA,CAAtB,CAA0B,GAA3B,EAAkC,KAA1F,EAAmGC,EAAI,GAAJ,CAAUA,EAAI,CAAJ,CAAQ,CAAR,CAAYA,CAAtB,CAA0B,GAA7H,CAAD,EAAoIxgC,QAApI,CAA6I,EAA7I,EAAiJjC,KAAjJ,CAAuJ,CAAvJ,CAAb,CACD,CA9IM,CAgJP;;;KAIA2iC,oBAAqB,6BAASnO,KAAT,CAAgB,CACnC,GAAI1zB,EAAEY,IAAF,CAAO8yB,KAAP,IAAkB,QAAtB,CAAgCA,MAAQA,MAAMyN,KAAN,EAAR,CAChC,GAAMW,OAAQ,GAAI9hC,GAAE2gC,SAAN,CAAgBjN,KAAhB,CAAd,CACA,MAAO1zB,GAAEqhC,aAAF,CAAgBS,KAAhB,CAAP,CACD,CAxJM,CAAT,EA4JA;;GAGA9hC,EAAE,UAAW,CAEX,GAAIA,EAAEuzB,KAAF,GAAY,SAAhB,CAA2B,CACzBvzB,EAAE,MAAF,EAAU6M,EAAV,CAAa7M,EAAEiX,UAAf,CAA2B,gHAA3B,CAA6I,SAASZ,CAAT,CAAY,CAEvJ,GAAIC,QAAS,IAAb,CAEA;;SAGA,GAAIA,OAAOxC,YAAP,CAAoB,UAApB,GAAmCwC,OAAOtD,SAAP,CAAiBI,QAAjB,CAA0B,UAA1B,CAAvC,CAA8E,CAC5E,OACD,CAED;;SAGA,GAAMrB,QAAS/R,EAAEsW,MAAF,EAAUvE,MAAV,EAAf,CACA,GAAIgwB,GAAIz8B,KAAKqZ,GAAL,CAAS,KAAKqjB,WAAd,CAA2B,GAA3B,CAAR,CACA,GAAIC,GAAI38B,KAAKqZ,GAAL,CAAS,KAAK8X,YAAd,CAA4B,GAA5B,CAAR,CACA,GAAMzxB,GAAIM,KAAKi4B,GAAL,CAASwE,CAAT,CAAYE,CAAZ,CAAV,CACA;;SAGAF,EAAI/8B,CAAJ,CACAi9B,EAAIj9B,CAAJ,CAEA,GAAMk9B,GAAIliC,EAAE8X,SAAF,CAAczB,EAAE0C,OAAF,CAAU,CAAV,EAAaF,KAAb,CAAqB9G,OAAOI,IAA1C,CAAiDkE,EAAEwC,KAAF,CAAU9G,OAAOI,IAA5E,CACA,GAAMgwB,GAAIniC,EAAE8X,SAAF,CAAczB,EAAE0C,OAAF,CAAU,CAAV,EAAaD,KAAb,CAAqB/G,OAAOE,GAA1C,CAAiDoE,EAAEyC,KAAF,CAAU/G,OAAOE,GAA5E,CAEA,GAAImwB,YAAaziC,SAAjB,CACA,GAAI0iC,iBAAkB1iC,SAAtB,CAEA;;SAGA,GAAM2iC,QAAStiC,EAAE,iCAAF,CAAf,CACAA,EAAEsW,MAAF,EAAUpF,MAAV,CAAiBoxB,MAAjB,EAEA;;;SAKA,GAAIhsB,OAAOxE,QAAP,GAAoB,QAApB,EAAgCwE,OAAOtD,SAAP,CAAiBI,QAAjB,CAA0B,kBAA1B,CAApC,CAAmF,CACjF,GAAIgvB,aAAapiC,EAAE,cAAF,EAAkBmP,EAAlB,CAAqB,CAArB,EAAwBM,GAAxB,CAA4B,kBAA5B,CAAjB,CACA4yB,gBAAkB,GAAIriC,GAAE2gC,SAAN,CAAgByB,WAAhB,EAA4BjB,KAA5B,EAAlB,CACD,CAHD,IAGO,IAAK7qB,OAAOxE,QAAP,GAAoB,QAApB,EAAgC9R,EAAEsW,MAAF,EAAU/G,OAAV,CAAkB,KAAlB,EAAyB,CAAzB,CAArC,CAAmE,CACxE6yB,WAAapiC,EAAEsW,MAAF,EAAU/G,OAAV,CAAkB,KAAlB,EAAyBE,GAAzB,CAA6B,kBAA7B,CAAb,CACA4yB,gBAAkB,GAAIriC,GAAE2gC,SAAN,CAAgByB,UAAhB,EAA4BjB,KAA5B,EAAlB,CAED,CAJM,IAIA,IAAK7qB,OAAOxE,QAAP,GAAoB,QAApB,EAAgC9R,EAAEsW,MAAF,EAAU/G,OAAV,CAAkB,SAAlB,EAA6B,CAA7B,CAArC,CAAuE,CAC5E6yB,WAAapiC,EAAEsW,MAAF,EAAU/G,OAAV,CAAkB,SAAlB,EAA6BE,GAA7B,CAAiC,kBAAjC,CAAb,CACA4yB,gBAAkB,GAAIriC,GAAE2gC,SAAN,CAAgByB,UAAhB,EAA4BjB,KAA5B,EAAlB,CAED,CAJM,IAIA,CACLkB,gBAAkBriC,EAAE,IAAF,EAAQyP,GAAR,CAAY,kBAAZ,CAAlB,CACA,GAAI,CAAC4yB,eAAD,EAAoBA,kBAAoB,kBAA5C,CAAgE,CAC9DA,gBAAkB,MAAlB,CACD,CACF,CAED;;SAGA,GAAIE,aAAc,MAAlB,CACA,GAAMC,YAAaxiC,EAAE6hC,mBAAF,CAAsBQ,eAAtB,CAAnB,CACA,GAAIG,WAAa,GAAjB,CAAsB,CACpBD,YAAc,MAAd,CACD,CAFD,IAEO,CACLA,YAAc,MAAd,CACD,CAED;;SAGA,GAAIjsB,OAAOmsB,OAAP,CAAeF,WAAnB,CAAgC,CAC9BA,YAAcjsB,OAAOmsB,OAAP,CAAeF,WAA7B,CACD,CAED;;SAGA,GAAMG,YAAa1iC,EAAE,6BAAF,CAAnB,CACA0iC,WAAWjzB,GAAX,CAAe,CACb,mBAAoB8yB,WADP,CAEbnyB,MAAO6xB,EAAI,IAFE,CAGbzxB,OAAQyxB,EAAI,IAHC,CAIb9vB,KAAM+vB,EAAKD,EAAE,CAAP,CAAY,IAJL,CAKbhwB,IAAKkwB,EAAKF,EAAE,CAAP,CAAY,IALJ,CAAf,EAQA;;SAGAK,OAAOpxB,MAAP,CAAcwxB,UAAd,EACAn6B,WAAW,UAAW,CACpB+5B,OAAO1wB,MAAP,GACD,CAFD,CAEG,IAFH,EAGD,CAhGD,EAiGD,CACF,CArGD,EAsGA5R,EAAEoE,MAAF,CAAS,CACPu+B,IAAM,SAAUC,YAAV,CAAwB,CAC5B;;OAGA,CAAC,UAAY,CACX,GAAM5gC,MAAO,IAAb,CACA,GAAI6gC,WAAYA,WAAaD,aAAaC,SAA1B,EAAuCD,aAAaE,eAApD,EAAuEF,aAAaG,YAApF,EAAoGH,aAAaI,UAAjH,EAA+HJ,aAAaK,WAA5J,CACA,GAAI,CAACJ,SAAL,CAAgB,CACd,OACD,CAED,GAAMK,2BAA4B,kCAAlC,CACA,GAAIC,qBAAJ,CACA,GAAIC,kBAAJ,CACA,GAAMjiC,UAAWuC,OAAOzE,SAAP,CAAiBkC,QAAlC,CAEA,QAASkiC,wBAAT,CAAiCC,GAAjC,CAAsC,CACpC,GAAM5kC,QAAS4kC,IAAI5kC,MAAnB,CACA,GAAM6kC,KAAM,GAAI3W,YAAJ,CAAgBluB,MAAhB,CAAZ,CACA,GAAM0W,KAAM,GAAIouB,WAAJ,CAAeD,GAAf,CAAZ,CACA,IAAK,GAAIzkC,GAAI,CAAb,CAAgBA,EAAIJ,MAApB,CAA4BI,GAA5B,CAAiC,CAC/BsW,IAAItW,CAAJ,EAASwkC,IAAIG,UAAJ,CAAe3kC,CAAf,CAAT,CACD,CACD,MAAOykC,IAAP,CACD,CAED,QAASG,gCAAT,CAAyCC,GAAzC,CAA8C,CAC5C,MAAO,IAAIv7B,QAAJ,CAAY,SAASC,OAAT,CAAkB,CACnC,GAAMsjB,MAAOiY,WAAW,CAAC,EAAD,CAAX,CAAb,CACAD,IAAIE,WAAJ,CAAgBX,yBAAhB,EAA2CY,GAA3C,CAA+CnY,IAA/C,CAAqD,KAArD,EAEAgY,IAAII,OAAJ,CAAc,SAAS1tB,CAAT,CAAY,CACxBA,EAAE2tB,cAAF,GACA3tB,EAAE4tB,eAAF,GACA57B,QAAQ,KAAR,EACD,CAJD,CAMAs7B,IAAIO,UAAJ,CAAiB,UAAW,CAC1B,GAAMC,eAAgB7sB,UAAUC,SAAV,CAAoBnW,KAApB,CAA0B,eAA1B,CAAtB,CACA,GAAMgjC,aAAc9sB,UAAUC,SAAV,CAAoBnW,KAApB,CAA0B,QAA1B,CAApB,CACAiH,QAAQ+7B,aAAe,CAACD,aAAhB,EACN5zB,SAAS4zB,cAAc,CAAd,CAAT,CAA2B,EAA3B,GAAkC,EADpC,EAED,CALD,CAMD,CAhBM,EAgBJta,KAhBI,CAgBE,UAAW,CAClB,MAAO,MAAP,CACD,CAlBM,CAAP,CAmBD,CAED,QAASwa,kBAAT,CAA2BC,GAA3B,CAAgC,CAC9B,GAAI,MAAOnB,cAAP,GAAyB,SAA7B,CAAwC,CACtC,MAAO/6B,SAAQC,OAAR,CAAgB86B,aAAhB,CAAP,CACD,CACD,MAAOO,iCAAgCY,GAAhC,EAAqCjrB,IAArC,CAA0C,SAASjZ,KAAT,CAAgB,CAC/D+iC,cAAgB/iC,KAAhB,CACA,MAAO+iC,cAAP,CACD,CAHM,CAAP,CAID,CAED,QAASoB,gBAAT,CAAyBC,MAAzB,CAAiC,CAC/B,GAAMC,WAAYrB,WAAWoB,OAAOtxB,IAAlB,CAAlB,CACA,GAAMwxB,mBAAoB,EAA1B,CAEAA,kBAAkB3b,OAAlB,CAA4B,GAAI3gB,QAAJ,CAAY,SAASC,OAAT,CAAkB,CACxDq8B,kBAAkBr8B,OAAlB,CAA4BA,OAA5B,CACD,CAF2B,CAA5B,CAIAo8B,UAAUE,kBAAV,CAA6B/kC,IAA7B,CAAkC8kC,iBAAlC,EAEA,GAAI,CAACD,UAAUG,OAAf,CAAwB,CACtBH,UAAUG,OAAV,CAAoBF,kBAAkB3b,OAAtC,CACD,CAFD,IAEO,CACL0b,UAAUG,OAAV,CAAoBH,UAAUG,OAAV,CAAkBvrB,IAAlB,CAAuB,UAAW,CACpD,MAAOqrB,mBAAkB3b,OAAzB,CACD,CAFmB,CAApB,CAGD,CACF,CAED,QAAS8b,kBAAT,CAA2BL,MAA3B,CAAmC,CACjC,GAAMC,WAAYrB,WAAWoB,OAAOtxB,IAAlB,CAAlB,CACA,GAAMwxB,mBAAoBD,UAAUE,kBAAV,CAA6B5kC,GAA7B,EAA1B,CAEA,GAAI2kC,iBAAJ,CAAuB,CACrBA,kBAAkBr8B,OAAlB,GACD,CACF,CAED,QAASy8B,eAAT,CAAwBN,MAAxB,CAAgCO,aAAhC,CAA+C,CAC7C,MAAO,IAAI38B,QAAJ,CAAY,SAASC,OAAT,CAAkBC,MAAlB,CAA0B,CAE3C,GAAIk8B,OAAOQ,EAAX,CAAe,CACb,GAAID,aAAJ,CAAmB,CACjBR,gBAAgBC,MAAhB,EACAA,OAAOQ,EAAP,CAAUC,KAAV,GACD,CAHD,IAGO,CACL,MAAO58B,SAAQm8B,OAAOQ,EAAf,CAAP,CACD,CACF,CAED,GAAME,QAAS,CAACV,OAAOtxB,IAAR,CAAf,CAEA,GAAI6xB,aAAJ,CAAmB,CACjBG,OAAOtlC,IAAP,CAAY4kC,OAAO3/B,OAAnB,EACD,CAED,GAAMsgC,SAAUb,IAAI5V,IAAJ,CAASvvB,KAAT,CAAemlC,GAAf,CAAoBY,MAApB,CAAhB,CAEA,GAAIH,aAAJ,CAAmB,CACjBI,QAAQC,eAAR,CAA0B,SAAS/uB,CAAT,CAAY,CACpC,GAAM2uB,IAAKG,QAAQjhC,MAAnB,CACA,GAAI,CACF8gC,GAAGK,iBAAH,CAAqBb,OAAOc,SAA5B,EACA,GAAIjvB,EAAEkvB,UAAF,EAAgB,CAApB,CAAuB,CACrBP,GAAGK,iBAAH,CAAqBnC,yBAArB,EACD,CACF,CAAC,MAAOsC,EAAP,CAAW,CACX,GAAIA,GAAGtyB,IAAH,GAAY,iBAAhB,CAAmC,CACjCuD,QAAQgvB,IAAR,CAAa,iBAAmBjB,OAAOtxB,IAA1B,CAAiC,GAAjC,CACX,kCADW,CAC0BmD,EAAEkvB,UAD5B,CAEX,cAFW,CAEMlvB,EAAEqvB,UAFR,CAGX,qBAHW,CAGalB,OAAOc,SAHpB,CAGgC,mBAH7C,EAID,CALD,IAKO,CACL,KAAME,GAAN,CACD,CACF,CACF,CAjBD,CAkBD,CAEDL,QAAQ59B,OAAR,CAAkB,UAAW,CAC3Be,OAAO68B,QAAQzuB,KAAf,EACD,CAFD,CAIAyuB,QAAQQ,SAAR,CAAoB,UAAW,CAC7Bt9B,QAAQ88B,QAAQjhC,MAAhB,EACA2gC,kBAAkBL,MAAlB,EACD,CAHD,CAID,CAhDM,CAAP,CAiDD,CAED,QAASoB,uBAAT,CAAgCpB,MAAhC,CAAwC,CACtC,MAAOM,gBAAeN,MAAf,CAAuB,KAAvB,CAAP,CACD,CAED,QAASqB,uBAAT,CAAgCrB,MAAhC,CAAwC,CACtC,MAAOM,gBAAeN,MAAf,CAAuB,IAAvB,CAAP,CACD,CAED,QAASsB,iBAAT,CAA0BtB,MAA1B,CAAkCuB,cAAlC,CAAkD,CAChD,GAAI,CAACvB,OAAOQ,EAAZ,CAAgB,CACd,MAAO,KAAP,CACD,CAED,GAAMgB,YAAa,CAACxB,OAAOQ,EAAP,CAAUiB,gBAAV,CAA2B7yB,QAA3B,CAAoCoxB,OAAOc,SAA3C,CAApB,CACA,GAAMY,aAAc1B,OAAO3/B,OAAP,CAAiB2/B,OAAOQ,EAAP,CAAUngC,OAA/C,CACA,GAAMshC,WAAY3B,OAAO3/B,OAAP,CAAiB2/B,OAAOQ,EAAP,CAAUngC,OAA7C,CAEA,GAAIqhC,WAAJ,CAAiB,CACf,GAAI1B,OAAO3/B,OAAP,GAAmBkhC,cAAvB,CAAuC,CACrCtvB,QAAQgvB,IAAR,CAAa,iBAAmBjB,OAAOtxB,IAA1B,CAAiC,GAAjC,CACX,qCADW,CAC6BsxB,OAAOQ,EAAP,CAAUngC,OADvC,CAEX,cAFW,CAEM2/B,OAAO3/B,OAFb,CAEuB,GAFpC,EAGD,CACD2/B,OAAO3/B,OAAP,CAAiB2/B,OAAOQ,EAAP,CAAUngC,OAA3B,CACD,CAED,GAAIshC,WAAaH,UAAjB,CAA6B,CAC3B,GAAIA,UAAJ,CAAgB,CACd,GAAMI,YAAa5B,OAAOQ,EAAP,CAAUngC,OAAV,CAAoB,CAAvC,CACA,GAAIuhC,WAAa5B,OAAO3/B,OAAxB,CAAiC,CAC/B2/B,OAAO3/B,OAAP,CAAiBuhC,UAAjB,CACD,CACF,CACD,MAAO,KAAP,CACD,CACD,MAAO,MAAP,CACD,CAED,QAASC,YAAT,CAAqB1a,IAArB,CAA2B,CACzB,MAAO,IAAIvjB,QAAJ,CAAY,SAASC,OAAT,CAAkBC,MAAlB,CAA0B,CAC3C,GAAMmjB,QAAS,GAAIG,WAAJ,EAAf,CACAH,OAAOlkB,OAAP,CAAiBe,MAAjB,CACAmjB,OAAO6a,SAAP,CAAmB,SAASjwB,CAAT,CAAY,CAC7B,GAAMkwB,QAASC,KAAKnwB,EAAEC,MAAF,CAASpS,MAAT,EAAmB,EAAxB,CAAf,CACAmE,QAAQ,CACNo+B,4BAA6B,IADvB,CAEN5mC,KAAM0mC,MAFA,CAGN3lC,KAAM+qB,KAAK/qB,IAHL,CAAR,EAKD,CAPD,CAQA6qB,OAAOib,kBAAP,CAA0B/a,IAA1B,EACD,CAZM,CAAP,CAaD,CAED,QAASgb,YAAT,CAAqBC,WAArB,CAAkC,CAChC,GAAMC,WAAYxD,wBAAwByD,KAAKF,YAAY/mC,IAAjB,CAAxB,CAAlB,CACA,MAAO+jC,YAAW,CAACiD,SAAD,CAAX,CAAwB,CAACjmC,KAAMgmC,YAAYhmC,IAAnB,CAAxB,CAAP,CACD,CAED,QAASmmC,eAAT,CAAwB3mC,KAAxB,CAA+B,CAC7B,MAAOA,QAASA,MAAMqmC,2BAAtB,CACD,CAED,QAASO,YAAT,CAAqB7mC,QAArB,CAA+B,CAC7B,GAAM6B,MAAO,IAAb,CAEA,GAAM+mB,SAAU/mB,KAAKilC,UAAL,GAAkB5tB,IAAlB,CAAuB,UAAW,CAChD,GAAIorB,WAAYrB,WAAWphC,KAAKklC,OAAL,CAAah0B,IAAxB,CAAhB,CAEA,GAAIuxB,WAAaA,UAAUG,OAA3B,CAAoC,CAClC,MAAOH,WAAUG,OAAjB,CACD,CACF,CANe,CAAhB,CAQAuC,oBAAoBpe,OAApB,CAA6B5oB,QAA7B,CAAuCA,QAAvC,EACA,MAAO4oB,QAAP,CACD,CAED,QAASqe,aAAT,CAAsB57B,OAAtB,CAA+B,CAC7B,GAAMxJ,MAAO,IAAb,CACA,GAAMwiC,QAAS,CACbQ,GAAI,IADS,CAAf,CAIA,GAAIx5B,OAAJ,CAAa,CACX,IAAK,GAAI1M,EAAT,GAAc0M,QAAd,CAAuB,CACrBg5B,OAAO1lC,CAAP,EAAY0M,QAAQ1M,CAAR,CAAZ,CACD,CACF,CAED,GAAI,CAACskC,UAAL,CAAiB,CACfA,WAAa,EAAb,CACD,CAED,GAAIqB,WAAYrB,WAAWoB,OAAOtxB,IAAlB,CAAhB,CAEA,GAAI,CAACuxB,SAAL,CAAgB,CACdA,UAAY,CACV4C,QAAS,EADC,CAEVrC,GAAI,IAFM,CAGVJ,QAAS,IAHC,CAIVD,mBAAoB,EAJV,CAAZ,CAMAvB,WAAWoB,OAAOtxB,IAAlB,EAA0BuxB,SAA1B,CACD,CAEDA,UAAU4C,OAAV,CAAkBznC,IAAlB,CAAuBoC,IAAvB,EAEA,GAAI,CAACA,KAAKilC,UAAV,CAAsB,CACpBjlC,KAAKilC,UAAL,CAAkBjlC,KAAKslC,KAAvB,CACAtlC,KAAKslC,KAAL,CAAaN,WAAb,CACD,CAED,GAAMO,cAAe,EAArB,CAEA,QAASC,aAAT,EAAwB,CACtB,MAAOp/B,SAAQC,OAAR,EAAP,CACD,CAED,IAAK,GAAIiW,GAAI,CAAb,CAAgBA,EAAImmB,UAAU4C,OAAV,CAAkB3oC,MAAtC,CAA8C4f,GAA9C,CAAmD,CACjD,GAAMmpB,QAAShD,UAAU4C,OAAV,CAAkB/oB,CAAlB,CAAf,CACA,GAAImpB,SAAWzlC,IAAf,CAAqB,CACnBulC,aAAa3nC,IAAb,CAAkB6nC,OAAOR,UAAP,GAAoBpd,KAApB,CAA0B2d,YAA1B,CAAlB,EACD,CACF,CAED,GAAMH,SAAU5C,UAAU4C,OAAV,CAAkBnoC,KAAlB,CAAwB,CAAxB,CAAhB,CAEA,MAAOkJ,SAAQsR,GAAR,CAAY6tB,YAAZ,EAA0BluB,IAA1B,CAA+B,UAAW,CAC/CmrB,OAAOQ,EAAP,CAAYP,UAAUO,EAAtB,CACA,MAAOY,wBAAuBpB,MAAvB,CAAP,CACD,CAHM,EAGJnrB,IAHI,CAGC,SAAS2rB,EAAT,CAAa,CACnBR,OAAOQ,EAAP,CAAYA,EAAZ,CACA,GAAIc,iBAAiBtB,MAAjB,CAAyBxiC,KAAK0lC,cAAL,CAAoB7iC,OAA7C,CAAJ,CAA2D,CACzD,MAAOghC,wBAAuBrB,MAAvB,CAAP,CACD,CACD,MAAOQ,GAAP,CACD,CATM,EASJ3rB,IATI,CASC,SAAS2rB,EAAT,CAAa,CACnBR,OAAOQ,EAAP,CAAYP,UAAUO,EAAV,CAAeA,EAA3B,CACAhjC,KAAKklC,OAAL,CAAe1C,MAAf,CACA,IAAK,GAAImD,GAAI,CAAb,CAAgBA,EAAIN,QAAQ3oC,MAA5B,CAAoCipC,GAApC,CAAyC,CACvC,GAAIF,SAASJ,QAAQM,CAAR,CAAb,CACA,GAAIF,UAAWzlC,IAAf,CAAqB,CACnBylC,QAAOP,OAAP,CAAelC,EAAf,CAAoBR,OAAOQ,EAA3B,CACAyC,QAAOP,OAAP,CAAeriC,OAAf,CAAyB2/B,OAAO3/B,OAAhC,CACD,CACF,CACF,CAnBM,CAAP,CAoBD,CAED,QAASoa,IAAT,CAAavW,GAAb,CAAkBvI,QAAlB,CAA4B,CAC1B,GAAM6B,MAAO,IAAb,CAEA,GAAI,MAAO0G,IAAP,GAAe,QAAnB,CAA6B,CAC3B+N,QAAQgvB,IAAR,CAAa/8B,IACX,yCADF,EAEAA,IAAM+d,OAAO/d,GAAP,CAAN,CACD,CAED,GAAMqgB,SAAU,GAAI3gB,QAAJ,CAAY,SAASC,OAAT,CAAkBC,MAAlB,CAA0B,CACpDtG,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAW,CAC3B,GAAMmrB,QAASxiC,KAAKklC,OAApB,CACA,GAAMU,OAAQpD,OAAOQ,EAAP,CAAU6C,WAAV,CAAsBrD,OAAOc,SAA7B,CAAwC,UAAxC,EACXzB,WADW,CACCW,OAAOc,SADR,CAAd,CAEA,GAAMwC,KAAMF,MAAM3oB,GAAN,CAAUvW,GAAV,CAAZ,CAEAo/B,IAAInC,SAAJ,CAAgB,UAAW,CACzB,GAAIvlC,OAAQ0nC,IAAI5jC,MAAhB,CACA,GAAI9D,QAAUT,SAAd,CAAyB,CACvBS,MAAQ,IAAR,CACD,CACD,GAAI2mC,eAAe3mC,KAAf,CAAJ,CAA2B,CACzBA,MAAQumC,YAAYvmC,KAAZ,CAAR,CACD,CACDiI,QAAQjI,KAAR,EACD,CATD,CAWA0nC,IAAIvgC,OAAJ,CAAc,UAAW,CACvBe,OAAOw/B,IAAIpxB,KAAX,EACD,CAFD,CAGD,CApBD,EAoBGmT,KApBH,CAoBSvhB,MApBT,EAqBD,CAtBe,CAAhB,CAwBAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAAStgB,KAAT,CAAcu/B,QAAd,CAAwB7nC,QAAxB,CAAkC,CAChC,GAAM6B,MAAO,IAAb,CAEA,GAAM+mB,SAAU,GAAI3gB,QAAJ,CAAY,SAASC,OAAT,CAAkBC,MAAlB,CAA0B,CACpDtG,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAW,CAC3B,GAAMmrB,QAASxiC,KAAKklC,OAApB,CACA,GAAMU,OAAQpD,OAAOQ,EAAP,CAAU6C,WAAV,CAAsBrD,OAAOc,SAA7B,CAAwC,UAAxC,EACXzB,WADW,CACCW,OAAOc,SADR,CAAd,CAGA,GAAMwC,KAAMF,MAAMK,UAAN,EAAZ,CACA,GAAIC,iBAAkB,CAAtB,CAEAJ,IAAInC,SAAJ,CAAgB,UAAW,CACzB,GAAMxxB,QAAS2zB,IAAI5jC,MAAnB,CAEA,GAAIiQ,MAAJ,CAAY,CACV,GAAI/T,OAAQ+T,OAAO/T,KAAnB,CACA,GAAI2mC,eAAe3mC,KAAf,CAAJ,CAA2B,CACzBA,MAAQumC,YAAYvmC,KAAZ,CAAR,CACD,CACD,GAAM8D,QAAS8jC,SAAS5nC,KAAT,CAAgB+T,OAAOzL,GAAvB,CACbw/B,iBADa,CAAf,CAGA,GAAIhkC,SAAW,IAAK,EAApB,CAAwB,CACtBmE,QAAQnE,MAAR,EACD,CAFD,IAEO,CACLiQ,OAAOg0B,QAAP,GACD,CACF,CAbD,IAaO,CACL9/B,UACD,CACF,CAnBD,CAqBAy/B,IAAIvgC,OAAJ,CAAc,UAAW,CACvBe,OAAOw/B,IAAIpxB,KAAX,EACD,CAFD,CAGD,CAhCD,EAgCGmT,KAhCH,CAgCSvhB,MAhCT,EAiCD,CAlCe,CAAhB,CAoCAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EAEA,MAAO4oB,QAAP,CACD,CAED,QAAS/F,IAAT,CAAata,GAAb,CAAkBtI,KAAlB,CAAyBD,QAAzB,CAAmC,CACjC,GAAM6B,MAAO,IAAb,CAEA,GAAI,MAAO0G,IAAP,GAAe,QAAnB,CAA6B,CAC3B+N,QAAQgvB,IAAR,CAAa/8B,IACX,yCADF,EAEAA,IAAM+d,OAAO/d,GAAP,CAAN,CACD,CAED,GAAMqgB,SAAU,GAAI3gB,QAAJ,CAAY,SAASC,OAAT,CAAkBC,MAAlB,CAA0B,CACpD,GAAIk8B,cAAJ,CACAxiC,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAW,CAC3BmrB,OAASxiC,KAAKklC,OAAd,CACA,GAAI/lC,SAASd,IAAT,CAAcD,KAAd,IAAyB,eAA7B,CAA8C,CAC5C,MAAOikC,mBAAkBG,OAAOQ,EAAzB,EAA6B3rB,IAA7B,CAAkC,SAAS+uB,WAAT,CAAsB,CAC7D,GAAIA,WAAJ,CAAiB,CACf,MAAOhoC,MAAP,CACD,CACD,MAAOimC,aAAYjmC,KAAZ,CAAP,CACD,CALM,CAAP,CAMD,CACD,MAAOA,MAAP,CACD,CAXD,EAWGiZ,IAXH,CAWQ,SAASjZ,KAAT,CAAgB,CACtB,GAAMynC,aAAcrD,OAAOQ,EAAP,CAAU6C,WAAV,CAAsBrD,OAAOc,SAA7B,CAAwC,WAAxC,CAApB,CACA,GAAMsC,OAAQC,YAAYhE,WAAZ,CAAwBW,OAAOc,SAA/B,CAAd,CAEA,GAAIllC,QAAU,IAAd,CAAoB,CAClBA,MAAQT,SAAR,CACD,CAEDkoC,YAAY3D,UAAZ,CAAyB,UAAW,CAClC,GAAI9jC,QAAUT,SAAd,CAAyB,CACvBS,MAAQ,IAAR,CACD,CAEDiI,QAAQjI,KAAR,EACD,CAND,CAOAynC,YAAY9D,OAAZ,CAAsB8D,YAAYtgC,OAAZ,CAAsB,UAAW,CACrD,GAAMjE,KAAMwkC,IAAIpxB,KAAJ,CAAYoxB,IAAIpxB,KAAhB,CAAwBoxB,IAAID,WAAJ,CAAgBnxB,KAApD,CACApO,OAAOhF,GAAP,EACD,CAHD,CAKA,GAAMwkC,KAAMF,MAAM9D,GAAN,CAAU1jC,KAAV,CAAiBsI,GAAjB,CAAZ,CACD,CAhCD,EAgCGmhB,KAhCH,CAgCSvhB,MAhCT,EAiCD,CAnCe,CAAhB,CAqCAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASnX,OAAT,CAAgBlJ,GAAhB,CAAqBvI,QAArB,CAA+B,CAC7B,GAAM6B,MAAO,IAAb,CAEA,GAAI,MAAO0G,IAAP,GAAe,QAAnB,CAA6B,CAC3B+N,QAAQgvB,IAAR,CAAa/8B,IACX,yCADF,EAEAA,IAAM+d,OAAO/d,GAAP,CAAN,CACD,CAED,GAAMqgB,SAAU,GAAI3gB,QAAJ,CAAY,SAASC,OAAT,CAAkBC,MAAlB,CAA0B,CACpDtG,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAW,CAC3B,GAAMmrB,QAASxiC,KAAKklC,OAApB,CACA,GAAMW,aAAcrD,OAAOQ,EAAP,CAAU6C,WAAV,CAAsBrD,OAAOc,SAA7B,CAAwC,WAAxC,CAApB,CACA,GAAMsC,OAAQC,YAAYhE,WAAZ,CAAwBW,OAAOc,SAA/B,CAAd,CACA,GAAMwC,KAAMF,MAAMS,MAAN,CAAa3/B,GAAb,CAAZ,CACAm/B,YAAY3D,UAAZ,CAAyB,UAAW,CAClC77B,UACD,CAFD,CAIAw/B,YAAYtgC,OAAZ,CAAsB,UAAW,CAC/Be,OAAOw/B,IAAIpxB,KAAX,EACD,CAFD,CAIAmxB,YAAY9D,OAAZ,CAAsB,UAAW,CAC/B,GAAMzgC,KAAMwkC,IAAIpxB,KAAJ,CAAYoxB,IAAIpxB,KAAhB,CAAwBoxB,IAAID,WAAJ,CAAgBnxB,KAApD,CACApO,OAAOhF,GAAP,EACD,CAHD,CAID,CAjBD,EAiBGumB,KAjBH,CAiBSvhB,MAjBT,EAkBD,CAnBe,CAAhB,CAqBAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASuB,MAAT,CAAenqB,QAAf,CAAyB,CACvB,GAAM6B,MAAO,IAAb,CAEA,GAAM+mB,SAAU,GAAI3gB,QAAJ,CAAY,SAASC,OAAT,CAAkBC,MAAlB,CAA0B,CACpDtG,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAW,CAC3B,GAAMmrB,QAASxiC,KAAKklC,OAApB,CACA,GAAMW,aAAcrD,OAAOQ,EAAP,CAAU6C,WAAV,CAAsBrD,OAAOc,SAA7B,CAAwC,WAAxC,CAApB,CACA,GAAMsC,OAAQC,YAAYhE,WAAZ,CAAwBW,OAAOc,SAA/B,CAAd,CACA,GAAMwC,KAAMF,MAAMtd,KAAN,EAAZ,CAEAud,YAAY3D,UAAZ,CAAyB,UAAW,CAClC77B,UACD,CAFD,CAIAw/B,YAAY9D,OAAZ,CAAsB8D,YAAYtgC,OAAZ,CAAsB,UAAW,CACrD,GAAMjE,KAAMwkC,IAAIpxB,KAAJ,CAAYoxB,IAAIpxB,KAAhB,CAAwBoxB,IAAID,WAAJ,CAAgBnxB,KAApD,CACApO,OAAOhF,GAAP,EACD,CAHD,CAID,CAdD,EAcGumB,KAdH,CAcSvhB,MAdT,EAeD,CAhBe,CAAhB,CAkBAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASrqB,OAAT,CAAgByB,QAAhB,CAA0B,CACxB,GAAM6B,MAAO,IAAb,CAEA,GAAM+mB,SAAU,GAAI3gB,QAAJ,CAAY,SAASC,OAAT,CAAkBC,MAAlB,CAA0B,CACpDtG,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAW,CAC3B,GAAMmrB,QAASxiC,KAAKklC,OAApB,CACA,GAAMU,OAAQpD,OAAOQ,EAAP,CAAU6C,WAAV,CAAsBrD,OAAOc,SAA7B,CAAwC,UAAxC,EACXzB,WADW,CACCW,OAAOc,SADR,CAAd,CAEA,GAAMwC,KAAMF,MAAM5d,KAAN,EAAZ,CAEA8d,IAAInC,SAAJ,CAAgB,UAAW,CACzBt9B,QAAQy/B,IAAI5jC,MAAZ,EACD,CAFD,CAIA4jC,IAAIvgC,OAAJ,CAAc,UAAW,CACvBe,OAAOw/B,IAAIpxB,KAAX,EACD,CAFD,CAGD,CAbD,EAaGmT,KAbH,CAaSvhB,MAbT,EAcD,CAfe,CAAhB,CAiBAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASrgB,IAAT,CAAa4/B,CAAb,CAAgBnoC,QAAhB,CAA0B,CACxB,GAAM6B,MAAO,IAAb,CAEA,GAAM+mB,SAAU,GAAI3gB,QAAJ,CAAY,SAASC,OAAT,CAAkBC,MAAlB,CAA0B,CACpD,GAAIggC,EAAI,CAAR,CAAW,CACTjgC,QAAQ,IAAR,EAEA,OACD,CAEDrG,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAW,CAC3B,GAAMmrB,QAASxiC,KAAKklC,OAApB,CACA,GAAMU,OAAQpD,OAAOQ,EAAP,CAAU6C,WAAV,CAAsBrD,OAAOc,SAA7B,CAAwC,UAAxC,EACXzB,WADW,CACCW,OAAOc,SADR,CAAd,CAGA,GAAIiD,UAAW,KAAf,CACA,GAAMT,KAAMF,MAAMK,UAAN,EAAZ,CACAH,IAAInC,SAAJ,CAAgB,UAAW,CACzB,GAAMxxB,QAAS2zB,IAAI5jC,MAAnB,CACA,GAAI,CAACiQ,MAAL,CAAa,CACX9L,QAAQ,IAAR,EAEA,OACD,CAED,GAAIigC,IAAM,CAAV,CAAa,CACXjgC,QAAQ8L,OAAOzL,GAAf,EACD,CAFD,IAEO,CACL,GAAI,CAAC6/B,QAAL,CAAe,CACbA,SAAW,IAAX,CACAp0B,OAAOq0B,OAAP,CAAeF,CAAf,EACD,CAHD,IAGO,CACLjgC,QAAQ8L,OAAOzL,GAAf,EACD,CACF,CACF,CAlBD,CAoBAo/B,IAAIvgC,OAAJ,CAAc,UAAW,CACvBe,OAAOw/B,IAAIpxB,KAAX,EACD,CAFD,CAGD,CA9BD,EA8BGmT,KA9BH,CA8BSvhB,MA9BT,EA+BD,CAtCe,CAAhB,CAwCAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASplB,KAAT,CAAcxD,QAAd,CAAwB,CACtB,GAAM6B,MAAO,IAAb,CAEA,GAAM+mB,SAAU,GAAI3gB,QAAJ,CAAY,SAASC,OAAT,CAAkBC,MAAlB,CAA0B,CACpDtG,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAW,CAC3B,GAAMmrB,QAASxiC,KAAKklC,OAApB,CACA,GAAMU,OAAQpD,OAAOQ,EAAP,CAAU6C,WAAV,CAAsBrD,OAAOc,SAA7B,CAAwC,UAAxC,EACXzB,WADW,CACCW,OAAOc,SADR,CAAd,CAGA,GAAMwC,KAAMF,MAAMK,UAAN,EAAZ,CACA,GAAMtkC,MAAO,EAAb,CAEAmkC,IAAInC,SAAJ,CAAgB,UAAW,CACzB,GAAMxxB,QAAS2zB,IAAI5jC,MAAnB,CAEA,GAAI,CAACiQ,MAAL,CAAa,CACX9L,QAAQ1E,IAAR,EACA,OACD,CAEDA,KAAK/D,IAAL,CAAUuU,OAAOzL,GAAjB,EACAyL,OAAOg0B,QAAP,GACD,CAVD,CAYAL,IAAIvgC,OAAJ,CAAc,UAAW,CACvBe,OAAOw/B,IAAIpxB,KAAX,EACD,CAFD,CAGD,CAvBD,EAuBGmT,KAvBH,CAuBSvhB,MAvBT,EAwBD,CAzBe,CAAhB,CA2BAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,GAAM0f,cAAe,CACnBC,QAAS,cADU,CAEnBtB,aAAcA,YAFK,CAGnB3+B,KAAMA,IAHa,CAInBwW,IAAKA,GAJc,CAKnB+D,IAAKA,GALc,CAMnBpR,OAAQA,MANW,CAOnB0Y,MAAOA,KAPY,CAQnB5rB,OAAQA,MARW,CASnBgK,IAAKA,GATc,CAUnB/E,KAAMA,IAVa,CAArB,CAaA;;SAGA,KAAK8kC,YAAL,CAAoBA,YAApB,CACA7F,aAAa6F,YAAb,CAA4BA,YAA5B,CACD,CArlBD,EAqlBGpoC,IArlBH,CAqlBQkD,MArlBR,EAulBA;;OAGA,CAAC,UAAY,CACX,GAAMq/B,cAAe,IAArB,CACA,GAAM+F,cAAe,KAAKA,YAA1B,CACA,GAAI,CAACA,YAAL,CAAmB,CACjB,OACD,CAED,QAASC,cAAT,CAAuBp9B,OAAvB,CAAgC,CAC9B,GAAMxJ,MAAO,IAAb,CACA,GAAIwiC,QAAS,CACXQ,GAAI,IADO,CAAb,CAIA,GAAIx5B,OAAJ,CAAa,CACX,IAAK,GAAI1M,EAAT,GAAc0M,QAAd,CAAuB,CACrBg5B,OAAO1lC,CAAP,EAAY,MAAO0M,SAAQ1M,CAAR,CAAP,GAAsB,QAAtB,CAAiC0M,QAAQ1M,CAAR,EAAWqC,QAAX,EAAjC,CAAyDqK,QAAQ1M,CAAR,CAArE,CACD,CACF,CAED,GAAM+pC,eAAgB,GAAIzgC,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CAC3D,GAAI,CACFk8B,OAAOQ,EAAP,CAAY2D,aAAanE,OAAOtxB,IAApB,CAA0BuT,OAAO+d,OAAO3/B,OAAd,CAA1B,CAAkD2/B,OAAOsE,WAAzD,CAAsEtE,OAAO7zB,IAA7E,CAAZ,CACD,CAAC,MAAO0F,CAAP,CAAU,CACV,MAAOrU,MAAK+mC,SAAL,CAAe/mC,KAAKgnC,YAApB,EAAkC3vB,IAAlC,CAAuC,UAAY,CACxD,MAAOrX,MAAK4mC,aAAL,CAAmBp9B,OAAnB,CAAP,CACD,CAFM,EAEJ6N,IAFI,CAEChR,OAFD,EAEU,OAFV,EAEmBC,MAFnB,CAAP,CAGD,CAEDk8B,OAAOQ,EAAP,CAAU6C,WAAV,CAAsB,SAAUoB,CAAV,CAAa,CACjCA,EAAEC,UAAF,CAAa,8BAAgC1E,OAAO2E,OAAvC,CAAiD,8CAA9D,CAA8G,EAA9G,CAAkH,UAAY,CAC5HnnC,KAAKonC,QAAL,CAAgB5E,MAAhB,CACAn8B,UACD,CAHD,CAGG,SAAU4gC,CAAV,CAAavyB,KAAb,CAAoB,CACrBpO,OAAOoO,KAAP,EACD,CALD,EAMD,CAPD,EAQD,CAjBqB,CAAtB,CAmBA,MAAO,IAAItO,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CAC5CD,QAAQghC,iBAAR,EACD,CAFM,EAEJhwB,IAFI,CAEC,SAAUzU,GAAV,CAAe,CACrB4/B,OAAO8E,UAAP,CAAoB1kC,GAApB,CACA,MAAOikC,cAAP,CACD,CALM,CAAP,CAMD,CAED,QAAS5pB,IAAT,CAAavW,GAAb,CAAkBvI,QAAlB,CAA4B,CAC1B,GAAM6B,MAAO,IAAb,CACA,GAAI,MAAO0G,IAAP,GAAe,QAAnB,CAA6B,CAC3Bk6B,aAAansB,OAAb,CAAqBgvB,IAArB,CAA0B/8B,IAAM,yCAAhC,EACAA,IAAM+d,OAAO/d,GAAP,CAAN,CACD,CAED,GAAMqgB,SAAU,GAAI3gB,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CACrDtG,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAY,CAC5B,GAAMmrB,QAASxiC,KAAKonC,QAApB,CACA5E,OAAOQ,EAAP,CAAU6C,WAAV,CAAsB,SAAUoB,CAAV,CAAa,CACjCA,EAAEC,UAAF,CAAa,iBAAmB1E,OAAO2E,OAA1B,CAAoC,wBAAjD,CAA2E,CAACzgC,GAAD,CAA3E,CAAkF,SAAUugC,CAAV,CAAaM,OAAb,CAAsB,CACtG,GAAIrlC,QAASqlC,QAAQC,IAAR,CAAa9qC,MAAb,CAAsB6qC,QAAQC,IAAR,CAAa7gC,IAAb,CAAkB,CAAlB,EAAqBvI,KAA3C,CAAmD,IAAhE,CACA,GAAI8D,MAAJ,CAAY,CACVA,OAASsgC,OAAO8E,UAAP,CAAkBG,WAAlB,CAA8BvlC,MAA9B,CAAT,CACD,CACDmE,QAAQnE,MAAR,EACD,CAND,CAOA,SAAU+kC,CAAV,CAAavyB,KAAb,CAAoB,CAClBpO,OAAOoO,KAAP,EACD,CATD,EAUD,CAXD,EAYD,CAdD,EAcG,OAdH,EAcYpO,MAdZ,EAeD,CAhBe,CAAhB,CAkBAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAAStgB,KAAT,CAAcu/B,QAAd,CAAwB7nC,QAAxB,CAAkC,CAChC,GAAM6B,MAAO,IAAb,CACA,GAAM+mB,SAAU,GAAI3gB,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CACrDtG,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAY,CAC5B,GAAMmrB,QAASxiC,KAAKonC,QAApB,CAEA5E,OAAOQ,EAAP,CAAU6C,WAAV,CAAsB,SAAUoB,CAAV,CAAa,CACjCA,EAAEC,UAAF,CAAa,iBAAmB1E,OAAO2E,OAAvC,CAAgD,EAAhD,CAAoD,SAAUF,CAAV,CAAaM,OAAb,CAAsB,CACxE,GAAMC,MAAOD,QAAQC,IAArB,CACA,GAAM9qC,QAAS8qC,KAAK9qC,MAApB,CAEA,IAAK,GAAII,GAAI,CAAb,CAAgBA,EAAIJ,MAApB,CAA4BI,GAA5B,CAAiC,CAC/B,GAAM6J,MAAO6gC,KAAK7gC,IAAL,CAAU7J,CAAV,CAAb,CACA,GAAIoF,QAASyE,KAAKvI,KAAlB,CACA,GAAI8D,MAAJ,CAAY,CACVA,OAASsgC,OAAO8E,UAAP,CAAkBG,WAAlB,CAA8BvlC,MAA9B,CAAT,CACD,CACDA,OAAS8jC,SAAS9jC,MAAT,CAAiByE,KAAKD,GAAtB,CAA2B5J,EAAI,CAA/B,CAAT,CACA,GAAIoF,SAAWvE,SAAf,CAA0B,CACxB0I,QAAQnE,MAAR,EACA,OACD,CACF,CAEDmE,UACD,CAlBD,CAkBG,SAAU4gC,CAAV,CAAavyB,KAAb,CAAoB,CACrBpO,OAAOoO,KAAP,EACD,CApBD,EAqBD,CAtBD,EAuBD,CA1BD,EA0BG,OA1BH,EA0BYpO,MA1BZ,EA2BD,CA5Be,CAAhB,CA8BAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAAS/F,IAAT,CAAata,GAAb,CAAkBtI,KAAlB,CAAyBD,QAAzB,CAAmC,CACjC,GAAM6B,MAAO,IAAb,CACA,GAAI,MAAO0G,IAAP,GAAe,QAAnB,CAA6B,CAC3Bk6B,aAAansB,OAAb,CAAqBgvB,IAArB,CAA0B/8B,IAAM,yCAAhC,EACAA,IAAM+d,OAAO/d,GAAP,CAAN,CACD,CAED,GAAMqgB,SAAU,GAAI3gB,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CACrDtG,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAY,CAC5B,GAAIjZ,QAAUT,SAAd,CAAyB,CACvBS,MAAQ,IAAR,CACD,CAED,GAAMspC,eAAgBtpC,KAAtB,CACA,GAAMokC,QAASxiC,KAAKonC,QAApB,CAEA5E,OAAO8E,UAAP,CAAkB5rB,SAAlB,CAA4Btd,KAA5B,CAAmC,SAAUA,KAAV,CAAiBsW,KAAjB,CAAwB,CACzD,GAAIA,KAAJ,CAAW,CACTpO,OAAOoO,KAAP,EACD,CAFD,IAEO,CACL8tB,OAAOQ,EAAP,CAAU6C,WAAV,CAAsB,SAAUoB,CAAV,CAAa,CACjCA,EAAEC,UAAF,CAAa,0BAA4B1E,OAAO2E,OAAnC,CAA6C,6BAA1D,CAAyF,CAACzgC,GAAD,CAAMtI,KAAN,CAAzF,CAAuG,UAAY,CACjHiI,QAAQqhC,aAAR,EACD,CAFD,CAEG,SAAUT,CAAV,CAAavyB,KAAb,CAAoB,CACrBpO,OAAOoO,KAAP,EACD,CAJD,EAKD,CAND,CAMG,SAAUizB,QAAV,CAAoB,CACrB,GAAIA,SAASC,IAAT,GAAkBD,SAASE,SAA/B,CAA0C,CACxCvhC,OAAOqhC,QAAP,EACD,CACF,CAVD,EAWD,CACF,CAhBD,EAiBD,CAzBD,EAyBG,OAzBH,EAyBYrhC,MAzBZ,EA0BD,CA3Be,CAAhB,CA6BAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASnX,OAAT,CAAgBlJ,GAAhB,CAAqBvI,QAArB,CAA+B,CAC7B,GAAM6B,MAAO,IAAb,CACA,GAAI,MAAO0G,IAAP,GAAe,QAAnB,CAA6B,CAC3Bk6B,aAAansB,OAAb,CAAqBgvB,IAArB,CAA0B/8B,IAAM,yCAAhC,EACAA,IAAM+d,OAAO/d,GAAP,CAAN,CACD,CAED,GAAMqgB,SAAU,GAAI3gB,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CACrDtG,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAY,CAC5B,GAAMmrB,QAASxiC,KAAKonC,QAApB,CACA5E,OAAOQ,EAAP,CAAU6C,WAAV,CAAsB,SAAUoB,CAAV,CAAa,CACjCA,EAAEC,UAAF,CAAa,eAAiB1E,OAAO2E,OAAxB,CAAkC,gBAA/C,CAAiE,CAACzgC,GAAD,CAAjE,CAAwE,UAAY,CAClFL,UACD,CAFD,CAEG,SAAU4gC,CAAV,CAAavyB,KAAb,CAAoB,CAErBpO,OAAOoO,KAAP,EACD,CALD,EAMD,CAPD,EAQD,CAVD,EAUG,OAVH,EAUYpO,MAVZ,EAWD,CAZe,CAAhB,CAcAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASuB,MAAT,CAAenqB,QAAf,CAAyB,CACvB,GAAM6B,MAAO,IAAb,CACA,GAAM+mB,SAAU,GAAI3gB,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CACrDtG,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAY,CAC5B,GAAMmrB,QAASxiC,KAAKonC,QAApB,CACA5E,OAAOQ,EAAP,CAAU6C,WAAV,CAAsB,SAAUoB,CAAV,CAAa,CACjCA,EAAEC,UAAF,CAAa,eAAiB1E,OAAO2E,OAArC,CAA8C,EAA9C,CAAkD,UAAY,CAC5D9gC,UACD,CAFD,CAEG,SAAU4gC,CAAV,CAAavyB,KAAb,CAAoB,CACrBpO,OAAOoO,KAAP,EACD,CAJD,EAKD,CAND,EAOD,CATD,EASG,OATH,EASYpO,MATZ,EAUD,CAXe,CAAhB,CAaAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASpY,KAAT,CAAcxQ,QAAd,CAAwB,CACtB,GAAM6B,MAAO,IAAb,CACA,GAAM+mB,SAAU,GAAI3gB,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CACrDtG,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAY,CAC5B,GAAMmrB,QAASxiC,KAAKonC,QAApB,CACA5E,OAAOQ,EAAP,CAAU6C,WAAV,CAAsB,SAAUoB,CAAV,CAAa,CACjCA,EAAEC,UAAF,CAAa,+BAAiC1E,OAAO2E,OAArD,CAA8D,EAA9D,CAAkE,SAAUF,CAAV,CAAaM,OAAb,CAAsB,CACtF,GAAMrlC,QAASqlC,QAAQC,IAAR,CAAa7gC,IAAb,CAAkB,CAAlB,EAAqBjD,CAApC,CAEA2C,QAAQnE,MAAR,EACD,CAJD,CAIG,SAAU+kC,CAAV,CAAavyB,KAAb,CAAoB,CAErBpO,OAAOoO,KAAP,EACD,CAPD,EAQD,CATD,EAUD,CAZD,EAYG,OAZH,EAYYpO,MAZZ,EAaD,CAde,CAAhB,CAgBAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASrgB,IAAT,CAAa4/B,CAAb,CAAgBnoC,QAAhB,CAA0B,CACxB,GAAM6B,MAAO,IAAb,CAEA,GAAM+mB,SAAU,GAAI3gB,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CACrDtG,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAY,CAC5B,GAAMmrB,QAASxiC,KAAKonC,QAApB,CACA5E,OAAOQ,EAAP,CAAU6C,WAAV,CAAsB,SAAUoB,CAAV,CAAa,CACjCA,EAAEC,UAAF,CAAa,mBAAqB1E,OAAO2E,OAA5B,CAAsC,uBAAnD,CAA4E,CAACb,EAAI,CAAL,CAA5E,CAAqF,SAAUW,CAAV,CAAaM,OAAb,CAAsB,CACzG,GAAMrlC,QAASqlC,QAAQC,IAAR,CAAa9qC,MAAb,CAAsB6qC,QAAQC,IAAR,CAAa7gC,IAAb,CAAkB,CAAlB,EAAqBD,GAA3C,CAAiD,IAAhE,CACAL,QAAQnE,MAAR,EACD,CAHD,CAGG,SAAU+kC,CAAV,CAAavyB,KAAb,CAAoB,CACrBpO,OAAOoO,KAAP,EACD,CALD,EAMD,CAPD,EAQD,CAVD,EAUG,OAVH,EAUYpO,MAVZ,EAWD,CAZe,CAAhB,CAcAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASplB,KAAT,CAAcxD,QAAd,CAAwB,CACtB,GAAM6B,MAAO,IAAb,CACA,GAAM+mB,SAAU,GAAI3gB,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CACrDtG,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAY,CAC5B,GAAMmrB,QAASxiC,KAAKonC,QAApB,CACA5E,OAAOQ,EAAP,CAAU6C,WAAV,CAAsB,SAAUoB,CAAV,CAAa,CACjCA,EAAEC,UAAF,CAAa,mBAAqB1E,OAAO2E,OAAzC,CAAkD,EAAlD,CAAsD,SAAUF,CAAV,CAAaM,OAAb,CAAsB,CAC1E,GAAM5lC,MAAO,EAAb,CAEA,IAAK,GAAI7E,GAAI,CAAb,CAAgBA,EAAIyqC,QAAQC,IAAR,CAAa9qC,MAAjC,CAAyCI,GAAzC,CAA8C,CAC5C6E,KAAK/D,IAAL,CAAU2pC,QAAQC,IAAR,CAAa7gC,IAAb,CAAkB7J,CAAlB,EAAqB4J,GAA/B,EACD,CACDL,QAAQ1E,IAAR,EAED,CARD,CAQG,SAAUslC,CAAV,CAAavyB,KAAb,CAAoB,CACrBpO,OAAOoO,KAAP,EACD,CAVD,EAWD,CAZD,EAaD,CAfD,EAeG,OAfH,EAeYpO,MAfZ,EAgBD,CAjBe,CAAhB,CAmBAy/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASgf,gBAAT,CAAyBhf,OAAzB,CAAkC5oB,QAAlC,CAA4C,CAC1C,GAAIA,QAAJ,CAAc,CACZ4oB,QAAQ1P,IAAR,CAAa,SAAUnV,MAAV,CAAkB,CAC7B/D,SAAS,IAAT,CAAe+D,MAAf,EACD,CAFD,CAEG,SAAUwS,KAAV,CAAiB,CAClBvW,SAASuW,KAAT,EACD,CAJD,EAKD,CACF,CAED,GAAMozB,eAAgB,CACpBC,SAAU,eADU,CAEpBnB,cAAeA,aAFK,CAGpBngC,KAAMA,IAHc,CAIpBwW,IAAKA,GAJe,CAKpB+D,IAAKA,GALe,CAMpBpR,OAAQA,MANY,CAOpB0Y,MAAOA,KAPa,CAQpB3Z,KAAMA,IARc,CASpBjI,IAAKA,GATe,CAUpB/E,KAAMA,IAVc,CAAtB,CAaA;;SAGA,KAAKmmC,aAAL,CAAqBA,aAArB,CACAlH,aAAakH,aAAb,CAA6BA,aAA7B,CACD,CAnSD,EAmSGzpC,IAnSH,CAmSQkD,MAnSR,EAqSA;;OAGA,CAAC,UAAY,CACX,GAAMq/B,cAAe,IAArB,CACA,GAAIoH,cAAe,IAAnB,CACA,GAAI,CACF,GAAI,CAAC,KAAKA,YAAN,EAAsB,EAAE,OAAS,MAAKA,YAAhB,CAA1B,CAAyD,CACvD,OACD,CACDA,aAAe,KAAKA,YAApB,CACD,CAAC,MAAO3zB,CAAP,CAAU,CACV,OACD,CAED,QAASuyB,cAAT,CAAuBp9B,OAAvB,CAAgC,CAC9B,GAAMxJ,MAAO,IAAb,CACA,GAAMwiC,QAAS,EAAf,CACA,GAAIh5B,OAAJ,CAAa,CACX,IAAK,GAAI1M,EAAT,GAAc0M,QAAd,CAAuB,CACrBg5B,OAAO1lC,CAAP,EAAY0M,QAAQ1M,CAAR,CAAZ,CACD,CACF,CAED0lC,OAAOyF,SAAP,CAAmBzF,OAAOtxB,IAAP,CAAc,GAAjC,CAEA,GAAIsxB,OAAO2E,OAAP,GAAmBnnC,KAAKkoC,eAAL,CAAqBf,OAA5C,CAAqD,CACnD3E,OAAOyF,SAAP,EAAoBzF,OAAO2E,OAAP,CAAiB,GAArC,CACD,CAEDnnC,KAAKonC,QAAL,CAAgB5E,MAAhB,CAEA,MAAO,IAAIp8B,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CAC5CD,QAAQghC,iBAAR,EACD,CAFM,EAEJhwB,IAFI,CAEC,SAAUzU,GAAV,CAAe,CACrB4/B,OAAO8E,UAAP,CAAoB1kC,GAApB,CACA,MAAOwD,SAAQC,OAAR,EAAP,CACD,CALM,CAAP,CAMD,CAED,QAASiiB,MAAT,CAAenqB,QAAf,CAAyB,CACvB,GAAM6B,MAAO,IAAb,CACA,GAAM+mB,SAAU/mB,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAY,CAC5C,GAAM4wB,WAAYjoC,KAAKonC,QAAL,CAAca,SAAhC,CAEA,IAAK,GAAInrC,GAAIkrC,aAAatrC,MAAb,CAAsB,CAAnC,CAAsCI,GAAK,CAA3C,CAA8CA,GAA9C,CAAmD,CACjD,GAAMqrC,MAAOH,aAAathC,GAAb,CAAiB5J,CAAjB,CAAb,CAEA,GAAIqrC,KAAKxpC,OAAL,CAAaspC,SAAb,IAA4B,CAAhC,CAAmC,CACjCD,aAAap4B,MAAb,CAAoBu4B,IAApB,EACD,CACF,CACF,CAVe,CAAhB,CAYApC,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAAS9J,IAAT,CAAavW,GAAb,CAAkBvI,QAAlB,CAA4B,CAC1B,GAAM6B,MAAO,IAAb,CACA,GAAI,MAAO0G,IAAP,GAAe,QAAnB,CAA6B,CAC3Bk6B,aAAansB,OAAb,CAAqBgvB,IAArB,CAA0B/8B,IAAM,yCAAhC,EACAA,IAAM+d,OAAO/d,GAAP,CAAN,CACD,CAED,GAAMqgB,SAAU/mB,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAY,CAC5C,GAAMmrB,QAASxiC,KAAKonC,QAApB,CACA,GAAIllC,QAAS8lC,aAAa/qB,GAAb,CAAiBulB,OAAOyF,SAAP,CAAmBvhC,GAApC,CAAb,CACA,GAAIxE,MAAJ,CAAY,CACVA,OAASsgC,OAAO8E,UAAP,CAAkBG,WAAlB,CAA8BvlC,MAA9B,CAAT,CACD,CACD,MAAOA,OAAP,CACD,CAPe,CAAhB,CASA6jC,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAAStgB,KAAT,CAAcu/B,QAAd,CAAwB7nC,QAAxB,CAAkC,CAChC,GAAM6B,MAAO,IAAb,CAEA,GAAM+mB,SAAU/mB,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAY,CAC5C,GAAMmrB,QAASxiC,KAAKonC,QAApB,CACA,GAAMa,WAAYzF,OAAOyF,SAAzB,CACA,GAAMG,iBAAkBH,UAAUvrC,MAAlC,CACA,GAAMA,QAASsrC,aAAatrC,MAA5B,CACA,GAAIwpC,iBAAkB,CAAtB,CAEA,IAAK,GAAIppC,GAAI,CAAb,CAAgBA,EAAIJ,MAApB,CAA4BI,GAA5B,CAAiC,CAC/B,GAAMurC,OAAQL,aAAathC,GAAb,CAAiB5J,CAAjB,CAAd,CACA,GAAIurC,MAAM1pC,OAAN,CAAcspC,SAAd,IAA6B,CAAjC,CAAoC,CAClC,SACD,CACD,GAAI7pC,OAAQ4pC,aAAa/qB,GAAb,CAAiBorB,KAAjB,CAAZ,CACA,GAAIjqC,KAAJ,CAAW,CACTA,MAAQokC,OAAO8E,UAAP,CAAkBG,WAAlB,CAA8BrpC,KAA9B,CAAR,CACD,CAEDA,MAAQ4nC,SAAS5nC,KAAT,CAAgBiqC,MAAMxwB,SAAN,CAAgBuwB,eAAhB,CAAhB,CAAkDlC,iBAAlD,CAAR,CACA,GAAI9nC,QAAUT,SAAd,CAAyB,CACvB,MAAOS,MAAP,CACD,CACF,CACF,CAtBe,CAAhB,CAwBA2nC,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASrgB,IAAT,CAAa4/B,CAAb,CAAgBnoC,QAAhB,CAA0B,CACxB,GAAM6B,MAAO,IAAb,CACA,GAAM+mB,SAAU/mB,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAY,CAC5C,GAAMmrB,QAASxiC,KAAKonC,QAApB,CACA,GAAIllC,QAASvE,SAAb,CACA,GAAI,CACFuE,OAAS8lC,aAAathC,GAAb,CAAiB4/B,CAAjB,CAAT,CACD,CAAC,MAAO5xB,KAAP,CAAc,CACdxS,OAAS,IAAT,CACD,CAED,GAAIA,MAAJ,CAAY,CACVA,OAASA,OAAO2V,SAAP,CAAiB2qB,OAAOyF,SAAP,CAAiBvrC,MAAlC,CAAT,CACD,CACD,MAAOwF,OAAP,CACD,CAbe,CAAhB,CAeA6jC,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASplB,KAAT,CAAcxD,QAAd,CAAwB,CACtB,GAAM6B,MAAO,IAAb,CACA,GAAM+mB,SAAU/mB,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAY,CAC5C,GAAMmrB,QAASxiC,KAAKonC,QAApB,CACA,GAAM1qC,QAASsrC,aAAatrC,MAA5B,CACA,GAAMiF,MAAO,EAAb,CAEA,IAAK,GAAI7E,GAAI,CAAb,CAAgBA,EAAIJ,MAApB,CAA4BI,GAA5B,CAAiC,CAC/B,GAAIkrC,aAAathC,GAAb,CAAiB5J,CAAjB,EAAoB6B,OAApB,CAA4B6jC,OAAOyF,SAAnC,IAAkD,CAAtD,CAAyD,CACvDtmC,KAAK/D,IAAL,CAAUoqC,aAAathC,GAAb,CAAiB5J,CAAjB,EAAoB+a,SAApB,CAA8B2qB,OAAOyF,SAAP,CAAiBvrC,MAA/C,CAAV,EACD,CACF,CACD,MAAOiF,KAAP,CACD,CAXe,CAAhB,CAaAokC,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASpY,KAAT,CAAcxQ,QAAd,CAAwB,CACtB,GAAM6B,MAAO,IAAb,CACA,GAAM+mB,SAAU/mB,KAAK2B,IAAL,GAAY0V,IAAZ,CAAiB,SAAU1V,IAAV,CAAgB,CAC/C,MAAOA,MAAKjF,MAAZ,CACD,CAFe,CAAhB,CAIAqpC,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASnX,OAAT,CAAgBlJ,GAAhB,CAAqBvI,QAArB,CAA+B,CAC7B,GAAM6B,MAAO,IAAb,CACA,GAAI,MAAO0G,IAAP,GAAe,QAAnB,CAA6B,CAC3Bk6B,aAAansB,OAAb,CAAqBgvB,IAArB,CAA0B/8B,IAAM,yCAAhC,EACAA,IAAM+d,OAAO/d,GAAP,CAAN,CACD,CAED,GAAMqgB,SAAU/mB,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAY,CAC5C,GAAMmrB,QAASxiC,KAAKonC,QAApB,CACAY,aAAap4B,MAAb,CAAoB4yB,OAAOyF,SAAP,CAAmBvhC,GAAvC,EACD,CAHe,CAAhB,CAKAq/B,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAAS/F,IAAT,CAAata,GAAb,CAAkBtI,KAAlB,CAAyBD,QAAzB,CAAmC,CACjC,GAAM6B,MAAO,IAAb,CACA,GAAI,MAAO0G,IAAP,GAAe,QAAnB,CAA6B,CAC3Bk6B,aAAansB,OAAb,CAAqBgvB,IAArB,CAA0B/8B,IAAM,yCAAhC,EACAA,IAAM+d,OAAO/d,GAAP,CAAN,CACD,CAED,GAAMqgB,SAAU/mB,KAAKslC,KAAL,GAAajuB,IAAb,CAAkB,UAAY,CAC5C,GAAIjZ,QAAUT,SAAd,CAAyB,CACvBS,MAAQ,IAAR,CACD,CACD,GAAMspC,eAAgBtpC,KAAtB,CAEA,MAAO,IAAIgI,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CAC5C,GAAMk8B,QAASxiC,KAAKonC,QAApB,CACA5E,OAAO8E,UAAP,CAAkB5rB,SAAlB,CAA4Btd,KAA5B,CAAmC,SAAUA,KAAV,CAAiBsW,KAAjB,CAAwB,CACzD,GAAIA,KAAJ,CAAW,CACTpO,OAAOoO,KAAP,EACD,CAFD,IAEO,CACL,GAAI,CACFszB,aAAahnB,GAAb,CAAiBwhB,OAAOyF,SAAP,CAAmBvhC,GAApC,CAAyCtI,KAAzC,EACAiI,QAAQqhC,aAAR,EACD,CAAC,MAAOrzB,CAAP,CAAU,CACV,GAAIA,EAAEnD,IAAF,GAAW,oBAAX,EAAmCmD,EAAEnD,IAAF,GAAW,4BAAlD,CAAgF,CAC9E5K,OAAO+N,CAAP,EACD,CACD/N,OAAO+N,CAAP,EACD,CACF,CACF,CAdD,EAeD,CAjBM,CAAP,CAkBD,CAxBe,CAAhB,CA0BA0xB,gBAAgBhf,OAAhB,CAAyB5oB,QAAzB,EACA,MAAO4oB,QAAP,CACD,CAED,QAASgf,gBAAT,CAAyBhf,OAAzB,CAAkC5oB,QAAlC,CAA4C,CAC1C,GAAIA,QAAJ,CAAc,CACZ4oB,QAAQ1P,IAAR,CAAa,SAAUnV,MAAV,CAAkB,CAC7B/D,SAAS,IAAT,CAAe+D,MAAf,EACD,CAFD,CAEG,SAAUwS,KAAV,CAAiB,CAClBvW,SAASuW,KAAT,EACD,CAJD,EAKD,CACF,CAED,GAAM4zB,qBAAsB,CAC1BP,SAAU,qBADgB,CAE1BnB,cAAeA,aAFW,CAG1BngC,KAAMA,IAHoB,CAI1BwW,IAAKA,GAJqB,CAK1B+D,IAAKA,GALqB,CAM1BpR,OAAQA,MANkB,CAO1B0Y,MAAOA,KAPmB,CAQ1B3Z,KAAMA,IARoB,CAS1BjI,IAAKA,GATqB,CAU1B/E,KAAMA,IAVoB,CAA5B,CAaA;;SAGA,KAAK2mC,mBAAL,CAA2BA,mBAA3B,CACA/mC,OAAO+mC,mBAAP,CAA6BA,mBAA7B,CACD,CA7OD,EA6OGjqC,IA7OH,CA6OQkD,MA7OR,EA+OA;;OAGA,CAAC,UAAY,CACX,GAAMgnC,YAAa,kEAAnB,CAEA,GAAMC,kBAAmB,kBAAzB,CACA,GAAMC,wBAAyB,2BAA/B,CACA,GAAMC,mBAAoB,WAA1B,CACA,GAAMC,0BAA2BD,kBAAkBhsC,MAAnD,CACA,GAAMksC,kBAAmB,MAAzB,CACA,GAAMC,WAAY,MAAlB,CACA,GAAMC,gBAAiB,MAAvB,CACA,GAAMC,iBAAkB,MAAxB,CACA,GAAMC,wBAAyB,MAA/B,CACA,GAAMC,iBAAkB,MAAxB,CACA,GAAMC,iBAAkB,MAAxB,CACA,GAAMC,kBAAmB,MAAzB,CACA,GAAMC,kBAAmB,MAAzB,CACA,GAAMC,mBAAoB,MAA1B,CACA,GAAMC,mBAAoB,MAA1B,CACA,GAAMC,+BAAgCZ,yBAA2BC,iBAAiBlsC,MAAlF,CACA,GAAMkkC,cAAe,IAArB,CAEA,QAAS4I,aAAT,CAAsBC,KAAtB,CAA6BC,UAA7B,CAAyC,CACvCD,MAAQA,OAAS,EAAjB,CACAC,WAAaA,YAAc,EAA3B,CAEA,GAAI,CACF,MAAO,IAAIzf,KAAJ,CAASwf,KAAT,CAAgBC,UAAhB,CAAP,CACD,CAAC,MAAOpoC,GAAP,CAAY,CACZ,GAAIA,IAAI4P,IAAJ,GAAa,WAAjB,CAA8B,CAC5B,KAAM5P,IAAN,CACD,CAED,GAAMqoC,aAAc/I,aAAa+I,WAAb,EAA4B/I,aAAagJ,aAAzC,EAA0DhJ,aAAaiJ,cAAvE,EAAyFjJ,aAAakJ,iBAA1H,CAEA,GAAMC,SAAU,GAAIJ,YAAJ,EAAhB,CACA,IAAK,GAAI7sC,GAAI,CAAb,CAAgBA,EAAI2sC,MAAM/sC,MAA1B,CAAkCI,GAAK,CAAvC,CAA0C,CACxCitC,QAAQ76B,MAAR,CAAeu6B,MAAM3sC,CAAN,CAAf,EACD,CACD,MAAOitC,SAAQC,OAAR,CAAgBN,WAAW9qC,IAA3B,CAAP,CACD,CACF,CAED,QAAS8c,UAAT,CAAmBtd,KAAnB,CAA0BD,QAA1B,CAAoC,CAClC,GAAI8rC,aAAc,EAAlB,CACA,GAAI7rC,KAAJ,CAAW,CACT6rC,YAAc7rC,MAAMe,QAAN,EAAd,CACD,CAED,GAAIf,QAAUA,MAAMe,QAAN,KAAqB,sBAArB,EAA+Cf,MAAM8rC,MAAN,EAAgB9rC,MAAM8rC,MAAN,CAAa/qC,QAAb,KAA4B,sBAArG,CAAJ,CAAkI,CAChI,GAAI+qC,QAASvsC,SAAb,CACA,GAAIwsC,QAASzB,iBAAb,CAEA,GAAItqC,gBAAiBwsB,YAArB,CAAkC,CAChCsf,OAAS9rC,KAAT,CACA+rC,QAAUvB,gBAAV,CACD,CAHD,IAGO,CACLsB,OAAS9rC,MAAM8rC,MAAf,CAEA,GAAID,cAAgB,oBAApB,CAA0C,CACxCE,QAAUrB,cAAV,CACD,CAFD,IAEO,IAAImB,cAAgB,qBAApB,CAA2C,CAChDE,QAAUpB,eAAV,CACD,CAFM,IAEA,IAAIkB,cAAgB,4BAApB,CAAkD,CACvDE,QAAUnB,sBAAV,CACD,CAFM,IAEA,IAAIiB,cAAgB,qBAApB,CAA2C,CAChDE,QAAUlB,eAAV,CACD,CAFM,IAEA,IAAIgB,cAAgB,sBAApB,CAA4C,CACjDE,QAAUhB,gBAAV,CACD,CAFM,IAEA,IAAIc,cAAgB,qBAApB,CAA2C,CAChDE,QAAUjB,eAAV,CACD,CAFM,IAEA,IAAIe,cAAgB,sBAApB,CAA4C,CACjDE,QAAUf,gBAAV,CACD,CAFM,IAEA,IAAIa,cAAgB,uBAApB,CAA6C,CAClDE,QAAUd,iBAAV,CACD,CAFM,IAEA,IAAIY,cAAgB,uBAApB,CAA6C,CAClDE,QAAUb,iBAAV,CACD,CAFM,IAEA,CACLnrC,SAAS,GAAI4H,MAAJ,CAAU,oCAAV,CAAT,EACD,CACF,CAED5H,SAASgsC,OAASC,eAAeF,MAAf,CAAlB,EACD,CAlCD,IAkCO,IAAID,cAAgB,eAApB,CAAqC,CAC1C,GAAMI,YAAa,GAAIzgB,WAAJ,EAAnB,CAEAygB,WAAWpkC,MAAX,CAAoB,UAAY,CAC9B,GAAM0B,KAAM6gC,iBAAmBpqC,MAAMQ,IAAzB,CAAgC,GAAhC,CAAsCwrC,eAAe,KAAKloC,MAApB,CAAlD,CACA/D,SAASuqC,kBAAoBG,SAApB,CAAgClhC,GAAzC,EACD,CAHD,CAKA0iC,WAAWxgB,iBAAX,CAA6BzrB,KAA7B,EACD,CATM,IASA,CACL,GAAI,CACFD,SAASuB,KAAKC,SAAL,CAAevB,KAAf,CAAT,EACD,CAAC,MAAOiW,CAAP,CAAU,CACVI,QAAQC,KAAR,CAAc,6CAAd,CAA6DtW,KAA7D,EAEAD,SAAS,IAAT,CAAekW,CAAf,EACD,CACF,CACF,CAED,QAASozB,YAAT,CAAqBrpC,KAArB,CAA4B,CAC1B,GAAIA,MAAMyZ,SAAN,CAAgB,CAAhB,CAAmB8wB,wBAAnB,IAAiDD,iBAArD,CAAwE,CACtE,MAAOhpC,MAAKoI,KAAL,CAAW1J,KAAX,CAAP,CACD,CACD,GAAIksC,kBAAmBlsC,MAAMyZ,SAAN,CAAgB0xB,6BAAhB,CAAvB,CACA,GAAM3qC,MAAOR,MAAMyZ,SAAN,CAAgB8wB,wBAAhB,CAA0CY,6BAA1C,CAAb,CACA,GAAIgB,UAAW5sC,SAAf,CACA,GAAIiB,OAASiqC,SAAT,EAAsBJ,uBAAuB1nC,IAAvB,CAA4BupC,gBAA5B,CAA1B,CAAyE,CACvE,GAAME,SAAUF,iBAAiBlrC,KAAjB,CAAuBqpC,sBAAvB,CAAhB,CACA8B,SAAWC,QAAQ,CAAR,CAAX,CACAF,iBAAmBA,iBAAiBzyB,SAAjB,CAA2B2yB,QAAQ,CAAR,EAAW9tC,MAAtC,CAAnB,CACD,CACD,GAAMwtC,QAASO,eAAeH,gBAAf,CAAf,CAEA,OAAQ1rC,IAAR,EACE,IAAKgqC,iBAAL,CACE,MAAOsB,OAAP,CACF,IAAKrB,UAAL,CACE,MAAOW,cAAa,CAACU,MAAD,CAAb,CAAuB,CAC5BtrC,KAAM2rC,QADsB,CAAvB,CAAP,CAGF,IAAKzB,eAAL,CACE,MAAO,IAAI4B,UAAJ,CAAcR,MAAd,CAAP,CACF,IAAKnB,gBAAL,CACE,MAAO,IAAIvH,WAAJ,CAAe0I,MAAf,CAAP,CACF,IAAKlB,uBAAL,CACE,MAAO,IAAI2B,kBAAJ,CAAsBT,MAAtB,CAAP,CACF,IAAKjB,gBAAL,CACE,MAAO,IAAI2B,WAAJ,CAAeV,MAAf,CAAP,CACF,IAAKf,iBAAL,CACE,MAAO,IAAI0B,YAAJ,CAAgBX,MAAhB,CAAP,CACF,IAAKhB,gBAAL,CACE,MAAO,IAAI4B,WAAJ,CAAeZ,MAAf,CAAP,CACF,IAAKd,iBAAL,CACE,MAAO,IAAI2B,YAAJ,CAAgBb,MAAhB,CAAP,CACF,IAAKb,kBAAL,CACE,MAAO,IAAI2B,aAAJ,CAAiBd,MAAjB,CAAP,CACF,IAAKZ,kBAAL,CACE,MAAO,IAAI2B,aAAJ,CAAiBf,MAAjB,CAAP,CACF,QACE,KAAM,IAAInkC,MAAJ,CAAU,gBAAkBnH,IAA5B,CAAN,CA1BJ,CA4BD,CAED,QAAS6rC,eAAT,CAAwBH,gBAAxB,CAA0C,CACxC,GAAIY,cAAeZ,iBAAiB5tC,MAAjB,CAA0B,IAA7C,CACA,GAAMK,KAAMutC,iBAAiB5tC,MAA7B,CACA,GAAII,GAAIa,SAAR,CACA,GAAI0E,GAAI,CAAR,CACA,GAAI8oC,UAAWxtC,SAAf,CACIytC,SAAWztC,SADf,CAEI0tC,SAAW1tC,SAFf,CAGI2tC,SAAW3tC,SAHf,CAIA,GAAI2sC,iBAAiBA,iBAAiB5tC,MAAjB,CAA0B,CAA3C,IAAkD,GAAtD,CAA2D,CACzDwuC,eACA,GAAIZ,iBAAiBA,iBAAiB5tC,MAAjB,CAA0B,CAA3C,IAAkD,GAAtD,CAA2D,CACzDwuC,eACD,CACF,CACD,GAAMhB,QAAS,GAAItf,YAAJ,CAAgBsgB,YAAhB,CAAf,CACA,GAAM3f,OAAQ,GAAIiW,WAAJ,CAAe0I,MAAf,CAAd,CAEA,IAAKptC,EAAI,CAAT,CAAYA,EAAIC,GAAhB,CAAqBD,GAAK,CAA1B,CAA6B,CAC3BquC,SAAW5C,WAAW5pC,OAAX,CAAmB2rC,iBAAiBxtC,CAAjB,CAAnB,CAAX,CACAsuC,SAAW7C,WAAW5pC,OAAX,CAAmB2rC,iBAAiBxtC,EAAI,CAArB,CAAnB,CAAX,CACAuuC,SAAW9C,WAAW5pC,OAAX,CAAmB2rC,iBAAiBxtC,EAAI,CAArB,CAAnB,CAAX,CACAwuC,SAAW/C,WAAW5pC,OAAX,CAAmB2rC,iBAAiBxtC,EAAI,CAArB,CAAnB,CAAX,CAEA,yBACAyuB,MAAMlpB,GAAN,EAAa8oC,UAAY,CAAZ,CAAgBC,UAAY,CAAzC,CACA7f,MAAMlpB,GAAN,EAAa,CAAC+oC,SAAW,EAAZ,GAAmB,CAAnB,CAAuBC,UAAY,CAAhD,CACA9f,MAAMlpB,GAAN,EAAa,CAACgpC,SAAW,CAAZ,GAAkB,CAAlB,CAAsBC,SAAW,EAA9C,CACD,CACD,MAAOpB,OAAP,CACD,CAED,QAASE,eAAT,CAAwBF,MAAxB,CAAgC,CAC9B,GAAM3e,OAAQ,GAAIiW,WAAJ,CAAe0I,MAAf,CAAd,CACA,GAAIqB,cAAe,EAAnB,CACA,GAAIzuC,GAAIa,SAAR,CAEA,IAAKb,EAAI,CAAT,CAAYA,EAAIyuB,MAAM7uB,MAAtB,CAA8BI,GAAK,CAAnC,CAAsC,CACpC,yBACAyuC,cAAgBhD,WAAWhd,MAAMzuB,CAAN,GAAY,CAAvB,CAAhB,CACAyuC,cAAgBhD,WAAW,CAAChd,MAAMzuB,CAAN,EAAW,CAAZ,GAAkB,CAAlB,CAAsByuB,MAAMzuB,EAAI,CAAV,GAAgB,CAAjD,CAAhB,CACAyuC,cAAgBhD,WAAW,CAAChd,MAAMzuB,EAAI,CAAV,EAAe,EAAhB,GAAuB,CAAvB,CAA2ByuB,MAAMzuB,EAAI,CAAV,GAAgB,CAAtD,CAAhB,CACAyuC,cAAgBhD,WAAWhd,MAAMzuB,EAAI,CAAV,EAAe,EAA1B,CAAhB,CACD,CACD,GAAIyuB,MAAM7uB,MAAN,CAAe,CAAf,GAAqB,CAAzB,CAA4B,CAC1B6uC,aAAeA,aAAa1zB,SAAb,CAAuB,CAAvB,CAA0B0zB,aAAa7uC,MAAb,CAAsB,CAAhD,EAAqD,GAApE,CACD,CAFD,IAEO,IAAI6uB,MAAM7uB,MAAN,CAAe,CAAf,GAAqB,CAAzB,CAA4B,CACjC6uC,aAAeA,aAAa1zB,SAAb,CAAuB,CAAvB,CAA0B0zB,aAAa7uC,MAAb,CAAsB,CAAhD,EAAqD,IAApE,CACD,CACD,MAAO6uC,aAAP,CACD,CAED,GAAMlE,mBAAoB,CACxB3rB,UAAWA,SADa,CAExB+rB,YAAaA,WAFW,CAGxBgD,eAAgBA,cAHQ,CAIxBL,eAAgBA,cAJQ,CAA1B,CAOA;;SAGA,KAAK/C,iBAAL,CAAyBA,iBAAzB,CACA9lC,OAAO8lC,iBAAP,CAA2BA,iBAA3B,CACD,CAlND,EAkNGhpC,IAlNH,CAkNQkD,MAlNR,EAoNA;;OAGA,GAAMiqC,eAAgB,EAAtB,CACA,GAAMC,YAAa,CACjBC,UAAW,cADM,CAEjB1E,aAAc,qBAFG,CAGjB2E,OAAQ,eAHS,CAAnB,CAKA,GAAMC,oBAAqB,CAACH,WAAWC,SAAZ,CAAuBD,WAAWE,MAAlC,CAA0CF,WAAWzE,YAArD,CAA3B,CACA,GAAM6E,gBAAiB,CAAC,OAAD,CAAU,KAAV,CAAiB,MAAjB,CAAyB,KAAzB,CAAgC,MAAhC,CAAwC,MAAxC,CAAgD,QAAhD,CAA0D,KAA1D,CAAvB,CAEA,GAAMC,eAAgB,CACpBhF,YAAa,EADO,CAEpBiF,OAAQH,mBAAmB1uC,KAAnB,EAFY,CAGpBgU,KAAM,SAHc,CAIpBvC,KAAM,OAJc,CAKpBw4B,QAAS,eALW,CAMpBtkC,QAAS,GANW,CAAtB,CASA,GAAMmpC,eAAiB,SAAUhsC,IAAV,CAAgB,CACrC,GAAM6gC,WAAYA,WAAa7gC,KAAK6gC,SAAlB,EAA+B7gC,KAAK8gC,eAApC,EAAuD9gC,KAAK+gC,YAA5D,EAA4E/gC,KAAKghC,UAAjF,EAA+FhhC,KAAKihC,WAAtH,CACA,GAAM/+B,QAAS,EAAf,CACAA,OAAOupC,WAAWE,MAAlB,EAA4B,CAAC,CAAC3rC,KAAK2mC,YAAnC,CACAzkC,OAAOupC,WAAWC,SAAlB,EAA+B,CAAC,CAAE,UAAY,CAC5C,GAAI,MAAO1rC,MAAK2mC,YAAZ,GAA6B,WAA7B,EAA4C3mC,KAAKsV,SAAjD,EAA8DtV,KAAKsV,SAAL,CAAeC,SAA7E,EAA0F,SAASxU,IAAT,CAAcf,KAAKsV,SAAL,CAAeC,SAA7B,CAA1F,EAAqI,CAAC,SAASxU,IAAT,CAAcf,KAAKsV,SAAL,CAAeC,SAA7B,CAA1I,CAAmL,CACjL,MAAO,MAAP,CACD,CACD,GAAI,CACF,MAAOsrB,YAAa,MAAOA,WAAUnU,IAAjB,GAA0B,UAAvC,EAAqD,MAAO1sB,MAAKisC,WAAZ,GAA4B,WAAxF,CACD,CAAC,MAAO53B,CAAP,CAAU,CACV,MAAO,MAAP,CACD,CACF,CATgC,EAAjC,CAWAnS,OAAOupC,WAAWzE,YAAlB,EAAkC,CAAC,CAAE,UAAY,CAC/C,GAAI,CACF,MAAOhnC,MAAKgoC,YAAL,EAAqB,OAAShoC,MAAKgoC,YAAnC,EAAmDhoC,KAAKgoC,YAAL,CAAkBhnB,GAA5E,CACD,CAAC,MAAO3M,CAAP,CAAU,CACV,MAAO,MAAP,CACD,CACF,CANmC,EAApC,CAQA,MAAOnS,OAAP,CACD,CAxBqB,CAwBnBX,MAxBmB,CAAtB,CA0BA,GAAM1E,SAAUD,MAAMC,OAAN,EAAiB,SAAU6O,GAAV,CAAe,CAC9C,MAAOhK,QAAOzE,SAAP,CAAiBkC,QAAjB,CAA0Bd,IAA1B,CAA+BqN,GAA/B,IAAwC,gBAA/C,CACD,CAFD,CAIA,QAASwgC,cAAT,CAAuBC,eAAvB,CAAwCC,aAAxC,CAAuD,CACrDD,gBAAgBC,aAAhB,EAAiC,UAAY,CAC3C,GAAMC,QAASjvC,SAAf,CACA,MAAO+uC,iBAAgB7G,KAAhB,GAAwBjuB,IAAxB,CAA6B,UAAY,CAC9C,MAAO80B,iBAAgBC,aAAhB,EAA+BjvC,KAA/B,CAAqCgvC,eAArC,CAAsDE,MAAtD,CAAP,CACD,CAFM,CAAP,CAGD,CALD,CAMD,CAED,QAASjqC,OAAT,EAAkB,CAChB,IAAK,GAAItF,GAAI,CAAb,CAAgBA,EAAIM,UAAUV,MAA9B,CAAsCI,GAAtC,CAA2C,CACzC,GAAM4O,KAAMtO,UAAUN,CAAV,CAAZ,CAEA,GAAI4O,GAAJ,CAAS,CACP,IAAK,GAAIhF,IAAT,GAAgBgF,IAAhB,CAAqB,CACnB,GAAIA,IAAI9J,cAAJ,CAAmB8E,GAAnB,CAAJ,CAA6B,CAC3B,GAAI7J,QAAQ6O,IAAIhF,GAAJ,CAAR,CAAJ,CAAuB,CACrBtJ,UAAU,CAAV,EAAasJ,GAAb,EAAoBgF,IAAIhF,GAAJ,EAASxJ,KAAT,EAApB,CACD,CAFD,IAEO,CACLE,UAAU,CAAV,EAAasJ,GAAb,EAAoBgF,IAAIhF,GAAJ,CAApB,CACD,CACF,CACF,CACF,CACF,CAED,MAAOtJ,WAAU,CAAV,CAAP,CACD,CAED,QAASkvC,gBAAT,CAAyBC,UAAzB,CAAqC,CACnC,IAAK,GAAIR,OAAT,GAAmBN,WAAnB,CAA+B,CAC7B,GAAIA,WAAW7pC,cAAX,CAA0BmqC,MAA1B,GAAqCN,WAAWM,MAAX,IAAuBQ,UAAhE,CAA4E,CAC1E,MAAO,KAAP,CACD,CACF,CAED,MAAO,MAAP,CACD,CAED,GAAMC,SAAW,UAAY,CAC3B,QAASA,QAAT,CAAiBhjC,OAAjB,CAA0B,CAExB,KAAKkiC,SAAL,CAAiBD,WAAWC,SAA5B,CACA,KAAK1E,YAAL,CAAoByE,WAAWzE,YAA/B,CACA,KAAK2E,MAAL,CAAcF,WAAWE,MAAzB,CAEA,KAAKzD,eAAL,CAAuB9lC,OAAO,EAAP,CAAW0pC,aAAX,CAAvB,CACA,KAAKW,QAAL,CAAgBrqC,OAAO,EAAP,CAAW,KAAK8lC,eAAhB,CAAiC1+B,OAAjC,CAAhB,CACA,KAAKkjC,WAAL,CAAmB,IAAnB,CACA,KAAKC,YAAL,CAAoB,IAApB,CACA,KAAKC,OAAL,CAAe,KAAf,CACA,KAAKxF,QAAL,CAAgB,IAAhB,CAEA,KAAKyF,6BAAL,GACA,KAAK9F,SAAL,CAAe,KAAK0F,QAAL,CAAcV,MAA7B,EACD,CAEDS,QAAQvvC,SAAR,CAAkBgpB,MAAlB,CAA2B,SAAUzc,OAAV,CAAmB,CAC5C,GAAI,OAAOA,QAAP,mCAAOA,OAAP,KAAmB,QAAvB,CAAiC,CAC/B,GAAI,KAAKojC,OAAT,CAAkB,CAChB,MAAO,IAAI7mC,MAAJ,CAAU,qCAAuC,gBAAjD,CAAP,CACD,CACD,IAAK,GAAIjJ,EAAT,GAAc0M,QAAd,CAAuB,CACrB,GAAI1M,IAAM,SAAV,CAAqB,CACnB0M,QAAQ1M,CAAR,EAAa0M,QAAQ1M,CAAR,EAAW2G,OAAX,CAAmB,KAAnB,CAA0B,GAA1B,CAAb,CACD,CAED,KAAKgpC,QAAL,CAAc3vC,CAAd,EAAmB0M,QAAQ1M,CAAR,CAAnB,CACD,CACD,GAAI,UAAY0M,QAAZ,EAAuBA,QAAQuiC,MAAnC,CAA2C,CACzC,KAAKhF,SAAL,CAAe,KAAK0F,QAAL,CAAcV,MAA7B,EACD,CAED,MAAO,KAAP,CACD,CAhBD,IAgBO,IAAI,MAAOviC,QAAP,GAAmB,QAAvB,CAAiC,CACtC,MAAO,MAAKijC,QAAL,CAAcjjC,OAAd,CAAP,CACD,CAFM,IAEA,CACL,MAAO,MAAKijC,QAAZ,CACD,CACF,CAtBD,CAwBAD,QAAQvvC,SAAR,CAAkB6vC,YAAlB,CAAiC,SAAUC,YAAV,CAAwB5uC,QAAxB,CAAkC6uC,aAAlC,CAAiD,CAChF,GAAMjmB,SAAU,GAAI3gB,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CACrD,GAAI,CACF,GAAM2mC,MAAQ,UAAY,CACxB,GAAMV,YAAaQ,aAAahF,QAAhC,CACA,GAAMmF,iBAAkB,GAAInnC,MAAJ,CAAU,qEAAV,CAAxB,CACA,GAAMonC,aAAc,GAAIpnC,MAAJ,CAAU,sCAAwCgnC,aAAahF,QAA/D,CAApB,CACA,GAAI,CAACgF,aAAahF,QAAlB,CAA4B,CAC1BzhC,OAAO4mC,eAAP,EACA,MAAO,CACLE,EAAGzvC,SADE,CAAP,CAGD,CACD,GAAI2uC,gBAAgBS,aAAahF,QAA7B,CAAJ,CAA4C,CAC1CzhC,OAAO6mC,WAAP,EACA,MAAO,CACLC,EAAGzvC,SADE,CAAP,CAGD,CAED,GAAM0vC,qBAAsBxB,eAAe/tC,MAAf,CAAsB,eAAtB,CAA5B,CACA,IAAK,GAAIhB,GAAI,CAAb,CAAgBA,EAAIuwC,oBAAoB3wC,MAAxC,CAAgDI,GAAhD,CAAqD,CACnD,GAAMwwC,oBAAqBD,oBAAoBvwC,CAApB,CAA3B,CACA,GAAI,CAACwwC,kBAAD,EAAuB,CAACP,aAAaO,kBAAb,CAAxB,EAA4D,MAAOP,cAAaO,kBAAb,CAAP,GAA4C,UAA5G,CAAwH,CACtHhnC,OAAO4mC,eAAP,EACA,MAAO,CACLE,EAAGzvC,SADE,CAAP,CAGD,CACF,CAED,GAAI4vC,gBAAiBnnC,QAAQC,OAAR,CAAgB,IAAhB,CAArB,CACA,GAAI,aAAe0mC,aAAnB,CAAiC,CAC/B,GAAIA,aAAaS,SAAb,EAA0B,MAAOT,cAAaS,SAApB,GAAkC,UAAhE,CAA4E,CAC1ED,eAAiBR,aAAaS,SAAb,EAAjB,CACD,CAFD,IAEO,CACLD,eAAiBnnC,QAAQC,OAAR,CAAgB,CAAC,CAAC0mC,aAAaS,SAA/B,CAAjB,CACD,CACF,CAEDD,eAAel2B,IAAf,CAAoB,SAAUo2B,aAAV,CAAyB,CAC3CzB,cAAcO,UAAd,EAA4BkB,aAA5B,CACAjC,cAAce,UAAd,EAA4BQ,YAA5B,CACA1mC,UACD,CAJD,CAIGC,MAJH,EAKD,CA1CY,EAAb,CA4CA,GAAI,OAAO2mC,KAAP,mCAAOA,IAAP,KAAgB,QAApB,CAA8B,MAAOA,MAAKG,CAAZ,CAC/B,CAAC,MAAO/4B,CAAP,CAAU,CACV/N,OAAO+N,CAAP,EACD,CACF,CAlDe,CAAhB,CAoDA0S,QAAQ1P,IAAR,CAAalZ,QAAb,CAAuB6uC,aAAvB,EACA,MAAOjmB,QAAP,CACD,CAvDD,CAyDAylB,QAAQvvC,SAAR,CAAkB8uC,MAAlB,CAA2B,UAAY,CACrC,MAAO,MAAKhE,QAAL,EAAiB,IAAxB,CACD,CAFD,CAIAyE,QAAQvvC,SAAR,CAAkBywC,SAAlB,CAA8B,SAAUnB,UAAV,CAAsBpuC,QAAtB,CAAgC6uC,aAAhC,CAA+C,CAC3E,GAAMhtC,MAAO,IAAb,CACA,GAAM2tC,kBAAoB,UAAY,CACpC,GAAIrB,gBAAgBC,UAAhB,CAAJ,CAAiC,CAC/B,OAAQA,UAAR,EACE,IAAKvsC,MAAK0rC,SAAV,CACE,MAAO,IAAItlC,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CAC5CD,QAAQogC,YAAR,EACD,CAFM,CAAP,CAGF,IAAKzmC,MAAKgnC,YAAV,CACE,MAAO,IAAI5gC,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CAC5CD,QAAQiiC,mBAAR,EACD,CAFM,CAAP,CAGF,IAAKtoC,MAAK2rC,MAAV,CACE,MAAO,IAAIvlC,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CAC5CD,QAAQyhC,aAAR,EACD,CAFM,CAAP,CAVJ,CAcD,CAfD,IAeO,IAAI0D,cAAce,UAAd,CAAJ,CAA+B,CACpC93B,QAAQm5B,GAAR,CAAY,UAAYrB,UAAxB,EACA,MAAOnmC,SAAQC,OAAR,CAAgBmlC,cAAce,UAAd,CAAhB,CAAP,CACD,CAED,MAAOnmC,SAAQE,MAAR,CAAe,GAAIP,MAAJ,CAAU,mBAAV,CAAf,CAAP,CACD,CAtBwB,EAAzB,CAwBA4nC,iBAAiBt2B,IAAjB,CAAsBlZ,QAAtB,CAAgC6uC,aAAhC,EACA,MAAOW,iBAAP,CACD,CA5BD,CA8BAnB,QAAQvvC,SAAR,CAAkB4wC,aAAlB,CAAkC,SAAU1vC,QAAV,CAAoB,CACpD,GAAM2vC,mBAAoB,GAAI1nC,QAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CAC/DD,QAAQghC,iBAAR,EACD,CAFyB,CAA1B,CAGA,GAAIlpC,UAAY,MAAOA,SAAP,GAAoB,UAApC,CAAgD,CAC9C2vC,kBAAkBz2B,IAAlB,CAAuB,SAAUnV,MAAV,CAAkB,CACvC/D,SAAS+D,MAAT,EACD,CAFD,EAGD,CACD,MAAO4rC,kBAAP,CACD,CAVD,CAYAtB,QAAQvvC,SAAR,CAAkBqoC,KAAlB,CAA0B,SAAUnnC,QAAV,CAAoB,CAC5C,GAAM6B,MAAO,IAAb,CAEA,GAAM+mB,SAAU/mB,KAAK0sC,WAAL,CAAiBr1B,IAAjB,CAAsB,UAAY,CAChD,GAAIrX,KAAK4sC,OAAL,GAAiB,IAArB,CAA2B,CACzB5sC,KAAK4sC,OAAL,CAAe5sC,KAAK2sC,YAAL,EAAf,CACD,CAED,MAAO3sC,MAAK4sC,OAAZ,CACD,CANe,CAAhB,CAQA7lB,QAAQ1P,IAAR,CAAalZ,QAAb,CAAuBA,QAAvB,EACA,MAAO4oB,QAAP,CACD,CAbD,CAeAylB,QAAQvvC,SAAR,CAAkB8pC,SAAlB,CAA8B,SAAUgH,OAAV,CAAmB5vC,QAAnB,CAA6B6uC,aAA7B,CAA4C,CACxE,GAAMhtC,MAAO,IAAb,CAEA,GAAI,CAACnD,QAAQkxC,OAAR,CAAL,CAAuB,CACrBA,QAAU,CAACA,OAAD,CAAV,CACD,CAED,GAAMC,kBAAmB,KAAKC,qBAAL,CAA2BF,OAA3B,CAAzB,CAEA,QAASG,kBAAT,EAA6B,CAC3BluC,KAAKysC,QAAL,CAAcV,MAAd,CAAuB/rC,KAAK+rC,MAAL,EAAvB,CACD,CAED,QAASoC,WAAT,CAAoBH,gBAApB,CAAsC,CACpC,MAAO,WAAY,CACjB,GAAII,oBAAqB,CAAzB,CAEA,QAASC,kBAAT,EAA6B,CAC3B,MAAOD,mBAAqBJ,iBAAiBtxC,MAA7C,CAAqD,CACnD,GAAM6vC,YAAayB,iBAAiBI,kBAAjB,CAAnB,CACAA,qBAEApuC,KAAKonC,QAAL,CAAgB,IAAhB,CACApnC,KAAK4sC,OAAL,CAAe,IAAf,CAEA,MAAO5sC,MAAK0tC,SAAL,CAAenB,UAAf,EAA2Bl1B,IAA3B,CAAgC,SAAU00B,MAAV,CAAkB,CACvD/rC,KAAKsuC,QAAL,CAAcvC,MAAd,EACAmC,oBAEAluC,KAAK4sC,OAAL,CAAe5sC,KAAK4mC,aAAL,CAAmB5mC,KAAKysC,QAAxB,CAAf,CACA,MAAOzsC,MAAK4sC,OAAZ,CACD,CANM,EAMJ,OANI,EAMKyB,iBANL,CAAP,CAOD,CAEDH,oBACA,GAAMx5B,OAAQ,GAAI3O,MAAJ,CAAU,oCAAV,CAAd,CACA/F,KAAK0sC,WAAL,CAAmBtmC,QAAQE,MAAR,CAAeoO,KAAf,CAAnB,CACA,MAAO1U,MAAK0sC,WAAZ,CACD,CAED,MAAO2B,oBAAP,CACD,CA3BD,CA4BD,CAED,GAAME,kBAAmB,KAAK7B,WAAL,GAAqB,IAArB,CAA4B,KAAKA,WAAL,CAAiB,OAAjB,EAA0B,UAAY,CACzF,MAAOtmC,SAAQC,OAAR,EAAP,CACD,CAFoD,CAA5B,CAEpBD,QAAQC,OAAR,EAFL,CAIA,KAAKqmC,WAAL,CAAmB6B,iBAAiBl3B,IAAjB,CAAsB,UAAY,CACnD,GAAMk1B,YAAayB,iBAAiB,CAAjB,CAAnB,CACAhuC,KAAKonC,QAAL,CAAgB,IAAhB,CACApnC,KAAK4sC,OAAL,CAAe,IAAf,CAEA,MAAO5sC,MAAK0tC,SAAL,CAAenB,UAAf,EAA2Bl1B,IAA3B,CAAgC,SAAU00B,MAAV,CAAkB,CACvD/rC,KAAK+nC,QAAL,CAAgBgE,OAAOhE,QAAvB,CACAmG,oBACAluC,KAAK6sC,6BAAL,GACA7sC,KAAK2sC,YAAL,CAAoBwB,WAAWH,gBAAX,CAApB,CACD,CALM,CAAP,CAMD,CAXkB,EAWhB,OAXgB,EAWP,UAAY,CACtBE,oBACA,GAAMx5B,OAAQ,GAAI3O,MAAJ,CAAU,oCAAV,CAAd,CACA/F,KAAK0sC,WAAL,CAAmBtmC,QAAQE,MAAR,CAAeoO,KAAf,CAAnB,CACA,MAAO1U,MAAK0sC,WAAZ,CACD,CAhBkB,CAAnB,CAkBA,KAAKA,WAAL,CAAiBr1B,IAAjB,CAAsBlZ,QAAtB,CAAgC6uC,aAAhC,EACA,MAAO,MAAKN,WAAZ,CACD,CApED,CAsEAF,QAAQvvC,SAAR,CAAkB+kB,QAAlB,CAA6B,SAAUuqB,UAAV,CAAsB,CACjD,MAAO,CAAC,CAACP,cAAcO,UAAd,CAAT,CACD,CAFD,CAIAC,QAAQvvC,SAAR,CAAkBqxC,QAAlB,CAA6B,SAAUE,2BAAV,CAAuC,CAClEpsC,OAAO,IAAP,CAAaosC,2BAAb,EACD,CAFD,CAIAhC,QAAQvvC,SAAR,CAAkBgxC,qBAAlB,CAA0C,SAAUF,OAAV,CAAmB,CAC3D,GAAIC,kBAAmB,EAAvB,CACA,IAAK,GAAIlxC,GAAI,CAAR,CAAWC,IAAMgxC,QAAQrxC,MAA9B,CAAsCI,EAAIC,GAA1C,CAA+CD,GAA/C,CAAoD,CAClD,GAAMyvC,YAAawB,QAAQjxC,CAAR,CAAnB,CACA,GAAI,KAAKklB,QAAL,CAAcuqB,UAAd,CAAJ,CAA+B,CAC7ByB,iBAAiBpwC,IAAjB,CAAsB2uC,UAAtB,EACD,CACF,CACD,MAAOyB,iBAAP,CACD,CATD,CAWAxB,QAAQvvC,SAAR,CAAkB4vC,6BAAlB,CAAkD,UAAY,CAC5D,IAAK,GAAI/vC,GAAI,CAAb,CAAgBA,EAAI+uC,eAAenvC,MAAnC,CAA2CI,GAA3C,CAAgD,CAC9CovC,cAAc,IAAd,CAAoBL,eAAe/uC,CAAf,CAApB,EACD,CACF,CAJD,CAMA0vC,QAAQvvC,SAAR,CAAkBwxC,cAAlB,CAAmC,SAAUjlC,OAAV,CAAmB,CACpD,MAAO,IAAIgjC,QAAJ,CAAYhjC,OAAZ,CAAP,CACD,CAFD,CAIA,MAAOgjC,QAAP,CACD,CApQe,EAAhB,CAsQA,GAAMkC,SAAU,GAAIlC,QAAJ,EAAhB,CACA,MAAOkC,QAAP,CACD,CA9qDI,CA8qDFntC,MA9qDE,CADE,CAAT","file":"chui-box.min.js","sourcesContent":["\n/**\n  * DOMStack, an abstraction of the native NodeList, allowing manipulation of DOM elements without having to extend native elements.\n  * @param {Element[] | Document | Element } args An array of elements, the document, or a node.\n  * @return {DOMStack} DOMStack\n  */\nclass DOMStack {\n  constructor (args) {\n    this.array = [];\n    this.length = 0;\n    this.objectType = 'domstack';\n    if (Array.isArray(args)) {\n      let i = -1;\n      const len = args.length;\n      while (++i < len) {\n        this.array[i] = args[i];\n      }\n    } else if (args) {\n      if (args === document) {\n        this.array[0] = document;\n        this[0] = document;\n        this.length = 1;\n      } else {\n        const array = Array.prototype.slice.apply(arguments);\n        array.forEach(function(ctx, idx) {\n          this.array[idx] = ctx;\n        });\n      }\n    }\n  }\n\n  eq(index) {\n    let ret = new DOMStack();\n    if (!this.array.length) return ret;\n    let temp = undefined;\n    if (index < 0) {\n      temp = this.array[this.array.length + index];\n      ret.push(temp);\n    } else {\n      if (index >= this.array.length) return new DOMStack();\n      temp = this.array[index];\n      ret.push(temp);\n    }\n    ret[0] = ret.array[0];\n    ret.length = ret.array.length;\n    return ret;\n  }\n\n  push(data) {\n    if (data && data.objectType === 'domstack') {\n      this.array = this.array.concat(data.array)\n    } else {\n      this.array.push(data);\n    }\n    this.length = this.array.length;\n    this[0] = this.array[0];\n  }\n\n  pop() {\n    this.length = this.array.length - 1;\n    let ret = this.array.pop();\n    return $(ret);\n  }\n\n  unshift(data) {\n    if (data && data.objectType === 'domstack') {\n      this.array.unshift(data.array[0]);\n    } else {\n      this.array.unshift(data);\n    }\n    this[0] = this.array[0];\n    this.length = this.array.length;\n  }\n\n  shift() {\n    this.length = this.array.length - 1;\n    let ret = this.array.shift();\n    return $(ret);\n  }\n\n  size() {\n    return this.array.length;\n  }\n\n  forEach(callback) {\n    let value = undefined;\n    let i = 0;\n    const len = this.array.length;\n    for (; i < len; i++) {\n      value = callback.call(this.array[i], this.array[i], i);\n      if (value === false) {\n        break;\n      }\n    }\n  }\n\n  each(callback) {\n    let value = undefined;\n    let i = 0;\n    const len = this.array.length;\n    for (; i < len; i++) {\n      value = callback.call(this.array[i], i, this.array[i]);\n      if (value === false) {\n        break;\n      }\n    }\n  }\n\n  slice(...args) {\n    let ret = new DOMStack();\n    ret.concat(this.array.slice.apply(this.array, args));\n    return $(ret);\n  }\n\n  splice(...args) {\n    var ret = new DOMStack();\n    ret.concat(this.array.splice.apply(this.array, args));\n    this[0] = this.array[0];\n    this.length = this.array.length;\n    return $(ret);\n  }\n\n  filter(...args) {\n    let ret = new DOMStack();\n\n    ret.concat(this.array.filter.apply(this.array, args));\n    ret[0] = ret.array[0];\n    return ret;\n  }\n\n  map(...args) {\n    let ret = new DOMStack();\n    ret.concat(this.array.map.apply(this.array, args));\n    ret[0] = ret.array[0];\n    return ret;\n  }\n\n  indexOf(node) {\n    // return this.array.indexOf.apply(this.array, args);\n    if (!node) return -1;\n    if (node.nodeType && node.nodeType === 1) {\n      return this.array.indexOf(node);\n    } else if (node && node.objectType === 'domstack') {\n      return this.array.indexOf(node[0]);\n    } else if (node && Array.isArray(node)) {\n      return this.array.indexOf(node[0]);\n    } else if (node && $.type(node) === 'string') {\n      const el = this[0].parentNode.querySelector(node);\n      return this.array.indexOf(el);\n    }\n  }\n\n  concat(collection) {\n    let i = -1;\n    let len = undefined;\n    let temp = undefined;\n    if (Array.isArray(collection)) {\n      temp = collection;\n      len = temp.length;\n    } else if (collection && collection.objectType && collection.objectType === 'domstack') {\n      temp = collection.getData();\n      len = temp.length;\n    } else if (collection.constructor.toString().match(/HTMLBodyElementConstructor/)) {\n      temp = [collection];\n      len = 1;\n    }\n    this.array.push.apply(this.array, temp);\n    this[0] = this.array[0];\n    this.length = this.array.length;\n  }\n\n  reverse(...args) {\n    this.array.reverse.apply(this.array, args);\n    this[0] = this.array[0];\n  }\n\n  every(...args) {\n    return this.array.every.apply(this.array, args);\n  }\n\n  some(...args) {\n    return this.array.some.apply(this.array, args);\n  }\n\n  unique() {\n    const len = this.array.length;\n    let ret = [];\n    let obj = {};\n    for (let i = 0; i < len; i++) {\n      const arrayItem = JSON.stringify(this.array[i]);\n      const arrayItemValue = this.array[i];\n      if (obj[arrayItem] === undefined) {\n        ret.push(arrayItemValue);\n        obj[arrayItem] = 1;\n      } else {\n        obj[arrayItem]++;\n      }\n    }\n    this.array = ret;\n    this[0] = this.array[0];\n    this.length = this.array.length;\n  }\n\n  get() {\n    return this.array;\n  }\n  /**\n   * Deprecated. Use `get()`.\n   */\n  getData() {\n    return this.array;\n  }\n\n  purge() {\n    this.array.length = 0;\n    this.length = 0;\n  }\n}\n/**\n * ChocolateChipJS Core. This function exports the ChocolateChipJS singleton.\n */\n(function() {\n\n  /**\n   * ChocolateChipJS singleton. This function can query the DOM with the provided parameters, or execute a callback when the DOM is ready. This is also the base for ChocolateChipJS methods for DOM manipulation.\n   */\n  function chocolatechipjs(selector, context) {\n    const self = this;\n    const idRE = /^#([\\w-]*)$/;\n    const classRE = /^\\.([\\w-])$/;\n    const tagRE = /^[\\w-]+$/;\n    const readyRE = /complete|loaded|interactive/;\n    let temp = undefined;\n\n    const slice = elements => {\n      temp = new DOMStack([].slice.apply(elements));\n      temp[0] = temp.array[0];\n      return temp;\n    };\n\n    const getId = selector => {\n      const el = document.getElementById(selector.split('#')[1]);\n      if (el) {\n        temp = new DOMStack([el]);\n        temp[0] = new DOMStack([el]).array[0];\n        temp.length = 1;\n        return temp;\n      } else {\n        return new DOMStack();\n      }\n    };\n\n    const getTag = (selector, context) => {\n      if (context) {\n        temp = slice(context.getElementsByTagName(selector));\n        temp[0] = temp.array[0];\n        temp.length = temp.length;\n        return temp;\n      } else {\n        temp = slice(document.getElementsByTagName(selector));\n        temp[0] = temp.array[0];\n        temp.length = temp.array.length;\n        return temp;\n      }\n    };\n\n    const getClass = (selector, context) => {\n      if (context) {\n        temp = slice(context.getElementsByClassName(selector.split('.')[1]));\n        temp[0] = temp.array[0];\n        temp.length = temp.length;\n        return temp;\n      } else {\n        temp = slice(document.getElementsByClassName(selector.split('.')[1]));\n        temp[0] = temp.array[0];\n        temp.length = temp.array.length;\n        return temp;\n      }\n    };\n\n    const getNode = (selector, context) => {\n      if (typeof selector === 'string')\n        selector = selector.trim();\n      if (typeof selector === 'string' && idRE.test(selector)) {\n        return getId(selector);\n      }\n\n      if (selector && (selector instanceof Array) && selector.length)\n        return selector;\n      if (!context && typeof selector === 'string') {\n        if (/<\\/?[^>]+>/.test(selector)) {\n          return self.html(selector);\n        }\n\n        if (tagRE.test(selector)) {\n          return getTag(selector);\n\n        } else if (classRE.test(selector)) {\n          return getClass(selector);\n\n        } else {\n          temp = slice(document.querySelectorAll(selector));\n          temp[0] = temp.array[0];\n          temp.length = temp.array.length;\n          return temp;\n        }\n\n      } else {\n        if (context) {\n          temp = slice($(context).find(selector));\n          temp[0] = temp.array[0];\n          temp.length = temp.array / length;\n          return temp;\n\n        } else {\n          temp = slice(document.querySelectorAll(selector));\n          temp[0] = temp.array[0];\n          temp.length = temp.array.length;\n          return temp;\n        }\n      }\n    };\n\n    if (selector && selector.objectType && selector.objectType === 'domstack') {\n      return selector;\n    }\n\n    if (selector === document) {\n      return new DOMStack(document);\n    }\n\n    if (selector === null) {\n      return new DOMStack();\n    }\n\n    if (!!context) {\n      if (typeof context === 'string') {\n        temp = slice(document.querySelectorAll(context + ' ' + selector));\n        temp[0] = temp.array[0];\n        temp.length = temp.array.length;\n        return temp;\n      } else if (context.nodeType === 1) {\n        return getNode(selector, context);\n      }\n\n    } else if (typeof selector === 'function') {\n      if (readyRE.test(document.readyState) && document.body) {\n        selector.call(selector);\n      } else {\n        document.addEventListener(\"DOMContentLoaded\", function() {\n          return selector.call(selector);\n        });\n      }\n\n    } else if (selector && selector.nodeType === 1) {\n      temp = new DOMStack();\n      temp[0] = selector;\n      temp.length = temp.array.length;\n      temp.push(selector);\n      return temp;\n\n    } else if (typeof selector === 'string') {\n      if (selector === '') return new DOMStack();\n      if (/<\\/?[^>]+>/.test(selector)) {\n        return chocolatechipjs.html(selector);\n      } else {\n        try {\n          return getNode(selector) ? getNode(selector) : new DOMStack();\n        } catch (err) {\n          return new DOMStack();\n        }\n      }\n\n    } else if (Array.isArray(selector)) {\n      return new DOMStack(selector);\n      \n    } else if (selector === window) {\n      temp = new DOMStack();\n      temp[0] = window;\n      temp.length = temp.array.length;\n      return temp;\n\n    } else {\n      return new DOMStack();\n    }\n\n    return new DOMStack();\n  }\n  \n  if (window.DefaultLanguageForErrors) {\n    chocolatechipjs.languageForErrors = window.DefaultLanguageForErrors\n  } else {\n    chocolatechipjs.languageForErrors = 'en'\n  }\n\n  let $ = chocolatechipjs;\n\n  /**\n   * ChocolateChip-UI extend method.\n   */\n\n  /**\n   * Polyfill for Object.keys.\n   * Needed for Android older than 4.4.\n   */\n  if (!Object.keys) {\n    Object.keys = (function() {\n      'use strict';\n      const hasOwnProperty = Object.prototype.hasOwnProperty,\n          hasDontEnumBug = !({ toString: null }).propertyIsEnumerable('toString'),\n          dontEnums = [\n            'toString',\n            'toLocaleString',\n            'valueOf',\n            'hasOwnProperty',\n            'isPrototypeOf',\n            'propertyIsEnumerable',\n            'constructor'\n          ],\n          dontEnumsLength = dontEnums.length;\n\n      return function(obj) {\n        if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {\n          throw new TypeError('Object.keys called on non-object');\n        }\n\n        let result = [];\n        let prop = undefined;\n        let i = undefined;\n\n        for (prop in obj) {\n          if (hasOwnProperty.call(obj, prop)) {\n            result.push(prop);\n          }\n        }\n\n        if (hasDontEnumBug) {\n          for (i = 0; i < dontEnumsLength; i++) {\n            if (hasOwnProperty.call(obj, dontEnums[i])) {\n              result.push(dontEnums[i]);\n            }\n          }\n        }\n        return result;\n      };\n    }());\n  }\n\n  $.extend = (obj, prop) => {\n    if (!prop) {\n      prop = obj;\n      obj = chocolatechipjs;\n    }\n    Object.keys(prop).forEach(p => {\n      if (prop.hasOwnProperty(p)) {\n        Object.defineProperty(obj, p, {\n          value: prop[p],\n          writable: true,\n          enumerable: false,\n          configurable: true\n        });\n      }\n    });\n  }\n\n\n  /**\n   * ChocolateChip-UI collection extend method.\n   */\n  $.fn = {\n    extend: object => $.extend(DOMStack.prototype, object)\n  };\n\n  /**\n   * ChocolateChip-UI utility methods.\n   */\n  $.extend({\n    lib: \"ChocolateChipJS\",\n\n    version: 'VERSION_NUMBER',\n\n    noop: () => {},\n\n    uuid: () => {\n      let d = Date.now();\n      d += performance.now();\n      const charset = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".split('');\n      const randomLetter = charset[Math.floor(Math.random() * charset.length)];\n      return randomLetter + 'xxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        let r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n      });\n    },\n\n    html: HTMLString => {\n      let ret = new DOMStack();\n      let temp = undefined;\n\n      const wrapperMap = {\n        option: [1, \"<select multiple='multiple'>\", \"</select>\"],\n        legend: [1, \"<fieldset>\", \"</fieldset>\"],\n        area: [1, \"<map>\", \"</map>\"],\n        param: [1, \"<object>\", \"</object>\"],\n        thead: [1, \"<table>\", \"</table>\"],\n        tr: [2, \"<table><tbody>\", \"</tbody></table>\"],\n        col: [2, \"<table><tbody></tbody><colgroup>\", \"</colgroup></table>\"],\n        td: [3, \"<table><tbody><tr>\", \"</tr></tbody></table>\"],\n        __default: [1, \"<div>\", \"</div>\"]\n      };\n\n      wrapperMap.optgroup = wrapperMap.option;\n      wrapperMap.tbody = wrapperMap.tfoot = wrapperMap.colgroup = wrapperMap.caption = wrapperMap.thead;\n      wrapperMap.th = wrapperMap.td;\n\n      let element = document.createElement('div');\n      const match = /<\\s*\\w.*?>/g.exec(HTMLString);\n\n      if (match !== null) {\n        const tag = match[0].replace(/</g, '').replace(/>/g, '');\n        const map = wrapperMap[tag] || wrapperMap.__default;\n        HTMLString = map[1] + HTMLString + map[2];\n\n        element.innerHTML = HTMLString;\n        element = element.lastChild;\n\n        temp = Array.prototype.slice.apply(element.childNodes);\n        temp.forEach(ctx => {\n          if (ctx.nodeType === 1) {\n            ret.push(ctx);\n          } else if (ctx.nodeType === 3 && ctx.nodeValue.trim().length !== 0) {\n            ret.push(ctx);\n          }\n        });\n\n      } else {\n        element.innerHTML = HTMLString;\n        element = element.lastChild;\n        ret.push(element);\n      }\n\n      return ret;\n    },\n\n    /**\n     * Insert a script tag into the document and\n     * fire a callback when it is loaded: \n     */\n    require: (src, callback, ctx) => {\n      let onerror = \"onerror\";\n      const insertScript = function(script) {\n        let firstScript = document.getElementsByTagName(\"script\")[0];\n        firstScript.parentNode.insertBefore(script, firstScript);\n      };\n      let script = document.createElement(\"script\");\n      let done = false;\n      let err = undefined;\n      let loadScript = undefined;\n      const handleError = function() {\n        err = new Error(src || \"EMPTY\");\n        loadScript();\n      };\n      const setupLoad = function(fn) {\n        return function() {\n          /**\n           * Only call once. \n           */\n          if (done) {\n            return;\n          }\n          done = true;\n          fn();\n          if (callback) {\n            callback.call(ctx, err);\n          }\n        };\n      };\n\n      loadScript = setupLoad(function() {\n        script.onload = script[onerror] = null;\n      });\n\n      script[onerror] = handleError;\n      script.onload = loadScript;\n      script.async = true;\n      script.charset = \"utf-8\";\n      script.src = src;\n      insertScript(script);\n    },\n\n    delay: milliseconds => {\n      return new Promise(function (resolve, reject) {\n        setTimeout(resolve, milliseconds);\n      });\n    },\n\n    each: (obj, callback) => {\n      let value = undefined;\n      let key = undefined;\n      let i = 0;\n      let length = undefined;\n\n      if (Array.isArray(obj)) {\n        length = obj.length;\n        for (; i < length; i++) {\n          value = callback.call(obj[i], i, obj[i]);\n          if (value === false) {\n            break;\n          }\n        }\n        return obj;\n      } else if (obj.objectType && obj.objectType === 'domstack') {\n        obj.forEach((item, idx) => callback.call(item, idx, item));\n        return obj;\n      } else if ($.type(obj) === 'object' && Object.keys(obj).length) {\n        for (key in obj) {\n          if (callback.call(obj[key], key, obj[key]) === false) return obj;\n        }\n      }\n    },\n\n    /**\n     * Eliminate duplicates from array: \n     */\n    unique: array => {\n      if (!array || !Array.isArray(array)) return;\n      const len = array.length;\n      let obj = {};\n      let ret = [];\n      for (let i = 0; i < len; i++) {\n        const arrayItem = JSON.stringify(array[i]);\n        const arrayItemValue = array[i];\n        if (obj[arrayItem] === undefined) {\n          ret.push(arrayItemValue);\n          obj[arrayItem] = 1;\n        } else {\n          obj[arrayItem]++;\n        }\n      }\n      return ret;\n    },\n\n    /** \n     * Replace target element with new element:\n     */\n    replace: (newElement, targetElement) => {\n      if (!newElement || !targetElement) return;\n      let newEl = undefined;\n      let targEl = undefined;\n      if (typeof newElement === 'string') {\n        newEl = $(newElement)[0];\n      } else if (newElement.objectType && newElement.objectType === 'domstack') {\n        newEl = newElement[0];\n      } else if (newElement.nodeType === 1) {\n        newEl = newElement;\n      }\n      if (typeof targetElement === 'string') {\n        targEl = $(targetElement)[0];\n      } else if (targetElement.objectType && targetElement.objectType === 'domstack') {\n        targEl = targetElement[0];\n      } else if (targetElement.nodeType === 1) {\n        targEl = targetElement;\n      }\n      /**\n       * Remove target's bound events:\n       */\n      $(targEl).off();\n      targEl.parentNode.replaceChild(newEl, targEl);\n    },\n\n    /**\n     * Extra boolean types:\n     */\n    isEmptyObject: obj =>  Object.keys(obj).length === 0,\n\n    isInteger: number => (typeof number === 'number' && number % 1 === 0),\n\n    isFloat: number => (typeof number === 'number' && number % 1 !== 0),\n\n    encode: value => encodeURIComponent(value),\n\n    /**\n     * Escape HTML for view templates:\n     */\n    escapeHTML: data => {\n      const tagsToReplace = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '(': '%28',\n        ')': '%29'\n      };\n      let str = JSON.stringify(data);\n\n      const replaceTag = (tag) => tagsToReplace[tag] || tag;\n\n      const safe_tags_replace = (str) => str.replace(/[&<>\\(\\)]/g, replaceTag);\n\n      str = safe_tags_replace(str);\n      return JSON.parse(str);\n    },\n\n    /** \n     * Concat arguments into a string:\n     */\n    concat: (...args) => {\n      if (Array.isArray(args)) {\n        if (Array.isArray(args[0])) {\n          return args[0].join('');\n        } else {\n          return args.join('');\n        }\n      } else {\n        return Array.prototype.slice(args).join('');\n      }\n      Array.isArray(args) ? args[0].split('') : Array.prototype.slice(args).join('')\n    },\n\n    /**\n     * Mixin one object into another:\n     */\n    mixin: (sourceObj, targetObj) => {\n      for (let key in sourceObj) {\n        /* Do not replace property if it exists: */\n        if (!(key in targetObj)) {\n            targetObj[key] = sourceObj[key];\n        }\n      }\n      return targetObj;\n    },\n\n    /**\n     * Compare one value with another, one object with another, one array with another, etc.\n     */\n    compare: (value1, value2) => {\n\n      function compareNativeSubtypes(value1, value2) {\n        /**\n         * e.g. Function, RegExp, Date \n         */\n        return value1.toString() === value2.toString();\n      }\n\n      function compareArrays(value1, value2) {\n        const len = value1.length;\n        if (len != value2.length) {\n          return false;\n        }\n        let alike = true;\n        for (let i = 0; i < len; i++) {\n          if (!$.compare(value1[i], value2[i])) {\n            alike = false;\n            break;\n          }\n        }\n        return alike;\n      }\n\n      function compareObjects(value1, value2) {\n        const keys1 = Object.keys(value1).sort();\n        const keys2 = Object.keys(value2).sort();\n        const len = keys1.length;\n        if (len != keys2.length) {\n          return false;\n        }\n        for (let i = 0; i < len; i++) {\n          let key1 = keys1[i];\n          let key2 = keys2[i];\n          if (!((key1 == key2) && ($.compare(value1[key1], value2[key2])))) {\n            return false;\n          }\n        }\n        return true;\n      }\n      if (value1 === value2) {\n        return true;\n      }\n      if (typeof value1 != typeof value2) {\n        return false;\n      }\n      if (value1 !== Object(value1)) {\n        /**\n         * Non equal primitives, so stop:\n         */\n        return false;\n      }\n      if (!value1) {\n        return false;\n      }\n      if (Array.isArray(value1)) {\n        return compareArrays(value1, value2);\n      }\n      if (({}).toString.call(value1) == '[object Object]') {\n        return compareObjects(value1, value2);\n      } else {\n        return compareNativeSubtypes(value1, value2);\n      }\n    },\n\n    /** \n     * Chunk an array into pieces based on itemsPerChunk.\n     * You can use this to paginate an array of data.\n     */\n    paginate: (data, itemsPerChunk) => {\n      let ret = [];\n      let pages = Math.floor(data.length / itemsPerChunk);\n      if (data.length % pages) pages++;\n      let temp = 0;\n      for (let i = 0; i < pages; i++) {\n        if (temp === data.length) break;\n        const thing = data.slice(temp, itemsPerChunk + temp);\n        ret.push(thing);\n        temp += itemsPerChunk;\n      }\n      return ret;\n    },\n\n    /**\n     * Recursively flatten an array with nested arrays.\n     */\n    flatten: array => {\n      const flat = Array.prototype.concat(array);\n      for (let i = 0; i < flat.length; i++) {  \n        if (Array.isArray(flat[i])) {\n          flat.splice(i, 1, ...flat[i--]);  \n        }\n      }\n      return flat;\n    },\n\n    /**\n     * Fires an event once during provided wait period. Options are: {leading: true/false, trailing: true/false}.\n     * By default leading is true, meaning that the first event input will fire. Setting leading to false will disable this.\n     * By default trailing is true. Set this to false to disable it.\n     */\n    throttle: (func, wait, options) => {\n      let context, args, result;\n      let timeout = null;\n      let previous = 0;\n      if (!options) options = {};\n      const later = function() {\n        previous = options.leading === false ? 0 : new Date().getTime();\n        timeout = null;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      };\n      return function() {\n        const now = new Date().getTime();\n        if (!previous && options.leading === false) previous = now;\n        let remaining = wait - (now - previous);\n        context = this;\n        args = arguments;\n        if (remaining <= 0 || remaining > wait) {\n          if (timeout) {\n            clearTimeout(timeout);\n            timeout = null;\n          }\n          previous = now;\n          result = func.apply(context, args);\n          if (!timeout) context = args = null;\n        } else if (!timeout && options.trailing !== false) {\n          timeout = setTimeout(later, remaining);\n        }\n        return result;\n      }\n    },\n\n    /**\n     * Fires and event once after the designated wait time, regardless of how many other events occurred.\n     * In the case of an input, this will start with the first keypress. After the last keypress and the wait time, the event will fire.\n     * You can make the event fire after the time by passing a third optional truthy argument.\n     */\n    debounce: (func, wait, immediate) => {\n      let timeout, args, context, timestamp, result;\n\n      const later = function() {\n        const last = new Date().getTime() - timestamp;\n\n        if (last < wait && last >= 0) {\n          timeout = setTimeout(later, wait - last);\n        } else {\n          timeout = null;\n          if (!immediate) {\n            result = func.apply(context, args);\n            if (!timeout) context = args = null;\n          }\n        }\n      };\n\n      return function() {\n        context = this;\n        args = arguments;\n        timestamp = new Date().getTime();\n        const callNow = immediate && !timeout;\n        if (!timeout) timeout = setTimeout(later, wait);\n        if (callNow) {\n          result = func.apply(context, args);\n          context = args = null;\n        }\n\n        return result;\n      };\n    },\n\n    /**\n     * Execute a function only once.\n     */\n    once: func => {\n      let times = 2;\n      let memo;\n      return function() {\n        if (--times > 0) {\n          if ($.type(func) === 'function') {\n            memo = func.apply(this, arguments);\n          }\n        }\n        if (times <= 1) func = null;\n        return memo;\n      };\n    },\n\n    /**\n     * Execute a function only upto x times.\n     * This takes two arguments: the times upto when execution can happen and the callback to execute.\n     */\n\n    before: (times, func) => {\n      let memo;\n      return function() {\n        if (--times > 0) {\n          if ($.type(func) === 'function') {\n            memo = func.apply(this, arguments);\n          }\n        }\n        if (times <= 1) func = null;\n        return memo;\n      }\n    },\n\n    /**\n     * Execute a function only after x times.\n     * This takes two arguments: the times or attempts before execution and a callback to execute.\n     */\n\n    after: (times, func) => {\n      return function() {\n        if (--times < 1) {\n          return func.apply(this, arguments);\n        }\n      }\n    }\n    \n  });\n\n  \n  \n  /** \n   * Pubsub methods:\n   */\n  const topics = {};\n  const hasProp = topics.hasOwnProperty;\n  $.extend({\n    /**\n     * Set up subscriber: \n     */\n    on: (topic, handler) => {\n      /**\n       * Create the topic's object: \n       */\n      if (!hasProp.call(topics, topic)) topics[topic] = [];\n\n      /**\n       * Add subscriber: \n       */\n      let index = topics[topic].push(handler) -1;\n\n      /**\n       * Return method to delete subscriber: \n       */\n      return {\n        off: () => delete topics[topic][index],\n\n        /**\n         * Return method to run this subscriber - `mySubscriber.run('foo', myDataHere)` \n         */\n        run: (data) => {\n          if (topics[topic]) topics[topic][index](data)\n        },\n\n        getTopic: () => topic\n      };\n    },\n\n    /**\n     * Send event and data to subscribers: \n     */\n    send: (topic, payload) => {\n      if (!hasProp.call(topics, topic)) return;\n\n      /**\n       * Loop through topics and execute: \n       */\n      topics[topic].forEach(item => {\n        item(payload != undefined ? payload : {});\n      });\n    },\n\n    /**\n     * Get all subscribed topics: \n     */\n    getTopics: () => topics,\n\n    /**\n     * Remove a topic and any registered subscribers: \n     */\n    removeTopic: topic => delete topics[topic],\n\n    production: false,\n\n    /**\n     * Suppress ChocolateChip-UI's error messages:\n     */\n    supressErrorMessages: false\n    \n  })\n\n  /**\n   * ChocolateChip-UI DOM methods.\n   */\n  $.fn.extend({\n\n    find(selector, context) {\n      let ret = new DOMStack();\n      if (!this.array.length)\n        return ret;\n      if (context) {\n        $(context).forEach(() => {\n          Array.prototype.slice.apply(context.querySelectorAll(selector)).forEach(node=> {\n            return ret.push(node);\n          });\n        });\n      } else {\n        this.forEach(ctx => {\n          if (ctx && ctx.children && ctx.children.length) {\n            Array.prototype.slice.apply(ctx.querySelectorAll(selector)).forEach(node => {\n              return ret.push(node);\n            });\n          }\n        });\n      }\n      return ret;\n    },\n\n    is(arg) {\n      let ret = false;\n      if (!this.array.length || !arg) return;\n      if (!this.array.length) return;\n      const that = this;\n      const __is = (node, arg) => {\n        if (typeof arg === 'string') {\n          let nodes = undefined;\n          if (node.parentNode) nodes = node.parentNode.querySelectorAll(arg);\n          let elements = undefined;\n          if (nodes && nodes.length) {\n            elements = Array.prototype.slice.apply(node.parentNode.querySelectorAll(arg));\n          }\n          if (elements && elements.length) {\n            if (elements.indexOf(node) >= 0) {\n              ret = true;\n            }\n          }\n        } else if (typeof arg === 'function') {\n          if (arg.call(that)) {\n            ret = true;\n          }\n        } else if (arg && arg.objectType && arg.objectType === 'domstack') {\n          if (node === arg[0]) {\n            ret = true;\n          }\n        } else if (arg && arg.length) {\n          if (this.slice.apply(arg).indexOf(node) !== -1) {\n            ret = true;\n          }\n        } else if (arg.nodeType === 1) {\n          if (node === arg) {\n            ret = true;\n          }\n        } else {\n          return;\n        }\n        return ret;\n      };\n      this.forEach(item => {\n        if (__is(item, arg)) {\n          ret = true;\n        }\n      });\n      return ret;\n    },\n\n    not(arg) {\n      let ret = new DOMStack();\n      if (!this.array.length || !arg) return new DOMStack();\n      if (!this.array.length) return new DOMStack();\n      const that = this\n      const __nots = (node, arg) => {\n        let result = [];\n        if (typeof arg === 'string') {\n          let nodes = undefined;\n          if (node.parentNode) nodes = node.parentNode.querySelectorAll(arg);\n          let elements = undefined;\n          if (nodes && nodes.length) {\n            elements = Array.prototype.slice.apply(node.parentNode.querySelectorAll(arg));\n          }\n          if (elements && elements.length) {\n            if (elements.indexOf(node) == -1) {\n              result.push(node);\n            }\n          } else {\n            result.push(node);\n          }\n        } else if (arg.nodeType === 1) {\n          if (node === arg) {\n            result.push(node);\n          }\n        } else if (Array.isArray(arg) && arg.length) {\n          if (Array.prototype.slice.apply(arg).indexOf(node) !== -1) {\n            result.push(node);\n          }\n        } else if (arg.objectType && arg.objectType === 'domstack') {\n          if (node === arg[0]) {\n            result.push(node);\n          }\n        } else if (typeof arg === 'function') {\n          if (arg.call(that)) {\n            result.push(node);\n          }\n        } else {\n          return new DOMStack();\n        }\n        return result;\n      };\n      var temp = [];\n      this.forEach(item => {\n        temp.push(__nots(item, arg));\n      });\n\n      temp = $.flatten(temp);\n      ret.concat(temp)\n      return ret;\n    },\n\n    has(arg) {\n      if (!this.array.length) return new DOMStack();\n      let ret = new DOMStack();\n      const self = this;\n      const children = this.children();\n\n      const __has = (node, arg) => {\n        if (typeof arg === 'string') {\n          if (node.querySelector(arg)) {\n            return true;\n          }\n        } else if (arg && arg.nodeType === 1) {\n          if (Array.prototype.slice.apply(self.children).indexOf(arg)) {\n            return true;\n          } \n        } else if (arg && arg.objectType === 'domstack') {\n          const children = this.children()\n          if (children.array.indexOf(arg[0]) != -1) {\n            return true;\n          }\n        }\n        return false;\n      };\n\n      this.forEach(element => {\n        if (__has(element, arg)) {\n          ret.push(element);\n        }\n      });\n      return ret;\n    },\n\n    prev(selector) {    \n      if (!this.array.length) return new DOMStack();\n      let ret = new DOMStack();\n      let children = undefined;\n      let previousElement = this[0].previousElementSibling;\n      if (selector && typeof selector === 'string') {\n        children = this.siblings(selector);\n        var selectorCheck = this.parent().children(selector);\n        selectorCheck.forEach(function(element) {\n          if (element === previousElement) {\n            ret.push(element);\n          }\n        })\n      } else {\n        ret.push(this[0].previousElementSibling);\n      }\n      return ret;\n    },\n\n    prevAll(selector) {\n      if (!this.array.length) return new DOMStack();\n      let ret = new DOMStack();\n      let __siblings = undefined;\n      let __parent = undefined;\n      const __self = this[0];\n      let __sibs = Array.prototype.slice.apply(this[0].parentNode.children);\n      let pos = __sibs.indexOf(__self);\n      if (selector && typeof selector === 'string') {\n        __parent = this.array[0].parentNode;\n        __siblings = $(__parent).find(selector);\n        __siblings.forEach(function(el) {\n          if(__sibs.indexOf(el) < pos) {\n            ret.push(el)\n          }\n        })\n      } else {\n        __sibs.splice(pos);\n        ret.concat(__sibs);\n      }\n      return ret;\n    },\n\n    next(selector) {\n      if (!this.array.length) return new DOMStack();\n      let ret = new DOMStack();\n      let children = undefined;\n      let nextElement = this[0].nextElementSibling;\n      if (selector && typeof selector === 'string') {\n        children = this.siblings(selector);\n        children.forEach(element => {\n          if (nextElement === element) {\n            ret.push(element);\n          }\n        });\n      } else {\n        ret.push(this[0].nextElementSibling);\n      }\n      return ret;\n    },\n\n    nextAll(selector) {\n      if (!this.array.length) return new DOMStack();\n      let ret = new DOMStack();\n      let __siblings = undefined;\n      let __parent = undefined;\n      const __self = this[0];\n      let __sibs = Array.prototype.slice.apply(this[0].parentNode.children);\n      let pos = __sibs.indexOf(__self);\n      __sibs.splice(0, pos + 1);\n      if (selector && typeof selector === 'string') {\n        __parent = this.array[0].parentNode;\n        __siblings = $(__parent).find(selector);\n        __sibs.splice(0, __sibs.indexOf(this.array[0]));\n        __sibs.forEach(element => {\n          if (__siblings.array.indexOf(element) > -1) {\n            ret.push(element);\n          }\n        });\n      } else {\n        __siblings = Array.prototype.slice.apply(this[0].parentNode.children);\n        pos = __siblings.indexOf(__self);\n        __siblings.splice(0, pos + 1);\n        ret.concat(__siblings);\n      }\n      return ret;\n    },\n\n    first() {\n      if (!this.array.length) return new DOMStack();\n      return this.eq(0);\n\n    },\n\n    last() {\n      if (!this.array.length) return new DOMStack();\n      return this.eq(-1);\n    },\n\n    index(element) {\n      if (!this.array.length) return undefined;\n      if (!element) {\n        if (this.length >= 0) {\n          return 1;\n        } else if (this.length == 0) {\n          return -1;\n        } else {\n          return -1;\n        }\n      } else {\n        if (element && element.objectType && element.objectType === 'domstack') {\n          return this.indexOf(element.getData()[0]);\n        } else if (element.nodeType === 1) {\n          return this.indexOf(element);\n        } else {\n          return this.indexOf(element);\n        }\n      }\n    },\n\n    children(selector) {\n      if (!this.array.length) return new DOMStack();\n      let ret = new DOMStack();\n      if (!selector) {\n        this.forEach(node => {\n          Array.prototype.slice.apply(node.children).forEach(ctx => ret.push(ctx));\n        });\n        ret[0] = ret.array[0];\n      } else {\n        this.forEach(node => {\n          Array.prototype.slice.apply(node.children).forEach(ctx => {\n            if ($(ctx).is(selector)) {\n              ret.push(ctx);\n            }\n          });\n        });\n        ret[0] = ret.array[0];\n      }\n      return ret;\n    },\n\n    siblings(selector) {\n      if (!this.array.length)\n        return new DOMStack();\n      let __siblings = undefined;\n      let ret = new DOMStack();\n      const $this = this;\n      let parent = undefined;\n      let children = Array.prototype.slice.apply($this[0].parentNode.children);\n\n      /**\n       * Remove this from siblings:\n       */\n      if (selector && typeof selector === 'string') {\n        parent = this.array[0].parentNode;\n        __siblings = $(parent).find(selector);\n        const newPos = __siblings.array.indexOf($this[0]);\n        __siblings.array.splice(newPos, 1);\n        ret.concat(__siblings);\n      } else {\n        const pos = children.indexOf($this[0]);\n        children.splice(pos, 1);\n        ret.concat(children);\n      }\n      return ret;\n    },\n\n    parent(selector) {\n      if (!this.array.length) return new DOMStack();\n      let ret = new DOMStack();\n      var parents = undefined;\n      var self = this[0];\n      var result = [];\n      if (selector) {\n        parents = Array.prototype.slice.apply(self.parentNode.parentNode.querySelectorAll(selector));\n        parents.forEach(function(el) {\n          if (el === self.parentNode) {\n            result.push(el);\n          }\n        })\n        result.unique();\n        ret.concat(result);\n      } else {\n        this.forEach(ctx => {\n          return ret.push(ctx.parentNode);\n        });\n      }\n      ret.unique();\n      if (ret == undefined) {\n        return new DOMStack();\n      } else {\n        return ret;\n      }\n    },\n\n    closest(selector) {\n      if (!this.array.length)\n        return new DOMStack();\n      let ret = new DOMStack();\n      if (typeof selector === 'undefined') {\n        return new DOMStack();\n      }\n      let position = null;\n      let p = undefined;\n      if (this[0]) {\n        p = this[0].parentNode;\n      }\n      if (!p) {\n        return new DOMStack();\n      }\n      if (typeof selector === 'string') {\n        selector.trim();\n        if (p && $(p).is(selector)) {\n          ret.push(p);\n        } else {\n          ret.push($(p).closest(selector).array[0]);\n        }\n      }\n      if (ret[0] === undefined) {\n        ret.splice(0);\n      }\n      return ret;\n    },\n\n    css(property, value) {\n      if (!this.array.length) return new DOMStack();\n      const pixelRE = /top|bottom|left|right|margin|padding/img;\n      let postFix = '';\n      let ret = new DOMStack();\n      const testForPixelSupport = (value, property) => {\n        if ($.type(value) === 'number' && property.match(pixelRE)) {\n          postFix = 'px';\n        }\n      };\n      if (!property) return new DOMStack();\n      if (!value && $.type(property) === 'object') {\n        this.forEach(node => {\n          for (let key in property) {\n            if (property.hasOwnProperty(key)) {\n              testForPixelSupport(property[key], key);\n              node.style[$.camelize(key)] = property[key] + postFix;\n            }\n          }\n          ret.push(node);\n        });\n      } else if (!value && typeof property === 'string') {\n        if (!this.array.length)\n          return;\n        return document.defaultView.getComputedStyle(this.eq(0).array[0], null).getPropertyValue(property.toLowerCase());\n      } else if (!!value) {\n        this.forEach(node => {\n          testForPixelSupport(value, property);\n          node.style[$.camelize(property)] = value + postFix;\n          ret.push(node);\n        });\n      }\n      return ret;\n    },\n\n    width(amount) {\n      if (!this.array.length) return;\n      if (amount) {\n        if(/px]+|[pt]+|[em]+|[en]+|[%]+|[ex]+|[in]+|[cm]+|[mm]+|[ch]+|[in]+|[rem]+|[vw]+|[vh]+$/.test(amount)) {\n          this.forEach(function(element) {\n            element.style.width = amount;\n          });\n        } else {\n          this.forEach(function(element) {\n            element.style.width = amount + 'px';\n          });\n        }\n      } else {\n        const styles = window.getComputedStyle(this[0]);\n        return parseInt(styles.width, 10);\n      }\n    },\n\n    height(amount) {\n      if (!this.array.length) return;\n      if (amount) {\n        if(/px]+|[pt]+|[em]+|[en]+|[%]+|[ex]+|[in]+|[cm]+|[mm]+|[ch]+|[in]+|[rem]+|[vw]+|[vh]+$/.test(amount)) {\n          this.forEach(function(element) {\n            element.style.height = amount;\n          });\n        } else {\n          this.forEach(function(element) {\n            element.style.height = amount + 'px';\n          });\n        }\n      } else {\n        const styles = window.getComputedStyle(this[0]);\n        return parseInt(styles.height, 10);\n      }\n    },\n\n    before(content) {\n      if (!this.array.length) {\n        return new DOMStack();\n      }\n      const __before = (node, content) => {\n        if (typeof content === 'string' || typeof content === 'number') {\n          content = $.html(content);\n        }\n        if (content && content.objectType && content.objectType === 'domstack') {\n          const len = content.size();\n          let i = 0;\n          while (i < len) {\n            node.parentNode.insertBefore(content.array[i], node);\n            i++;\n          }\n        } else if (content && content.nodeType === 1) {\n          node.parentNode.insertBefore(content, node);\n        }\n        return this;\n      };\n      this.forEach(node => {\n        return __before(node, content);\n      });\n      return this;\n    },\n\n    after(content) {\n      if (!this.array.length) return new DOMStack();\n      const __after = (node, content) => {\n        let parent = node.parentNode;\n        if (typeof content === 'string' || typeof content === 'number') {\n          content = $.html(content);\n        }\n        if (content && content.objectType && content.objectType === 'domstack') {\n          let i = 0,\n            len = content.size();\n          while (i < len) {\n            if (node === parent.lastChild) {\n              parent.appendChild(content.array[i]);\n            } else {\n              parent.insertBefore(content.array[i], node.nextSibling);\n            }\n            i++;\n          }\n        } else if (content && content.nodeType === 1) {\n          parent.appendChild(content);\n        }\n        return this;\n      };\n      this.forEach(node => {\n        return __after(node, content);\n      });\n      return this;\n    },\n\n    prepend(content) {\n      if (!this.array.length) return new DOMStack();\n\n      if (typeof content === 'string' || typeof content === 'number') {\n        this.forEach(element => {\n          element.insertAdjacentHTML('afterbegin', content);\n        });\n      } else if (content && content.objectType && content.objectType === 'domstack') {\n        this.forEach(element => {\n          content.forEach(node => {\n            element.insertBefore(node, element.firstChild);\n          });\n        });\n      } else if (content && content.nodeType === 1) {\n        this.forEach(element => {\n          element.insertBefore(content, element.firstChild);\n        });\n      }\n      return this;\n    },\n\n    append(content) {\n      if (!this.array.length) return new DOMStack();\n\n      if (typeof content === 'string' || typeof content === 'number') {\n        this.forEach(element => {\n          element.insertAdjacentHTML('beforeend', content);\n        });\n      } else if (content && content.objectType && content.objectType === 'domstack') {\n        this.forEach(element => {\n          content.forEach(node => {\n            element.insertBefore(node, null);\n          });\n        });\n\n      } else if (content && content.nodeType === 1) {\n        this.forEach(element => {\n          element.insertBefore(content, null);\n        });\n      }\n      return this;\n    },\n\n    prependTo(selector) {\n      if (!this.array.length) return new DOMStack();\n      this.reverse();\n      this.forEach(item => {\n        return $(selector).prepend(item);\n      });\n      return this;\n    },\n\n    appendTo(selector) {\n      if (!this.array.length) return new DOMStack();\n      this.forEach(item => {\n        return $(selector).append(item);\n      });\n      return this;\n    },\n\n    clone(value) {\n      if (!this.array.length) return new DOMStack();\n      let ret = new DOMStack();\n      this.forEach(ctx => {\n        if (value === true || !value) {\n          ret.push(ctx.cloneNode(true));\n        } else {\n          ret.push(ctx.cloneNode(false));\n        }\n      });\n      return ret;\n    },\n\n    wrap(string) {\n      if (!this.array.length || !string) return new DOMStack();\n      let tempNode = undefined;\n      let empNode = undefined;\n      let whichClone = undefined;\n      this.forEach(ctx => {\n        tempNode = $.html(string);\n        empNode = tempNode.array[0];\n        whichClone = $(ctx).clone(true);\n        tempNode.append(whichClone);\n        $(ctx).before(tempNode);\n        $(ctx).remove();\n      });\n    },\n\n    unwrap() {\n      if (!this.array.length) return new DOMStack();\n      let parentNode = null;\n      this.forEach(node => {\n        if (node.parentNode === parentNode) {\n          return;\n        }\n        parentNode = node.parentNode;\n        if (node.parentNode.nodeName === 'BODY') {\n          return false;\n        }\n        $.replace(node, node.parentNode);\n      });\n    },\n\n    offset() {\n      if (!this.array.length)\n        return;\n      const offset = this[0].getBoundingClientRect();\n      return {\n        top: Math.round(offset.top),\n        left: Math.round(offset.left),\n        bottom: Math.round(offset.bottom),\n        right: Math.round(offset.right)\n      };\n    },\n\n    position() {\n      const parent = this[0].parentNode;\n      const pos = this[0].getBoundingClientRect();\n      const parentPos = parent.getBoundingClientRect();\n      let obj = {\n        top: pos.top - parentPos.top,\n        left: pos.left - parentPos.left\n      };\n      return obj;\n    },\n\n    empty() {\n      if (!this.array.length) return new DOMStack();\n      let ret = new DOMStack();\n      this.forEach(ctx => {\n        $(ctx).children().off();\n        ctx.textContent = '';\n        ret.push(ctx);\n      });\n      return ret;\n    },\n\n    html(content) {\n      if (!this.array.length) return new DOMStack();\n      if (content === '') {\n        this.forEach(node => {\n          node.innerHTML = '';\n        });\n        return this;\n      } else if (content) {\n        this.forEach(node => {\n          node.innerHTML = content;\n        });\n        return this;\n      } else if (!content) {\n        return this.array[0].innerHTML.trim();\n      }\n    },\n\n    text(string) {\n      let ret = '';\n      if (!this.array.length) return new DOMStack();\n      if (!!string || string === 0) {\n        this.forEach(element => {\n          element.innerText = string;\n        });\n        return this;\n      } else {\n        this.forEach(element => {\n          ret += element.innerText;\n          ret.trim();\n        });\n        return ret;\n      }\n    },\n\n    replaceWith(content) {\n      if (content && content.nodeType && content.nodeType === 1) {\n        $(content).off();\n      } else if (content && content.objectType && content.objectType === 'domstack') {\n        content.off();\n      }\n      this.forEach(node => {\n        $(node).off();\n        if (typeof content === 'string') {\n          $.replace($(content), node);\n        } else {\n          $.replace($(content), node);\n        }\n      });\n    },\n\n    remove() {\n      if (!this.array.length) return new DOMStack();\n      this.forEach(node => {\n        $(node).off();\n        if (node.parentNode) node.parentNode.removeChild(node);\n      });\n    },\n\n    addClass(className) {\n      if (!this.array.length) return new DOMStack();\n      if (typeof className !== \"string\")\n        return;\n      let ret = new DOMStack();\n      let classes = undefined;\n      this.forEach(node => {\n        if (/\\s/.test(className)) {\n          classes = className.split(' ');\n          classes.forEach(name => {\n            node.classList.add(name);\n          });\n        } else {\n          node.classList.add(className);\n        }\n        ret.push(node);\n      });\n      return ret;\n    },\n\n    hasClass(className) {\n      if (!this.array.length) return new DOMStack();\n      let temp = false;\n      this.forEach(element => {\n        if (element.classList.contains(className)) {\n          temp = true;\n        }\n      });\n      return temp;\n    },\n\n    removeClass(className) {\n      if (!this.array.length) return new DOMStack();\n      let ret = new DOMStack();\n      let classes = undefined;\n      this.forEach(node => {\n        if (!node)\n          return;\n        if (/\\s/.test(className)) {\n          classes = className.split(' ');\n          classes.forEach(name => {\n            node.classList.remove(name);\n          });\n        } else {\n          node.classList.remove(className);\n        }\n        if (node.getAttribute('class') === '') {\n          node.removeAttribute('class');\n        }\n        ret.push(node);\n      });\n      return ret;\n    },\n\n    toggleClass(className) {\n      if (!this.array.length) return new DOMStack();\n      let ret = new DOMStack();\n      this.forEach(node => {\n        node.classList.toggle(className);\n        ret.push(node);\n      });\n      return ret;\n    },\n\n    attr(attribute, value) {\n      if (!this.array.length) return new DOMStack();\n      let ret = new DOMStack();\n      const __attr = (node, attribute, value) => {\n        if (value === undefined) {\n          return node.getAttribute(attribute);\n        } else {\n          return node.setAttribute(attribute, value);\n        }\n      };\n      if (value === undefined) {\n        if (this[0].hasAttribute(attribute)) {\n          return this[0].getAttribute(attribute);\n        } else {\n          return '';\n        }\n      } else {\n        this.forEach(node => {\n          __attr(node, attribute, value);\n          ret.push(node);\n        });\n      }\n      if (ret.length) {\n        return ret;\n      }\n    },\n\n    removeAttr(attribute) {\n      if (!this.array.length) return new DOMStack();\n      let ret = new DOMStack();\n      this.forEach(node => {\n        if (!!node.hasAttribute(attribute)) {\n          node.removeAttribute(attribute);\n          ret.push(node);\n        }\n      });\n      return ret;\n    },\n\n    prop(property, value) {\n      if (!this.array.length) return new DOMStack();\n      if (value === false || !!value) {\n        this.forEach(element => {\n          element[property] = value;\n        });\n        return this;\n      } else if (this.array[0] && this.array[0][property]) {\n        return this.array[0][property];\n      }\n    },\n\n    removeProp(property) {\n      if (!this.array.length) return new DOMStack();\n      this[0][property] = false;\n      return [this[0]];\n    },\n\n    disable() {\n      if (!this.array.length) return new DOMStack();\n      this.forEach(node => {\n        node.classList.add('disabled');\n        node.disabled = true;\n        node.style.cursor = 'default';\n      });\n      return this;\n    },\n\n    enable() {\n      if (!this.array.length) return new DOMStack();\n      this.forEach(node => {\n        node.classList.remove('disabled');\n        node.removeAttribute('disabled');\n        node.style.cursor = 'auto';\n      });\n      return this;\n    },\n\n    val(value) {\n      if (!this.array.length) return new DOMStack();\n      if (value) {\n        this.array[0].value = value;\n        return this;\n      } else {\n        if (this.array[0] && this.array[0].value) {\n          return this.array[0].value;\n        }\n      }\n    },\n\n    hide() {\n      let display = this.css('display');\n      this.data('display_attr', display);\n      this.css('display', 'none');\n    },\n\n    show() {\n      let display = this.data('display_attr');\n      if (!display) return this;\n      if (display === 'none') {\n        display = 'block';\n      }\n      this.css('display', display);\n    },\n\n    unique() {\n      var ret = [];\n      var sort = this.array.sort();\n      sort.forEach(function(ctx, idx) {\n        if (ret.indexOf(ctx) === -1) {\n          ret.push(ctx);\n        }\n      });\n      ret.sort(function(a, b) {\n        return a - b;\n      });\n      this.array.splice(0);\n      var self = this.array;\n      ret.forEach(function(node) {\n        self.push(node)\n      });\n      this.length = this.array.length;\n    }\n  });\n\n  /**\n   * ChocolateChip-UI event methods.\n   */\n\n  (() => {\n    const EventErrorMessages = {\n      en: {\n        noEventOrCallback: \"ChocolateChip-UI Event Error: No event or callback was provided to bind to the element. These are the minimal requirements for this method to work. Please provide an event and callback.\",\n        noCallbackForEventBinding: \"ChocolateChip-UI Event Error: No callback was provided for the event you are trying to bind. A callback is required for the event binding to work.\",\n        noEventToTrigger: \"ChocolateChip-UI Event Error: No event was provided to trigger. As such we cannot do anything.\"\n      },\n      es: {\n        noEventOrCallback: \"Hubo Error de Evento ChocolateChip-UI: No se proporcion ningn evento ni funcin callback para asignar al elemento. Cuando menos se nesecitan stos para realizar esta operacin en el elemento. Por favor proporcione un evento y una callback.\",\n        noCallbackForEventBinding: \"Hubo Error de Evento ChocolateChip-UI: No se proporcion ninguna funcin callback para el evento que se quiere asignar al element. Se reqiere una callback para asignar el evento al elemento.\",\n        noEventToTrigger: \"Hubo Error de Evento ChocolateChip-UI: No se proporcion ningn evento que gatillar. Por eso no podemos hacer nada.\"\n      }\n    }\n\n    let errors = undefined;\n    if ($('html').attr('lang') == 'en') errors = EventErrorMessages.en;\n    if ($('html').attr('lang') == 'es') errors = EventErrorMessages.es;\n        \n    /**\n     * Define interface for handling events:\n     */\n    let EventStack = (array) => {\n      let __array = [];\n      if (array && Array.isArray(array)) {\n        let i = -1;\n        const len = array.length;\n        while (++i < len) {\n          __array[i] = array[i];\n        }\n      } else if (array) {\n        const arr = Array.prototype.slice.apply(arguments);\n        arr.forEach((ctx, idx) => {\n          __array[idx] = ctx;\n        });\n      }\n      return {\n\n        size: () => __array.length,\n\n        push: (data) => __array.push(data),\n\n        pop: () => __array.pop(),\n\n        eq: (index) => {\n          if (index < 0) {\n            return __array[__array.length + index];\n          } else {\n            return __array[index];\n          }\n        },\n\n        forEach: (callback) => {\n          let value = undefined;\n          let i = -1;\n          const len = __array.length;\n          while (++i < len) {\n            value = callback.call(__array[i], __array[i], i);\n            if (value === false) {\n              break;\n            }\n          }\n        },\n\n        shift: () => __array.shift.apply(__array, arguments),\n\n        unshift: () => __array.unshift.apply(__array, arguments),\n\n        splice: () => __array.splice.apply(__array, arguments),\n\n        indexOf: () => __array.indexOf.apply(__array, arguments),\n\n        getData: () => __array,\n\n        purge: () => __array = []\n      };\n    };\n\n    let ChuiEventCache = {\n      elements: {}\n    };\n\n    /* jshint, evil: false, validthis:true, unused:false, loopfunc: false,\n    smarttabs: true, nonew: false */\n\n    /**\n     * Private method to set events on ChuiEventCache\n     */\n    const bind = function(element, event, callback, capturePhase) {\n      if (!element.id) element.id = chocolatechipjs.uuid();\n      if (!ChuiEventCache.elements[element.id]) {\n        ChuiEventCache.elements[element.id] = EventStack(); // jshint ignore:line\n      }\n      ChuiEventCache.elements[element.id].push({\n        event: event,\n        callback: callback\n      });\n      element.addEventListener(event, callback, capturePhase);\n    };\n\n\n    /**\n     * Delete items from event stack:\n     */\n    const deleteFromEventStack = function(toDelete, evtStck) {\n      let len = toDelete.length;\n      for (let i = 0; len > i; len--) {\n        evtStck.splice(toDelete[len - 1], 1);\n      }\n    };\n    /**\n     * Private method to unbind events on ChuiEventCache\n     */\n    const unbind = function(element, event, callback, capturePhase) {\n\n      const eventStack = ChuiEventCache.elements[element.id];\n      if (!eventStack) return;\n      let deleteOrder = [];\n\n      if (!event) {\n        deleteOrder = [];\n        eventStack.forEach((evt, idx) => {\n          element.removeEventListener(evt.event, evt.callback, evt.capturePhase);\n          deleteOrder.push(idx);\n        });\n\n        deleteFromEventStack(deleteOrder, eventStack);\n\n      } else if (!!event && !callback) {\n        deleteOrder = [];\n        eventStack.forEach((evt, idx) => {\n          if (evt.event === event) {\n            element.removeEventListener(evt.event, evt.callback, evt.capturePhase);\n            deleteOrder.push(idx);\n          }\n        });\n\n        deleteFromEventStack(deleteOrder, eventStack);\n\n      } else if (callback) {\n        deleteOrder = [];\n        eventStack.forEach((evt, idx) => {\n          if (callback === evt.callback) {\n            element.removeEventListener(evt.event, evt.callback, evt.capturePhase);\n            deleteOrder.push(idx);\n          }\n        });\n        deleteFromEventStack(deleteOrder, eventStack);\n      }\n    };\n\n\n    /**\n     * Set delegated events on ChuiEventCache\n     */\n\n    const delegate = (element, selector, event, callback, capturePhase) => {\n      let delegateElement = $(element).array[0];\n      $(element).forEach(ctx => {\n        $(ctx).on(event, (e) => {\n          let target = e.target;\n          if (e.target.nodeType === 3) {\n            target = e.target.parentNode;\n          }\n          $(ctx).find(selector).forEach(delegateElement => {\n            if (delegateElement === target) {\n              callback.call(delegateElement, e);\n            } else {\n              try {\n                const ancestor = $(target).closest(selector);\n                if (delegateElement === ancestor.array[0]) {\n                  callback.call(delegateElement, e);\n                }\n              } catch (err) {}\n            }\n          });\n        }, capturePhase);\n      });\n    };\n\n\n    /**\n     * Method to remove delegated events from ChuiEventCache:\n     */\n    const undelegate = (element, selector, event, callback, capturePhase) => {\n\n      unbind($(element).array[0], event, callback, capturePhase);\n    };\n\n    $.fn.extend({\n      on: function(event, selector, callback, capturePhase) {\n        if (!event) {\n          if ($.supressErrorMessages) return;\n          console.error(errors.noEventOrCallback);\n          return;\n        }\n        if (!selector) {\n          if ($.supressErrorMessages) return;\n          console.error(errors.noCallbackForEventBinding);\n          return;\n        }\n\n        if (!selector && /Object/img.test(event.constructor.toString())) {\n          this.forEach(element => {\n            for (let key in event) {\n              if (event.hasOwnProperty(key)) {\n                $(element).on(key, event[key]);\n              }\n            }\n          });\n        }\n        let ret = [];\n        let events = undefined;\n        if (typeof event === 'string') {\n          event = event.trim();\n          if (/\\s/.test(event)) {\n            events = event.split(' ');\n            this.forEach(ctx => {\n              events.forEach(evt => {\n                if (typeof selector === 'function') {\n                  bind(ctx, evt, selector, callback);\n                  ret.push(ctx);\n                } else {\n                  delegate(ctx, selector, evt, callback, capturePhase);\n                }\n              });\n            });\n          }\n        }\n        this.forEach(ctx => {\n          if (typeof selector === 'function') {\n            return bind(ctx, event, selector, callback);\n          } else {\n            delegate(ctx, selector, event, callback, capturePhase);\n          }\n        });\n        return this;\n      },\n\n      off: function(event, selector, callback, capturePhase) {\n        let ret = new DOMStack();\n        if (!this.size()) return ret;\n\n        this.forEach(function(ctx) {\n          if (typeof event === 'undefined') {\n            ret.push(ctx);\n            unbind(ctx);\n            return ret;\n          } else if (typeof selector === 'function' || !selector) {\n            unbind(ctx, event, selector, callback, capturePhase);\n            return this;\n          } else {\n            undelegate(ctx, selector, event, callback, capturePhase);\n            return this;\n          }\n        });\n      },\n\n      trigger: function(event, data) {\n        if (!event) {\n          if ($.supressErrorMessages) return;\n          console.error(errors.noEventToTrigger);\n          return;\n        }\n        if (!this.size()) return new DOMStack();\n        this.forEach(ctx => {\n          if (document.createEvent) {\n            const evtObj = document.createEvent('Events');\n            evtObj.initEvent(event, true, false);\n            evtObj.data = data;\n            ctx.dispatchEvent(evtObj);\n          }\n        });\n      }\n    });\n  })();\n\n\n  window.$ = window.chocolatechipjs = chocolatechipjs;\n\n  return $;\n})();\n\n  /**\n   * ChocolateChip-UI event aliases.\n   */\n  $.extend({\n    eventStart: null,\n    eventEnd: null,\n    eventMove: null,\n    eventCancel: null,\n    /**\n     * Define min-length for gesture detection:\n     */\n    gestureLength: 30\n  });\n  $(() => {\n    /**\n     * Setup Event Variables:\n     */\n    if ('ontouchstart' in window && /mobile/img.test(navigator.userAgent)) {\n      $.eventStart = 'touchstart';\n      $.eventEnd = 'touchend';\n      $.eventMove = 'touchmove';\n      $.eventCancel = 'touchcancel';\n      /** \n       * Mouse events for desktop: \n       */\n    } else {\n      $.eventStart = 'mousedown';\n      $.eventEnd = 'click';\n      $.eventMove = 'mousemove';\n      $.eventCancel = 'mouseout';\n    }\n  });\n\n  /**\n   * ChocolateChip-UI gestures.\n   */\n  (function() {\n    \"use strict\";\n    let touch = {};\n    let touchTimeout = undefined;\n    let swipeTimeout = undefined;\n    let tapTimeout = undefined;\n    const longTapDelay = 750;\n    let singleTapDelay = 150;\n    $.gestureLength = 50;\n    if ($.isAndroid) singleTapDelay = 200;\n    let longTapTimeout = undefined;\n\n    function parentIfText(node) {\n      return 'tagName' in node ? node : node.parentNode;\n    }\n\n    function swipeDirection(x1, x2, y1, y2) {\n      return Math.abs(x1 - x2) >=\n        Math.abs(y1 - y2) ? (x1 - x2 > 0 ? 'left' : 'right') : (y1 - y2 > 0 ? 'up' : 'down');\n    }\n\n    function longTap() {\n      longTapTimeout = null;\n      if (touch.last) {\n        try {\n          if (touch && touch.el) {\n            touch.el.trigger('longtap');\n            touch = {};\n          }\n        } catch (err) {};\n      }\n    }\n\n    function cancelLongTap() {\n      if (longTapTimeout) clearTimeout(longTapTimeout);\n      longTapTimeout = null;\n    }\n\n    function cancelAll() {\n      if (touchTimeout) clearTimeout(touchTimeout);\n      if (tapTimeout) clearTimeout(tapTimeout);\n      if (swipeTimeout) clearTimeout(swipeTimeout);\n      if (longTapTimeout) clearTimeout(longTapTimeout);\n      touchTimeout = tapTimeout = swipeTimeout = longTapTimeout = null;\n      touch = {};\n    }\n\n    /** \n     * Execute this after DOM loads: \n     */\n    $(() => {\n      let now = undefined;\n      let delta = undefined;\n      const body = $('body');\n      let twoTouches = false;\n\n      /** \n       * Capture start of event: \n       */\n      body.on($.eventStart, function(e) {\n        now = Date.now();\n        delta = now - (touch.last || now);\n        if (e.originalEvent) e = e.originalEvent;\n\n        if ($.eventStart === 'mousedown') {\n          touch.el = $(parentIfText(e.target));\n          if (e.target.nodeName === 'ripple') {\n            touch.el = $(el.target.parentNode);\n          }\n          touchTimeout && clearTimeout(touchTimeout);\n          touch.x1 = e.pageX;\n          touch.y1 = e.pageY;\n          twoTouches = false;\n\n        /** \n         * Detect two or more finger gestures: \n         */\n        } else {\n          if (e.touches.length === 1) {\n            touch.el = $(parentIfText(e.touches[0].target));\n            touchTimeout && clearTimeout(touchTimeout);\n            touch.x1 = e.touches[0].pageX;\n            touch.y1 = e.touches[0].pageY;\n            if (e.targetTouches.length === 2) {\n              twoTouches = true;\n            } else {\n              twoTouches = false;\n            }\n          }\n        }\n        \n        if (delta > 0 && delta <= 250) {\n          touch.isDoubleTap = true;\n        }\n        touch.last = now;\n        longTapTimeout = setTimeout(longTap, longTapDelay);\n      });\n\n      /** \n       * Capture event move: \n       */\n      body.on($.eventMove, e => {\n        if (e.originalEvent) e = e.originalEvent;\n        cancelLongTap();\n        if ($.eventMove === 'mousemove') {\n          touch.x2 = e.pageX;\n          touch.y2 = e.pageY;\n        } else {\n          /** \n           * One finger gesture: \n           */\n          if (e.touches.length === 1) {\n            touch.x2 = e.touches[0].pageX;\n            touch.y2 = e.touches[0].pageY;\n          }\n        }\n      });\n\n      /** \n       * Capture event end: \n       */\n      body.on($.eventEnd, e => {\n\n        cancelLongTap();\n        if (!!touch.el) {\n          /** \n           * Swipe detection: \n           */\n          if ((touch.x2 && Math.abs(touch.x1 - touch.x2) > $.gestureLength) ||\n            (touch.y2 && Math.abs(touch.y1 - touch.y2) > $.gestureLength)) {\n            swipeTimeout = setTimeout(function() {\n              if (touch && touch.el) {\n                touch.el.trigger('swipe');\n                touch.el.trigger('swipe' + (swipeDirection(touch.x1, touch.x2, touch.y1, touch.y2)));\n                touch = {};\n              }\n            }, 0);\n\n          /** \n           * Normal tap: \n           */\n          } else if ('last' in touch) {\n            /** \n             * Delay by one tick so we can cancel the 'tap' event if 'scroll' fires: \n             */\n            tapTimeout = setTimeout(() => {\n              /** \n               * Trigger double tap immediately: \n               */\n              if (touch && touch.isDoubleTap) {\n                if (touch && touch.el) {\n                  touch.el.trigger('doubletap');\n                  touch = {};\n                }\n\n              } else {\n                /** \n                 * Trigger tap after singleTapDelay: \n                 */\n                touchTimeout = setTimeout(() => {\n                  touchTimeout = null;\n                  if (touch && touch.el) {\n                    touch.el.trigger('tap');\n                    touch = {};\n                    return false;\n                  }\n                }, singleTapDelay);\n              }\n            }, 0);\n          }\n\n        } else {\n          return;\n        }\n      });\n      body.on('touchcancel', cancelAll);\n    });\n\n    /**\n     * Register events:\n     */\n    ['tap', 'doubletap', 'longtap', 'swipeleft', 'swiperight', 'swipeup', 'swipedown'].forEach(method => {\n      $.fn.extend({\n        method: function(callback) {\n          return this.on(method, callback);\n        }\n      });\n    });\n  })();\n\n  /**\n   * ChocolateChipJS data cache.\n   */\n  let CCDataCache = {\n    elements: {}\n  };\n  $.fn.extend({\n    data(key, value) {\n      if (!this.size()) return new DOMStack();\n      let val = undefined;\n      let id = undefined;\n      const ctx = this.array[0];\n      if (!ctx.id) {\n        ctx.id = $.uuid();\n      }\n      id = ctx.id;\n      if (!CCDataCache.elements[id]) {\n        CCDataCache.elements[id] = {};\n      }\n      if (key === 'undefined' || key === null) {\n        return;\n      }\n      if (value || value === 0) {\n        val = value;\n        let obj = {};\n        obj[key] = value;\n\n        CCDataCache.elements[id][key] = value;\n      } else {\n        if (!CCDataCache.elements[id]) return;\n        if (CCDataCache.elements[id][key] === 0) {\n          return CCDataCache.elements[id][key];\n        }\n        if (!CCDataCache.elements[id][key]) return;\n        return CCDataCache.elements[id][key];\n      }\n      return this;\n    },\n\n    removeData(key) {\n      if (!this.size()) return this;\n      this.forEach((element) => {\n        const id = element.id;\n        if (!id) return this;\n        if (!CCDataCache.elements[id]) {\n          return this;\n        }\n        if (!key) {\n          delete CCDataCache.elements[id];\n          return this;\n        }\n        if (Object.keys(CCDataCache.elements[id]).length === 0) {\n          delete CCDataCache.elements[id];\n        } else {\n          delete CCDataCache.elements[id][key];\n        }\n        return this;\n      });\n    }\n  });\n\n/**\n * ChocolateChip-UI types method.\n */\n$.extend({\n  type: type => {\n    switch (typeof type) {\n      case 'boolean':\n        return 'boolean';\n      case 'number':\n        return 'number';\n      case 'string':\n        return 'string';\n      case 'function':\n        return 'function';\n      case 'object':\n        if (Array.isArray(type)) {\n          return 'array';\n        } else if (Object.prototype.toString.call(type) === '[object Date]') {\n          return 'date';\n        } else if (Object.prototype.toString.call(type) === '[object Error]') {\n          return 'error';\n        } else if (Object.prototype.toString.call(type) === '[object RegExp]') {\n          return 'regexp';\n        } else if (Object.prototype.toString.call(type) === '[object Object]') {\n            if (type.objectType && type.objectType === 'domstack') {\n              return 'domstack';\n              /* If Promise polyfill, then should support `then`. */\n            } else if (type.then) {\n              return 'promise';\n              /* Otherwise we got a normal object here. */\n            } else {\n              return 'object';\n            }\n        } else if (Object.prototype.toString.call(type) === '[object Number]') {\n          return 'number';\n        } else if (Object.prototype.toString.call(type) === '[object String]') {\n          return 'string';\n        } else if (Object.prototype.toString.call(type) === '[object Promise]') {\n          return 'promise';\n        } else if (Object.prototype.toString.call(type) === '[object Boolean]') {\n          return 'boolean';\n        }\n    }\n  }\n});\n\n/**\n * ChocolateChip-UI string methods.\n */\n$.extend({\n  camelize: string => {\n    if (typeof string !== 'string')\n      return;\n    return string.replace(/\\-(.)/g, (match, letter) => {\n      return letter.toUpperCase();\n    });\n  },\n\n  deCamelize: string => {\n    if (typeof string !== 'string')\n      return;\n    return string.replace(/([A-Z])/g, '-$1').toLowerCase();\n  },\n\n  capitalize: (string, all) => {\n    const self = this;\n    if (!string) {\n      return;\n    }\n    if (typeof string !== 'string')\n      return;\n    if (all) {\n      const str = string.split(' ');\n      let newstr = [];\n      str.forEach(item => {\n        return newstr.push(self.capitalize(item));\n      });\n      return newstr.join(' ');\n    } else {\n      return string.charAt(0).toUpperCase() + string.substring(1).toLowerCase();\n    }\n  }\n});\n\n/**\n * ChocolateChip-UI collection utilities.\n */\n$.fn.extend({\n  forEach(callback) {\n    this.each((idx, ctx) => {\n      callback.call(ctx, ctx, idx);\n    });\n  },\n\n  disable() {\n    if (!this.size()) return $();\n    this.forEach(node => {\n      node.classList.add('disabled');\n      node.disabled = true;\n      node.style.cursor = 'default';\n    });\n    return this;\n  },\n\n  enable() {\n    if (!this.size()) return $();\n    this.forEach(node => {\n      node.classList.remove('disabled');\n      node.removeAttribute('disabled');\n      node.style.cursor = 'auto';\n    });\n    return this;\n  },\n\n  iz(selector) {\n    const ret = $();\n    this.forEach(ctx => {\n      if ($(ctx).is(selector)) {\n        ret.push(ctx);\n      }\n    });\n    return ret;\n  },\n\n  iznt(selector) {\n    const ret = $();\n    this.each((_, ctx) => {\n      if (!$(ctx).is(selector)) {\n        ret.push(ctx);\n      }\n    });\n    return ret;\n  },\n\n  haz(selector) {\n    let ret = new DOMStack();\n    this.forEach(element => {\n      if ($(element).has(selector)[0]) {\n        ret.push(element);\n      }\n    });\n    return ret;\n  },\n\n  haznt(selector) {\n    let ret = new DOMStack();\n    this.forEach(element => {\n      if (!$(element).has(selector)[0]) {\n        ret.push(element);\n      }\n    });\n    return ret;\n  },\n\n  hazClass(className) {\n    if (className) {\n      return this.iz('.' + className);\n    } else {\n      return new DOMStack();\n    }\n  },\n\n  hazntClass(className) {\n    if (className) {\n      return this.iznt('.' + className);\n    } else {\n      return new DOMStack();\n    }\n  },\n\n  hazAttr(attribute) {\n    if (attribute) {\n      return this.iz('[' + attribute + ']');\n    } else {\n      return new DOMStack();\n    }\n  },\n\n  hazntAttr(attribute) {\n    if (attribute) {\n      return this.iznt('[' + attribute + ']');\n    } else {\n      return new DOMStack();\n    }\n  }\n});\n\n/**\n * ChocolateChip-UI - Validators.\n */\n\n/**\n * Set validity state of form elements: \n */\nconst setValidityStatus = (element, valid) => {\n  if (valid) {\n    $(element).prop('valid', true);\n    $(element).prop('invalid', false);\n    $(element).addClass('valid').removeClass('invalid');\n  } else {\n    $(element).prop('valid', false);\n    $(element).prop('invalid', true);\n    $(element).addClass('invalid').removeClass('valid');\n  }\n};\n\n/**\n * Used to check input validity: \n */\nconst checkValidity = (element, expression) => {\n  if (expression) {\n    setValidityStatus(element, true);\n  } else {\n    setValidityStatus(element, false);\n  }\n  return expression;\n};\n\n$.fn.extend({\n  isNotEmpty: function(ctx) {\n    if (this[0].nodeName !== 'INPUT') return;\n    return checkValidity(this, this[0].nodeName === 'INPUT' && this[0].value);\n  },\n\n  validateAlphabetic: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    const letters = /^[A-Za-z]+$/;\n    const value = this[0].nodeName === 'INPUT' && this[0].value;\n    checkValidity(this, value.match(letters));\n    if (value) {\n      return checkValidity(this, value.match(letters));\n    }\n  },\n\n  validateText: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    const letters = /^[A-Za-z\\W]+$/;\n    const value = this[0].nodeName === 'INPUT' && this[0].value;\n    checkValidity(this, value.match(letters));\n    if (value) {\n      return checkValidity(this, value.match(letters));\n    }\n  },\n\n  validateNumber: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    const numbers = /^[+-]?\\d+(\\.\\d+)?$/;\n    const value = this[0].nodeName === 'INPUT' && this[0].value;\n    checkValidity(this, value.match(numbers));\n    if (value) {\n      return checkValidity(this, value.match(numbers));\n    }\n  },\n\n  validateAlphaNumeric: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    const letters = /^[0-9a-zA-Z]+$/;\n    const value = this[0].nodeName === 'INPUT' && this[0].value;\n    checkValidity(this, value.match(letters));\n    if (value) {\n      return checkValidity(this, value.match(letters));\n    }\n  },\n\n  validateUserName: function(minimum) {\n    if (this[0].nodeName !== 'INPUT') return;\n    const letters = /^[a-zA-Z0-9]+$/;\n    const username = this[0].value;\n    if (!username) return checkValidity(this, username);\n    if (minimum && username.match(letters)) {\n      if (username.length >= minimum) {\n        return checkValidity(this, username);\n      } else {\n        return checkValidity(this, false);\n      }\n    } else {\n      return checkValidity(this, checkValidity(this, username.match(letters)));\n    }\n  },\n\n  validateEmail: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    const value = this[0].value;\n    const email = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n    if (value) {\n      return checkValidity(this, value.match(email));\n    } else {\n      return checkValidity(this, false);\n    }\n  },\n\n  validatePhoneNumber: function(int) {\n    if (this[0].nodeName !== 'INPUT') return;\n    let phone = undefined;\n    let phoneNumber = undefined;\n    const convertLettersToNumbers = value => {\n      let phonenumber = \"\";\n      value = value.toLowerCase();\n      const len = value.length;\n      for (let i = 0; i < len; i++) {\n        let character = value.charAt(i);\n        switch (character) {\n          case '0':\n            phonenumber += \"0\";\n            break;\n          case '1':\n            phonenumber += \"1\";\n            break;\n          case '2':\n            phonenumber += \"2\";\n            break;\n          case '3':\n            phonenumber += \"3\";\n            break;\n          case '4':\n            phonenumber += \"4\";\n            break;\n          case '5':\n            phonenumber += \"5\";\n            break;\n          case '6':\n            phonenumber += \"6\";\n            break;\n          case '7':\n            phonenumber += \"7\";\n            break;\n          case '8':\n            phonenumber += \"8\";\n            break;\n          case '9':\n            phonenumber += \"9\";\n            break;\n          case '-':\n            phonenumber += \"-\";\n            break;\n          case 'a':\n          case 'b':\n          case 'c':\n            phonenumber += \"2\";\n            break;\n          case 'd':\n          case 'e':\n          case 'f':\n            phonenumber += \"3\";\n            break;\n          case 'g':\n          case 'h':\n          case 'i':\n            phonenumber += \"4\";\n            break;\n          case 'j':\n          case 'k':\n          case 'l':\n            phonenumber += \"5\";\n            break;\n          case 'm':\n          case 'n':\n          case 'o':\n            phonenumber += \"6\";\n            break;\n          case 'p':\n          case 'q':\n          case 'r':\n          case 's':\n            phonenumber += \"7\";\n            break;\n          case 't':\n          case 'u':\n          case 'v':\n            phonenumber += \"8\";\n            break;\n          case 'w':\n          case 'x':\n          case 'y':\n          case 'z':\n            phonenumber += \"9\";\n            break;\n        }\n      }\n      return phonenumber;\n    };\n    if (this[0].value) {\n\n      /**\n       * International Numbers:\n       */\n      if (int) {\n        phoneNumber = this[0].value.replace(/[\\(\\)\\.\\-\\ ]/g, '');\n        return checkValidity(this, this.isNotEmpty() && !isNaN(phoneNumber));\n\n        /**\n         * North America (US and Canada):\n         */\n      } else {\n        phoneNumber = this[0].value.replace(/[\\(\\)\\.\\-\\ ]/g, '');\n        phoneNumber = convertLettersToNumbers(phoneNumber);\n        phone = /((\\(\\d{3}\\)?)|(\\d{3}))([\\s-./]?)(\\d{3})([\\s-./]?)(\\d{4})/;\n        return checkValidity(this, phoneNumber.match(phone));\n      }\n    } else {\n      return checkValidity(this, false);\n    }\n  },\n\n  validateUrl: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    if (this[0].value) {\n      const url = /^(ftp|http|https):\\/\\/([w]{3}\\.)?(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?$/;\n      return checkValidity(this, this[0].value.match(url));\n    } else {\n      return checkValidity(this, false);\n    }\n  },\n\n  validateAge: function(minimum) {\n    if (this[0].nodeName !== 'INPUT') return;\n    const age = this[0].value;\n    if(!age) {\n      return checkValidity(this, false);\n    } else if (age && minimum) {\n      return checkValidity(this, age >= minimum);\n    } else if (age) {\n      return checkValidity(this, true);\n    } else {\n      return checkValidity(this, false);\n    }\n  },\n\n  validateCheckbox: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    if (this[0].nodeName === 'INPUT' && this[0].type === 'checkbox') {\n      return checkValidity(this, this[0].checked === true);\n    }\n  },\n\n  validateRadioButtons: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    let choice = false;\n    if (this[0].nodeName === 'INPUT' && this[0].type === 'radio') {\n      $.each(this, function(idx, button) {\n        if (button.checked === true) {\n          choice = true;\n        }\n      });\n      return checkValidity(this, choice);\n    }\n  },\n\n  validateSelectBox: function() {\n    if (this[0].nodeName === 'SELECT') {\n      return checkValidity(this, this[0].selectedIndex);\n    } else {\n      return;\n    }\n  },\n\n  validateSwitch: function() {\n    const checkbox = this.find('input[type=checkbox]')[0];\n    if (checkbox.checked) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  validateSelectList: function() {\n    const radio = this.find('input[type=radio]');\n    if (radio.iz('[checked]')[0]) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  validateMultiSelectList: function() {\n    const checkboxes = this.find('input[type=checkbox]');\n    let checked = false;\n    checkboxes.forEach(function(item) {\n      if ($(item).prop('checked')) {\n        checked = true;\n      }\n    });\n    if (checked) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n});\n\n$.extend({\n  validatePassword: function(input1, input2, minimum) {\n    if (minimum && $(input1).val().length < minimum || $(input2).val().length < minimum) {\n      $(input1).addClass('invalid').removeClass('valid');\n      $(input2).addClass('invalid').removeClass('valid');\n      return false;\n    } else {\n      const letters = /^(?=.*[a-zA-Z])(?=.*[0-9]).+$/;\n      if (!letters.test($(input1).val()) && !letters.test($(input2).val())) return false;\n      if ($(input1).val() === $(input2).val()) {\n        $(input1).removeClass('invalid').addClass('valid');\n        $(input2).removeClass('invalid').addClass('valid');\n      } else {\n        $(input1).addClass('invalid').removeClass('valid');\n        $(input2).addClass('invalid').removeClass('valid');\n      }\n      return $(input1).val() === $(input2).val();\n    }\n  },\n\n  validateWithRegex: function(input, regex) {\n    if (!input || !regex) {\n      console.error('This method requires a regular expression.');\n      return;\n    }\n    const value = $(input).val();\n    if (value) {\n      return checkValidity(input, value.match(regex));\n    }\n  },\n\n  customValidators: [],\n\n  registerCustomValidator: function(name, regex) {\n    this.customValidators.push({name: name, regex: regex});\n  }\n});\n\n/**\n * ChocolateChip-UI serialize methods.\n */\n$.fn.extend({\n  serializeArray() {\n    let name = undefined;\n    let type = undefined;\n    let ret = [];\n    const add = value => {\n      if ($.type(value) === 'array') {\n        return value.forEach(add);\n      }\n      ret.push({\n        name: name,\n        value: value\n      });\n    };\n    if (this[0]) {\n      $.each([].slice.apply(this[0].elements), (idx, field) => {\n        type = field.type;\n        name = field.name;\n        if (name && field.nodeName.toLowerCase() != 'fieldset' &&\n          !field.disabled && type != 'submit' && type != 'reset' && type != 'button' && type != 'file' &&\n          ((type != 'radio' && type != 'checkbox') || field.checked)) {\n          add($(field).val());\n        }\n      });\n    }\n    return ret;\n  },\n\n  /**\n   * Serialize the values of a form: \n   */\n  serialize() {\n    let ret = [];\n    this.serializeArray().forEach(element => {\n      ret.push(encodeURIComponent(element.name) + '=' + encodeURIComponent(element.value));\n    });\n    return ret.join('&');\n  }\n});\n\n/**\n * ChocolateChip-UI - Form Validation & JSON.\n */\n$.extend({\n  /**\n   * Setup Form object to convert data to JSON, and to validate form values:\n   */\n  Form: options => {\n    if (!options || $.type(options) !== 'array') return;\n\n    let __passed = false;\n    let __errors = [];\n    let __result = [];\n\n    /** \n     * Helper to validate form elements: \n     */\n    function validateElement(item) {\n      if (!item) return;\n      if (!__passed) {\n        __errors.push({\n          element: item.element,\n          type: item.type\n        });\n        if (item.callback) item.callback();\n      } else {\n        convertToObject($(item.element).attr('name'), $(item.element).val());\n      }\n    }\n\n    /** \n     * Helper to convert form element names to JSON: \n     */\n    function convertToObject(name, value) {\n      __result.push({\n        name: name,\n        value: value\n      });\n    }\n\n    /** \n     * Convert form names and values to JSON: \n     */\n    function convertObjectToJSON(data) {\n      const delimiter = '_';\n      let result = {};\n      let arrays = {};\n      data.forEach(item => {\n        const value = item.value;\n        if (value !== '') {\n          let name = item.name;\n          let nameParts = name.split(delimiter);\n          let currResult = result;\n          for (let j = 0; j < nameParts.length; j++) {\n            const namePart = nameParts[j];\n            let arrName = undefined;\n            if (namePart.indexOf('[]') > -1 && j === nameParts.length - 1) {\n\n              arrName = namePart.substr(0, namePart.indexOf('['));\n              if (!currResult[arrName]) {\n                currResult[arrName] = [];\n              }\n              currResult[arrName].push(value);\n            } else {\n              if (namePart.indexOf('[') > -1) {\n                arrName = namePart.substr(0, namePart.indexOf('['));\n                const arrIdx = namePart.replace(/^[a-z]+\\[|\\]$/gi, '');\n                if (!arrays[arrName]) {\n                  arrays[arrName] = {};\n                }\n                if (!currResult[arrName]) {\n                  currResult[arrName] = [];\n                }\n                if (j === nameParts.length - 1) {\n                  currResult[arrName].push(value);\n                } else {\n                  if (!arrays[arrName][arrIdx]) {\n                    currResult[arrName].push({});\n                    arrays[arrName][arrIdx] = currResult[arrName][currResult[arrName].length - 1];\n                  }\n                }\n                currResult = arrays[arrName][arrIdx];\n              } else {\n                if (j < nameParts.length - 1) {\n                  if (!currResult[namePart]) {\n                    currResult[namePart] = {};\n                  }\n                  currResult = currResult[namePart];\n                } else {\n                  currResult[namePart] = value;\n                }\n              }\n            }\n          }\n        }\n      });\n      return result;\n    }\n\n    /** \n     * Validate form elements: \n     */\n    options.forEach(item => {\n      if (!$(item.element)[0]) return;\n      if (!item.type) {\n        convertToObject($(item.element).attr('name'), $(item.element).val());\n        return;\n      }\n      switch (item.type) {\n        case 'notempty':\n          __passed = validateElement(item.element, item.type);\n          __errors.push({\n            element: item.element,\n            type: item.type\n          });\n          return;\n        case 'number':\n          __passed = $(item.element).validateNumber();\n          validateElement(item);\n          return;\n        case 'text':\n          __passed = $(item.element).validateText();\n          validateElement(item);\n          return;\n        case 'alphanumeric':\n          __passed = $(item.element).validateAlphaNumeric();\n          validateElement(item);\n          return;\n        case 'username':\n          __passed = $(item.element).validateUserName(item.min);\n          validateElement(item);\n          return;\n        case 'email':\n          __passed = $(item.element).validateEmail();\n          validateElement(item);\n          return;\n        case 'phone':\n          __passed = $(item.element).validatePhoneNumber();\n          validateElement(item);\n          return;\n        case 'url':\n          __passed = $(item.element).validateUrl();\n          validateElement(item);\n          return;\n        case 'age':\n          __passed = $(item.element).validateAge(item.min);\n          validateElement(item);\n          return;\n        case 'checkbox':\n          __passed = $(item.element).validateCheckbox();\n          if (__passed) {\n            validateElement(item);\n          }\n          return;\n        case 'radio':\n          __passed = $(item.element).validateRadioButtons();\n          validateElement(item);\n          return;\n        case 'selectbox':\n          __passed = $(item.element).validateSelectBox();\n          validateElement(item);\n          return;\n        case 'password':\n          __passed = $.validatePassword(item.element, item.element2, item.min);\n          __errors.push({\n            element: item.element,\n            element2: item.element2,\n            type: item.type\n          });\n          return;\n        case 'switch':\n          __passed = $(item.element).validateSwitch();\n          if (__passed) {\n            validateElement(item);\n          }\n          return;\n        case 'selectlist':\n          __passed = $(item.element).validateSelectList();\n          if (__passed) {\n            validateElement(item);\n          }\n        case 'multiselectlist':\n          __passed = $(item.element).validateMultiSelectList();\n          let inputs = undefined;\n          if (__passed) {\n            inputs = $(item.element).find('input[type=checkbox]');\n            inputs.forEach(item => {\n              if (item.checked) {\n                convertToObject(item.name, item.value);\n              }\n            });\n          }\n      }\n      if (item.type.match(/custom/)) { \n        const cv = $.customValidators.filter(validator => {\n          return (validator.name) === item.type;\n        });\n        if (cv) {\n          const result = $.validateWithRegex(item.element, cv[0].regex);\n          if (result) {\n            const el = $(item.element);\n            convertToObject(el[0].name, el[0].value);\n          } else {\n            __errors.push({\n              element: item.element,\n              type: item.type\n            });\n            if (item.callback) item.callback();\n          }\n        }\n      }\n    });\n\n\n\n    return {\n      getErrors() {\n        if (__errors.length) {\n          return __errors;\n        }\n      },\n\n      errors() {\n        if (__errors.length) {\n          return true;\n        }\n      },\n\n      get() {\n        return convertObjectToJSON(__result);\n      }\n    };\n  }\n});\n\n/**\n * ChocolateChip-UI  - Data Formatters.\n */\n\n$.extend({\n  /**\n   * Format Numbers for Thousands:\n   */\n  formatNumber(amount, separator, decimal) {\n    const sep = separator || \",\";\n    /** \n     * Allow the user to round a float to a whole number: \n     */\n    if (decimal === 0) {\n      const num = Math.round(amount);\n      return Number(num).toString().replace(/(?=(?:\\d{3})+$)(?!^)/g, sep);\n    }\n    if (decimal === undefined) {\n      /** \n       * Check if amount is a float: \n       */\n      if (typeof amount === 'number' && amount % 1 !== 0) {\n        return Number(amount).toString().replace(/\\d(?=(\\d{3})+\\.)/g, '$&' + sep);\n        /** \n         * Otherwise treat it as an integer: \n         */\n      } else {\n        return Number(amount).toString().replace(/(?=(?:\\d{3})+$)(?!^)/g, sep);\n      }\n      /** \n       * If a decimal value was provided, format it to that amount: \n       */\n    } else {\n      return Number(amount).toFixed(decimal).replace(/\\d(?=(\\d{3})+\\.)/g, '$&' + sep);\n    }\n  },\n\n  /**\n   * Return sum of numbers:\n   */\n  sum(arr) {\n    let ret = undefined;\n    if (Array.isArray(arr) && arr.length) {\n      ret = arr;\n    } else {\n      ret = [].slice.apply(arguments);\n    }\n    return ret.reduce(function(a, b) {\n      return a + b;\n    });\n  },\n\n  /**\n   * Format currency:\n   */\n  currency(amount, symbol, separator, decimal) {\n    const sym = symbol || \"$\";\n    const sep = separator || \",\";\n    const dec = decimal || 2;\n    let zero = false;\n    if (decimal === 0) {\n      zero = true;\n    }\n    /* Private function to format amounts: */\n    const formatNumber = function(amount, sep) {\n      /**\n       * A decimal value of '0' means we need to round the amount off before adding in thousands separators:\n       */\n      if (zero) {\n        const num = Math.round(amount);\n        return Number(num).toString().replace(/^0+/, '').replace(/(?=(?:\\d{3})+$)(?!^)/g, sep);\n      } else {\n        /**\n         * Otherwise, we can just add the thousands separators with the decimal placement provided by the user or the default:\n         */\n        return Number(amount).toFixed(dec).replace(/^0+/, '').replace(/\\d(?=(\\d{3})+\\.)/g, '$&' + sep);\n      }\n    };\n    return sym + formatNumber(amount, sep);\n  },\n\n  /**\n   * Format Time:\n   */\n  formatTime(time) {\n    const temp = time.split(':');\n    const temp2 = temp[0] + ':' + temp[1];\n    const ampm = time.split(' ')[1];\n    return temp2 + ' ' + ampm;\n  },\n\n  sortDate(date1, date2) {\n    return new Date(date1) - new Date(date2);\n  },\n\n  /**\n   * Sort Numbers:\n   */\n  sortNumbers(a, b) {\n    return a - b;\n  },\n\n  sortNumbersDescending(a, b) {\n    return b - a;\n  }\n});\n\n/**\n * ChocolateChip-UI - View Factory.\n */\n(() => {\n  const ViewErrorMessages = {\n    en: {\n      noDataForViewRender: \"ChocolateChip-UI View Error: No data was provided for the view to render. If you want to render the view, please provide data, or redefine the view with a data source or model. Otherwise rendering will be skipped.\",\n      noElementForView: \"ChocolateChip-UI View Error: No element was provided for the view. Please provide an element in the view initialization so that we can access it.\",\n      noTemplateForView: \"ChocolateChip-UI View Error: No template was provided for this view. This means that you did not provide a template in the view initialization, or the element did not have any template in its markup.\",\n      viewElementHasNoTemplate: \"ChocolateChip-UI View Error: The element for this view has no template in its markup. Either correct the element by defining a template in the element's markup, or define a template in the view's initialization.\",\n      noElementToSetToTemplate: \"ChocolateChip-UI View Error: No element was provided to set to this view. Please provide one.\",\n      noTemplateToSetToView: \"ChocolateChip-UI View Error: You did not provide a template to set to this view. Please provide one.\",\n      noEventsToAdd: \"ChocolateChip-UI View Error: No event was provided to attach fo the view. Please provide an event to procede.\",\n      noDataToSetForView: \"ChocolateChip-UI View Error: No data was provided to set for the view. Please provide some data.\",\n      noModelToBindToView: \"ChocolateChip-UI View Error: No model was provided to bind the view to. Please provide a valid model to complete this operation.\",\n      viewHasNoModel: \"ChocolateChip-UI View Error: Could not get this view's model because it is not bound to one. You can use `bindModel()` to bind a model to this view.\",\n      viewHasNoData: \"ChocolateChip-UI View Error: This view has no data. Did you render it with data, or did you bind it to a model? Try using `getModel()` to see if this view is using a model.\",\n      viewHasNoTemplate: \"ChocolateChip-UI View Error: This view has no template. Either you created it without a template, or there was some problem parsing the template. Please check how this view is set up.\",\n      noStyleObject: \"ChocolateChip-UI View Error: No style object was provided for the view style property. Check that a proper style object was provided. If you are not sure,  consult the documentation.\"\n    },\n    es: {\n      noDataForViewRender: \"Hubo Error de Vista ChocolateChip-UI: : No se proporcion datos para que la vista los utilice. Si desea renderizar la vista, proporcione datos o redefinir la vista con un valor para sus datos o un modelo de datos. De lo contrario, la vista no se renderizar.\",\n      noElementForView: \"Hubo Error de Vista ChocolateChip-UI: : No se proporcion ningn elemento para la vista. Por favor proporcione un elemento en la inicializacin de la vista para que podamos acceder a l.\",\n      noTemplateForView: \"Hubo Error de Vista ChocolateChip-UI: : No se proporcion ninguna plantilla para esta vista. Esto significa que usted no proporcion una plantilla en la vista de inicializacin, o el elemento no tiene ninguna plantilla en su marcado.\",\n      viewElementHasNoTemplate: \"Hubo Error de Vista ChocolateChip-UI: : El elemento de esta vista no tiene ninguna plantilla en su marcado. O bien corrija el elemento por definir una plantilla en el marcado del elemento, o defina una plantilla en la inicializacin de la vista misma.\",\n      noElementToSetToTemplate: \"Hubo Error de Vista ChocolateChip-UI: : No se proporcion ningn elemento en el cual se renderizar la pantilla. Por favor proporcione un elemento.\",\n      noTemplateToSetToView: \"Hubo Error de Vista ChocolateChip-UI: No se proporcion una plantilla para esta vista. Por favor proporcione una plantilla.\",\n      noEventsToAdd: \"Hubo Error de Vista ChocolateChip-UI: No se proporcion ningn event para unir a la vista. Por favor, proporcione un evento para proceder.\",\n      noDataToSetForView: \"Hubo Error de Vista ChocolateChip-UI: No se proporcion datos para la vista. Por favor proporcione algunos datos.\",\n      noModelToBindToView: \"Hubo Error de Vista ChocolateChip-UI: No se proporcion un modelo para establecer un enlace entre l y la vista. Por favor proporcione un modelo vlido para completar esta operacin.\",\n      viewHasNoModel: \"Hubo Error de Vista ChocolateChip-UI: No pudimos acceder al modelo de esta vista porque no est asociada con uno. Puede realizar esto usando `bindModel()`.\",\n      viewHasNoData: \"Hubo Error de Vista ChocolateChip-UI: Esta vista no tiene datos. A caso no se renderiz con datos o no se asoci con ningn modelo. Trate de executar `getModel()` para averiguar si esta vista est usando un modelo.\",\n      viewHasNoTemplate: \"Hubo Error de Vista ChocolateChip-UI: Esta vista no tiene plantilla.  se cre la vista sin plantilla,  hubo algn error al procesar la plantilla. Debe chequear cmo se defin la vista.\",\n      noStyleObject: \"Hubo Error de Vista ChocolateChip-UI: No se proporcion un objeto de estilos para la propiedad de estilos de la vista. Debe de chequear que el objeto de estilos est correcto. Si Usted no est serguro de eso, consulte la documentacin.\"\n\n    }\n  }\n\n  let errors = undefined;\n  if ($('html').attr('lang') == 'en') errors = ViewErrorMessages.en;\n  if ($('html').attr('lang') == 'es') errors = ViewErrorMessages.es;\n\n  /**\n   * Private function to parse style object in view and convert it into virtual stylesheet based on the view's element.\n   */\n  function ChuiStyle() {\n\n    /**\n     * Reuse the same style sheet for all instances.\n     */\n    let sharedSheet = null;\n\n    /**\n     * Properties that accept a number but do not need a unit.\n     */\n    const unitlessProps = {\n      columnCount: true,\n      fillOpacity: true,\n      flex: true,\n      flexGrow: true,\n      flexShrink: true,\n      fontWeight: true,\n      lineClamp: true,\n      lineHeight: true,\n      opacity: true,\n      order: true,\n      orphans: true,\n      widows: true,\n      zIndex: true,\n      zoom: true\n    };\n\n    /**\n     * If auto units is enabled, any property value that is a number will be converted to a string with the specified unit appended.\n     */\n    function CreateStyleSheet(options) {\n      if (!(this instanceof CreateStyleSheet)) {\n        return new CreateStyleSheet(options);\n      }\n      options || (options = {});\n      options.prefix = !options.hasOwnProperty(\"prefix\") ? true : !!options.prefix;\n      options.unit = options.hasOwnProperty(\"unit\") ? options.unit : \"px\";\n\n      this._sheet = null;\n      this._prefix = null;\n\n      /**\n       * Insert one or more style objects in a stylesheet.\n       */\n      this.css = function (element, styles, selector) {\n        if (styles == null) return \"\";\n        if (this._sheet == null) {\n          this._sheet = sharedSheet = (sharedSheet || createStyleSheet());\n        }\n        selector = element;\n\n        const rules = rulesFromStyles(selector, styles);\n        if (options.prefix || options.unit !== \"\") {\n          rules.forEach(function(set) {\n            if (options.unit !== \"\") {\n              addUnit(set[1], options.unit);\n            }\n          });\n        }\n        insertRules(rules, this._sheet);\n      };\n\n    }\n\n    /**\n     * Returns {CSSStyleSheet}\n     */\n    function createStyleSheet() {\n      if (document.head == null) {\n        throw new Error(\"Can't add stylesheet before <head> is available. Make sure your document has a head element.\");\n      }\n      const style = document.createElement(\"style\");\n      style.id = \"chui_styles_\" + $.uuid();\n      document.head.appendChild(style);\n      return style.sheet;\n    }\n\n    /**\n     * Returns CSS rule sets as selector/style vectors.\n     */\n    function rulesFromStyles(selector, styles) {\n      if (!Array.isArray(styles)) styles = [styles];\n      const style = {};\n      let rules = [];\n      styles = $.flatten(styles);\n      styles.forEach(function(block) {\n        for (const prop in block) {\n          let value = block[prop];\n          if (isPlainObject(value) || Array.isArray(value)) {\n            rules = rules.concat(\n              rulesFromStyles(combineSelectors(selector, prop), value)\n            );\n          } else {\n            if (prop === \"content\") value = \"'\"+value+\"'\";\n            style[prop] = value;\n          }\n        }\n      });\n      rules.push([ selector, style ]);\n      return rules;\n    }\n\n    /**\n     * Add rule sets to stylesheet.\n     */\n    function insertRules(rules, sheet) {\n      function hyphenate(str) {\n        return str.replace(/[A-Z]/g, function($0) { return '-'+$0.toLowerCase(); });\n      }\n      rules.forEach(function(rule) {\n        const pairs = [];\n        for (const prop in rule[1]) {\n          pairs.push(hyphenate(prop) + \":\" + rule[1][prop]);\n        }\n        if (pairs.length > 0) {\n          sheet.insertRule(rule[0] + \"{\" + pairs.join(\";\") + \"}\", 0);\n        }\n      });\n    }\n\n    /**\n     * Pseudo classes/elements and attribute selectors should immediately follow the previous selector, others should be space separated.\n     */\n    function combineSelectors(parent, child) {\n      const pseudoRe = /^[:\\[]/;\n      const parents = parent.split(\",\"), children = child.split(\",\");\n      return parents.map(function(parent) {\n        return children.map(function(part) {\n          let separator = pseudoRe.test(part) ? \"\" : \" \";\n          return parent + separator + part;\n        }).join(\",\");\n      }).join(\",\");\n    }\n\n    /**\n     * Add unit to numeric values not in |unitlessProps|.\n     */\n    function addUnit(style, unit) {\n      for (const prop in style) {\n        let value = style[prop] + \"\";\n        if (!isNaN(value) && !unitlessProps[prop]) {\n          value = value + unit;\n        }\n        style[prop] = value;\n      }\n      return style;\n    }\n\n    const style = document.createElement(\"div\").style;\n    function supports(prop, value) {\n      style[prop] = \"\";\n      style[prop] = value;\n      return !!style[prop];\n    }\n\n    function isPlainObject(obj) {\n      return obj === Object(obj) && Object.prototype.toString === obj.toString;\n    }\n\n    const stylesheets = {};\n    stylesheets.css = CreateStyleSheet().css;\n    return stylesheets;\n  }\n\n  $.extend({\n\n    /* jshint, evil: false, validthis:true, unused:false, smarttabs: true, nonew false */\n    view: {\n      index: 0\n    },\n\n    helpers: {},\n\n    defineHelper: callback => {\n      $.extend($.helpers, callback);\n    },\n\n    View: options => {\n      /**\n      options = {\n        element: undefined,\n        template: stringTemplate,\n        model: undefined,\n        variable: 'whatever',\n        events: [\n          {\n            element: selector || 'self',\n            event: 'click',\n            callback: function() {}\n          },\n          {\n            element: selector2 || 'self',\n            event: 'touchstart',\n            callback: function() {}\n          }\n        ]\n      }\n      */\n\n      /**\n       * Private Properties:\n       */\n      let __element = undefined;\n      let __origElement = undefined;\n      if (!options) options = {};\n      if (options && options.element) {\n        __origElement = options.element;\n        __element = $(options.element);\n      }\n      let __template = options.template;\n      let __data = options.data;\n      let __model = options.model;\n      let __index = options.index || 1;\n      let __rendered = false;\n      let __variable = options.variable || 'data';\n      let __events = options.events || [];\n      let __startIndexFrom = options.startIndexFrom || false;\n      if (options.startIndexFrom === 0) __startIndexFrom = 0;\n      const __re = /data-src/img;\n      let __safeHTML = options.safeHTML || false;\n      let __es6Template = options.es6Template || false;\n      let __noTemplate = options.noTemplate || false;\n      const __id = $.uuid();\n      let __styles = options.styles;\n\n      /**\n       * Private Functions:\n       */\n\n      let parsedTemplate = undefined;\n\n      const parseView = (template, variable) => {\n        if (!template) {\n          console.error(errors.viewElementHasNoTemplate)\n          return;\n        }\n        const interpolate = /\\{=([\\s\\S]+?)\\}/img;\n        variable = variable || 'data';\n        template.replace(\"'\", \"\\'\");\n        /* jshint ignore:start */\n        const Template = new Function(variable,\n          \"var p=[];\" + \"p.push('\" + template\n          .replace(/[\\r\\t\\n]/g, \" \")\n          .split(\"'\").join(\"\\\\'\")\n          .replace(interpolate, \"',$1,'\")\n          /**\n           * Executable:\n           */\n          .split('{{').join(\"');\")\n          .split('}}').join(\"p.push('\") + \"');\" +\n          \"return p.join('');\");\n        return Template;\n        /* jshint ignore:end */\n      };\n\n      /**\n       * Binding any events provided in View options:\n       */\n      const handleEvents = () => {\n        if (!__element) return;\n        if (__events.length) {\n          __events.forEach(item => {\n            const bubble = item.bubble || false;\n            if (item && item.element === 'self' || item && !item.element) {\n              __element.on(item.event, item.callback, bubble);\n            } else {\n              __element.on(item.event, item.element, item.callback, bubble);\n            }\n          });\n        }\n      };\n\n      /**\n       * Get template from element:\n       */\n      const extractTemplate = () => {\n        if (!__element || !__element.size() || __noTemplate) {\n          return;\n        }\n        if (__es6Template) return;\n        if (!__template) {\n          if (__element.children()[0] && __element.children().eq(0).is('script')) {\n            __template = __element.children('script').html();\n            __element.empty();\n          } else if (__element.children()[0] && __element.children().eq(0).is('template')) {\n            __template = __element.children('template').html();\n            __element.empty();\n          } else if (!__element[0].childNodes.length) {\n            console.error(errors.viewElementHasNoTemplate)\n            return;\n          } else {\n            if (__element[0] && __element[0].childNodes.length) {\n              if (!__template) __template = __element.html();\n            }\n            __element.empty();\n          }\n          if (__template) __template = __template.replace(__re, 'src');\n\n          parseView(__template, __variable);\n        } else {\n          __template = __template.replace(__re, 'src');\n          parseView(__template, __variable);\n        }\n        if (__styles && options.element) {\n          if (!$(options.element)[0]) return;\n          const styles = ChuiStyle();\n          if ($.type(__styles) !== 'object') {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noStyleObject)\n            return;\n          }\n          styles.css(options.element, __styles)\n        }\n      };\n      parsedTemplate = extractTemplate();\n\n      if (__events) {\n        handleEvents(__events);\n      }\n\n      /**\n       * Return closure to encapsulate methods & data:\n       */\n      const view = {};\n      let data = undefined;\n\n\n      const bindToModel = (model, view) => {\n        if (model) {\n          model.boundViews.push(view);\n        }\n      }\n\n      bindToModel(__model, view);\n\n      $.extend(view, {\n\n        id: __id,\n\n        render(data, append) {\n          if (!__element) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noElementForView)\n            return ;\n          }\n          function escapeNumber(arg) {\n            if ($.type(arg) === 'number') {\n              return String(arg);\n            } else {\n              return arg;\n            }\n          }\n          window.escapeNumber = escapeNumber;\n          data = escapeNumber(data);\n          __data = escapeNumber(__data);\n          if (!data && !__data && !__model) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noDataForViewRender);\n            return;\n          }\n          if (!data && __data) {\n            data = __data;\n          } else if (!data && __model) {\n            data = __model.get();\n          }\n\n          /**\n           * Private functions for the render method.\n           * These need access to the returned instance.\n           */\n\n          /**\n           * Uncloaks, checks index and loops data:\n           */\n          const renderIterableData = data => {\n            const Data = data ? data : __data;\n            __element.removeClass('cloak');\n            if (__element.data('index')) {\n              __index = Number(__element.data('index'));\n              $.view.index = Number(__element.data('index'));\n            } else {\n              __index = 1;\n              $.view.index = 1;\n            }\n            interateModelToTemplate(Data);\n          };\n\n          /**\n           * Check extracted template:\n           */\n          if (__template && $.type(__template) === 'string') {\n            parsedTemplate = parseView(__template, __variable);\n          }\n\n          /**\n           * If the user supplied data to render:\n           * If it's an array:\n           */\n          if ($.type(data) === 'array') {\n            $.view.index = __startIndexFrom || 1;\n            if (__startIndexFrom === 0) $.view.index = 0;\n            if (!append) __element.empty();\n            data.forEach(item => {\n              if (!__safeHTML) {\n                item = $.escapeHTML(item);\n              }\n              if (!parsedTemplate && !__noTemplate) {\n                if ($.supressErrorMessages) return;\n                console.error(errors.viewElementHasNoTemplate)\n                return;\n              }\n              __element.append(parsedTemplate(item)); // jshint ignore:line\n              $.view.index += 1;\n              __index += 1;\n            });\n            __rendered = true;\n            $.view.index = 0;\n            __element.removeClass('cloak');\n            return;\n\n            /**\n             * Else if it is an object:\n             */\n          } else if ($.type(data) === 'object' || $.type(data) === 'string' || $.type(data) === 'number') {\n            if (!parsedTemplate) {\n              if ($.supressErrorMessages) return;\n              console.error(errors.viewElementHasNoTemplate)\n              return;\n            }\n            $.view.index = __startIndexFrom || 1;\n            if (!append) __element.empty();\n            if (!__safeHTML) {\n              data = $.escapeHTML(data);\n            }\n            __element.append(parsedTemplate(data)); // jshint ignore:line\n            __element.removeClass('cloak');\n            __rendered = true;\n            return;\n          }\n        },\n\n        empty() {\n          if (!__element) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noElementForView)\n            return;\n          }\n          __element.empty();\n        },\n\n        resetIndex() {\n          if (!__element) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noElementForView)\n            return;\n          }\n          __index = 0;\n          __element.data('index', 0);\n          $.view.index = 0;\n        },\n\n        startIndexFrom(number) {\n          if (!__element) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noElementForView)\n            return;\n          }\n          if (number === 0 || (number && !isNaN(number))) {\n            __startIndexFrom = number;\n            $.view.index = number;\n            view.render();\n          }\n        },\n\n        getElement() {\n          if (!__element) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noElementForView)\n            return;\n          } else {\n            return __element;\n          }\n        },\n\n        setElement(element) {\n          if (!element) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noElementForView)\n            return;\n          }\n          __element = $(element);\n          $(element).empty();\n          handleEvents();\n          const styles = ChuiStyle();\n          styles.css(element, __styles)\n        },\n\n        getTemplate() {\n          if (!__template) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.viewHasNoTemplate)\n            return;\n          } else {\n            return __template;\n          }\n        },\n\n        setTemplate(template) {\n          if (!template) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noTemplateToSetToView)\n            return;\n          } else {\n            __template = template.replace(__re, 'src');\n            parsedTemplate = parseView(__template);\n          }\n        },\n\n        bindModel(model) {\n          if (!model) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noModelToBindToView);\n            return;\n          }\n          this.unbindModel(__model);\n          __model = model;\n          if (__data) __data = undefined;\n          bindToModel(__model, view);\n        },\n\n        unbindModel() {\n          if (__model) {\n            const pos = __model.boundViews.findIndex(function(view) {\n              return view.id = __id;\n            })\n            __model.boundViews.splice(pos,1);\n          }\n          __model = undefined;\n        },\n\n        getModel() {\n          if (__model) {\n            return __model\n          } else {\n            if ($.supressErrorMessages) return;\n            console.error(errors.viewHasNoModel)\n          }\n        },\n\n        isRendered() {\n          return __rendered;\n        },\n\n        isEmpty() {\n          if (!__element) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noElementForView)\n            return;\n          }\n          if (__element[0].children.length) {\n            return false;\n          } else {\n            return true;\n          }\n        },\n\n        addEvent(events, replace) {\n          if (!events) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noEventsToAdd);\n            return;\n          }\n          if (replace) {\n            __events = events & events.length ? events : [events];\n          } else {\n            if (events && events.length) {\n              events.forEach(event => {\n                __events.push(event)\n              });\n            } else if (events) {\n              __events.push(events);\n            }\n          }\n          handleEvents();\n        },\n\n        /**\n         * options: event, element (for a delegated event), callback\n         */\n        off(event, element, callback) {\n          __element.off(event, element, callback);\n        },\n\n        safeHTML(boolean) {\n          if (boolean) {\n            __safeHTML = true;\n          } else {\n            __safeHTML = false;\n          }\n        },\n\n        isEscapingHTML() {\n          return !__safeHTML;\n        },\n\n        getData() {\n          if (__data) {\n            return __data\n          } else {\n            if ($.supressErrorMessages) return;\n            console.error(errors.viewHasNoData);\n            return;\n          }\n        },\n\n        setData(data) {\n          if (!data) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noDataToSetForView);\n            return;\n          }\n          if (data) {\n            if (__model) __model = undefined;\n            __data = data;\n          }\n        },\n\n        /**\n         * This method is for use after importing a view as an ES6 module. It resets the view's element since this cannot be determined at the time of import.\n         */\n        mount() {\n          __element = $(__origElement);\n          handleEvents();\n          const styles = ChuiStyle();\n          styles.css(options.element, __styles)\n        }\n\n      });\n      return view;\n    }\n  });\n})();\n\n\n/**\n * ChocolateChip-UI - Component Factory.\n */\n$.extend({\n  Component: options => {\n    const comp = $.Component;\n    $[options.name] = () => {\n      comp.options = options;\n      delete comp.options.name\n      return $.View(comp.options);\n    };\n  }\n});\n\n/**\n * Promise Polyfill.\n */\n(function() {\n  /**\n   * Define polyfill for ES6 Promises: \n   */\n\n  let extend = undefined;\n  let cycle = undefined;\n  let queue = undefined;\n  extend = function(obj, name, val, config) {\n    return Object.defineProperty(obj, name, {\n      value: val,\n      writable: true,\n      configurable: config !== false\n    });\n  };\n  queue = (function() {\n    let first = undefined;\n    let last = undefined;\n    let item = undefined;\n    function Item(func, self) {\n      this.func = func;\n      this.self = self;\n      this.next = undefined;\n    }\n    return {\n      add(func, self) {\n        item = new Item(func, self);\n        if (last) {\n          last.next = item;\n        } else {\n          first = item;\n        }\n        last = item;\n        item = undefined;\n      },\n      unshift() {\n        let f = first;\n        first = last = cycle = undefined;\n        while (f) {\n          f.func.call(f.self);\n          f = f.next;\n        }\n      }\n    };\n  })();\n  function schedule(func, self) {\n    queue.add(func, self);\n    if (!cycle) {\n      cycle = setTimeout(queue.unshift);\n    }\n  }\n  /**\n   * Check that Promise is thenable: \n   */\n  function isThenable(obj) {\n    let _then = undefined;\n    let obj_type = typeof obj;\n    if (obj !== null &&\n      (obj_type === \"object\" || obj_type === \"function\")) {\n      _then = obj.then;\n    }\n    return typeof _then === \"function\" ? _then : false;\n  }\n  function notify() {\n    for (let i = 0; i < this.chain.length; i++) {\n      notifyIsolated(this, (this.state === 1) ? this.chain[i].success : this.chain[i].failure, this.chain[i]);\n    }\n    this.chain.length = 0;\n  }\n  function notifyIsolated(self, callback, chain) {\n    let ret = undefined;\n    let _then = undefined;\n    try {\n      if (callback === false) {\n        chain.reject(self.msg);\n      } else {\n        if (callback === true) {\n          ret = self.msg;\n        } else {\n          ret = callback.call(undefined, self.msg);\n        }\n        if (ret === chain.promise) {\n          chain.reject(new TypeError(\"Promise-chain cycle\"));\n        } else if (_then = isThenable(ret)) { // jshint ignore:line\n          _then.call(ret, chain.resolve, chain.reject);\n        } else {\n          chain.resolve(ret);\n        }\n      }\n    } catch (err) {\n      chain.reject(err);\n    }\n  }\n  function resolve(msg) {\n    let _then = undefined;\n    let deferred = undefined;\n    let self = this;\n    if (self.triggered) {\n      return;\n    }\n    self.triggered = true;\n    if (self.deferred) {\n      self = self.deferred;\n    }\n    try {\n      if (_then = isThenable(msg)) {  // jshint ignore:line\n        schedule(function() {\n          const deferred_wrapper = new MakeDeferred(self);\n          try {\n            _then.call(msg, function() { resolve.apply(deferred_wrapper, arguments); }, function() { reject.apply(deferred_wrapper, arguments); });\n          } catch (err) {\n            reject.call(deferred_wrapper, err);\n          }\n        });\n      } else {\n        self.msg = msg;\n        self.state = 1;\n        if (self.chain.length > 0) {\n          schedule(notify, self);\n        }\n      }\n    } catch (err) {\n      reject.call(new MakeDeferred(self), err);\n    }\n  }\n  function reject(msg) {\n    let self = this;\n    if (self.triggered) {\n      return;\n    }\n    self.triggered = true;\n    if (self.deferred) {\n      self = self.deferred;\n    }\n    self.msg = msg;\n    self.state = 2;\n    if (self.chain.length > 0) {\n      schedule(notify, self);\n    }\n  }\n  function iteratePromises(Constructor, arr, resolver, rejecter) {\n    for (let idx = 0; idx < arr.length; idx++) {\n      (function IIFE(idx) {\n        Constructor.resolve(arr[idx])\n          .then(function(msg) {\n          resolver(idx, msg);\n        }, rejecter);\n      })(idx);\n    }\n  }\n  function MakeDeferred(self) {\n    this.deferred = self;\n    this.triggered = false;\n  }\n  function Deferred(self) {\n    this.promise = self;\n    this.state = 0;\n    this.triggered = false;\n    this.chain = [];\n    this.msg = undefined;\n  }\n  function Promise(executor) {\n    if (typeof executor !== \"function\") {\n      throw new TypeError(\"Not a function\");\n    }\n    if (this.isValidPromise !== 0) {\n      throw new TypeError(\"Not a promise\");\n    }\n    /**\n     * Indicate the Promise is initialized:\n     */\n    this.isValidPromise = 1;\n    let deferred = new Deferred(this);\n    this.then = function(success, failure) {\n      let obj = {\n        success: typeof success === \"function\" ? success : true,\n        failure: typeof failure === \"function\" ? failure : false\n      };\n      /**\n       * `.then()` can be used against a different promise constructor for making a chained promise. \n       */\n      obj.promise = new this.constructor(function extractChain(resolve, reject) {\n        if (typeof resolve !== \"function\" || typeof reject !== \"function\") {\n          throw new TypeError(\"Not a function\");\n        }\n        obj.resolve = resolve;\n        obj.reject = reject;\n      });\n      deferred.chain.push(obj);\n      if (deferred.state !== 0) {\n        schedule(notify, deferred);\n      }\n      return obj.promise;\n    };\n    this.catch = function(failure) {\n      return this.then(undefined, failure);\n    };\n    try {\n      executor.call(undefined, function(msg) {\n        resolve.call(deferred, msg);\n      }, function(msg) {\n        reject.call(deferred, msg);\n      });\n    } catch (err) {\n      reject.call(deferred, err);\n    }\n  }\n  const PromisePrototype = extend({}, \"constructor\", Promise, false);\n  extend(Promise, \"prototype\", PromisePrototype, false);\n\n  /**\n   * Check if Promise is initialized: \n   */\n  extend(PromisePrototype, \"isValidPromise\", 0, false);\n  extend(Promise, \"resolve\", function(msg) {\n    const Constructor = this;\n\n    /**\n     * Make sure it is a valide Promise: \n     */\n    if (msg && typeof msg === \"object\" && msg.isValidPromise === 1) {\n      return msg;\n    }\n    return new Constructor(function executor(resolve, reject) {\n      if (typeof resolve !== \"function\" || typeof reject !== \"function\") {\n        throw new TypeError(\"Not a function\");\n      }\n      resolve(msg);\n    });\n  });\n  extend(Promise, \"reject\", function(msg) {\n    return new this(function executor(resolve, reject) {\n      if (typeof resolve !== \"function\" || typeof reject !== \"function\") {\n        throw new TypeError(\"Not a function\");\n      }\n      reject(msg);\n    });\n  });\n  extend(Promise, \"all\", function(arr) {\n    const Constructor = this;\n\n    /**\n     * Make sure argument is an array: \n     */\n    if (Object.prototype.toString.call(arr) !== \"[object Array]\") {\n      return Constructor.reject(new TypeError(\"Not an array\"));\n    }\n    if (arr.length === 0) {\n      return Constructor.resolve([]);\n    }\n    return new Constructor(function executor(resolve, reject) {\n      if (typeof resolve !== \"function\" || typeof reject !== \"function\") {\n        throw new TypeError(\"Not a function\");\n      }\n      const len = arr.length;\n      let msgs = new Array(len);\n      let count = 0;\n      iteratePromises(Constructor, arr, function resolver(idx, msg) {\n        msgs[idx] = msg;\n        if (++count === len) {\n          resolve(msgs);\n        }\n      }, reject);\n    });\n  });\n  extend(Promise, \"race\", function(arr) {\n    const Constructor = this;\n\n    /**\n     * Make sure argument is an array: \n     */\n    if (Object.prototype.toString.call(arr) !== \"[object Array]\") {\n      return Constructor.reject(new TypeError(\"Not an array\"));\n    }\n    return new Constructor(function executor(resolve, reject) {\n      if (typeof resolve !== \"function\" || typeof reject !== \"function\") {\n        throw new TypeError(\"Not a function\");\n      }\n      iteratePromises(Constructor, arr, function resolver(idx, msg) {\n        resolve(msg);\n      }, reject);\n    });\n  });\n\n  /**\n   * If native Promise exists in window, do not use this. \n   */\n  if (\"Promise\" in window && \"resolve\" in window.Promise && \"reject\" in window.Promise && \"all\" in window.Promise && \"race\" in window.Promise) {\n    return;\n  } else {\n\n    /**\n     * Otherwise do use this: \n     */\n    return window.Promise = Promise;\n  }\n})();\n\n/**\n * Fetch polyfill\n */\n(function() {\n\n  /**\n   *\n   * JSONP with API like fetch.\n   */\n  $.extend({\n    /* Container for jsonp methods: */\n    JSONPCallbacks: [],\n    /* JSONP method: */\n    jsonp: function(url, opts) {\n      var settings = {\n        timeout: 2000,\n        callbackName: 'callback',\n        clear: true\n      };\n      if (opts) {\n        $.extend(settings, opts);\n      }\n      /** \n       * Method to create callback: \n       */\n      function generateCallbackName() {\n        const callbackName = settings.callbackName + '_' + ($.JSONPCallbacks.length + 1);\n        $.JSONPCallbacks.push(callbackName);\n        return callbackName;\n      }\n      const callbackName = generateCallbackName();\n      /** \n       * Create and return Promise with result from request: \n       */\n      return new Promise(function(resolve, reject) {\n        let timeout = undefined;\n        window.jsonp = window.jsonp || {};\n        window.jsonp[callbackName] = function(response) {\n          resolve({\n            ok: true,\n            json: function() {\n              return Promise.resolve(response);\n            }\n          });\n          if (timeout) {\n            clearTimeout(timeout);\n          }\n        };\n        /** \n         * Create script tag: \n         */\n        const script = document.createElement('script');\n        script.async = true;\n        script.defer = true;\n        script.src = url + (url.indexOf('?') > -1 ? '&' : '?') + 'callback=jsonp.' + callbackName;\n        document.body.appendChild(script);\n        /** \n         * Delete script tag: \n         */\n        setTimeout(function() {\n          script.parentNode.removeChild(script);\n        });\n        /** \n         * Clear JSONP methods from window: \n         */\n        if (settings.clear) {\n          const pos = $.JSONPCallbacks.indexOf(callbackName);\n          $.JSONPCallbacks.splice(pos, 1);\n        }\n        /** \n         * Handle timeout: \n         */\n        timeout = setTimeout(function() {\n          reject(new Error('JSONP request to ' + url + ' timed out'));\n        }, settings.timeout);\n      });\n    },\n    /**\n     * Helper function for fetch Promises.\n     * Returns the respons as parsed JSON.\n     * Usage: .then($.json)\n     */\n    json: function(response) {\n      return response.json();\n    }\n  });\n  if (window && window.fetch) {\n    return;\n  }\n  const self = window;\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name');\n    }\n    return name.toLowerCase();\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value;\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    let list = this.map[name];\n    if (!list) {\n      list = [];\n      this.map[name] = list;\n    }\n    list.push(value);\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    const values = this.map[normalizeName(name)];\n    return values ? values[0] : null;\n  };\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || [];\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name));\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)];\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this);\n      }, this);\n    }, this);\n  };\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'));\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    });\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    const reader = new FileReader();\n    reader.readAsArrayBuffer(blob);\n    return fileReaderReady(reader);\n  }\n\n  function readBlobAsText(blob) {\n    const reader = new FileReader();\n    reader.readAsText(blob);\n    return fileReaderReady(reader);\n  }\n\n  const support = {\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob();\n        return true;\n      } catch(e) {\n        return false;\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function Body() {\n    this.bodyUsed = false;\n\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (!body) {\n        this._bodyText = '';\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        /** \n         * Only support ArrayBuffers for POST method.\n         * Receiving ArrayBuffers happens via Blobs, instead.\n         */\n      } else {\n        throw new Error('unsupported BodyInit type');\n      }\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        const rejected = consumed(this);\n        if (rejected) {\n          return rejected;\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob);\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob');\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]));\n        }\n      };\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer);\n      };\n\n      this.text = function() {\n        const rejected = consumed(this);\n        if (rejected) {\n          return rejected;\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob);\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text');\n        } else {\n          return Promise.resolve(this._bodyText);\n        }\n      };\n    } else {\n      this.text = function() {\n        const rejected = consumed(this);\n        return rejected ? rejected : Promise.resolve(this._bodyText);\n      };\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode);\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse);\n    };\n\n    return this;\n  }\n\n  /** \n   * HTTP methods whose capitalization should be normalized. \n   */\n  const methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    const upcased = method.toUpperCase();\n    return (methods.indexOf(upcased) > -1) ? upcased : method;\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    let body = options.body;\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read');\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      if (!body) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = input;\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests');\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this);\n  };\n\n  function decode(body) {\n    const form = new FormData();\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        const split = bytes.split('=');\n        const name = split.shift().replace(/\\+/g, ' ');\n        const value = split.join('=').replace(/\\+/g, ' ');\n        form.append(decodeURIComponent(name), decodeURIComponent(value));\n      }\n    });\n    return form;\n  }\n\n  function headers(xhr) {\n    const head = new Headers();\n    const pairs = xhr.getAllResponseHeaders().trim().split('\\n');\n    pairs.forEach(function(header) {\n      const split = header.trim().split(':');\n      const key = split.shift().trim();\n      const value = split.join(':').trim();\n      head.append(key, value);\n    });\n    return head;\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = options.statusText;\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    });\n  };\n\n  Response.error = function() {\n    const response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response;\n  };\n\n  const redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code');\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  self.Headers = Headers;\n  self.Request = Request;\n  self.Response = Response;\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      let request = undefined;\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input;\n      } else {\n        request = new Request(input, init);\n      }\n\n      const xhr = new XMLHttpRequest();\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL;\n        }\n\n        /* Avoid security warnings on getResponseHeader when not allowed by CORS */\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL');\n        }\n\n        return;\n      }\n\n      xhr.onload = function() {\n        const options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        const body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    });\n  };\n  self.fetch.polyfill = true;\n})();\n\n/** \n * Array extras for managing collections of objects.\n * Provides the following methods: find, findIndex,\n * pluck, difference, intersection, merge, unique.\n */\n\nif (!Array.prototype.find) {\n  $.extend(Array.prototype, {\n    find(predicate) {\n      if (this == null) {\n        throw new TypeError('Array.prototype.find called on null or undefined');\n      }\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n      let list = Object(this);\n      let length = list.length >>> 0;\n      let thisArg = arguments[1];\n      let value = undefined;\n\n      for (let i = 0; i < length; i++) {\n        value = list[i];\n        if (predicate.call(thisArg, value, i, list)) {\n          return value;\n        }\n      }\n      return undefined;\n    }\n  })\n}\nif (!Array.prototype.findIndex) {\n  $.extend(Array.prototype, {\n    findIndex(predicate) {\n      if (this === null) {\n        throw new TypeError('Array.prototype.findIndex called on null or undefined');\n      }\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n      let list = Object(this);\n      let length = list.length >>> 0;\n      let thisArg = arguments[1];\n      let value = undefined;\n\n      for (let i = 0; i < length; i++) {\n        value = list[i];\n        if (predicate.call(thisArg, value, i, list)) {\n          return i;\n        }\n      }\n      return -1;\n    }\n  })\n}\n\nif (!Array.prototype.pluck) {\n  $.extend(Array.prototype, {\n    pluck(prop) {\n      let ret = [];\n      this.forEach(function(item) {\n        if (item[prop]) {\n          ret.push(item[prop])\n        }\n      })\n      return ret;\n    }\n  })\n}\n\nif (!Array.prototype.difference) {\n  $.extend(Array.prototype, {\n    difference(a) {\n      return this.filter(function(after) {\n        return !a.reduce(function(found, before) {\n          if (!found) {\n            found = true;\n            for (let key in before) {\n              if (before.hasOwnProperty(key)) {\n                  found = found && (before[key] === after[key]);\n              }\n            }\n          }\n          return found;\n        }, false);\n      });\n    }\n  })\n}\n\nif (!Array.prototype.intersection) {\n  $.extend(Array.prototype, {\n    intersection(array) {\n      const self = this;\n      const diff = self.difference(array);\n      return this.difference(diff);\n    }\n  })\n}\n\nif (!Array.prototype.mixin) {\n  $.extend(Array.prototype, {\n    mixin(array) {\n      var self = this;\n      var ret = this.concat(array);\n      ret.unique();\n      self.splice(0);\n      ret.forEach(function(item) {\n        self.push(item);\n      })\n    }\n  })\n}\n\nif (!Array.prototype.unique) {\n  $.extend(Array.prototype, {\n    unique() {\n      const len = this.length;\n      let obj = {};\n      let ret = [];\n      for (let i = 0; i < len; i++) {\n        const arrayItem = JSON.stringify(this[i]);\n        const arrayItemValue = this[i];\n        if (obj[arrayItem] === undefined) {\n          ret.push(arrayItemValue);\n          obj[arrayItem] = 1;\n        } else {\n          obj[arrayItem]++;\n        }\n      }\n      this.length = 0;\n      const self = this;\n      ret.forEach(function(item) {\n        self.push(item);\n      })\n    }\n  })\n}\n\n/**\n * ChocolateChip-UI Model Factory.\n */\n(() => {\n  const ModelErrorMessages = {\n    en: {\n      noPropertyOrDataError: \"ChocolateChip-UI Model Error: No property or data were provided to set on the model.\",\n      noPropertyToSet: \"ChocolateChip-UI Model Error: No data was provided to set on the model's property.\",\n      noPropertyToDelete: \"ChocolateChip-UI Model Error: No property was provided to delete from the model.\",\n      noObjectToMerge: \"ChocolateChip-UI Model Error: No object was provided to merge into the model's data.\",\n      incorrectDataForMerging: \"ChocolateChip-UI Model Error: An incorrect type of data was provided for merging into the model. You must use a proper object for this model.\",\n      noObjForMixin: \"ChocolateChip-UI Model Error: No object was passed to the mixin. Please provide one.\",\n      noCallbackForModelOn: \"ChocolateChip-UI Model Error: No callback was provided for the model `on` event. Without it the event cannot work. Please provide one.\",\n      noEventForModelOn: \"ChocolateChip-UI Model Error: No event was provided for the model's `on` handler. Without an event the handler cannot work. Please provide one an event and a callback to handle the event.\",\n      noEventForModelTrigger: \"ChocolateChip-UI Model Error: No event was provided for the model trigger. Without it no event can be triggered. Please provide one.\",\n      noPosForEventDeletion: \"ChocolateChip-UI Model Error: No position was provided for the callback to be deleted from the model events. Please provide one.\",\n      noPosForPropAt: \"ChocolateChip-UI Model Error: No position was provided for getting a property on the model's collection. Please provide one.\",\n      noPropForPropAt: \"ChocolateChip-UI Model Error: No property was provided. Without one we cannot get the property from the model collection. Please provide a property and the position in the collection to get it.\",\n      noValForPropEquals: \"ChocolateChip-UI Model Error: No value was provided to use for getting an object property. Please provide one.\",\n      noPropForPropEquals: \"ChocolateChip-UI Model Error: No property or value was provided. Without them we cannot get an object whose property equals some value in this model.\",\n      noPosForSetPropAt: \"ChocolateChip-UI Model Error: No position was provided for setting a property in the model collection. Please provide one.\",\n      noValueForSetPropAt: \"ChocolateChip-UI Model Error: No value or position was provided for setting an object by property in the model collection. Please provide a value and a position.\",\n      noPropForSetPropAt: \"ChocolateChip-UI Model Error: No property, value or position were provided for setting the value of an object in the model collection. Please provide a property, value and position to set on the model.\",\n      noValueForPropEquals: \"ChocolateChip-UI Model Error: No value was provided. With a value, we cannot find a matching object in the model collection. Please provide one\",\n      noPropForPropEquals: \"ChocolateChip-UI Model Error: No property or value were provided. Without these we cannot find a matching object in the model collection. Please provide both of them.\",\n      noDataToPushToModel: \"ChocolateChip-UI Model Error: No data was provided to push onto the model collection.\",\n      noDataForShiftToModel: \"ChocolateChip-UI Model Error: No data was provided to insert at the beginning of the model collection.\",\n      noEndForModelSlice: \"ChocolateChip-UI Model Error: No end value was provided to slice the model collection. Please provide a numeral value.\",\n      noStartModelForSlice: \"ChocolateChip-UI Model Error: No start value was provided for slicing the model collection. Please provide both a start and end numeral value so that we can slice the model collection for you.\",\n      noEndForModelSplice: \"ChocolateChip-UI Model Error: No end position was provided to splice the model collection. Please provide one.\",\n      noStartForModelSplice: \"ChocolateChip-UI Model Error: No start position was provided for splicing the model collection. Please provide a start and end position for splicing the model collection.\",\n      noDataToInsertInModel: \"ChocolateChip-UI Model Error: No data was provided to insert into the model collection. Was expecting an object, but found nothing. Please provide some an object of data. Check that you have your arguments in the correct order: position first, data second.\",\n      noPosToInserInModel: \"ChocolateChip-UI Model Error: No position was provided to insert data into the model collection. Please provide a position and some data to insert in the model collection. The first argument should be a numerical value for the position, followed by the data to insert.\",\n      noPropForPlucking: \"ChocolateChip-UI Model Error: No property was provided to pluck from the model collection. Please provide a property.\",\n      noCallbackForModelFind: \"ChocolateChip-UI Model Error: No callback was provided as an argument for the find on the model collection. Please provide one.\",\n      noElementForIndexOf: \"ChocolateChip-UI Model Error: No element was provided for finding the index of an object in the model collection. Please provide one.\",\n      noDataToConcat: \"ChocolateChip-UI Model Error: No data was provided to concat to this model. Did you forget to provide the data?\",\n      noPropsForSortBy: \"ChocolateChip-UI Model Error: No property was provided for sorting. Without a property we cannot sort.\",\n      noEventForEventDeletion: \"ChocolateChip-UI Model Error: No event was provided to delete the callback for this model. Please provide both and event and an array position for the callback. An event can have more than one callback registered to it.\",\n      noCallbackForForEach: \"ChocolateChip-UI Model Error: No callback was provided for the forEach method. This is required.\",\n      noDataToReplaceInModel: \"ChocolateChip-UI Model Error: No data was provided to replace the data in the model. If you want to do so, please provide some data to complete this operation. Otherwise, if you are trying to empty the model, use `purge()`.\",\n      modelHasNoDataToReturn: \"ChocolateChip-UI Model Error: This model has no data associated with it. Perhaps you forgot to give it any data when you created it.\",\n      positionGreaterThanModelLength: \"ChocolateChip-UI Model Error: The position you provided to set a property is greater than the number of items in this model.\"\n    },\n    es: {\n      noPropertyOrDataError: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninguna propiedad ni datos para establecer el valor del modelo.\",\n      noPropertyToSet: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ningunos datos para establecer el valor de una propiedad del modelo.\",\n      noPropertyToDelete: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninguna propiedad para eliminar del modelo.\",\n      noObjectToMerge: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion objeto de fundirse en los datos del modelo.\",\n      incorrectDataForMerging: \"Hubo Error de Modelo ChocolateChip-UI: Se proporcion un tipo incorrecto de los datos con el fin de fundirse en el modelo. Debe utilizar un objeto adecuado para este modelo.\",\n      noObjForMixin: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ningn objeto al mixin. Por favor proporcione uno.\",\n      noCallbackForModelOn: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninguna funcin callback para el event `on` del modelo. Sin ella el evento no puede funcionar. Por favor proporcione una.\",\n      noEventForModelOn: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ningn evento para la funcin del evento `on` del modelo.Sin un evento la funcin no puede realizarse. Por favor proporcione un evento.\",\n      noEventForModelTrigger: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ningn evento para el gatillo del modelo. Sin l no se puede disparar ningn evento. Por favor proporcione uno.\",\n      noPosForEventDeletion: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninguna funcin callback la cual se puede eliminar de los eventos del modelo. Por favor proporcione una.\",\n      noPosForPropAt: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninguna posicin para acceder a una propiedad en la coleccin del modelo. Por favor proporcione una.\",\n      noPropForPropAt: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninugna propiedad. Sin una no se puede acceder a una propiedad en la coleccin del modelo. Por favor proporcione una propiedad y una posicin en la coleccin para acceder a ella.\",\n      noValForPropEquals: \"Hubo Error de Modelo ChocolateChip-UI: No se proporicon ningn valor para acceder a una propiedad de un objeto. Por favor proprocione uno.\",\n      noPropForPropEquals: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ningna propiedad ni valor. Sin ellos no podemos acceder a un objeto que tenga propiedad del mismo valor en este modelo.\",\n      noPosForSetPropAt: \"Hubo Error de Modelo ChocolateChip-UI: No se proprocion ninguna posicin para establecer una propiedad en la coleccin del modelo. Por favor proporcione una.\",\n      noValueForSetPropAt: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninn valor ni posicin para actualizar un objeto en la coleccin del modelo. Por favor proporcione un valor y una posicin.\",\n      noPropForSetPropAt: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionaron ninunga propiedad, valor ni posicin para establecer el valor de un objeto en la coleccin del modelo. Por favor proporcione una propiedad, valor y posicin para actualizar el objeto.\",\n      noValueForPropEquals: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ningn valor. Sin algn valor no podemos encontrar a un objeto idntico en la coleccin del modelo. Por favor proporcione uno.\",\n      noPropForPropEquals: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninguna propiedad ni valor. Sin ellos no podemos encontrar un objeto de iqual valor en la coleccin del modelo. Por favor proporcione los dos.\",\n      noDataToPushToModel: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionaron ningunos datos para aadir al fin de la coleccin del modelo.\",\n      noDataForShiftToModel: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninungos datos para agregar al inicio de la coleccin del modelo.\",\n      noEndForModelSlice: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ningn valor final para extraer de la coleccin del modelo. Por favor proporcione un valor numrico.\",\n      noStartModelForSlice: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ningn valor inicial para extraer datos de la coleccin del modelo. Por favor proporcione un valor numrico inicial as como un final para que podamos extraer los datos de la coleccin del modelo.\",\n      noEndForModelSplice: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninguna posicin final para realizar una accin de splice en la coleccin del modelo. Por favor proporcione una.\",\n      noStartForModelSplice: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninguna posicin inicial para realizar una accin de splice en la coleccin del modelo. Por favor proporcione una.\",\n      noDataToInsertInModel: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionaron ningunos datos para insertar en la coleccin del modelo. Se esperaba un objeto, pero no se encontr nada. Por favor proporcione un objeto de datos. El primer argumento debe de ser una position, seguido por los datos.\",\n      noPosToInserInModel: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninguna posicin para saber en dnde insertar los datos en la coleccin del modelo. Por favor proporcione una posicin de valor numrico y unos datos para insertar en la coleccin del modelo. El primer argumento debe de ser un valor numrico para la posicin, y entonces unos datos que insertar.\",\n      noPropForPlucking: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninguna propiedad para extraerla de la coleccin del modelo. Por favor proporcione una propiedad.\",\n      noCallbackForModelFind: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninguna funcin callback como parmetro a fin de realizar una bsqueda en la coleccin del modelo. Por favor proporcione una.\",\n      noElementForIndexOf: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ningun element a fin de averiguar el ndice de un objeto en la coleccin del modelo. Por favor proporcione una.\",\n      noDataToConcat: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionaron ningunos datos para concatenar en este modelo. Se le olvid proporcionar los datos?\",\n      noPropsForSortBy: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninguna propiedad. Sin una no se puede ordenar los datos del modelo.\",\n      noEventForEventDeletion: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ningn evento a fin de eliminar la funcin callback de este modelo. Por favor proporcione tanto un evento como una posicin en la coleccin para la callback que se quiere eliminar. Es posible que un evento tenga ms de una callback registrada a l.\",\n      noCallbackForForEach: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcion ninguna funcin callback para el mtodo forEach. sta se requiere.\",\n      noDataToReplaceInModel: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionaron ningunos datos para reemplazar los del modelo. Si es lo que usted quiere hacer, por favor proporicone unos datos para realizar esta operacin. En otro caso, si el propsito de esta operacin es el de vaciar el modelo, use `purge()`.\",\n      modelHasNoDataToReturn: \"Hubo Error de Modelo ChocolateChip-UI: Este modelo no tiene datos suyos. Quizs se le olvid asignarselos cuando lo cre.\",\n      positionGreaterThanModelLength: \"Hubo Error de Modelo ChocolateChip-UI: The position you provided is to set a property is greater than the number of items in this model. La positicin que se proporicion es ms grande que el nmero de objetos en este modelo.\"\n    }\n  };\n\n  let errors = undefined;\n  if ($('html').attr('lang') == 'en') errors = ModelErrorMessages.en;\n  if ($('html').attr('lang') == 'es') errors = ModelErrorMessages.es;\n\n  const dataStore = {\n    id: $.uuid()\n  };\n\n  class Model {\n    constructor (data) {\n      let d = undefined;\n      if ($.type(data) == 'array') {\n        d = data.slice();\n      } else if ($.type(data) == 'object') {\n        d = Object.create(data);\n      } else {\n        d = data;\n      }\n      this.id = $.uuid();\n      this[dataStore] = d;\n      this.events = {};\n      this.stopped = false;\n      this.boundViews = [];\n    }\n\n    /**\n     * This method is used internally by the model to update any views bound to it. There is never a situation where you will need to use it. It gets invoked whenever you perform an operation that changes the model's data.\n     */\n    updateBoundViews() {\n      /* No bound views, so exit: */\n      if (!this.boundViews || !this.boundViews.length) {\n        return;\n      }\n\n      /** \n       * Loop thru bound views to render: \n       */\n      this.boundViews.forEach(function(view) {\n        view.render();\n      })\n    }\n\n    /**\n     * Set model state to `stopped`. Used to determine whether to execute a model event. \n     */\n    stop() {\n     this.stopped = true\n    }\n\n    /** \n     * Set model state to run: \n     */\n    start() {\n      this.stopped = false\n    }\n\n    /** \n     * Check if model is stopped; \n     */\n    isStopped() {\n      return this.stopped\n    }\n\n    /** \n     * Get the value of an object property.\n     * This only works when the model's data is an object.\n     * If used without parameter, will return all data from model, whether object or array. \n     */\n    get(property) {\n      if (property && $.type(this[dataStore]) === 'object') {\n        return this[dataStore][property];\n      } else {\n        return this[dataStore]\n      }\n    }\n\n    /** \n     * Set the value of an object property.\n     * This only works when the model's data is an object.\n     */\n    set(property, data) {\n      if (!property) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPropertyOrDataError)\n        return;\n      } else if (!data) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPropertyToSet + property)\n        return;\n      }\n      if ($.type(this[dataStore]) === 'object') {\n        this[dataStore][property] = data;\n        this.updateBoundViews();\n      }\n    }\n\n    /** \n     * Clear out the model's data.\n     * Works with models with objects or arrays.\n     */\n    purge() {\n      if ($.type(this[dataStore]) === 'object') {\n        this[dataStore] = {}\n      } else if ($.type(this[dataStore]) === 'array') {\n        this[dataStore] = [];\n      } else {\n        this[dataStore] = undefined;\n      }\n    }\n\n    /**\n     * Merge new object into model's object.\n     * This only works when the model's data is an object.\n     * Will replace any existing properties of the same name.\n     */\n    merge(obj) {\n      if (!obj) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noObjectToMerge);\n        return;\n      } else if ($.type(obj) !== 'object') {\n        if ($.supressErrorMessages) return;\n        console.error(errors.incorrectDataForMerging)\n      } else if ($.type(this[dataStore]) === 'object') {\n        for (let key in obj) {\n          this[dataStore][key] = obj[key];\n        }\n        this.updateBoundViews();\n      }\n    }\n\n    /**\n     * Mixin new object into model's object.\n     * This only works when the model's data is an object.\n     * This will not replace any existing properties of the same name.\n     * Only new properties will be added.\n     */\n    mixin(data) {\n      if (!data) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noObjForMixin);\n        return;\n      }\n      if ($.type(this[dataStore]) === 'object') {\n        for (let key in data) {\n          /** \n           * Do not replace property if it exists: \n           */\n          if (!(key in this[dataStore])) {\n            this[dataStore][key] = data[key];\n            this.updateBoundViews();\n          }\n        }\n      } else if ($.type(this[dataStore]) === 'array') {\n        this[dataStore] = this[dataStore].concat(data).unique();\n        this.updateBoundViews();\n      }\n    }\n\n    /**\n     * Replace the data of the model with the provided data.\n     * This works for models of an object or array.\n     */\n    replace(data) {\n      if (data) {      \n      let d = undefined;\n      if ($.type(data) == 'array') {\n        d = data.slice();\n      } else if ($.type(data) == 'object') {\n        d = Object.create(data);\n      } else {\n        d = data;\n      }\n        this[dataStore] = d;\n        this.updateBoundViews(this);\n      } else {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noDataToReplaceInModel)\n      }\n    }\n\n    /**\n     * Remove a property from a model's data.\n     * Only works if the data is an object.\n     */\n    remove(prop) {\n      if (!prop) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPropertyToDelete);\n        return;\n      }\n      if ($.type(this[dataStore]) !== 'object') return;\n      delete this[dataStore][prop];\n      this.updateBoundViews();\n    }\n\n    /**\n     * Register an event on the model:\n     */\n    on(event, callback) {\n      if (this.stopped) return;\n      if (!event) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noEventForModelOn);\n        return;\n      } else if (!callback) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noCallbackForModelOn);\n        return;\n      } \n      if (!this.events[event]) {\n        this.events[event] = [callback];\n      } else {\n        this.events[event].push(callback)\n      }\n    }\n\n    /**\n     * Trigger an event on the model:\n     */\n    trigger(event, data) {\n      if (this.stopped) return;\n      if (!event) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noEventForModelTrigger);\n        return;\n      }\n      data != undefined ? data : {}\n      this.events[event].forEach(item => {\n          item(data);\n      });\n    }\n\n    /**\n     * Remove an event on the model.\n     * If no event is provided, all events will be removed.\n     */\n    off(event) {\n      if (!event) {\n        this.events = {};\n      } else {\n        delete this.events[event];\n      }\n    }\n\n    /**\n     * Array specific methods:\n     */\n\n    getPropAt(property, position) {\n      if (!property) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPropForPropAt);\n        return;\n      } else if (position === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPosForPropAt);\n        return;\n      } \n      if ($.type(this[dataStore]) === 'array') {\n        if (position < 0) {\n          const pos = this[dataStore].length + position;\n          return this[dataStore][pos][property];\n        } else if (position > this[dataStore].length) {\n          console.error(errors.noPosForPropAt);\n          return;\n        } else {\n          return this[dataStore][position][property];\n        }\n      }\n    }\n\n    setPropAt(property, value, position) {\n      if (!property) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPropForSetPropAt);\n        return;\n      } else if (value === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noValueForSetPropAt);\n        return;\n      } else if (position === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPosForSetPropAt);\n        return;\n      } else if (position > this[dataStore].length -1) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.positionGreaterThanModelLength);\n        return;\n      }\n      if ($.type(this[dataStore]) === 'array') {\n        if (position < 0) {\n          const pos = this[dataStore].length + position;\n          this[dataStore][pos][property] = value;\n          this.updateBoundViews();\n        } else {\n          this[dataStore][position][property] = value;\n          this.updateBoundViews();\n        }\n      }\n    }\n\n    push(data) {\n      if (!data) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noDataToPushToModel);\n        return;\n      }\n      if ($.type(this[dataStore]) === 'array') {\n        this[dataStore].push(data);\n        this.updateBoundViews();\n      }\n    }\n\n    pop() {\n      if ($.type(this[dataStore]) === 'array') {\n        this[dataStore].pop();\n        this.updateBoundViews();\n      }\n    }\n\n    unshift(data) {\n      if (!data) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noDataForShiftToModel);\n        return;\n      } else if ($.type(this[dataStore]) === 'array') {\n        this[dataStore].unshift(data);\n        this.updateBoundViews();\n      }\n    }\n          \n    shift() {\n      if ($.type(this[dataStore]) === 'array') {\n        this[dataStore].shift();\n        this.updateBoundViews();\n      }\n    }\n\n\n    slice(start, end) {\n      if (end === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noEndForModelSlice);\n        return;\n      } else if (start === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noStartModelForSlice);\n        return;\n      }\n      if ($.type(this[dataStore]) === 'array') {\n        return this[dataStore].slice(start, end)\n      }\n    }\n\n    splice(start, end, data) {\n      if (end === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noEndForModelSplice);\n        return;\n      } else if (start === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noStartForModelSplice);\n        return;\n      }\n      if ($.type(this[dataStore]) === 'array' && data) {\n        this[dataStore].splice(start, end, data);\n        this.updateBoundViews();\n      } else if ($.type(this[dataStore]) === 'array') {\n        if(start == null || !end) return;\n        this[dataStore].splice(start, end);\n        this.updateBoundViews();\n      }\n    }\n\n    /**\n     * Instert an object into the model's array at the designated position:\n     */\n    insert(position, data) {\n      if (data === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noDataToInsertInModel);\n        return;\n      } else if (position === undefined || $.type(position) !== 'number') {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPosToInserInModel);\n        return;\n      }\n      if ($.type(this[dataStore]) === 'array') {\n        if ($.type(position) !== 'number') return;\n        this[dataStore].splice(position, 0, data);\n        this.updateBoundViews();\n      }\n    }\n\n    /**\n     * Get an array of the provided property values in the model's array:\n     */\n    pluck(property) {\n      if (!property) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPropForPlucking);\n        return;\n      } else {\n        let ret = [];\n        if (this[dataStore] && this[dataStore].length) {\n          const len = this[dataStore].length;\n          for (let i = 0; i < len; i++) {\n            ret.push(this[dataStore][i][property]);\n          }\n          return ret;\n        }\n      }\n    }\n\n    /**\n     * \n     */\n    indexOf(element, startFrom) {\n      if (!element) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noElementForIndexOf);\n        return;\n      } else if ($.type(this[dataStore]) === 'array') {\n        return this[dataStore].indexOf(element, startFrom);\n      }\n    }\n\n    /**\n     * This method lets you pass a callback that checks for a property or other state in the array's items and return the match. It returns the first match only.\n     */\n    find(callback) {\n      if (!callback) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noCallbackForModelFind);\n        return;\n      } else if ($.type(this[dataStore]) === 'array') {\n        return this[dataStore].find(callback);\n      }\n    }\n\n    findIndex(callback) {\n      if (!callback) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noCallbackFoFindIndex);\n        return;\n      } else if ($.type(this[dataStore]) === 'array') {\n        return this[dataStore].findIndex(callback);\n      }\n    }\n\n    forEach(callback) {\n      if (!callback) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noCallbackForForEach);\n        return;\n      }\n      if (this[dataStore] && this[dataStore].length) {\n        let value = undefined;\n        let i = -1;\n        const len = this[dataStore].length;\n        while (++i < len) {\n          value = callback.call(this[dataStore][i], this[dataStore][i], i);\n          if (value === false) {\n            break;\n          }\n        }\n      }\n    }\n\n    filter(...args) {\n      if (this[dataStore] && this[dataStore].length) {\n        return this[dataStore].filter.apply(this[dataStore], args);\n      }\n    }\n\n    map(...args) {\n      if (this[dataStore] && this[dataStore].length) {\n        return this[dataStore].map.apply(this[dataStore], args);\n      }\n    }\n\n    reverse() {\n      if (this[dataStore] && this[dataStore].length) {\n        this[dataStore].reverse();\n        this.updateBoundViews();\n      }\n    }\n\n    sort(compareFunction) {\n      if (this[dataStore] && this[dataStore].length) {\n        if (compareFunction) {\n          this[dataStore].sort(compareFunction);\n          this.updateBoundViews();\n        } else {\n          this[dataStore].sort();\n          this.updateBoundViews();\n        }\n      }\n    }\n\n    /**\n     * Sort the model's array based on passed properties. By default the ordering is ascendeing. By prefixing the property with a hyphen, the order will be descending. You can use more than one property separated by commas.\n     */\n    orderBy(...props) {\n      if (!props || !props.length) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPropsForSortBy);\n        return;\n      }\n      const orderBy = (args) => {\n        return (a, b) => {\n          const sortByProperty = (property) => {\n            /** \n             * Default sort order: \n             */\n            let sortOrder = 1;\n            /** \n             * If user provided property with \"-\" prefix, make sort order descending: \n             */\n            if (property[0] === \"-\") {\n              sortOrder = -1;\n              /** \n               * Extract property from hyphen prefix: \n               */\n              property = property.substr(1);\n            }\n            /** \n             * Sort objects by provided properties:\n             */\n            return (a, b) => {\n              const result = (a[property] < b[property]) ? -1 : (a[property] > b[property]) ? 1 : 0;\n              return result * sortOrder;\n            };\n          };\n\n          /** \n           * Loop over all properties and sort objects based on those properties: \n           */\n          let i = 0;\n          let result = 0;\n          const numberOfProperties = props.length;\n          while (result === 0 && i < numberOfProperties) {\n            /** \n             * Use the private function to compare two values: \n             */\n            result = sortByProperty(props[i])(a, b);\n            i++;\n          }\n          return result;\n        };\n      };\n      if (this[dataStore] && this[dataStore].length) {\n        this[dataStore].sort(orderBy.apply(null, props));\n        this.updateBoundViews();\n      }\n    }\n\n    /**\n     * Concat and array of data to the model's array.\n     * After concating, it will remove any duplicates.\n     */\n    concat(data) {\n      if (!data) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noDataToConcat);\n        return;\n      }\n      if ($.type(this[dataStore]) === 'array') {\n        let temp = this[dataStore].concat(data);\n        this[dataStore] = temp;\n        this.updateBoundViews();\n      }\n    }\n\n    /**\n     * Remove any duplicates from the model's array:\n     */\n    unique() {\n      if ($.type(this[dataStore]) === 'array') {\n        let temp = this[dataStore].unique();\n        this[dataStore] = temp;\n        this.updateBoundViews();\n      }\n    }\n\n    /**\n     * Get an object out of the model's array based on its index:\n     */\n    eq(position) {\n      if ($.type(this[dataStore]) === 'array') {\n        return this[dataStore][position]\n      }\n    } \n\n    /**\n     * Get the length of the model's array.\n     * Only works if the data is an array.\n     */\n    size() {\n      if ($.type(this[dataStore]) === 'array') {\n        return this[dataStore].length\n      }\n    }\n  }\n\n  $.extend({\n    Model: function(data) {\n      return new Model(data)\n    }\n  });\n\n})();\n\n/**\n * Check environment properties.\n */\n$.extend($, {\n  isiPhone: /iphone/img.test(navigator.userAgent),\n  isiPad: /ipad/img.test(navigator.userAgent),\n  isiPod: /ipod/img.test(navigator.userAgent),\n  isiOS: /ip(hone|od|ad)/img.test(navigator.userAgent),\n  isAndroid: (/android/img.test(navigator.userAgent) && !/trident/img.test(navigator.userAgent)),\n  isTouchEnabled: !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && 'createTouch' in document,\n  isOnline: navigator.onLine,\n  isStandalone: navigator.standalone || false,\n  isWebkit: (!/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /webkit/img.test(navigator.userAgent)),\n  isDesktop: (!/mobile/img.test(navigator.userAgent)),\n  isMobile: (/mobile/img.test(navigator.userAgent)),\n  isSafari: (!/edge/img.test(navigator.userAgent) && !/Chrome/img.test(navigator.userAgent) && /Safari/img.test(navigator.userAgent) && !/android/img.test(navigator.userAgent)),\n  isChrome: !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /Chrome/img.test(navigator.userAgent) && !((/samsung/img.test(navigator.userAgent) || /Galaxy Nexus/img.test(navigator.userAgent) || /HTC/img.test(navigator.userAgent) || /LG/img.test(navigator.userAgent)) && !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /android/i.test(navigator.userAgent) && /webkit/i.test(navigator.userAgent)),\n  isNativeAndroid: ((/samsung/img.test(navigator.userAgent) || /Galaxy Nexus/img.test(navigator.userAgent) || /HTC/img.test(navigator.userAgent) || /\\sLG/img.test(navigator.userAgent)) && !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /android/i.test(navigator.userAgent) && /webkit/i.test(navigator.userAgent) && (/Android 3/i.test(userAgentHTC) || /Android 4/i.test(navigator.userAgent)))\n});\n\n/**\n * ChocolateChip-UI Widget - Setup.\n */\n$(function () {\n  if (!/(mobile)|(ios)|(android)/img.test(navigator.userAgent)) {\n    $('body').addClass('isDesktop');\n  }\n  if ($('link[href*=ios]')[0]) {\n    $('body').addClass('themeIsiOS');\n    $.theme = 'ios';\n  } else if ($('link[href*=android]')[0]) {\n    $('body').addClass('themeIsAndroid');\n    $.theme = 'android';\n  }\n  $.dir = 'ltr';\n  if ($('html').attr('dir') === 'rtl') {\n    $.dir = 'rtl'\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Activity Indicator.\n */\n$.fn.extend({\n  /**\n   * Setup activitiy indicator:\n   */\n  Busy: function(options) {\n    let settings = {\n      size: 40,\n      color: '#666',\n    };\n    $.extend(settings, options);\n\n    const $this = this;\n    let spinner = undefined;\n    /**\n     * For iOS:\n     */\n    const iOSBusy = () => {\n      let small = undefined;\n      /**\n       * Smaller busy indicator (less tines):\n       */\n      if (parseInt(settings.size, 10) < 30) {\n        spinner = `<svg class='chui-busy small' width='${ settings.size }px' height='${ settings.size }px' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' preserveAspectRatio='xMidYMid'>  \n  <g x='0' y='0' width='100' height='100' fill='none' class='bk'>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(0 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(45 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(90 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(135 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(180 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(225 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(270 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(315 50 50) translate(0 -30)'></rect>\n  </g>\n</svg>`;\n        $this.append(spinner);\n      /**\n       * Larger busy indicator (more tines);\n       */\n      } else {\n        spinner = `<svg class='chui-busy' width='${ settings.size }px' height='${ settings.size }px' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' preserveAspectRatio='xMidYMid' class='uil-default'> \n  <g x='0' y='0' width='100' height='100' fill='none'>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(0 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(30 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(60 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(90 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(120 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(150 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(180 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(210 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(240 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(270 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(300 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(330 50 50) translate(0 -30)'></rect>\n  </g>\n</svg>`;\n        $this.append(spinner);\n      }\n    };\n\n    /**\n     * For Android:\n     */\n    const androidBusy = () => {\n      settings.id = $.uuid();\n      let androidActivityIndicator = null;\n      if ($.isNativeAndroid) {\n        androidActivityIndicator = `<svg class=\"chui-busy\" version=\"1.1\" id=\"${ settings.id }\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\" enable-background=\"new 0 0 100 100\" xml:space=\"preserve\">\n  <g>\n    <path fill=\"none\" stroke=\"${ settings.color }\" stroke-width=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M74.2,65c2.7-4.4,4.3-9.5,4.3-15c0-15.7-12.8-28.5-28.5-28.5S21.5,34.3,21.5,50c0,5.5,1.6,10.6,4.3,15\"/>\n  </g>\n  <polyline fill=\"none\" stroke=\"${ settings.color }\" stroke-width=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"89.4,56.1 74.3,65 65.4,49.9 \"/>\n</svg>`;\n\n        $this.append(androidActivityIndicator);\n        return;\n      } else {\n        androidActivityIndicator = `<svg id=\"${ settings.id }\" class=\"chui-busy\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\"><circle stroke=\"url(#SVGID_1_)\" cx=\"50\" cy=\"50\" r=\"28.5\"/></svg>`;\n        $this.append(androidActivityIndicator);\n        $this.addClass('hasActivityIndicator');\n        if (options.color) {\n          $('#' + settings.id).find('circle').css('stroke', options.color);\n        }\n      }\n      $('#' + settings.id).css({\n        'height': settings.size + 'px',\n        'width': settings.size + 'px'\n      });\n    };\n\n    /**\n     * Create Busy control for appropriate OS:\n     */\n    if ($.theme === 'android') {\n      androidBusy(options);\n    } else if ($.theme === 'ios') {\n      iOSBusy(options);\n    }\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Screen Blocker.\n */\n$.extend({\n\n  /**\n   * Cover screen:\n   */\n  Block: opacity => {\n    opacity = opacity ? ` style='opacity:${ opacity };'` : ` style='opacity: .5;'`;\n    if ($('.mask')[0]) return;\n    $('body').append(`<div class='mask'${ opacity }></div>`);\n    $('screen.current').attr('aria-hidden', true);\n  },\n\n  /**\n   * Uncover screen:\n   */\n  Unblock: () => {\n    $('.mask').remove();\n    $('screen.current').removeAttr('aria-hidden');\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Button functions.\n */\nconst chuiBackButtonSVG = `<svg id=\"chui-back-button-svg\" width=\"100px\" height=\"100px\" viewBox=\"0 0 100 100\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n  <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n    <g id=\"chui-back-arrow\" stroke=\"#979797\">\n      <path d=\"M50.7822487,4.05872022 L5.60302012,49.1913445 L50.4625593,94.6779982\" id=\"back-arrow-bracket\"></path>\n      <path d=\"M6,49.368351 L95.8300018,49.368351\" id=\"back-arrow-shaft\"></path>\n    </g>\n  </g>\n</svg>`;\n\n$.fn.extend({\n  decorateBackButton: function() {\n    if ($(this).hasClass('back') || $(this).hasClass('backTo')) {\n      this.forEach(button => {\n        const buttonText = $(button).text();\n        $(button).html(`<span>${ buttonText }</span>`);\n        $(button).prepend(chuiBackButtonSVG);\n      });\n    }\n  }\n});\n$(function () {\n  $('.back').decorateBackButton();\n  $('.backTo').decorateBackButton();\n});\n\n/**\n * ChocolateChip-UI Widget - Center Elements.\n */\n$.fn.extend({\n  /**\n   * Center an Element on Screen\n   */\n  center: function(position) {\n    if (!this[0]) return;\n    const $this = $(this);\n    const parent = $this.parent();\n    if (position) {\n      $(this.css('position', position));\n    } else if ($this.css('position') === 'absolute') {\n      position = 'absolute';\n    } else {\n      position = 'relative';\n    }\n    let height = undefined;\n    let width = undefined;\n    let parentHeight = undefined;\n    let parentWidth = undefined;\n    if (position === 'absolute') {\n      height = $this[0].clientHeight;\n      width = $this[0].clientWidth;\n      parentHeight = parent[0].clientHeight;\n      parentWidth = parent[0].clientWidth;\n    } else {\n      height = parseInt($this.css('height'), 10);\n      width = parseInt($this.css('width'), 10);\n      parentHeight = parseInt(parent.css('height'), 10);\n      parentWidth = parseInt(parent.css('width'), 10);\n      $(this).css({\n        'margin-left': 'auto',\n        'margin-right': 'auto'\n      });\n    }\n    let tmpTop = undefined;\n    let tmpLeft = undefined;\n    if (parent[0].nodeName === 'body') {\n      tmpTop = ((window.innerHeight / 2) + window.pageYOffset) - height / 2 + 'px';\n      tmpLeft = ((window.innerWidth / 2) - (width / 2) + 'px');\n    } else {\n      tmpTop = (parentHeight / 2) - (height / 2) + 'px';\n      tmpLeft = (parentWidth / 2) - (width / 2) + 'px';\n    }\n    if (position !== 'absolute') tmpLeft = 0;\n    $this.css({\n      left: tmpLeft,\n      top: tmpTop\n    });\n    return $this;\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Edit List.\n */\n$.extend({\n  /**\n   * Setup an editable list, enabling reording of items and deletion:\n   */\n  EditList: function(options) {\n    /**\n      options = {\n        editLabel: labelName,\n        doneLabel: labelName,\n        deleteLabel: labelName,\n        cancelLabel: cancelName,\n        callback: callback (Tapping \"Done\" fires this),\n        deletable: false (no deletables),\n        movable: false (no movables),\n        model: myModel,\n        modelProp: 'id',\n        view: myView\n      }\n    */\n    const settings = {\n      editLabel: 'Edit',\n      doneLabel: 'Done',\n      deleteLabel: 'Delete',\n      cancelLabel: 'Cancel',\n      callback: $.noop,\n      deletable: true,\n      movable: true,\n      model: undefined,\n      modelProp: 'id',\n      view: undefined\n    };\n\n    let __data = [];\n    let __editMade = false;\n    if (!options) {\n      return;\n    }\n    $.extend(settings, options);\n    const __model = settings.model || false;\n\n    if (!settings.deletable && !settings.movable) {\n      return;\n    }\n    const __view = settings.view;\n\n    if (options) $.extend(settings, options);\n\n    let deleteButton = undefined;\n    let editButton = undefined;\n    let deletionIndicator = undefined;\n    let button = undefined;\n    let dispelDeletable = 'swiperight';\n    let enableDeletable = 'swipeleft';\n    let moveUpIndicator = undefined;\n    let moveDownIndicator = undefined;\n    let element = settings.element;\n    let deleteLabel = undefined;\n\n    let dir = $('html').attr('dir');\n    dir = dir ? dir.toLowerCase() : '';\n    if (dir === 'rtl') {\n      dispelDeletable = 'swipeleft';\n      enableDeletable = 'swiperight';\n    }\n\n    if (settings.deletable) {\n      deleteButton = \n        `<button class=\"delete\">\n          <label>${ settings.deleteLabel }</label>\n          <svg width=\"27px\" height=\"30px\" viewBox=\"0 0 27 30\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <g id=\"delete-icon\" fill=\"#3A3A3A\">\n                <g transform=\"translate(3.000000, 1.000000)\">\n                  <path d=\"M1,6 L20,6 L20,24.9986131 C20,26.6562333 18.6639569,28 16.9998779,28 L4.00012207,28 C2.3432004,28 1,26.6569187 1,24.9986131 L1,6 Z M4,9 L5,9 L5,25 L4,25 L4,9 Z M8,9 L9,9 L9,25 L8,25 L8,9 Z M12,9 L13,9 L13,25 L12,25 L12,9 Z M16,9 L17,9 L17,25 L16,25 L16,9 Z\" id=\"can\"></path><path d=\"M0,4.96611425 L0,1.67759301 L5.1776507,1.7511163 L6.482399,0 L14.5847825,0 L15.8789491,1.7511163 L21,1.7511163 L21,4.9447157 L0,4.96611425 L0,4.96611425 Z\" id=\"lid\"></path>\n                </g>\n              </g>\n            </g>        \n          </svg>      \n        </button>`;\n      deletionIndicator = \n        `<span class=\"deletion-indicator\">\n          <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <g id=\"deletion-indicator\">\n                <g id=\"ios-indicator\">\n                  <circle id=\"ios-circle\" fill=\"#FF0000\" cx=\"10\" cy=\"10\" r=\"10\"></circle>\n                  <path d=\"M3.5,10 L16.5,10\" id=\"ios-bar\" stroke=\"#FFFFFF\" stroke-width=\"2\" stroke-linecap=\"square\"></path>\n                </g>\n                <path d=\"M2,13 L9.9294326,16.8406135 L17.1937075,1.90173332\" id=\"checkmark\" stroke=\"#FA0303\" stroke-width=\"2\"></path>\n              </g>\n            </g>\n          </svg>\n        </span>`;\n      $(element).addClass('deletable');\n    }\n    if (settings.movable) {\n      moveUpIndicator = \n        `<span class='move-up'>\n          <svg width=\"22px\" height=\"22px\" viewBox=\"0 0 22 22\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <g id=\"move-indicator\">\n                <circle id=\"circle\" cx=\"11\" cy=\"11\" r=\"10\"></circle>\n                <path d=\"M4,13.9645823 L10.9316382,5.94630319 L17.795297,13.9073417\" id=\"move-up\"></path>\n              </g>\n            </g>\n          </svg>\n        </span>`;\n      moveDownIndicator = \n        `<span class='move-down'>\n          <svg width=\"22px\" height=\"22px\" viewBox=\"0 0 22 22\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <g id=\"move-indicator\">\n                <circle id=\"circle\" cx=\"11\" cy=\"11\" r=\"10\"></circle>\n                <path d=\"M4.0421421,7.98172087 L10.912246,16 L17.7960071,8.1103389\" id=\"move-down\"></path>\n              </g>\n            </g>\n          </svg>\n        </span>`;\n      $(element).addClass('editable');\n    }\n\n    editButton = `<button class=\"edit\">${ settings.editLabel }</button>`;\n    const screen = $(element).closest('screen');\n    const nav = $(element).closest('screen').find('nav');\n    nav.append(editButton);\n    nav.find('.back').hide();\n    nav.prepend(`<button class=\"cancel\">${ settings.cancelLabel }</button>`);\n    nav.find('.cancel').hide();\n    $.AdjustNavbarLayout($(element).closest('screen'));\n\n    button = $(element).closest('screen').find('.edit');\n    $(element).find('li').forEach(function (ctx) {\n      if (!$(ctx).has('.deletion-indicator').length) {\n        if (settings.deletable) {\n          $(ctx).prepend(deletionIndicator);\n        }\n        if (settings.movable) {\n          $(ctx).append(moveDownIndicator);\n          $(ctx).append(moveUpIndicator);\n        }\n        if (settings.deletable) {\n          $(ctx).append(deleteButton);\n        }\n      }\n    });\n\n    /**\n     * Callback to setup indicator interactions:\n     */\n    const makeEditable = function makeEditable(callback, list, button) {\n      $(function () {\n\n        /**\n         * Check for view and update its template:\n         */\n        if (__view) {\n          const temp = $('<div></div>');\n          temp[0].insertAdjacentHTML('afterbegin', __view.getTemplate());\n          temp.find('li').prepend(deletionIndicator);\n          temp.find('li').append(moveDownIndicator);\n          temp.find('li').append(moveUpIndicator);\n          const template = temp.html();\n          __view.setTemplate(template);\n        }\n\n        button.on('tap', function () {\n          const $this = this;\n\n          /**\n           * When button is in \"Edit\" state:\n           */\n          if (this.classList.contains('edit')) {\n            $(list).addClass('editing');\n            setTimeout(function () {\n              $this.classList.remove('edit');\n              $this.classList.add('done');\n              $($this).text(settings.doneLabel);\n              $(list).addClass('showIndicators');\n              $($this).siblings('.back').hide();\n              $($this).siblings('.cancel').show();\n              $.AdjustNavbarLayout(screen);\n            });\n\n            /**\n             * When button is in \"Done\" state:\n             */\n          } else if (this.classList.contains('done')) {\n            $(list).removeClass('editing');\n            /**\n             * Execute callback if edit was performed:\n             */\n            setTimeout(function () {\n              $this.classList.remove('done');\n              $this.classList.add('edit');\n              $($this).text(settings.editLabel);\n              $(list).removeClass('showIndicators');\n              $(list).find('li').removeClass('selected');\n              $($this).siblings('.cancel').hide();\n              if (settings.deletable) {\n                if ($(list).find('button.delete')[0]) return;\n                $(list).find('li').append(deleteButton);\n              }\n              $.AdjustNavbarLayout(screen);\n            });\n            if (!__editMade) return;\n            const movedItems = [];\n            $(list).find('li').forEach(function (ctx, idx) {\n              __data.push($(ctx).attr('data-id'));\n            });\n\n            /**\n             * Reorder model based on user choice:\n             */\n            if (__model) {\n              (function () {\n                let __newarray = [];\n                __data.filter(function (item) {\n                  const ret = __model.filter(function (b) {\n                    return b[settings.modelProp] == item;\n                  });\n                  __newarray.push(ret[0]);\n                });\n                __data = [];\n                __model.purge();\n                __model.replace(__newarray, false);\n                __newarray = [];\n              })();\n            }\n            if ($(list).data('list-edit')) {\n              callback.call(callback, __model);\n            }\n            __editMade = false;\n          }\n          setTimeout(function () {\n            $.AdjustNavbarLayout(screen);\n          });\n        });\n\n        /**\n         * Handle deletion indicators:\n         */\n        $(list).off('tap', '.deletion-indicator');\n        $(list).on('tap', '.deletion-indicator', function () {\n          if ($(this).closest('li').hasClass('selected')) {\n            $(this).closest('li').removeClass('selected');\n            return;\n          } else {\n            $(this).closest('li').addClass('selected');\n          }\n        });\n\n        /**\n         * Handle swipe gestures:\n         */\n        $(list).on(dispelDeletable, 'li', function () {\n          /**\n           * If no deletables, disable swipes:\n           */\n          if (!settings.deletable) return;\n          /**\n           * Else reveal delete button:\n           */\n          $(this).removeClass('selected');\n        });\n\n        $(list).on(enableDeletable, 'li', function () {\n          /**\n           * If no deletables, disable swipes:\n           */\n          if (!settings.deletable) return;\n          /**\n           * Else reveal delete button:\n           */\n          $(this).addClass('selected');\n        });\n\n        /**\n         * Move list item up:\n         */\n        $(list).on('tap', '.move-up', function (e) {\n          const _this = this;\n          __editMade = true;\n\n          let item = $(this).closest('li');\n          if (item.is('li:first-child')) {\n            return;\n          } else {\n            (function () {\n              /**\n               * Mark list as edited:\n               */\n              $(list).data('list-edit', true);\n              item = $(_this).closest('li');\n              const prev = item.prev();\n              /**\n               * Clone the items to replace the transitioned ones alter:\n               */\n              const itemClone = item.clone();\n              const prevClone = prev.clone();\n              const height = item[0].offsetHeight;\n              item.css({\n                \"-webkit-transform\": 'translate3d(0,-' + height + 'px,0)',\n                \"transform\": 'translate3d(0,-' + height + 'px,0)'\n              });\n\n              prev.css({\n                \"-webkit-transform\": 'translate3d(0,' + height + 'px,0)',\n                \"transform\": 'translate3d(0,' + height + 'px,0)'\n              });\n              setTimeout(function () {\n                $.replace(prevClone, item);\n                $.replace(itemClone, prev);\n                /**\n                 * Remove Android ripple from moved list item.\n                 */\n                $('ripple-sheath').remove();\n              }, 250);\n            })();\n          }\n        });\n\n        /**\n         * Move list item down:\n         */\n        $(list).on('tap', '.move-down', function (e) {\n          __editMade = true;\n          const item = $(this).closest('li');\n          const next = item.next();\n          if (item.is('li:last-child')) {\n            return;\n          } else {\n            (function () {\n              /**\n               * Clone the items to replace the transitioned ones alter:\n               */\n              const itemClone = item.clone();\n              const nextClone = next.clone();\n              /**\n               * Mark list as edited:\n               */\n              $(list).data('list-edit', true);\n\n              const height = item[0].offsetHeight;\n              item.css({\n                '-webkit-transform': 'translate3d(0,' + height + 'px,0)',\n                transform: 'translate3d(0,' + height + 'px,0)'\n              });\n              next.css({\n                \"-webkit-transform\": 'translate3d(0,-' + height + 'px,0)',\n                \"transform\": 'translate3d(0,-' + height + 'px,0)'\n              });\n              setTimeout(function () {\n                \n                $.replace(nextClone, item);\n                $.replace(itemClone, next);\n                /**\n                 * Remove Android ripple from moved list item.\n                 */\n                $('ripple-sheath').remove();\n              }, 250);\n            })();\n          }\n        });\n\n        /**\n         * Handle deletion of list item:\n         */\n        $(list).on('tap', '.delete', function () {\n          const $this = this;\n          __editMade = true;\n          const listItem = $(this).parent();\n\n          /**\n           * Mark list as edited:\n           */\n          $(list).data('list-edit', true);\n          let direction = '-1200%';\n          if ($('html').attr('dir') === 'rtl') direction = '1000%';\n          $(this).siblings().css({\n            '-webkit-transform': 'translate3d(' + direction + ',0,0)',\n            '-webkit-transition': 'all 1s ease-out',\n            'transform': 'translate3d(' + direction + ',0,0)',\n            'transition': 'all 1s ease-out'\n          });\n\n          setTimeout(function () {\n            listItem.remove();\n          }, 500);\n        });\n\n        /**\n         * Cancel edits:\n         */\n        nav.find('.cancel').on('tap', function () {\n          __editMade = false;\n          nav.find('.back').show();\n          $(this).hide();\n          __view.render();\n          nav.find('.done').addClass('edit').removeClass('done').text(settings.editLabel);\n          $(list).removeClass('showIndicators');\n          $(list).find('li').removeClass('selected');\n          $(this).hide();\n          if (settings.deletable) {\n            $(list).find('li').append(deleteButton);\n          }\n        });\n      });\n    };\n    /**\n     * Initialize the editable list:\n     */\n    makeEditable(settings.callback, element, button);\n\n    return {\n      getModel: function getModel() {\n        return __model;\n      },\n\n      getView: function getView() {\n        return __view;\n      }\n    };\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Multi-Select List.\n */\n$.extend({\n  /**\n   * Setup a multi-select list:\n   */\n  MultiSelectList: options => {\n    if (!options || !options.element) return;\n    let settings = {\n      element: undefined,\n      selected: [],\n      name: $.uuid() + '[]',\n      callback: $.noop,\n      model: undefined\n    };\n    let __selection = [];\n    $.extend(settings, options);\n    let selections = settings.selected;\n    const name = settings.name;\n    const list = $(settings.element);\n    list.addClass('multi-select-list');\n    list.find('li').forEach(function(ctx, idx) {\n      let value = ctx.getAttribute(\"data-select\") !== null ? ctx.getAttribute(\"data-select\") : \"\";\n      selections.forEach(function(item) {\n        if (item.index === idx) {\n          __selection.push({\n            index: idx,\n            value: value\n          });\n        }\n      });\n\n      ctx.setAttribute('role', 'checkbox');\n      $(ctx).removeClass('selected').find('input').removeAttr('checked');\n      $(ctx).prepend(`<aside>\n        <span class=\"multi-selection-indicator\">\n          <svg width=\"30px\" height=\"30px\" viewBox=\"0 0 30 30\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"multi-select-icon\" stroke=\"#979797\">\n              <g id=\"multi-select-circle-+-multi-select-checkmark\" transform=\"translate(2.000000, 2.000000)\">\n                <circle id=\"multi-select-circle\" cx=\"13\" cy=\"13\" r=\"13\"></circle>\n                <path d=\"M4.71521456,15.9877529 L13.0000002,20.7028494 L19.977049,5.70284941\" id=\"multi-select-checkmark\"></path>\n                </g>\n              </g>\n            </g>\n          </svg>\n        </span>\n      </aside>`);\n      $(ctx).append(`<input type=\"checkbox\" name=\"${ name }\" value=\"${ value }\">`);\n      if (selections.length) {\n        selections.forEach(function(sel) {\n          if (sel === idx) {\n            ctx.setAttribute('aria-checked', 'true');\n            ctx.classList.add('selected');\n            $(ctx).find('input').prop('checked', true).attr('value', value);\n            __selection.push({\n              index: sel,\n              value: value\n            });\n          }\n        });\n\n      }\n    });\n\n    list.on('tap', 'li', function() {\n      const item = $(this);\n      if (item.hasClass('selected')) {\n        item.removeClass('selected').removeAttr('aria-checked');\n        item.find('input').removeProp('checked');\n        let dataObj = {\n          index: item.index(),\n          value: item.attr('data-select')\n        }\n        let pos = undefined;\n        __selection.forEach(function(item, idx) {\n          if (item.index === dataObj.index && item.value === dataObj.value) {\n            pos = idx;\n          }\n        });\n        __selection.splice(pos, 1);\n\n        settings.callback.apply(this, arguments);\n      } else {\n        __selection.push({\n          index: item.index(),\n          value: item.attr('data-select')\n        });\n        __selection.unique();\n        item.addClass('selected');\n        item.attr('aria-checked', true);\n        item.find('input').prop('checked', true);\n\n        settings.callback.apply(this, arguments);\n      }\n\n    });\n\n    return {\n      val: () => __selection,\n      getSelection: () => __selection\n    };\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Adjust Navbar for iOS.\n */\n$(() => {\n\n  /**\n   * Method to center H1 in Navbar.\n   * Check on widths of siblings:\n   */\n  $.extend({\n\n    /**\n     * Track whether to add a global nav for styling navbars.\n     */\n    globalNav: false,\n\n    AdjustNavbarLayout: function(screen) {\n      if (!$('link[href*=ios]')[0]) return;\n      if (document.body && document.body.hasAttribute('nocenterheader')) {\n        return;\n      }\n      screen = $(screen);\n      if (!screen[0]);\n      const h1 = screen.find('h1');\n      if (h1.hasClass('do-not-adjust')) return;\n      const siblings = h1.siblings();\n      let whichSide = undefined;\n      let oppositeSide = undefined;\n      const rtl = $('html').attr('dir') === 'rtl';\n      let amount = 0;\n      let hidden = false;\n      let visibleSibling = undefined;\n\n      const calculateLongest = function calculateLongest(a, b) {\n        let widthA = a[0].clientWidth;\n        let widthB = b[0].clientWidth;\n        if (!widthA) {\n          widthA = 0;\n          whichSide = 'margin-right';\n          oppositeSide = 'margin-left';\n          if (rtl) {\n            whichSide = 'margin-left';\n            oppositeSide = 'margin-right';\n          }\n        }\n        if (!widthB) {\n          widthB = 0;\n          whichSide = 'margin-left';\n          oppositeSide = 'margin-right';\n          if (rtl) {\n            whichSide = 'margin-right';\n            oppositeSide = 'margin-left';\n          }\n        }\n        if (widthB > widthA) {\n          whichSide = 'margin-left';\n          oppositeSide = 'margin-right';\n          if (rtl) {\n            whichSide = 'margin-right';\n            oppositeSide = 'margin-left';\n          }\n          amount = widthB - widthA;\n        } else if (widthA > widthB) {\n          whichSide = 'margin-right';\n          oppositeSide = 'margin-left';\n          if (rtl) {\n            whichSide = 'margin-left';\n            oppositeSide = 'margin-right';\n          }\n          amount = widthA - widthB;\n        } else {\n          amount = 0;\n        }\n      };\n\n      function handleOneSibling(sib) {\n        const sibling = sib || h1.siblings();\n        amount = sibling[0].clientWidth;\n        if (sibling.is(':first-child')) {\n          whichSide = 'margin-right';\n          oppositeSide = 'margin-left';\n          if (rtl) {\n            whichSide = 'margin-left';\n            oppositeSide = 'margin-right';\n          }\n        } else if (sibling.is(':last-child')) {\n          whichSide = 'margin-left';\n          oppositeSide = 'margin-right';\n          if (rtl) {\n            whichSide = 'margin-right';\n            oppositeSide = 'margin-left';\n          }\n        }\n      }\n\n      /**\n       * If one sibling:\n       */\n      if (siblings.length === 1) {\n        handleOneSibling();\n\n        /**\n         * If two siblings:\n         */\n      } else if (siblings.length === 2) {\n          siblings.forEach(function (item) {\n            if ($(item).css('display') === 'none') {\n              hidden = true;\n            } else {\n              visibleSibling = $(item);\n            }\n          });\n          if (hidden) {\n            handleOneSibling(visibleSibling);\n          } else {\n            calculateLongest(siblings.eq(0), siblings.eq(1));\n          }\n\n          /**\n           * H1 is alone:\n           */\n      } else {\n        whichSide = 'margin-left';\n        oppositeSide = 'margin-right';\n        amount = 0;\n      }\n      let props = {};\n      props[whichSide] = amount;\n      props[oppositeSide] = 0;\n      let sibwidth = 0;\n      if (siblings.size()) {\n        siblings.forEach(function (item) {\n          sibwidth += $(item)[0].clientWidth;\n        });\n      }\n      let headerWidth = screen.find('nav').width() / 2;\n      if (sibwidth + 20 > headerWidth) {\n        h1.css({\n          'margin-left': 0,\n          'margin-right': 0\n        });\n      } else {\n        h1.css(props);\n      }\n    }\n  });\n  setTimeout(function() {\n    if (!$('#globalNav')[0]) {\n      $('body').prepend('<nav id=\"globalNav\"></nav>')\n    }\n    $('screen').forEach(function(screen) {\n      $.AdjustNavbarLayout(screen);\n    });\n  });\n});\n\n/**\n * ChocolateChip-UI Widget - Navigation Module.\n */\n\n$(() => {\n  /**\n   * Private variable to track navigation state:\n   */\n  let isNavigating = false;\n  /**\n   * get screen by id:\n   */\n  const getScreen = screen => $('#' + screen);\n\n  /**\n   * Handle state of screens:\n   */\n  const makeScreenCurrent = screen => {\n    screen = $(screen);\n    screen.addClass('current');\n    screen.removeClass('previous');\n    screen.removeClass('next');\n  };\n  const makeScreenPrevious = screen => {\n    screen = $(screen);\n    screen.removeClass('current');\n    screen.removeClass('next');\n    screen.addClass('previous');\n  };\n  const makeScreenNext = screen => {\n    screen = $(screen);\n    screen.removeClass('current');\n    screen.removeClass('previous');\n    screen.addClass('next');\n  };\n\n  $.extend({\n\n    /**\n     * Navigate to Specific Article\n     */\n    GoToScreen: destination => {\n      if ($.isNavigating) return;\n      $.isNavigating = true;\n      setTimeout(function () {\n        $.isNavigating = false;\n      }, 500);\n      $.ChuiRoutes.push(destination);\n      const currentScreen = $.screens.getCurrent();\n      const destinationScreen = function () {\n        let temp = undefined;\n        const regex = /:/img;\n        temp = regex.test(destination) ? destination.split(':')[0] : destination;\n        return getScreen(temp);\n      }();\n      if (currentScreen[0]) currentScreen[0].scrollTop = 0;\n      if (destinationScreen[0]) destinationScreen[0].scrollTop = 0;\n      makeScreenPrevious(currentScreen);\n      makeScreenCurrent(destinationScreen);\n      $.Router.dispatch(destination);\n    },\n\n    /**\n     * Navigate Back to Previous Article\n     */\n    GoBack: () => {\n      if ($.isNavigating) return;\n      $.isNavigating = true;\n      const currentScreen = $.screens.getCurrent();\n      $.ChuiRoutes.pop();\n      const destination = $.ChuiRoutes[$.ChuiRoutes.length - 1];\n      const destinationScreen = function () {\n        let temp = undefined;\n        const regex = /:/img;\n        temp = regex.test(destination) ? destination.split(':')[0] : destination;\n        return getScreen(temp);\n      }();\n      if (currentScreen[0]) currentScreen[0].scrollTop = 0;\n      if (destinationScreen[0]) destinationScreen[0].scrollTop = 0;\n      makeScreenNext(currentScreen);\n      makeScreenCurrent(destinationScreen);\n      $.Router.dispatch(destination);\n      setTimeout(function () {\n        $.isNavigating = false;\n      }, 500);\n    },\n\n    isNavigating: false,\n\n    /**\n     * Navigate Back to Non-linear Article\n     */\n    GoBackToScreen: destination => {\n      const position = $.ChuiRoutes.findIndex(function(dest) {\n        return dest = destination\n      });\n      const destinationScreen = getScreen(destination);\n      while ($.ChuiRoutes.length > position + 1) {\n        let route = $.ChuiRoutes.pop();\n        route = route.split(':')[0];\n        let screen = getScreen(route);\n        makeScreenNext(screen);\n      }\n      makeScreenCurrent(destinationScreen);\n      $.Router.dispatch(destination);\n    }\n  });\n\n  /**\n   * Initialize Back Buttons:\n   */\n  $('body').on('tap', '.back', function () {\n    if (this.hasAttribute('disabled')) return;\n    $.GoBack();\n  });\n\n  /**\n   * Handle navigation events:\n   */\n  const handleNavigationEvent = element => {\n    element = $(element);\n    if ($.isNavigating) return;\n    if (!element.hazAttr('data-goto')[0]) return;\n    if (element.closest('ul').is('.deletable')) return;\n    let destination = element.attr('data-goto');\n    if (!destination) return;\n    element.addClass('selected');\n    setTimeout(() => element.removeClass('selected'), 1000);\n    /**\n     * Handle navigation:\n     */\n    $.GoToScreen(destination);\n  };\n\n  $('body').on('tap', 'li', function () {\n    handleNavigationEvent($(this));\n  });\n  \n  $('body').on('doubletap', 'li', function () {\n    if (!$.isNavigating) {\n      handleNavigationEvent($(this));\n    }\n  });\n});\n\n/**\n * ChocolateChip-UI Widget - Paging.\n */\n$.extend({\n  /**\n   * Setup a paging control:\n   */\n  Paging: options => {\n    if (!options || !options.element) return;\n    const screen = $(options.element);\n    const pager = \n      '<div class=\"pager\">\\n\\\n        <button class=\"previous\">\\n\\\n          <svg width=\"24px\" height=\"36px\" viewBox=\"0 0 24 36\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"pagination-icons\" stroke=\"#979797\"><path d=\"M19.7729197,3 L4.25431067,17.8699971 L19.7729196,32.9558941\" id=\"page-previous\"></path></g></g></svg>\\n\\\n        </button>\\n\\\n        <button class=\"next\">\\n\\\n          <svg width=\"24px\" height=\"36px\" viewBox=\"0 0 24 36\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"pagination-icons\" stroke=\"#979797\"><path d=\"M4.08862955,3.06871359 L20.0261609,18.0528447 L4.08862956,32.9999994\" id=\"page-next\"></path></g></g></svg>\\n\\\n        </button>\\n\\\n      </div>';\n\n    $(screen).find('nav').append(pager);\n\n    const currentSection = $(screen).find('section');\n\n    const articles = function() {\n      return currentSection.find('article').length;\n    };\n    $.AdjustNavbarLayout(screen);\n\n    /**\n     * Handle paging forward:\n     */\n    const pageForward = pagerButton => {\n      if (articles() < 2) return;\n      pagerButton.prev().removeClass('selected');\n      pagerButton.addClass('selected');\n      let currentArticle = undefined;\n      if (pagerButton[0] && pagerButton[0].classList.contains('disabled')) return;\n      currentArticle = currentSection.find('article.current');\n      if (currentArticle.index() === articles() - 1) {\n        /**\n         * Start again!\n         */\n        currentArticle.removeClass('current').addClass('next');\n        currentArticle.siblings().removeClass('previous').addClass('next');\n        currentSection.find('article').eq(0).addClass('current').removeClass('previous').removeClass('next');\n      } else {\n        currentArticle.removeClass('current').addClass('previous');\n        currentArticle.next().removeClass('next').addClass('current');\n      }\n      setTimeout(function() {\n        pagerButton.removeClass('selected');\n      }, 250);\n    };\n\n    const pageBack = pagerButton => {\n      if (articles() === 1) return;\n      pagerButton.next().removeClass('selected');\n      pagerButton.addClass('selected');\n      let currentArticle = undefined;\n      currentArticle = currentSection.find('article.current');\n\n      if (currentArticle.index() === 0) {\n        currentArticle.removeClass('current');\n        currentArticle.siblings().eq(-1).addClass('current').removeClass('next');\n        currentArticle.siblings().eq(-1).siblings().removeClass('next').addClass('previous');\n      } else {\n        currentArticle.removeClass('current').addClass('next');\n        currentArticle.prev().removeClass('previous').addClass('current');\n      }\n      setTimeout(() => {\n        pagerButton.removeClass('selected');\n      }, 250);\n    };\n\n    $('.pager').on($.eventStart, 'button:last-of-type', () => {\n      pageForward($(this));\n    });\n    $('.pager').on($.eventStart, 'button:first-of-type', () => {\n      pageBack($(this));\n    });\n\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Popover.\n */\n$.extend({\n  /**\n   * Setup a popover (dropdown menu):\n   */\n  Popover: options => {\n    /**\n      id: myUniqueID,\n      title: 'Great',\n      callback: myCallback,\n    */\n    options = options || {};\n    let settings = {\n      id: $.uuid(),\n      callback: $.noop,\n      title: '',\n    };\n    $.extend(settings, options);\n    if (options && options.content) {\n      settings.content = options.content;\n    } else {\n      settings.content = '';\n    }\n    const header = `<header><h1>${ settings.title }</h1></header>`;\n    const popover = `<div class=\"popover\" id=\"${ settings.id }\">${ header }<section></section></div>`;\n    const popoverID = '#' + settings.id;\n\n    /**\n     * Calculate position of popover relative to the button that opened it:\n     */\n    const __calcPopPos = element => {\n      const offset = $(element).offset();\n      let left = offset.left;\n      let calcLeft = undefined;\n      let calcTop = undefined;\n      let popover = $(popoverID);\n      const popoverOffset = popover.offset();\n      calcLeft = popoverOffset.left;\n      calcTop = offset.top + $(element)[0].clientHeight;\n      if ((popover.width() + offset.left) > window.innerWidth) {\n        popover.css({\n          'left': ((window.innerWidth - popover.width()) - 20) + 'px',\n          'top': (calcTop) + 25 + 'px'\n        });\n      } else {\n        popover.css({\n          'left': left + 'px',\n          'top': (calcTop - 30) + 'px'\n        });\n      }\n    };\n\n    if ($('.mask')[0]) {\n      $.ClosePopover();\n      $('body').Unblock();\n      return;\n    }\n    $.Block('.5');\n    $('body').append(popover);\n    if ($('body').hasClass('themeIsAndroid')) {\n      setTimeout(() => {\n        $(popoverID).addClass('opened');\n      }, 200);\n    }\n    $(popoverID).data('triggerEl', settings.trigger);\n    $(popoverID).find('section').append(settings.content);\n    settings.callback.call(settings.callback, settings.trigger);\n    __calcPopPos(settings.trigger);\n\n  },\n\n  AlignPopover: () => {\n    let popover = $('.popover');\n    if (!popover.length) return;\n    const triggerID = popover.data('triggerEl');\n    const offset = $(triggerID).offset();\n    const left = offset.left;\n    if (($(popover).width() + offset.left) > window.innerWidth) {\n      popover.css({\n        'left': ((window.innerWidth - $(popover).width()) - 20) + 'px'\n      });\n    } else {\n      popover.css({\n        'left': left + 'px'\n      });\n    }\n  },\n\n  ClosePopover: () => {\n    $.Unblock();\n    $('.popover').css({transform: 'scaleY(0)'});\n    setTimeout(() => {\n      $('.popover').off();\n      $('.popover').remove();\n    }, 100);\n  }\n});\n\n$(() => {\n  /**\n   * Reposition popovers on window resize:\n   */\n  window.onresize = () => {\n    $.AlignPopover();\n  };\n  // const events = \"$.eventStart singletap $.eventEnd\";\n  $('body').on($.eventStart, '.mask', e => {\n    // if ($('.popover')[0]) {\n    //   if (e && e.nodeType === 1) return;\n    // } else {\n      // alert('closing popover')\n      $.ClosePopover();\n    // }\n  });\n});\n\n/**\n * ChocolateChip-UI Widget - Popup.\n */\n$.extend({\n  /**\n   * Setup  a popup dialog:\n   */\n  Popup: function(options) {\n    /**\n    options {\n      id: 'alertID',\n      title: 'Alert',\n      message: 'This is a message from me to you.',\n      cancelButton: 'Cancel',\n      continueButton: 'Go Ahead',\n      width: '100px',\n      callback: function() { // do something },\n      empty: true\n    }\n    */\n    if (!options) return;\n    let settings = {};\n    settings.id = $.uuid();\n    settings.content = true;\n    $.extend(settings, options);\n    let width = '';\n    if (settings.width) {\n      width = `style=\"width:${settings.width}px;\"`;\n    }\n\n    const id = settings.id;\n    const title = settings.title ? `<header><h1>${settings.title}</h1></header>` : '';\n    const message = settings.message ? `<p role=\"note\">${options.message}</p>` : '';\n    const cancelButton = options.cancelButton ? `<button class=\"cancel\" role=\"button\">${settings.cancelButton}</button>` : '';\n    const continueButton = settings.continueButton ? `<button class=\"continue\" role=\"button\">${settings.continueButton}</button>` : '';\n    const callback = settings.callback || $.noop;\n    let popup = undefined;\n    if (settings.empty) {\n      popup = `<div id=\"${id}\" class=\"popup\"><div ${width} class=\"dialog\" role=\"alertdialog\"></div></div>`;\n    } else {\n      popup = `<div class=\"popup\" id=\"${id}\"><div class=\"dialog\" role=\"alertdialog\"><div class=\"panel\">${title}${message}</div><footer>${cancelButton}${continueButton}</footer></div></div>`;\n    }\n    $('#' + id).remove();\n    $('body').append(popup);\n    if (settings.empty) {\n      $('.dialog').css({\n        \"display\": \"-webkit-flex\",\n        \"-webkit-justify-content\": \"center\", \n        \"-webkit-align-items\": \"center\", \n        \"display\": \"flex\",\n        \"justify-content\": \"center\", \n        \"align-items\": \"center\"\n      })\n    }\n    if (callback && continueButton) {\n      $('#' + id).find('.continue').on('tap', function () {\n        const $this = $(this);\n        if ($.isAndroid || $.isChrome) {\n          $this.addClass('selected');\n          setTimeout(function () {\n            $this.removeClass('selected');\n            $('.popup').ClosePopup();\n            callback.call(callback);\n          }, 300);\n        } else {\n          $('#' + id).ClosePopup();\n          callback.call(callback);\n        }\n      });\n      $('#' + id).find('.cancel').on('tap', function () {\n        const $this = $(this);\n        if ($.isAndroid || $.isChrome) {\n          $this.addClass('selected');\n          setTimeout(function () {\n            $this.removeClass('selected');\n            $('#' + id).ClosePopup();\n          }, 300);\n        } else {\n          $('#' + id).ClosePopup();\n        }\n      });\n    }\n\n    $('.popup').on('tap', function (e) {\n      $(this).removeClass('opened')\n    });\n  },\n\n});\n$.fn.extend({\n  /**\n   * Show Popup:\n   */\n  ShowPopup: function ShowPopup() {\n    const self = $(this);\n    self.removeClass('forPopup')\n    self.addClass('opened');\n    setTimeout(function() {\n      self.find('.popup').addClass('opened')\n    }, 0)\n  },\n\n  /**\n   * Close Popup:\n   */\n  ClosePopup: function ClosePopup() {\n    const self = $(this);\n    self.removeClass('opened');\n    self.find('.popup').removeClass('opened')\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Range Input.\n */\n$.fn.extend({\n  /**\n   * Setup a range input:\n   */\n  Range: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    let input = $(this);\n    let newPlace = undefined;\n    const width = input.width();\n    const newPoint = (input.val() - input.attr(\"min\")) / (input.attr(\"max\") - input.attr(\"min\"));\n    let offset = -1.3;\n    if (newPoint < 0) {\n      newPlace = 0;\n    } else if (newPoint > 1) {\n      newPlace = width;\n    } else {\n      newPlace = width * newPoint + offset;\n      offset -= newPoint;\n    }\n    if ($.theme === 'android') {\n      input.css({\n        'background-size': Math.round(newPlace) + 'px 3px, 100% 3px'\n      });\n    } else {\n      input.css({\n        'background-size': Math.round(newPlace) + 'px 10px'\n      });\n    }\n  }\n});\n$(() => {\n  $('input[type=range]').forEach(ctx => {\n    $(ctx).Range();\n  });\n  $('body').on('input', 'input[type=range]', function() {\n    $(this).Range();\n  });\n});\n\n/**\n * ChocolateChip-UI Widget - Router.\n */\n$.extend({\n  /**\n   * Define Router:\n   */\n  ChuiRoutes: [],\n\n  Router: () => {\n\n    return {\n      addRoute: options => {\n        if ($.type(options) === 'array') {\n          options.forEach(item => $.on(item.route, item.callback));\n        }\n      },\n\n      getFullRoute: () => $.ChuiRoutes.join('/'),\n\n      getCurrentLoc: () => {\n        const temp = this.getFullRoute().split('/');\n        return temp[temp.length - 1];\n      },\n\n      dispatch: route => {\n        let temp = undefined;\n        let id = undefined;\n        if (route.match(/\\:/)) {\n          temp = route.split(':');\n          id = temp[1];\n          route = temp[0];\n        }\n        $.send(route);\n      }\n    };\n  }\n});\n\n$.extend($.Router, {\n  dispatch: route => {\n    if (!route) return;\n    let temp = undefined;\n    let id = undefined;\n    if (route.match(/\\:/)) {\n      temp = route.split(':');\n      id = temp[1];\n      route = temp[0];\n    }\n    $.send(route, id)\n  }\n});\n\n$.extend($.ChuiRoutes, {\n  getFullRoute: function getFullRoute() {\n    return this.join('/');\n  }\n});\n\n$(() => {\n  /**\n   * Set up initial route:\n   */\n  if ($('screen').size() && !$.ChuiRoutes.length) {\n    $.ChuiRoutes.push($('screen')[0].id);\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Screens.\n */\n$(() => {\n  /**\n   * Interface for the app's screens:\n   */\n  $.extend({\n    screens: $('screen')\n  });\n  $.extend($.screens, {\n    getCurrent: function() {\n      return this.hazClass('current');\n    },\n\n    getNext: function() {\n      return this.hazClass('next');\n    },\n\n    getPrevious: function() {\n      return this.hazClass('previous');\n    }\n  });\n});\n\n/**\n * ChocolateChip-UI Widget - Segmented Buttons.\n */\n$(() => {\n  $.extend({\n    /**\n     * Setup a segmented button:\n     */\n    Segmented: function(options) {\n      if (!options || !options.element) return;\n      /**\n        options = {\n          element: '#segmentHolder'\n          labels : ['first','second','third'],\n          selected: 0,\n          callback: function() { alert('Boring!'); }\n        }\n      */\n      let settings = {\n        selected: 0,\n        callback: $.noop\n      };\n      $.extend(settings, options);\n\n      let segmented = undefined;\n      const labels = (settings.labels) ? settings.labels : [];\n      let __selection = undefined;\n      let __element = settings.element;\n\n      function createSegmentedButton() {\n        let androidSelectionIndicator = '';\n        if ($.theme = 'android') {\n          androidSelectionIndicator = '<span class=\"androidSelectionBorder\"></span>';\n        }\n        let __segmented = ['<div class=\"segmented\">'];\n        labels.forEach(function(ctx, idx) {\n          if (settings.selected === idx) {\n            __segmented.push('<button role=\"radio\" aria-checked=\"true\" class=\"selected\">');\n            __selection = idx;\n          } else {\n            __segmented.push('<button role=\"radio\">');\n          }\n\n          __segmented.push(ctx);\n          __segmented.push('</button>');\n        });\n        __segmented.push(androidSelectionIndicator + '</div>');\n        segmented = __segmented.join('');\n        $(settings.element).append(segmented);\n\n\n      }\n      createSegmentedButton();\n\n      /**\n       * For Android Material Design:\n       */\n      let androidSelectionBorder = undefined;\n      if ($.theme === 'android') {\n        androidSelectionBorder = $(__element).find('.androidSelectionBorder');\n        let selectedButton = $(__element).find('button').eq(settings.selected);\n        let width = selectedButton.width();\n        let left = selectedButton.offset().left -16;\n        if ($.dir === 'rtl') {\n          left = selectedButton.offset().left +16;\n        }\n        androidSelectionBorder.css({width: width + 'px', left: left + 'px'});\n      }\n\n      const callback = settings.callback;\n      $(__element).on('tap', '.segmented > button', function(e) {\n        let $this = $(this);\n        if (this.parentNode.classList.contains('paging')) return;\n        $this.siblings('button').removeClass('selected');\n        $this.siblings('button').removeAttr('aria-checked');\n        $this.addClass('selected');\n        __selection = $this.index();\n        __element = $(this);\n        $this.attr('aria-checked', true);\n        callback.call(this, e);\n\n        /**\n         * For Android Material Design:\n         */\n        if ($.theme === 'android') {\n          let width = $this.width();\n          let left = $this.offset().left -16;\n          if ($.dir === 'rtl') {\n            left = $this.offset().left +16;\n          }\n          androidSelectionBorder.css({width: width + 'px', left: left + 'px'});\n        }\n      });\n\n      return {\n        val: function() {\n          return {\n            index: __selection,\n            element: __element\n          }\n        },\n        getSelection: function() {\n          return {\n            index: __selection,\n            element: __element\n          }\n        }\n      }\n    }\n  });\n});\n\n/**\n * ChocolateChip-UI Widget - Select List.\n */\n$.extend({\n  /**\n   * Setup a select list:\n   */\n  SelectList: function(options) {\n    if (!options || !options.element) return;\n    let settings = {\n      element: undefined,\n      selected: undefined,\n      name: $.uuid(),\n      callback: $.noop,\n      model: undefined\n    };\n    let __selection = {};\n\n    $.extend(settings, options);\n    const name = settings.name;\n    let list = $(settings.element);\n    list.addClass('select-list');\n    list.find('li').forEach((ctx, idx) => {\n      const value = ctx.getAttribute(\"data-select\") !== null ? ctx.getAttribute(\"data-select\") : \"\";\n      ctx.setAttribute('role', 'radio');\n      $(ctx).removeClass('selected').find('input').removeAttr('checked');\n      $(ctx).append(`<aside>\n          <span class=\"selection-indicator\">\n            <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n              <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                <g id=\"selection-indicator\">\n                  <path d=\"M2,13 L9.9294326,16.8406135 L17.1937075,1.90173332\" id=\"checkmark\" stroke=\"#007AFF\" stroke-width=\"2\"></path>\n                  <circle id=\"outer-circle\" stroke=\"#007AFF\" stroke-width=\"2\" cx=\"10\" cy=\"10\" r=\"9\"></circle><circle id=\"inner-circle\" fill=\"#007AFF\" cx=\"10\" cy=\"10\" r=\"5\"></circle>\n                </g>\n              </g>\n            </svg>\n          </span>\n        </aside>`);\n      if (settings.selected === idx) {\n        ctx.setAttribute('aria-checked', 'true');\n        ctx.classList.add('selected');\n        if (!$(ctx).find('input')[0]) {\n          $(ctx).append(`<input type=\"radio\" checked=\"checked\" name=\"${ name }\" value=\"${ value }\">`);\n        } else {\n          $(ctx).find('input').prop('checked', true).attr('value', value);\n        }\n        __selection = {\n          index: settings.selected,\n          value: value\n        };\n      } else {\n        if (!$(ctx).find('input')[0]) {\n          $(ctx).append(`<input type=\"radio\" name=\"${ name }\" value=\"${ value }\">`);\n        }\n      }\n    });\n    list.on('tap', 'li', function() {\n      const item = $(this);\n      __selection = {\n        index: item.index(),\n        value: item.find('input').val()\n      };\n      item.siblings('li').removeClass('selected');\n      item.siblings('li').removeAttr('aria-checked');\n      item.siblings('li').find('input').removeProp('checked');\n      item.addClass('selected');\n      item.attr('aria-checked', true);\n      item.find('input').prop('checked', true);\n      settings.callback.apply(this, arguments);\n    });\n\n    return {\n      val: () => __selection,\n      getSelection: () => __selection\n    };\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Sheets.\n */\n$.extend({\n  /**\n   * Create a sliding sheet:\n   */\n  Sheet: options => {\n    /**\n      var options {\n        id : 'starTrek',\n        background: 'transparent',\n        handle: false,\n        slideDown: false // default is slideUp\n      }\n    */\n    if (!options) return;\n    let settings = {\n      id: $.uuid(),\n      background: '',\n      handle: true,\n      slideFrom: false\n    };\n\n    $.extend(settings, options);\n\n    if (settings.background) settings.background = ' style=\"background-color:' + settings.background + '\" ';\n    if (settings.slideFrom === 'top') {\n      settings.slideDown = ' class=\"slideDown\" ';\n    } else {\n      settings.slideFrom = '';\n    }\n    if (settings.handle === false) settings.handle = '';\n    else settings.handle = \n      `<chui-sheet-handle>\n        <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 76 27\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:butt;stroke-linejoin:butt;stroke-miterlimit:1.41421;\">\n          <g id=\"sheet-handle\" transform=\"matrix(1,0,0,1,-29.7966,-15.7797)\">\n            <path id=\"sheet-handle-path\" d=\"M36.25,26.242L67.645,34.215L98.176,25.789\" style=\"fill:none;\"/>\n          </g>\n        </svg>\n      </chui-sheet-handle>`;\n\n    const sheet = `<sheet id=\"${ settings.id }\"${ settings.slideDown }${ settings.background }>${ settings.handle }<section></section></sheet>`;\n\n    $('body').append(sheet);\n\n    $('#' + settings.id).find('chui-sheet-handle').on($.eventStart, () => {\n      $.HideSheet('#' + settings.id);\n    });\n  },\n  ShowSheet: id => {\n    let sheet = id ? id : '.sheet';\n    $('screen.current').addClass('blurred');\n    if ($.isAndroid || $.isChrome) {\n      $(sheet).css('display', 'block');\n      setTimeout(function() {\n        $(sheet).addClass('opened');\n      }, 20);\n    } else {\n      $(sheet).addClass('opened');\n    }\n  },\n  HideSheet: id => {\n    $(id).removeClass('opened');\n    $('screen.current').addClass('removeBlurSlow');\n    setTimeout(() => {\n      $('screen').removeClass('blurred');\n      $('screen').removeClass('removeBlurSlow');\n    }, 500);\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Slide Out Menu.\n */\n$.extend({\n  /**\n   * Setup a slide out menu:\n   */\n  SlideOut: () => {\n    const slideoutID = $.uuid();\n    const buttonID = $.uuid();\n    const slideOutButton = $(`<button id=\"${ buttonID }\" class=\"slide-out-button\"></button>`);\n    const slideOut = `<slideout id=\"${ slideoutID }\"><section></section></slideout>`;\n    $('body').prepend(slideOut);\n    $('body').append(slideOutButton);\n    /**\n     * Get Slide Out & Slide Out button:\n     */\n    let slideout = $(`#${ slideoutID }`);\n    let slideOutBtn = $(`#${ buttonID }`);\n\n    /**\n     * Set up state for Slide Out and screens:\n     */\n    slideout.attr('aria-hidden', true);\n    $(\"screens\").attr('aria-hidden', true);\n    $(\"screens\").eq(0).addClass('show').attr('aria-hidden', \"false\");\n\n    /**\n     * Handle Slide Out button events:\n     */\n    slideOutBtn.on('tap', function() {\n      $(this).toggleClass('focused');\n      if (slideout.hasClass('open')) {\n        slideout.removeClass('open');\n        slideout.removeAttr('aria-hidden');\n        $('button.back').removeClass('disabled').removeProp('disabled');\n        $('button.backTo').removeClass('disabled').removeProp('disabled');\n      } else {\n        slideout.addClass('open')\n        slideout.attr('aria-hidden', true);\n        $('button.back').addClass('disabled').prop('disabled', true);\n        $('button.backTo').addClass('disabled').prop('disabled', true);\n      }\n    });\n\n    $(`#${ slideoutID }`).on('tap', 'li', function() {\n      let menuItems = slideout.find('li[data-show]');\n      slideout.attr('aria-hidden', 'true')\n\n      /**\n       * Toggle Slide Out button:\n       */\n      slideOutBtn.toggleClass('focused');\n      \n      $('button.back').removeClass('disabled').removeProp('disabled');\n      $('button.backTo').removeClass('disabled').removeProp('disabled');\n\n      /**\n       * This list item shows a single screen:\n       */\n      menuItems.hazClass('selected').removeClass('selected');\n      $.screens.hazClass('show').removeClass('show').attr('aria-hidden', true);\n      const screenToShow = '#' + $(this).attr('data-show').split(':')[0];\n      /**\n       * Account for presence of navigation list state:\n       */\n      setTimeout(function() {\n        $(screenToShow)[0].classList.remove('next');\n      }, 200);\n      $(screenToShow)[0].classList.add('show')\n      $(screenToShow).attr('aria-hidden', false);\n      $('screen.current').addClass('next').removeClass('current');\n      $('screen.previous').addClass('next').removeClass('previous');\n      /**\n       * Get route to dispatch:\n       */\n      $.Router.dispatch($(this).attr('data-show'));\n      if ($.ChuiRoutes.length > 1) $.ChuiRoutes.pop()\n\n      /**\n       * Close slide out:\n       */\n      slideout.removeClass('open');\n    });\n\n    return {\n      populate: options => {\n        const slideout = $(`#${ slideoutID }`);\n        if (!slideout[0]) return;\n        if (!options) {\n          return;\n        } else {\n          slideout.find('section').append('<ul class=\"list\"></ul>');\n          let list = slideout.find('ul');\n          options.forEach(ctx => {\n            for (let key in ctx) {\n              if (key === 'header') {\n                list.append('<li class=\"menu-header\"><h2>' + ctx[key] + '</h2></li>');\n              } else {\n                list.append('<li data-show=\"' + key + '\"><h3>' + ctx[key] + '</h3></li>');\n              }\n            }\n          });\n          slideout.find('li').eq(0).addClass('selected');\n        }\n      }\n    };\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Stepper.\n */\n$.extend({\n  /**\n   * Create a stepper:\n   */\n  Stepper: options => {\n    if (!options) return;\n    if (!options.element) return;\n    if (!options.min) return;\n    if (!options.max) return;\n\n    let stepper = $(options.element);\n    const min = options.min;\n    const max = options.max;\n    const defaultValue = options.defaultValue ? options.defaultValue : options.min;\n    let increaseSymbol = '+';\n    let decreaseSymbol = '-';\n    let disabledDecrease = '';\n    let disabledIncrease = '';\n    if (min === defaultValue) {\n      disabledDecrease = ' disabled ';\n    } else if (max === defaultValue) {\n      disabledIncrease = ' disabled ';\n    }\n    const decreaseButton = '<button ' + disabledDecrease + ' class=\"decrease\"><span>-</span></button>';\n    const label = `<label>${ defaultValue }</label><input type=\"text\" value=\"${ defaultValue }\">`;\n    const increaseButton = '<button ' + disabledIncrease + '  class=\"increase\"><span>+</span></button>';\n    stepper.append(decreaseButton + label + increaseButton);\n    stepper.data('data-value', {\n      min: min,\n      max: max,\n      defaultValue: defaultValue\n    });\n\n    const increaseStepperValue = function() {\n      const currentValue = stepper.find('input').val();\n      const value = stepper.data('data-value');\n      const max = value.max;\n      let newValue = undefined;\n      newValue = parseInt(currentValue, 10) + 1;\n      stepper.find('button:first-of-type').removeAttr('disabled');\n      stepper.find('label').text(newValue);\n      stepper.find('input')[0].value = newValue;\n      if (newValue === max) {\n        $(this).attr('disabled', 'disabled');\n      }\n    };\n\n    const decreaseStepperValue = function() {\n      const currentValue = stepper.find('input').val();\n      const value = stepper.data('data-value');\n      let newValue = undefined;\n      newValue = parseInt(currentValue, 10) - 1;\n      stepper.find('button:last-of-type').removeAttr('disabled');\n      stepper.find('label').text(newValue);\n      stepper.find('input')[0].value = newValue;\n      if (newValue === min) {\n        $(this).attr('disabled', 'disabled');\n      }\n    };\n\n    stepper.find('button:last-of-type').on($.eventStart, function() {\n      increaseStepperValue.call(this, stepper);\n    });\n\n    stepper.find('button:first-of-type').on($.eventStart, function() {\n      decreaseStepperValue.call(this, stepper);\n    });\n\n    return {\n      val: () => stepper.find('input').val(),\n      getValue: () => stepper.find('input').val()\n    }\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Switches.\n */\n$.extend({\n  /**\n   * Create a switch control:\n   */\n  Switch: options => {\n    if (!options || !options.element) return;\n    let __checked = false;\n    let settings = {\n      element: undefined,\n      name: undefined,\n      value: undefined,\n      checked: false,\n      on: $.noop,\n      off: $.noop,\n      onCallback: $.noop,\n      offCallback: $.noop\n    };\n\n    $.extend(settings, options);\n    let __selection = {\n      checked: __checked,\n      value: settings.value\n    };\n\n    let __element = $(settings.element);\n    __checked = settings.checked;\n\n    /**\n     * Abrstract swipe for left-to-right and right-to-left:\n     */\n    let swipeOn = \"swiperight\";\n    let swipeOff = \"swipeleft\";\n    if (document.documentElement.dir === \"rtl\") {\n      swipeOn = \"swipeleft\";\n      swipeOff = \"swiperight\";\n    }\n\n    let checkState = settings.checked ? ' checked' : '';\n    const __switch = `<em></em><input type=\"checkbox\" name=\"${ settings.name }\" ${ checkState } value=\"${ settings.value }\">`;\n\n    __element.append(__switch);\n\n    if (__checked) {\n      __element.addClass('checked');\n      __element.attr('role', 'checkbox');\n    }\n\n    __element.on('tap', function() {\n      const checkbox = this.querySelector('input');\n      if (this.classList.contains('checked')) {\n        this.classList.remove('checked');\n        this.setAttribute('aria-checked', false);\n        checkbox.removeAttribute('checked');\n        __selection.checked = false;\n        __checked = false;\n        if (options.offCallback) {\n          settings.offCallback.call(this);\n        } else {\n          settings.off.call(this);\n        }\n      } else {\n        this.classList.add('checked');\n        checkbox.setAttribute('checked', 'checked');\n        this.setAttribute('aria-checked', true);\n        __selection.checked = true;\n        __checked = true;\n        if (options.onCallback) {\n          settings.onCallback.call(this);\n        } else {\n          settings.on.call(this);\n        }\n        \n      }\n    });\n    __element.on(swipeOn, function() {\n      const checkbox = this.querySelector('input');\n      if (this.classList.contains('checked')) {\n        this.classList.remove('checked');\n        this.setAttribute('aria-checked', false);\n        checkbox.removeAttribute('checked');\n        __selection.checked = true;\n        __checked = true;\n        if (options.onCallback) {\n          settings.onCallback.call(this);\n        } else {\n          settings.on.call(this);\n        }\n      }\n    });\n    __element.on(swipeOff, function() {\n      const checkbox = this.querySelector('input');\n      if (!this.classList.contains('checked')) {\n        this.classList.add('checked');\n        checkbox.setAttribute('checked', 'checked');\n        this.setAttribute('aria-checked', true);\n        __selection.checked = false;\n        __checked = false;\n        if (options.offCallback) {\n          settings.offCallback.call(this);\n        } else {\n          settings.off.call(this);\n        }\n      }\n    });\n\n    return {\n      val: () => __selection,\n      getValue: () => __selection\n    };\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Tab Bar.\n */\n$.extend({\n  /**\n   * Creates a Tab Bar for Toggling Articles:\n   */\n  TabBar: options => {\n    /**\n    var options = {\n      id: 'mySpecialTabbar',\n      labels: [\"Refresh\", \"Add\", \"Info\", \"Downloads\", \"Favorite\"],\n      icons: [\"refresh\", \"add\", \"info\", \"downloads\", \"favorite\"],\n      screens: [],\n      selected: 2,\n      showIcons: false // set to true for Android\n    }\n    */\n    if (!options) return;\n    let id = $.uuid();\n    let settings = {\n      selected: 0\n    };\n    $.extend(settings, options);\n    if (!settings.icons.length) {\n      settings.icons = settings.labels;\n    }\n    if (!settings.id) {\n      settings.id = id;\n    } else {\n      id = settings.id;\n    }\n\n    /**\n     * Private variable to keep track of screens:\n     */\n    let __tabbarScreens = $();\n\n    let screens = $();\n    const screenPrefix = '#';\n\n    if (settings.screens) {\n      settings.screens.forEach(function (screen) {\n        if (!/screenPrefix/img.test(screen)) {\n          __tabbarScreens.push($(screenPrefix + screen)[0]);\n          $(screenPrefix + screen).addClass('tabScreen');\n        } else {\n          __tabbarScreens.concat($(screen)[0]);\n          $(screen).addClass('tabScreen');\n        }\n      });\n    } else {\n      settings.labels.forEach(function (screen, idx) {\n        __tabbarScreens.push(screens.eq(idx));\n      });\n    }\n    let selectedScreen = undefined;\n    let androidSelectionIndicator = '';\n    if ($.theme === 'android') {\n      androidSelectionIndicator = '<span class=\"androidSelectionBorder\"></span>';\n    }\n    const showIcons = settings.showIcons ? ' class=\"showIcons\" ' : '';\n\n    /**\n     * Helper: Set Screen to Current:\n     */\n    const setToCurrent = element => {\n      $(element).removeClass('previous').removeClass('next').addClass('current');\n      $(element).attr('aria-hidden', 'false');\n    };\n\n    /**\n     * Helper: Set Screen to Next:\n     */\n    const setToNext = element => {\n      $(element).removeClass('current').addClass('next');\n      $(element).attr('aria-hidden', 'true');\n    };\n\n    /**\n     * Create tabs:\n     */\n    const makeTab = (label, icon, idx) => {\n      let tab = '<button role=\"tab\" class=\"' + icon;\n      if (settings.selected === idx) {\n        tab += ' selected';\n      }\n      tab += '\"';\n      if (settings.screens && settings.screens.length) {\n        tab += ` data-id=\"${ settings.screens[idx] }\"`;\n      }\n      tab += `><span class=\"icon\"></span><label>${ settings.labels[idx] }</label></button>`;\n      return tab;\n    };\n    /**\n     * Create tab bar:\n     */\n    let tabbarTmpl = $(`<tabbar role=\"tabpanel\"${ showIcons }>${ androidSelectionIndicator }</tabbar>`);\n    tabbarTmpl[0].id = settings.id;\n    tabbarTmpl.addClass('tabbar');\n\n    setToNext($('screen'));\n    selectedScreen = $('screen').eq(settings.selected);\n    setToCurrent(selectedScreen);\n\n    if (settings.labels.length) {\n      settings.labels.forEach(function (label, idx) {\n        tabbarTmpl.append(makeTab(label, settings.icons[idx], idx));\n      });\n    }\n\n    /**\n     * Append tabbar to page:\n     */\n    $('body').prepend(tabbarTmpl);\n\n    /**\n     * Get id of appended tab bar:\n     */\n    const tabbar = $('#' + settings.id);\n    const selectedTabButton = tabbar.find('button.selected');\n\n\n    /**\n     * Private variables to manage tab bar: \n     */\n    const __tabbarButtons = tabbar.find('button');\n    const __selectedTabbarButton = __tabbarButtons.eq(settings.selected);\n    const __selectedTabbarScreen = __tabbarScreens.eq(settings.selected);\n\n    /**\n     * For Android Material Design:\n     */\n    const androidSelectionBorder = tabbar.find('.androidSelectionBorder');\n    function handleTabSelectionForAndroid(tab) {\n      let width = $(tab).width();\n      let left = $(tab).offset().left;\n      androidSelectionBorder.css({width: width + 'px', left: left + 'px'});\n    }\n    if ($.theme === 'android') {\n      handleTabSelectionForAndroid(selectedTabButton);\n    }\n\n    /**\n     * Setup events on tabs:\n     */\n    $(() => {\n\n      $.ChuiRoutes = [];\n      $.ChuiRoutes.push(__tabbarScreens.eq(settings.selected)[0].id);\n\n      const tabbarButtons = tabbar.find('button');\n      $.Router.dispatch(__selectedTabbarScreen[0].id);\n      tabbarButtons.forEach(function (button, idx) {\n        $(button).data('chui-route', __tabbarScreens.eq(idx)[0].id);\n      });\n\n      /**\n       * Tap on tab:\n       */\n      tabbar.on('tap', 'button', function () {\n        const tab = $(this);\n        const routes = tab.data('chui-route').split('/');\n        const fullRoute = $.ChuiRoutes.join('/');\n        let navRoutesFull = tab.data('chui-route');\n        const navRoutes = navRoutesFull.split('/');\n\n        /**\n         * This tab holds a navigation list:\n         */\n        if (routes.length > 1) {\n          __tabbarButtons.hazClass('selected').data('chui-route', fullRoute);\n          __tabbarButtons.hazClass('selected').removeClass('selected').addClass('next');\n          navRoutesFull = $(this).data('chui-route');\n          /**\n           * Set this tab to `selected`:\n           */\n          tab.addClass('selected');\n          /**\n           * Deal with previously selected tab and screen:\n           */\n          $('screens').removeClass('current').addClass('next').attr('aria-hidden', true);\n          $('screens').removeClass('previous').addClass('next').attr('aria-hidden', true);\n          const navRoutes = navRoutesFull.split('/');\n          navRoutes.forEach( function(route, idx) {\n            const routing = route.split(':');\n            let whichRoute = routing[0];\n            if (idx !== routes.length - 1) {\n              $('#' + whichRoute).removeClass('next').addClass('previous').attr('aria-hidden', true);\n            } else {\n              $('#' + whichRoute).removeClass('next').addClass('current').attr('aria-hidden', false);\n            }\n          });\n          /**\n           * Take care of routes:\n           */\n          $.ChuiRoutes = routes;\n          $.Router.dispatch(routes[routes.length - 1]); \n\n          /**\n           * Handle Android ripple effect:\n           */\n          if ($.theme === 'android') {\n            handleTabSelectionForAndroid(tab);\n          }\n\n          /**\n           * This tab has a single screen:\n           */\n        } else {\n          const screen = $('screen').eq(tab.index());\n          __tabbarButtons.hazClass('selected').data('chui-route', fullRoute);\n          __tabbarButtons.hazClass('selected').removeClass('selected').addClass('next');\n          /**\n           * Deal with previously selected tab and screen:\n           */\n          $('screen').removeClass('current').addClass('next').attr('aria-hidden', true);\n          $('screen').removeClass('previous').addClass('next').attr('aria-hidden', true);\n          /**\n           * Set this tab to `selected`:\n           */\n          tab.addClass('selected');\n          if ($.theme === 'android') {\n            handleTabSelectionForAndroid(tab);\n          }\n\n          routes.forEach(function (route, idx) {\n            const routing = route.split(':');\n            const whichRoute = routing[0];\n            if (idx !== routes.length - 1) {\n              $('#' + whichRoute).removeClass('next').addClass('previous').attr('aria-hidden', true);\n            } else {\n              $('#' + whichRoute).removeClass('next').addClass('current').attr('aria-hidden', false);\n            }\n          });\n          \n          /**\n           * Take care of routes:\n           */\n          $.ChuiRoutes = routes;\n          $.Router.dispatch(fullRoute);\n        }\n      });\n    });\n\n    return {\n      getSelectedTab: () => {\n        return __selectedTabbarButton;\n      },\n\n      getSelectedScreen: () => {\n        return __selectedTabbarScreen;\n      },\n\n      setSelectedTab: (position) => {\n        tabbar.find('button').iz('.selected').removeClass('selected').addClass('next');\n        tabbar.children('button').eq(position).addClass('selected');\n        setToNext(__tabbarScreens.iz('.current')[0]);\n        setToCurrent(__tabbarScreens.eq(position)[0]);\n      }\n    };\n  }\n});\n\n/**\n * Methods to handle color management and coversion.\n */\n$.extend({\n  /** \n   * Create a color object from provided color value.\n   * Handles three values:\n   * rgb(255,0,0) -- with or without spaces\n   * #ff0000\n   * #f00\n   * The returned object has two methods:\n   * myColor.toHex()\n   * myColor.toRGB()\n   *\n   * @constructor - Must use new keyword\n   * @param {string} color - A hex or rgb value.\n   * @return {object} ChuiColor\n   */\n  ChuiColor: function(color) {\n    this.ok = false;\n    /** \n     * Check for hex color value.\n     * String \"#\" if found.\n     */\n    if (color.charAt(0) == '#') {\n      color = color.substr(1,6);\n    }\n    color = color.toLowerCase();\n\n\n    /**\n     * Array of color format regex patterns.\n     * These will identify the format of the color provided above.\n     * The process function converts hex color values into decimal (rgb).\n     */\n    const colorRegex = [\n      {\n        /* Example: ['rgb(123, 234, 45)', 'rgb(255, 234, 245)'] */\n        re: /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/,\n        process: function(bits) {\n          return [\n            parseInt(bits[1]),\n            parseInt(bits[2]),\n            parseInt(bits[3])\n          ];\n        }\n      },\n      {\n        /* Example: ['#00ff00', '336699'] */\n        re: /^(\\w{2})(\\w{2})(\\w{2})$/,\n        process: function(bits) {\n          return [\n            parseInt(bits[1], 16),\n            parseInt(bits[2], 16),\n            parseInt(bits[3], 16)\n          ];\n        }\n      },\n      {\n        /**\n         * Example: ['#fb0', 'f0f'] \n         */\n        re: /^(\\w{1})(\\w{1})(\\w{1})$/,\n        process: function(bits) {\n          return [\n            parseInt(bits[1] + bits[1], 16),\n            parseInt(bits[2] + bits[2], 16),\n            parseInt(bits[3] + bits[3], 16)\n          ];\n        }\n      }\n    ];\n\n    /**\n     * Check for a match using each regex. \n     */\n    for (let i = 0; i < 3; i++) {\n      const re = colorRegex[i].re;\n      const processor = colorRegex[i].process;\n      const bits = re.exec(color);\n      if (bits) {\n        const channels = processor(bits);\n        this.r = channels[0];\n        this.g = channels[1];\n        this.b = channels[2];\n        this.ok = true;\n      }\n    }\n\n    /**\n     * Validate/cleanup values. \n     */\n    this.r = (this.r < 0 || isNaN(this.r)) ? 0 : ((this.r > 255) ? 255 : this.r);\n    this.g = (this.g < 0 || isNaN(this.g)) ? 0 : ((this.g > 255) ? 255 : this.g);\n    this.b = (this.b < 0 || isNaN(this.b)) ? 0 : ((this.b > 255) ? 255 : this.b);\n\n    this.toHex = function() {\n      let r = this.r.toString(16);\n      let g = this.g.toString(16);\n      let b = this.b.toString(16);\n      if (r.length == 1) r = '0' + r;\n      if (g.length == 1) g = '0' + g;\n      if (b.length == 1) b = '0' + b;\n      return '#' + r + g + b;\n    }\n\n    this.toRGB = function() {\n      return 'rgb(' + this.r +',' + this.g + ',' + this.b + ')';\n    }\n  },\n\n  /**\n   * Make global method to get brightness of provided color.\n   * This is based on the values of YIQ color formula.\n   * This method expects a color object created by $.ChuiColor.\n   */\n  getBrightness: function(color) {\n    if ($.type(color) === 'string') color = $.ChuiColor(color);\n    return (color.r * .299) + (color.g * .587) + (color.b * .114);           \n  },\n\n  /**\n   * Function to light a color.\n   * Expects a hex value as string and an integer as percent:\n   */\n  lightenColor: function(color, percent) {  \n    const num = parseInt(color.slice(1), 16);\n    const amt = Math.round(2.55 * percent);\n    let R = (num >> 16) + amt;\n    let G = (num >> 8 & 0x00FF) + amt;\n    let B = (num & 0x0000FF) + amt;\n    return \"#\" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);\n  },\n\n  /**\n   * Function to darken a color.\n   * Expects a hex value as string and an integer as percent:\n   */\n  darkenColor: function(color, percent) {  \n    const num = parseInt(color.slice(1), 16);\n    const amt = Math.round(2.55 * percent);\n    let R = (num >> 16) - amt;\n    let G = (num >> 8 & 0x00FF) - amt;\n    let B = (num & 0x0000FF) - amt;\n    return \"#\" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);\n  },\n\n  /**\n   * Method to calculate color contrast.\n   * It expects a hex or rgb value:\n   */\n  calculateBrightness: function(color) {\n    if ($.type(color) === 'object') color = color.toHex();\n    const kolor = new $.ChuiColor(color);\n    return $.getBrightness(kolor);\n  }\n});\n\n\n/**\n * Android Ripple Effect - Triggered when Android theme is detected.\n */\n$(function() {\n\n  if ($.theme === 'android') {\n    $('body').on($.eventStart, \"button, ul.editing > li, li[data-show], li[data-select], li[data-goto], chui-sheet-handle, switch, .popover li\", function(e) {\n\n      let target = this;\n      \n      /**\n       * If item is disabled, do nothing.\n       */\n      if (target.hasAttribute(\"disabled\") || target.classList.contains(\"disabled\")) {\n        return;\n      }\n      \n      /**\n       * Get dimensions of target:\n       */\n      const offset = $(target).offset();\n      let w = Math.min(this.offsetWidth, 160);\n      let h = Math.min(this.offsetHeight, 160);\n      const d = Math.max(w, h);\n      /**\n       * Set width and height to whichever is greater:\n       */\n      w = d;\n      h = d;\n\n      const x = $.isAndroid ? e.touches[0].pageX - offset.left : e.pageX - offset.left;\n      const y = $.isAndroid ? e.touches[0].pageY - offset.top :  e.pageY - offset.top;\n\n      let navBkColor = undefined;\n      let backgroundColor = undefined;\n\n      /**\n       * Create ripple sheath and append to target:\n       */\n      const ripple = $('<ripple-sheath></ripple-sheath>');\n      $(target).append(ripple);\n\n      /**\n       * Check if button  is in navbar.\n       * If it is, get navbar background color and base ripple on that:\n       */\n\n      if (target.nodeName === 'BUTTON' && target.classList.contains('slide-out-button')) {\n        let navBkColor = $('screen > nav').eq(0).css('background-color');\n        backgroundColor = new $.ChuiColor(navBkColor).toHex();\n      } else if ((target.nodeName === 'BUTTON' && $(target).closest('nav')[0])) {\n        navBkColor = $(target).closest('nav').css('background-color');\n        backgroundColor = new $.ChuiColor(navBkColor).toHex();\n\n      } else if ((target.nodeName === 'BUTTON' && $(target).closest('toolbar')[0])) {\n        navBkColor = $(target).closest('toolbar').css('background-color');\n        backgroundColor = new $.ChuiColor(navBkColor).toHex();\n\n      } else {\n        backgroundColor = $(this).css('background-color');\n        if (!backgroundColor || backgroundColor === 'rgba(0, 0, 0, 0)') {\n          backgroundColor = '#fff'\n        }\n      }\n\n      /**\n       * Handle ripple color:\n       */\n      let rippleColor = '#fff';\n      const brightness = $.calculateBrightness(backgroundColor);\n      if (brightness > 195) {\n        rippleColor = '#aaa';\n      } else {\n        rippleColor = '#fff';\n      }\n\n      /**\n       * If ripple parent has custom color for ripple, use that:\n       */\n      if (target.dataset.rippleColor) {\n        rippleColor = target.dataset.rippleColor\n      }\n      \n      /**\n       * Create expanding ripple effect:\n       */\n      const rippleWave = $('<ripple-wave></ripple-wave>');\n      rippleWave.css({\n        \"background-color\": rippleColor,\n        width: h + 'px',\n        height: h + 'px',\n        left: x - (h/2) + 'px',\n        top: y - (h/2) + 'px',\n      });\n\n      /**\n       * Append to ripple, then delete:\n       */\n      ripple.append(rippleWave);\n      setTimeout(function() {\n        ripple.remove();\n      }, 1000);\n    });\n  }\n});\n$.extend({\n  Box: (function (globalObject) {\n    /**\n     * IndexedDB Driver:\n     */\n    (function () {\n      const self = this;\n      let indexedDB = indexedDB || globalObject.indexedDB || globalObject.webkitIndexedDB || globalObject.mozIndexedDB || globalObject.OIndexedDB || globalObject.msIndexedDB;\n      if (!indexedDB) {\n        return;\n      }\n\n      const DETECT_BLOB_SUPPORT_STORE = 'local-forage-detect-blob-support';\n      let supportsBlobs;\n      let dbContexts;\n      const toString = Object.prototype.toString;\n\n      function _binStringToArrayBuffer(bin) {\n        const length = bin.length;\n        const buf = new ArrayBuffer(length);\n        const arr = new Uint8Array(buf);\n        for (let i = 0; i < length; i++) {\n          arr[i] = bin.charCodeAt(i);\n        }\n        return buf;\n      }\n\n      function _checkBlobSupportWithoutCaching(txn) {\n        return new Promise(function(resolve) {\n          const blob = createBlob(['']);\n          txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob, 'key');\n\n          txn.onabort = function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            resolve(false);\n          };\n\n          txn.oncomplete = function() {\n            const matchedChrome = navigator.userAgent.match(/Chrome\\/(\\d+)/);\n            const matchedEdge = navigator.userAgent.match(/Edge\\//);\n            resolve(matchedEdge || !matchedChrome ||\n              parseInt(matchedChrome[1], 10) >= 43);\n          };\n        }).catch(function() {\n          return false;\n        });\n      }\n\n      function _checkBlobSupport(idb) {\n        if (typeof supportsBlobs === 'boolean') {\n          return Promise.resolve(supportsBlobs);\n        }\n        return _checkBlobSupportWithoutCaching(idb).then(function(value) {\n          supportsBlobs = value;\n          return supportsBlobs;\n        });\n      }\n\n      function _deferReadiness(dbInfo) {\n        const dbContext = dbContexts[dbInfo.name];\n        const deferredOperation = {};\n\n        deferredOperation.promise = new Promise(function(resolve) {\n          deferredOperation.resolve = resolve;\n        });\n\n        dbContext.deferredOperations.push(deferredOperation);\n\n        if (!dbContext.dbReady) {\n          dbContext.dbReady = deferredOperation.promise;\n        } else {\n          dbContext.dbReady = dbContext.dbReady.then(function() {\n            return deferredOperation.promise;\n          });\n        }\n      }\n\n      function _advanceReadiness(dbInfo) {\n        const dbContext = dbContexts[dbInfo.name];\n        const deferredOperation = dbContext.deferredOperations.pop();\n\n        if (deferredOperation) {\n          deferredOperation.resolve();\n        }\n      }\n\n      function _getConnection(dbInfo, upgradeNeeded) {\n        return new Promise(function(resolve, reject) {\n\n          if (dbInfo.db) {\n            if (upgradeNeeded) {\n              _deferReadiness(dbInfo);\n              dbInfo.db.close();\n            } else {\n              return resolve(dbInfo.db);\n            }\n          }\n\n          const dbArgs = [dbInfo.name];\n\n          if (upgradeNeeded) {\n            dbArgs.push(dbInfo.version);\n          }\n\n          const openreq = idb.open.apply(idb, dbArgs);\n\n          if (upgradeNeeded) {\n            openreq.onupgradeneeded = function(e) {\n              const db = openreq.result;\n              try {\n                db.createObjectStore(dbInfo.storeName);\n                if (e.oldVersion <= 1) {\n                  db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);\n                }\n              } catch (ex) {\n                if (ex.name === 'ConstraintError') {\n                  console.warn('The database \"' + dbInfo.name + '\"' +\n                    ' has been upgraded from version ' + e.oldVersion +\n                    ' to version ' + e.newVersion +\n                    ', but the storage \"' + dbInfo.storeName + '\" already exists.');\n                } else {\n                  throw ex;\n                }\n              }\n            };\n          }\n\n          openreq.onerror = function() {\n            reject(openreq.error);\n          };\n\n          openreq.onsuccess = function() {\n            resolve(openreq.result);\n            _advanceReadiness(dbInfo);\n          };\n        });\n      }\n\n      function _getOriginalConnection(dbInfo) {\n        return _getConnection(dbInfo, false);\n      }\n\n      function _getUpgradedConnection(dbInfo) {\n        return _getConnection(dbInfo, true);\n      }\n\n      function _isUpgradeNeeded(dbInfo, defaultVersion) {\n        if (!dbInfo.db) {\n          return true;\n        }\n\n        const isNewStore = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);\n        const isDowngrade = dbInfo.version < dbInfo.db.version;\n        const isUpgrade = dbInfo.version > dbInfo.db.version;\n\n        if (isDowngrade) {\n          if (dbInfo.version !== defaultVersion) {\n            console.warn('The database \"' + dbInfo.name + '\"' +\n              ' can\\'t be downgraded from version ' + dbInfo.db.version +\n              ' to version ' + dbInfo.version + '.');\n          }\n          dbInfo.version = dbInfo.db.version;\n        }\n\n        if (isUpgrade || isNewStore) {\n          if (isNewStore) {\n            const incVersion = dbInfo.db.version + 1;\n            if (incVersion > dbInfo.version) {\n              dbInfo.version = incVersion;\n            }\n          }\n          return true;\n        }\n        return false;\n      }\n\n      function _encodeBlob(blob) {\n        return new Promise(function(resolve, reject) {\n          const reader = new FileReader();\n          reader.onerror = reject;\n          reader.onloadend = function(e) {\n            const base64 = btoa(e.target.result || '');\n            resolve({\n              __local_forage_encoded_blob: true,\n              data: base64,\n              type: blob.type\n            });\n          };\n          reader.readAsBinaryString(blob);\n        });\n      }\n\n      function _decodeBlob(encodedBlob) {\n        const arrayBuff = _binStringToArrayBuffer(atob(encodedBlob.data));\n        return createBlob([arrayBuff], {type: encodedBlob.type});\n      }\n\n      function _isEncodedBlob(value) {\n        return value && value.__local_forage_encoded_blob;\n      }\n\n      function _fullyReady(callback) {\n        const self = this;\n\n        const promise = self._initReady().then(function() {\n          let dbContext = dbContexts[self._dbInfo.name];\n\n          if (dbContext && dbContext.dbReady) {\n            return dbContext.dbReady;\n          }\n        });\n\n        executeTwoCallbacks(promise, callback, callback);\n        return promise;\n      }\n\n      function _initStorage(options) {\n        const self = this;\n        const dbInfo = {\n          db: null\n        };\n\n        if (options) {\n          for (let i in options) {\n            dbInfo[i] = options[i];\n          }\n        }\n\n        if (!dbContexts) {\n          dbContexts = {};\n        }\n\n        let dbContext = dbContexts[dbInfo.name];\n\n        if (!dbContext) {\n          dbContext = {\n            forages: [],\n            db: null,\n            dbReady: null,\n            deferredOperations: []\n          };\n          dbContexts[dbInfo.name] = dbContext;\n        }\n\n        dbContext.forages.push(self);\n\n        if (!self._initReady) {\n          self._initReady = self.ready;\n          self.ready = _fullyReady;\n        }\n\n        const initPromises = [];\n\n        function ignoreErrors() {\n          return Promise.resolve();\n        }\n\n        for (let j = 0; j < dbContext.forages.length; j++) {\n          const forage = dbContext.forages[j];\n          if (forage !== self) {\n            initPromises.push(forage._initReady().catch(ignoreErrors));\n          }\n        }\n\n        const forages = dbContext.forages.slice(0);\n\n        return Promise.all(initPromises).then(function() {\n          dbInfo.db = dbContext.db;\n          return _getOriginalConnection(dbInfo);\n        }).then(function(db) {\n          dbInfo.db = db;\n          if (_isUpgradeNeeded(dbInfo, self._defaultConfig.version)) {\n            return _getUpgradedConnection(dbInfo);\n          }\n          return db;\n        }).then(function(db) {\n          dbInfo.db = dbContext.db = db;\n          self._dbInfo = dbInfo;\n          for (let k = 0; k < forages.length; k++) {\n            let forage = forages[k];\n            if (forage !== self) {\n              forage._dbInfo.db = dbInfo.db;\n              forage._dbInfo.version = dbInfo.version;\n            }\n          }\n        });\n      }\n\n      function get(key, callback) {\n        const self = this;\n\n        if (typeof key !== 'string') {\n          console.warn(key +\n            ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = new Promise(function(resolve, reject) {\n          self.ready().then(function() {\n            const dbInfo = self._dbInfo;\n            const store = dbInfo.db.transaction(dbInfo.storeName, 'readonly')\n              .objectStore(dbInfo.storeName);\n            const req = store.get(key);\n\n            req.onsuccess = function() {\n              let value = req.result;\n              if (value === undefined) {\n                value = null;\n              }\n              if (_isEncodedBlob(value)) {\n                value = _decodeBlob(value);\n              }\n              resolve(value);\n            };\n\n            req.onerror = function() {\n              reject(req.error);\n            };\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function each(iterator, callback) {\n        const self = this;\n\n        const promise = new Promise(function(resolve, reject) {\n          self.ready().then(function() {\n            const dbInfo = self._dbInfo;\n            const store = dbInfo.db.transaction(dbInfo.storeName, 'readonly')\n              .objectStore(dbInfo.storeName);\n\n            const req = store.openCursor();\n            let iterationNumber = 1;\n\n            req.onsuccess = function() {\n              const cursor = req.result;\n\n              if (cursor) {\n                let value = cursor.value;\n                if (_isEncodedBlob(value)) {\n                  value = _decodeBlob(value);\n                }\n                const result = iterator(value, cursor.key,\n                  iterationNumber++);\n\n                if (result !== void(0)) {\n                  resolve(result);\n                } else {\n                  cursor.continue();\n                }\n              } else {\n                resolve();\n              }\n            };\n\n            req.onerror = function() {\n              reject(req.error);\n            };\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n\n        return promise;\n      }\n\n      function set(key, value, callback) {\n        const self = this;\n\n        if (typeof key !== 'string') {\n          console.warn(key +\n            ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = new Promise(function(resolve, reject) {\n          let dbInfo;\n          self.ready().then(function() {\n            dbInfo = self._dbInfo;\n            if (toString.call(value) === '[object Blob]') {\n              return _checkBlobSupport(dbInfo.db).then(function(blobSupport) {\n                if (blobSupport) {\n                  return value;\n                }\n                return _encodeBlob(value);\n              });\n            }\n            return value;\n          }).then(function(value) {\n            const transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');\n            const store = transaction.objectStore(dbInfo.storeName);\n\n            if (value === null) {\n              value = undefined;\n            }\n\n            transaction.oncomplete = function() {\n              if (value === undefined) {\n                value = null;\n              }\n\n              resolve(value);\n            };\n            transaction.onabort = transaction.onerror = function() {\n              const err = req.error ? req.error : req.transaction.error;\n              reject(err);\n            };\n\n            const req = store.put(value, key);\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function remove(key, callback) {\n        const self = this;\n\n        if (typeof key !== 'string') {\n          console.warn(key +\n            ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = new Promise(function(resolve, reject) {\n          self.ready().then(function() {\n            const dbInfo = self._dbInfo;\n            const transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');\n            const store = transaction.objectStore(dbInfo.storeName);\n            const req = store.delete(key);\n            transaction.oncomplete = function() {\n              resolve();\n            };\n\n            transaction.onerror = function() {\n              reject(req.error);\n            };\n\n            transaction.onabort = function() {\n              const err = req.error ? req.error : req.transaction.error;\n              reject(err);\n            };\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function clear(callback) {\n        const self = this;\n\n        const promise = new Promise(function(resolve, reject) {\n          self.ready().then(function() {\n            const dbInfo = self._dbInfo;\n            const transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');\n            const store = transaction.objectStore(dbInfo.storeName);\n            const req = store.clear();\n\n            transaction.oncomplete = function() {\n              resolve();\n            };\n\n            transaction.onabort = transaction.onerror = function() {\n              const err = req.error ? req.error : req.transaction.error;\n              reject(err);\n            };\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function length(callback) {\n        const self = this;\n\n        const promise = new Promise(function(resolve, reject) {\n          self.ready().then(function() {\n            const dbInfo = self._dbInfo;\n            const store = dbInfo.db.transaction(dbInfo.storeName, 'readonly')\n              .objectStore(dbInfo.storeName);\n            const req = store.count();\n\n            req.onsuccess = function() {\n              resolve(req.result);\n            };\n\n            req.onerror = function() {\n              reject(req.error);\n            };\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function key(n, callback) {\n        const self = this;\n\n        const promise = new Promise(function(resolve, reject) {\n          if (n < 0) {\n            resolve(null);\n\n            return;\n          }\n\n          self.ready().then(function() {\n            const dbInfo = self._dbInfo;\n            const store = dbInfo.db.transaction(dbInfo.storeName, 'readonly')\n              .objectStore(dbInfo.storeName);\n\n            let advanced = false;\n            const req = store.openCursor();\n            req.onsuccess = function() {\n              const cursor = req.result;\n              if (!cursor) {\n                resolve(null);\n\n                return;\n              }\n\n              if (n === 0) {\n                resolve(cursor.key);\n              } else {\n                if (!advanced) {\n                  advanced = true;\n                  cursor.advance(n);\n                } else {\n                  resolve(cursor.key);\n                }\n              }\n            };\n\n            req.onerror = function() {\n              reject(req.error);\n            };\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function keys(callback) {\n        const self = this;\n\n        const promise = new Promise(function(resolve, reject) {\n          self.ready().then(function() {\n            const dbInfo = self._dbInfo;\n            const store = dbInfo.db.transaction(dbInfo.storeName, 'readonly')\n              .objectStore(dbInfo.storeName);\n\n            const req = store.openCursor();\n            const keys = [];\n\n            req.onsuccess = function() {\n              const cursor = req.result;\n\n              if (!cursor) {\n                resolve(keys);\n                return;\n              }\n\n              keys.push(cursor.key);\n              cursor.continue();\n            };\n\n            req.onerror = function() {\n              reject(req.error);\n            };\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      const asyncStorage = {\n        _driver: 'asyncStorage',\n        _initStorage: _initStorage,\n        each: each,\n        get: get,\n        set: set,\n        remove: remove,\n        clear: clear,\n        length: length,\n        key: key,\n        keys: keys\n      };\n\n      /**\n       * Export driver:\n       */\n      this.asyncStorage = asyncStorage;\n      globalObject.asyncStorage = asyncStorage;\n    }).call(window);\n\n    /**\n     * WebSQL Driver:\n     */\n    (function () {\n      const globalObject = this;\n      const openDatabase = this.openDatabase;\n      if (!openDatabase) {\n        return;\n      }\n\n      function __initStorage(options) {\n        const self = this;\n        let dbInfo = {\n          db: null\n        };\n\n        if (options) {\n          for (let i in options) {\n            dbInfo[i] = typeof options[i] !== 'string' ? options[i].toString() : options[i];\n          }\n        }\n\n        const dbInfoPromise = new Promise(function (resolve, reject) {\n          try {\n            dbInfo.db = openDatabase(dbInfo.name, String(dbInfo.version), dbInfo.description, dbInfo.size);\n          } catch (e) {\n            return self.setDriver(self.LOCALSTORAGE).then(function () {\n              return self.__initStorage(options);\n            }).then(resolve)['catch'](reject);\n          }\n\n          dbInfo.db.transaction(function (t) {\n            t.executeSql('CREATE TABLE IF NOT EXISTS ' + dbInfo.boxName + ' (id INTEGER PRIMARY KEY, key unique, value)', [], function () {\n              self.__dbInfo = dbInfo;\n              resolve();\n            }, function (t, error) {\n              reject(error);\n            });\n          });\n        });\n\n        return new Promise(function (resolve, reject) {\n          resolve(chuiBoxSerializer);\n        }).then(function (lib) {\n          dbInfo.serializer = lib;\n          return dbInfoPromise;\n        });\n      }\n\n      function get(key, callback) {\n        const self = this;\n        if (typeof key !== 'string') {\n          globalObject.console.warn(key + ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            const dbInfo = self.__dbInfo;\n            dbInfo.db.transaction(function (t) {\n              t.executeSql('SELECT * FROM ' + dbInfo.boxName + ' WHERE key = ? LIMIT 1', [key], function (t, results) {\n                let result = results.rows.length ? results.rows.item(0).value : null;\n                if (result) {\n                  result = dbInfo.serializer.deserialize(result);\n                }\n                resolve(result);\n              }, \n              function (t, error) {\n                reject(error);\n              });\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function each(iterator, callback) {\n        const self = this;\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            const dbInfo = self.__dbInfo;\n\n            dbInfo.db.transaction(function (t) {\n              t.executeSql('SELECT * FROM ' + dbInfo.boxName, [], function (t, results) {\n                const rows = results.rows;\n                const length = rows.length;\n\n                for (let i = 0; i < length; i++) {\n                  const item = rows.item(i);\n                  let result = item.value;\n                  if (result) {\n                    result = dbInfo.serializer.deserialize(result);\n                  }\n                  result = iterator(result, item.key, i + 1);\n                  if (result !== undefined) {\n                    resolve(result);\n                    return;\n                  }\n                }\n\n                resolve();\n              }, function (t, error) {\n                reject(error);\n              });\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function set(key, value, callback) {\n        const self = this;\n        if (typeof key !== 'string') {\n          globalObject.console.warn(key + ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            if (value === undefined) {\n              value = null;\n            }\n\n            const originalValue = value;\n            const dbInfo = self.__dbInfo;\n\n            dbInfo.serializer.serialize(value, function (value, error) {\n              if (error) {\n                reject(error);\n              } else {\n                dbInfo.db.transaction(function (t) {\n                  t.executeSql('INSERT OR REPLACE INTO ' + dbInfo.boxName + ' (key, value) VALUES (?, ?)', [key, value], function () {\n                    resolve(originalValue);\n                  }, function (t, error) {\n                    reject(error);\n                  });\n                }, function (sqlError) {\n                  if (sqlError.code === sqlError.QUOTA_ERR) {\n                    reject(sqlError);\n                  }\n                });\n              }\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function remove(key, callback) {\n        const self = this;\n        if (typeof key !== 'string') {\n          globalObject.console.warn(key + ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            const dbInfo = self.__dbInfo;\n            dbInfo.db.transaction(function (t) {\n              t.executeSql('DELETE FROM ' + dbInfo.boxName + ' WHERE key = ?', [key], function () {\n                resolve();\n              }, function (t, error) {\n\n                reject(error);\n              });\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function clear(callback) {\n        const self = this;\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            const dbInfo = self.__dbInfo;\n            dbInfo.db.transaction(function (t) {\n              t.executeSql('DELETE FROM ' + dbInfo.boxName, [], function () {\n                resolve();\n              }, function (t, error) {\n                reject(error);\n              });\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function size(callback) {\n        const self = this;\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            const dbInfo = self.__dbInfo;\n            dbInfo.db.transaction(function (t) {\n              t.executeSql('SELECT COUNT(key) as c FROM ' + dbInfo.boxName, [], function (t, results) {\n                const result = results.rows.item(0).c;\n\n                resolve(result);\n              }, function (t, error) {\n\n                reject(error);\n              });\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function key(n, callback) {\n        const self = this;\n\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            const dbInfo = self.__dbInfo;\n            dbInfo.db.transaction(function (t) {\n              t.executeSql('SELECT key FROM ' + dbInfo.boxName + ' WHERE id = ? LIMIT 1', [n + 1], function (t, results) {\n                const result = results.rows.length ? results.rows.item(0).key : null;\n                resolve(result);\n              }, function (t, error) {\n                reject(error);\n              });\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function keys(callback) {\n        const self = this;\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            const dbInfo = self.__dbInfo;\n            dbInfo.db.transaction(function (t) {\n              t.executeSql('SELECT key FROM ' + dbInfo.boxName, [], function (t, results) {\n                const keys = [];\n\n                for (var i = 0; i < results.rows.length; i++) {\n                  keys.push(results.rows.item(i).key);\n                }\n                resolve(keys);\n\n              }, function (t, error) {\n                reject(error);\n              });\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function executeCallback(promise, callback) {\n        if (callback) {\n          promise.then(function (result) {\n            callback(null, result);\n          }, function (error) {\n            callback(error);\n          });\n        }\n      }\n\n      const webSQLStorage = {\n        __driver: 'webSQLStorage',\n        __initStorage: __initStorage,\n        each: each,\n        get: get,\n        set: set,\n        remove: remove,\n        clear: clear,\n        size: size,\n        key: key,\n        keys: keys\n      };\n\n      /**\n       * Export driver:\n       */\n      this.webSQLStorage = webSQLStorage;\n      globalObject.webSQLStorage = webSQLStorage;\n    }).call(window);\n\n    /**\n     * localStorage Driver:\n     */\n    (function () {\n      const globalObject = this;\n      let localStorage = null;\n      try {\n        if (!this.localStorage || !('set' in this.localStorage)) {\n          return;\n        }\n        localStorage = this.localStorage;\n      } catch (e) {\n        return;\n      }\n\n      function __initStorage(options) {\n        const self = this;\n        const dbInfo = {};\n        if (options) {\n          for (var i in options) {\n            dbInfo[i] = options[i];\n          }\n        }\n\n        dbInfo.keyPrefix = dbInfo.name + '/';\n\n        if (dbInfo.boxName !== self.__defaultConfig.boxName) {\n          dbInfo.keyPrefix += dbInfo.boxName + '/';\n        }\n\n        self.__dbInfo = dbInfo;\n\n        return new Promise(function (resolve, reject) {\n          resolve(chuiBoxSerializer);\n        }).then(function (lib) {\n          dbInfo.serializer = lib;\n          return Promise.resolve();\n        });\n      }\n\n      function clear(callback) {\n        const self = this;\n        const promise = self.ready().then(function () {\n          const keyPrefix = self.__dbInfo.keyPrefix;\n\n          for (let i = localStorage.length - 1; i >= 0; i--) {\n            const _key = localStorage.key(i);\n\n            if (_key.indexOf(keyPrefix) === 0) {\n              localStorage.remove(_key);\n            }\n          }\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function get(key, callback) {\n        const self = this;\n        if (typeof key !== 'string') {\n          globalObject.console.warn(key + ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = self.ready().then(function () {\n          const dbInfo = self.__dbInfo;\n          let result = localStorage.get(dbInfo.keyPrefix + key);\n          if (result) {\n            result = dbInfo.serializer.deserialize(result);\n          }\n          return result;\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function each(iterator, callback) {\n        const self = this;\n\n        const promise = self.ready().then(function () {\n          const dbInfo = self.__dbInfo;\n          const keyPrefix = dbInfo.keyPrefix;\n          const keyPrefixLength = keyPrefix.length;\n          const length = localStorage.length;\n          let iterationNumber = 1;\n\n          for (var i = 0; i < length; i++) {\n            const _key2 = localStorage.key(i);\n            if (_key2.indexOf(keyPrefix) !== 0) {\n              continue;\n            }\n            let value = localStorage.get(_key2);\n            if (value) {\n              value = dbInfo.serializer.deserialize(value);\n            }\n\n            value = iterator(value, _key2.substring(keyPrefixLength), iterationNumber++);\n            if (value !== undefined) {\n              return value;\n            }\n          }\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function key(n, callback) {\n        const self = this;\n        const promise = self.ready().then(function () {\n          const dbInfo = self.__dbInfo;\n          let result = undefined;\n          try {\n            result = localStorage.key(n);\n          } catch (error) {\n            result = null;\n          }\n\n          if (result) {\n            result = result.substring(dbInfo.keyPrefix.length);\n          }\n          return result;\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function keys(callback) {\n        const self = this;\n        const promise = self.ready().then(function () {\n          const dbInfo = self.__dbInfo;\n          const length = localStorage.length;\n          const keys = [];\n\n          for (let i = 0; i < length; i++) {\n            if (localStorage.key(i).indexOf(dbInfo.keyPrefix) === 0) {\n              keys.push(localStorage.key(i).substring(dbInfo.keyPrefix.length));\n            }\n          }\n          return keys;\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function size(callback) {\n        const self = this;\n        const promise = self.keys().then(function (keys) {\n          return keys.length;\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function remove(key, callback) {\n        const self = this;\n        if (typeof key !== 'string') {\n          globalObject.console.warn(key + ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = self.ready().then(function () {\n          const dbInfo = self.__dbInfo;\n          localStorage.remove(dbInfo.keyPrefix + key);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function set(key, value, callback) {\n        const self = this;\n        if (typeof key !== 'string') {\n          globalObject.console.warn(key + ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = self.ready().then(function () {\n          if (value === undefined) {\n            value = null;\n          }\n          const originalValue = value;\n\n          return new Promise(function (resolve, reject) {\n            const dbInfo = self.__dbInfo;\n            dbInfo.serializer.serialize(value, function (value, error) {\n              if (error) {\n                reject(error);\n              } else {\n                try {\n                  localStorage.set(dbInfo.keyPrefix + key, value);\n                  resolve(originalValue);\n                } catch (e) {\n                  if (e.name === 'QuotaExceededError' || e.name === 'NS_ERROR_DOM_QUOTA_REACHED') {\n                    reject(e);\n                  }\n                  reject(e);\n                }\n              }\n            });\n          });\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function executeCallback(promise, callback) {\n        if (callback) {\n          promise.then(function (result) {\n            callback(null, result);\n          }, function (error) {\n            callback(error);\n          });\n        }\n      }\n\n      const localStorageWrapper = {\n        __driver: 'localStorageWrapper',\n        __initStorage: __initStorage,\n        each: each,\n        get: get,\n        set: set,\n        remove: remove,\n        clear: clear,\n        size: size,\n        key: key,\n        keys: keys\n      };\n\n      /**\n       * Export driver:\n       */\n      this.localStorageWrapper = localStorageWrapper;\n      window.localStorageWrapper = localStorageWrapper;\n    }).call(window);\n\n    /**\n     * Blob Serializer:\n     */\n    (function () {\n      const BASE_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n      const BLOB_TYPE_PREFIX = '~~chui_box_type~';\n      const BLOB_TYPE_PREFIX_REGEX = /^~~chui_box_type~([^~]+)~/;\n      const SERIALIZED_MARKER = '__lfsc__:';\n      const SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;\n      const TYPE_ARRAYBUFFER = 'arbf';\n      const TYPE_BLOB = 'blob';\n      const TYPE_INT8ARRAY = 'si08';\n      const TYPE_UINT8ARRAY = 'ui08';\n      const TYPE_UINT8CLAMPEDARRAY = 'uic8';\n      const TYPE_INT16ARRAY = 'si16';\n      const TYPE_INT32ARRAY = 'si32';\n      const TYPE_UINT16ARRAY = 'ur16';\n      const TYPE_UINT32ARRAY = 'ui32';\n      const TYPE_FLOAT32ARRAY = 'fl32';\n      const TYPE_FLOAT64ARRAY = 'fl64';\n      const TYPE_SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;\n      const globalObject = this;\n\n      function __createBlob(parts, properties) {\n        parts = parts || [];\n        properties = properties || {};\n\n        try {\n          return new Blob(parts, properties);\n        } catch (err) {\n          if (err.name !== 'TypeError') {\n            throw err;\n          }\n\n          const BlobBuilder = globalObject.BlobBuilder || globalObject.MSBlobBuilder || globalObject.MozBlobBuilder || globalObject.WebKitBlobBuilder;\n\n          const builder = new BlobBuilder();\n          for (let i = 0; i < parts.length; i += 1) {\n            builder.append(parts[i]);\n          }\n          return builder.getBlob(properties.type);\n        }\n      }\n\n      function serialize(value, callback) {\n        let valueString = '';\n        if (value) {\n          valueString = value.toString();\n        }\n\n        if (value && (value.toString() === '[object ArrayBuffer]' || value.buffer && value.buffer.toString() === '[object ArrayBuffer]')) {\n          let buffer = undefined;\n          let marker = SERIALIZED_MARKER;\n\n          if (value instanceof ArrayBuffer) {\n            buffer = value;\n            marker += TYPE_ARRAYBUFFER;\n          } else {\n            buffer = value.buffer;\n\n            if (valueString === '[object Int8Array]') {\n              marker += TYPE_INT8ARRAY;\n            } else if (valueString === '[object Uint8Array]') {\n              marker += TYPE_UINT8ARRAY;\n            } else if (valueString === '[object Uint8ClampedArray]') {\n              marker += TYPE_UINT8CLAMPEDARRAY;\n            } else if (valueString === '[object Int16Array]') {\n              marker += TYPE_INT16ARRAY;\n            } else if (valueString === '[object Uint16Array]') {\n              marker += TYPE_UINT16ARRAY;\n            } else if (valueString === '[object Int32Array]') {\n              marker += TYPE_INT32ARRAY;\n            } else if (valueString === '[object Uint32Array]') {\n              marker += TYPE_UINT32ARRAY;\n            } else if (valueString === '[object Float32Array]') {\n              marker += TYPE_FLOAT32ARRAY;\n            } else if (valueString === '[object Float64Array]') {\n              marker += TYPE_FLOAT64ARRAY;\n            } else {\n              callback(new Error('Failed to get type for BinaryArray'));\n            }\n          }\n\n          callback(marker + bufferToString(buffer));\n        } else if (valueString === '[object Blob]') {\n          const fileReader = new FileReader();\n\n          fileReader.onload = function () {\n            const str = BLOB_TYPE_PREFIX + value.type + '~' + bufferToString(this.result);\n            callback(SERIALIZED_MARKER + TYPE_BLOB + str);\n          };\n\n          fileReader.readAsArrayBuffer(value);\n        } else {\n          try {\n            callback(JSON.stringify(value));\n          } catch (e) {\n            console.error(\"Couldn't convert value into a JSON string: \", value);\n\n            callback(null, e);\n          }\n        }\n      }\n\n      function deserialize(value) {\n        if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {\n          return JSON.parse(value);\n        }\n        let serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);\n        const type = value.substring(SERIALIZED_MARKER_LENGTH, TYPE_SERIALIZED_MARKER_LENGTH);\n        let blobType = undefined;\n        if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {\n          const matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);\n          blobType = matcher[1];\n          serializedString = serializedString.substring(matcher[0].length);\n        }\n        const buffer = stringToBuffer(serializedString);\n\n        switch (type) {\n          case TYPE_ARRAYBUFFER:\n            return buffer;\n          case TYPE_BLOB:\n            return __createBlob([buffer], {\n              type: blobType\n            });\n          case TYPE_INT8ARRAY:\n            return new Int8Array(buffer);\n          case TYPE_UINT8ARRAY:\n            return new Uint8Array(buffer);\n          case TYPE_UINT8CLAMPEDARRAY:\n            return new Uint8ClampedArray(buffer);\n          case TYPE_INT16ARRAY:\n            return new Int16Array(buffer);\n          case TYPE_UINT16ARRAY:\n            return new Uint16Array(buffer);\n          case TYPE_INT32ARRAY:\n            return new Int32Array(buffer);\n          case TYPE_UINT32ARRAY:\n            return new Uint32Array(buffer);\n          case TYPE_FLOAT32ARRAY:\n            return new Float32Array(buffer);\n          case TYPE_FLOAT64ARRAY:\n            return new Float64Array(buffer);\n          default:\n            throw new Error('Unkown type: ' + type);\n        }\n      }\n\n      function stringToBuffer(serializedString) {\n        let bufferLength = serializedString.length * 0.75;\n        const len = serializedString.length;\n        let i = undefined;\n        let p = 0;\n        var encoded1 = undefined,\n            encoded2 = undefined,\n            encoded3 = undefined,\n            encoded4 = undefined;\n        if (serializedString[serializedString.length - 1] === '=') {\n          bufferLength--;\n          if (serializedString[serializedString.length - 2] === '=') {\n            bufferLength--;\n          }\n        }\n        const buffer = new ArrayBuffer(bufferLength);\n        const bytes = new Uint8Array(buffer);\n\n        for (i = 0; i < len; i += 4) {\n          encoded1 = BASE_CHARS.indexOf(serializedString[i]);\n          encoded2 = BASE_CHARS.indexOf(serializedString[i + 1]);\n          encoded3 = BASE_CHARS.indexOf(serializedString[i + 2]);\n          encoded4 = BASE_CHARS.indexOf(serializedString[i + 3]);\n\n          /*jslint bitwise: true */\n          bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n          bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n          bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n        }\n        return buffer;\n      }\n\n      function bufferToString(buffer) {\n        const bytes = new Uint8Array(buffer);\n        let base64String = '';\n        let i = undefined;\n\n        for (i = 0; i < bytes.length; i += 3) {\n          /*jslint bitwise: true */\n          base64String += BASE_CHARS[bytes[i] >> 2];\n          base64String += BASE_CHARS[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];\n          base64String += BASE_CHARS[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];\n          base64String += BASE_CHARS[bytes[i + 2] & 63];\n        }\n        if (bytes.length % 3 === 2) {\n          base64String = base64String.substring(0, base64String.length - 1) + '=';\n        } else if (bytes.length % 3 === 1) {\n          base64String = base64String.substring(0, base64String.length - 2) + '==';\n        }\n        return base64String;\n      }\n\n      const chuiBoxSerializer = {\n        serialize: serialize,\n        deserialize: deserialize,\n        stringToBuffer: stringToBuffer,\n        bufferToString: bufferToString\n      };\n\n      /**\n       * Export driver:\n       */\n      this.chuiBoxSerializer = chuiBoxSerializer;\n      window.chuiBoxSerializer = chuiBoxSerializer;\n    }).call(window);\n\n    /**\n     * ChocolateChip-UI Box Implementation:\n     */\n    const CustomDrivers = {};\n    const DriverType = {\n      INDEXEDDB: 'asyncStorage',\n      LOCALSTORAGE: 'localStorageWrapper',\n      WEBSQL: 'webSQLStorage'\n    };\n    const DefaultDriverOrder = [DriverType.INDEXEDDB, DriverType.WEBSQL, DriverType.LOCALSTORAGE];\n    const LibraryMethods = ['clear', 'get', 'each', 'key', 'keys', 'size', 'remove', 'set'];\n\n    const DefaultConfig = {\n      description: '',\n      driver: DefaultDriverOrder.slice(),\n      name: 'chuibox',\n      size: 4980736,\n      boxName: 'keyvaluepairs',\n      version: 1.0\n    };\n\n    const driverSupport = (function (self) {\n      const indexedDB = indexedDB || self.indexedDB || self.webkitIndexedDB || self.mozIndexedDB || self.OIndexedDB || self.msIndexedDB;\n      const result = {};\n      result[DriverType.WEBSQL] = !!self.openDatabase;\n      result[DriverType.INDEXEDDB] = !!(function () {\n        if (typeof self.openDatabase !== 'undefined' && self.navigator && self.navigator.userAgent && /Safari/.test(self.navigator.userAgent) && !/Chrome/.test(self.navigator.userAgent)) {\n          return false;\n        }\n        try {\n          return indexedDB && typeof indexedDB.open === 'function' && typeof self.IDBKeyRange !== 'undefined';\n        } catch (e) {\n          return false;\n        }\n      })();\n\n      result[DriverType.LOCALSTORAGE] = !!(function () {\n        try {\n          return self.localStorage && 'set' in self.localStorage && self.localStorage.set;\n        } catch (e) {\n          return false;\n        }\n      })();\n\n      return result;\n    })(window);\n\n    const isArray = Array.isArray || function (arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    };\n\n    function callWhenReady(chuiBoxInstance, libraryMethod) {\n      chuiBoxInstance[libraryMethod] = function () {\n        const __args = arguments;\n        return chuiBoxInstance.ready().then(function () {\n          return chuiBoxInstance[libraryMethod].apply(chuiBoxInstance, __args);\n        });\n      };\n    }\n\n    function extend() {\n      for (let i = 1; i < arguments.length; i++) {\n        const arg = arguments[i];\n\n        if (arg) {\n          for (let key in arg) {\n            if (arg.hasOwnProperty(key)) {\n              if (isArray(arg[key])) {\n                arguments[0][key] = arg[key].slice();\n              } else {\n                arguments[0][key] = arg[key];\n              }\n            }\n          }\n        }\n      }\n\n      return arguments[0];\n    }\n\n    function isLibraryDriver(driverName) {\n      for (let driver in DriverType) {\n        if (DriverType.hasOwnProperty(driver) && DriverType[driver] === driverName) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    const ChuiBox = (function () {\n      function ChuiBox(options) {\n\n        this.INDEXEDDB = DriverType.INDEXEDDB;\n        this.LOCALSTORAGE = DriverType.LOCALSTORAGE;\n        this.WEBSQL = DriverType.WEBSQL;\n\n        this.__defaultConfig = extend({}, DefaultConfig);\n        this.__config = extend({}, this.__defaultConfig, options);\n        this.__driverSet = null;\n        this.__initDriver = null;\n        this.__ready = false;\n        this.__dbInfo = null;\n\n        this.__wrapLibraryMethodsWithReady();\n        this.setDriver(this.__config.driver);\n      }\n\n      ChuiBox.prototype.config = function (options) {\n        if (typeof options === 'object') {\n          if (this.__ready) {\n            return new Error(\"Can't call config() after chuibox \" + 'has been used.');\n          }\n          for (let i in options) {\n            if (i === 'boxName') {\n              options[i] = options[i].replace(/\\W/g, '_');\n            }\n\n            this.__config[i] = options[i];\n          }\n          if ('driver' in options && options.driver) {\n            this.setDriver(this.__config.driver);\n          }\n\n          return true;\n        } else if (typeof options === 'string') {\n          return this.__config[options];\n        } else {\n          return this.__config;\n        }\n      };\n\n      ChuiBox.prototype.defineDriver = function (driverObject, callback, errorCallback) {\n        const promise = new Promise(function (resolve, reject) {\n          try {\n            const _ret = (function () {\n              const driverName = driverObject.__driver;\n              const complianceError = new Error('Custom driver not compliant; see ChocolateChip-UI Box documentation');\n              const namingError = new Error('Custom driver name already in use: ' + driverObject.__driver);\n              if (!driverObject.__driver) {\n                reject(complianceError);\n                return {\n                  v: undefined\n                };\n              }\n              if (isLibraryDriver(driverObject.__driver)) {\n                reject(namingError);\n                return {\n                  v: undefined\n                };\n              }\n\n              const customDriverMethods = LibraryMethods.concat('__initStorage');\n              for (let i = 0; i < customDriverMethods.length; i++) {\n                const customDriverMethod = customDriverMethods[i];\n                if (!customDriverMethod || !driverObject[customDriverMethod] || typeof driverObject[customDriverMethod] !== 'function') {\n                  reject(complianceError);\n                  return {\n                    v: undefined\n                  };\n                }\n              }\n\n              let supportPromise = Promise.resolve(true);\n              if ('__support' in driverObject) {\n                if (driverObject.__support && typeof driverObject.__support === 'function') {\n                  supportPromise = driverObject.__support();\n                } else {\n                  supportPromise = Promise.resolve(!!driverObject.__support);\n                }\n              }\n\n              supportPromise.then(function (supportResult) {\n                driverSupport[driverName] = supportResult;\n                CustomDrivers[driverName] = driverObject;\n                resolve();\n              }, reject);\n            })();\n\n            if (typeof _ret === 'object') return _ret.v;\n          } catch (e) {\n            reject(e);\n          }\n        });\n\n        promise.then(callback, errorCallback);\n        return promise;\n      };\n\n      ChuiBox.prototype.driver = function () {\n        return this.__driver || null;\n      };\n\n      ChuiBox.prototype.getDriver = function (driverName, callback, errorCallback) {\n        const self = this;\n        const getDriverPromise = (function () {\n          if (isLibraryDriver(driverName)) {\n            switch (driverName) {\n              case self.INDEXEDDB:\n                return new Promise(function (resolve, reject) {\n                  resolve(asyncStorage);\n                });\n              case self.LOCALSTORAGE:\n                return new Promise(function (resolve, reject) {\n                  resolve(localStorageWrapper);\n                });\n              case self.WEBSQL:\n                return new Promise(function (resolve, reject) {\n                  resolve(webSQLStorage);\n                });\n            }\n          } else if (CustomDrivers[driverName]) {\n            console.log('Using: ' + driverName);\n            return Promise.resolve(CustomDrivers[driverName]);\n          }\n\n          return Promise.reject(new Error('Driver not found.'));\n        })();\n\n        getDriverPromise.then(callback, errorCallback);\n        return getDriverPromise;\n      };\n\n      ChuiBox.prototype.getSerializer = function (callback) {\n        const serializerPromise = new Promise(function (resolve, reject) {\n          resolve(chuiBoxSerializer);\n        });\n        if (callback && typeof callback === 'function') {\n          serializerPromise.then(function (result) {\n            callback(result);\n          });\n        }\n        return serializerPromise;\n      };\n\n      ChuiBox.prototype.ready = function (callback) {\n        const self = this;\n\n        const promise = self.__driverSet.then(function () {\n          if (self.__ready === null) {\n            self.__ready = self.__initDriver();\n          }\n\n          return self.__ready;\n        });\n\n        promise.then(callback, callback);\n        return promise;\n      };\n\n      ChuiBox.prototype.setDriver = function (drivers, callback, errorCallback) {\n        const self = this;\n\n        if (!isArray(drivers)) {\n          drivers = [drivers];\n        }\n\n        const supportedDrivers = this.__getSupportedDrivers(drivers);\n\n        function setDriverToConfig() {\n          self.__config.driver = self.driver();\n        }\n\n        function initDriver(supportedDrivers) {\n          return function () {\n            var currentDriverIndex = 0;\n\n            function driverPromiseLoop() {\n              while (currentDriverIndex < supportedDrivers.length) {\n                const driverName = supportedDrivers[currentDriverIndex];\n                currentDriverIndex++;\n\n                self.__dbInfo = null;\n                self.__ready = null;\n\n                return self.getDriver(driverName).then(function (driver) {\n                  self.__extend(driver);\n                  setDriverToConfig();\n\n                  self.__ready = self.__initStorage(self.__config);\n                  return self.__ready;\n                })['catch'](driverPromiseLoop);\n              }\n\n              setDriverToConfig();\n              const error = new Error('No available storage method found.');\n              self.__driverSet = Promise.reject(error);\n              return self.__driverSet;\n            }\n\n            return driverPromiseLoop();\n          };\n        }\n\n        const oldDriverSetDone = this.__driverSet !== null ? this.__driverSet['catch'](function () {\n          return Promise.resolve();\n        }) : Promise.resolve();\n\n        this.__driverSet = oldDriverSetDone.then(function () {\n          const driverName = supportedDrivers[0];\n          self.__dbInfo = null;\n          self.__ready = null;\n\n          return self.getDriver(driverName).then(function (driver) {\n            self.__driver = driver.__driver;\n            setDriverToConfig();\n            self.__wrapLibraryMethodsWithReady();\n            self.__initDriver = initDriver(supportedDrivers);\n          });\n        })['catch'](function () {\n          setDriverToConfig();\n          const error = new Error('No available storage method found.');\n          self.__driverSet = Promise.reject(error);\n          return self.__driverSet;\n        });\n\n        this.__driverSet.then(callback, errorCallback);\n        return this.__driverSet;\n      };\n\n      ChuiBox.prototype.supports = function (driverName) {\n        return !!driverSupport[driverName];\n      };\n\n      ChuiBox.prototype.__extend = function (libraryMethodsAndProperties) {\n        extend(this, libraryMethodsAndProperties);\n      };\n\n      ChuiBox.prototype.__getSupportedDrivers = function (drivers) {\n        var supportedDrivers = [];\n        for (let i = 0, len = drivers.length; i < len; i++) {\n          const driverName = drivers[i];\n          if (this.supports(driverName)) {\n            supportedDrivers.push(driverName);\n          }\n        }\n        return supportedDrivers;\n      };\n\n      ChuiBox.prototype.__wrapLibraryMethodsWithReady = function () {\n        for (let i = 0; i < LibraryMethods.length; i++) {\n          callWhenReady(this, LibraryMethods[i]);\n        }\n      };\n\n      ChuiBox.prototype.createInstance = function (options) {\n        return new ChuiBox(options);\n      };\n\n      return ChuiBox;\n    })();\n\n    const chuiBox = new ChuiBox();\n    return chuiBox;\n  })(window)\n});"]}