{"version":3,"sources":["chui-box.js"],"names":["DOMStack","args","array","length","objectType","Array","isArray","i","len","document","prototype","slice","apply","arguments","forEach","ctx","idx","index","ret","temp","undefined","push","data","pop","unshift","shift","callback","value","call","concat","splice","filter","map","collection","getData","constructor","toString","match","reverse","indexOf","every","some","obj","arrayItem","JSON","stringify","arrayItemValue","chocolatechipjs","selector","context","self","idRE","classRE","tagRE","readyRE","elements","getId","el","getElementById","split","getTag","getElementsByTagName","getClass","getElementsByClassName","getNode","trim","test","html","querySelectorAll","$","find","nodeType","readyState","body","addEventListener","err","window","DefaultLanguageForErrors","languageForErrors","Object","keys","hasOwnProperty","hasDontEnumBug","propertyIsEnumerable","dontEnums","dontEnumsLength","TypeError","result","prop","extend","p","defineProperty","writable","enumerable","configurable","fn","object","lib","version","noop","uuid","d","Date","now","performance","charset","randomLetter","Math","floor","random","replace","c","r","wrapperMap","option","legend","area","param","thead","tr","col","td","__default","optgroup","tbody","tfoot","colgroup","caption","th","element","createElement","exec","HTMLString","tag","innerHTML","lastChild","childNodes","nodeValue","require","src","onerror","insertScript","script","firstScript","parentNode","insertBefore","done","loadScript","handleError","Error","setupLoad","onload","async","delay","Promise","resolve","reject","setTimeout","milliseconds","each","key","item","type","unique","newElement","targetElement","newEl","targEl","off","replaceChild","isEmptyObject","isInteger","number","isFloat","encode","encodeURIComponent","escapeHTML","tagsToReplace","str","replaceTag","safe_tags_replace","parse","join","mixin","sourceObj","targetObj","compare","value1","value2","compareNativeSubtypes","compareArrays","alike","compareObjects","keys1","sort","keys2","key1","key2","paginate","itemsPerPage","pages","thing","flatten","x","throttle","func","wait","options","timeout","previous","later","leading","getTime","remaining","clearTimeout","trailing","debounce","immediate","timestamp","last","callNow","once","times","memo","before","after","topics","hasProp","on","topic","handler","run","getTopic","send","payload","getTopics","removeTopic","production","supressErrorMessages","size","node","children","is","arg","that","__is","nodes","not","elems","has","items","__has","querySelector","prev","prevElement","previousElementSibling","siblings","prevAll","__siblings","__self","__sibs","pos","next","nextElement","nextElementSibling","nextAll","__parent","first","eq","$this","parent","closest","position","nodeName","css","property","pixelRE","postFix","testForPixelSupport","style","camelize","defaultView","getComputedStyle","getPropertyValue","toLowerCase","width","amount","clientWidth","height","clientHeight","content","__before","__after","appendChild","nextSibling","prepend","insertAdjacentHTML","firstChild","append","prependTo","appendTo","clone","cloneNode","wrap","string","tempNode","empNode","whichClone","remove","unwrap","offset","getBoundingClientRect","top","round","left","bottom","right","borderTop","parseInt","borderLeft","parentPos","compareOffsets1","val1","val2","empty","textContent","text","innerText","replaceWith","removeChild","addClass","className","classes","classList","add","name","hasClass","contains","removeClass","getAttribute","removeAttribute","toggleClass","toggle","attr","__attr","setAttribute","hasAttribute","removeAttr","attribute","removeProp","disable","disabled","cursor","enable","val","hide","display","show","EventErrorMessages","en","noEventOrCallback","noCallbackForEventBinding","noEventToTrigger","es","errors","EventStack","__array","arr","purge","ChuiEventCache","bind","event","capturePhase","id","deleteFromEventStack","toDelete","evtStck","unbind","eventStack","deleteOrder","evt","removeEventListener","delegate","delegateElement","e","target","ancestor","undelegate","console","error","events","trigger","createEvent","evtObj","initEvent","dispatchEvent","eventStart","eventEnd","eventMove","eventCancel","gestureLength","navigator","userAgent","touch","touchTimeout","swipeTimeout","tapTimeout","longTapDelay","singleTapDelay","isAndroid","longTapTimeout","parentIfText","swipeDirection","x1","x2","y1","y2","abs","longTap","cancelLongTap","cancelAll","delta","twoTouches","originalEvent","pageX","pageY","touches","targetTouches","isDoubleTap","method","CCDataCache","removeData","letter","toUpperCase","deCamelize","capitalize","all","newstr","charAt","substring","iz","iznt","_","haz","haznt","hazClass","hazntClass","hazAttr","hazntAttr","setValidityStatus","valid","checkValidity","expression","isNotEmpty","validateAlphabetic","letters","validateText","validateNumber","numbers","validateAlphaNumeric","validateUserName","minimum","username","validateEmail","email","validatePhoneNumber","int","phone","phoneNumber","convertLettersToNumbers","phonenumber","character","isNaN","validateUrl","url","validateAge","age","validateCheckbox","checked","validateRadioButtons","choice","button","validateSelectBox","selectedIndex","validateSwitch","checkbox","validateSelectList","radio","validateMultiSelectList","checkboxes","validatePassword","input1","input2","validateWithRegex","input","regex","customValidators","registerCustomValidator","serializeArray","field","serialize","traditional","params","scope","hash","Form","__passed","__errors","__result","validateElement","convertToObject","convertObjectToJSON","delimiter","arrays","nameParts","currResult","j","namePart","arrName","substr","arrIdx","min","element2","inputs","cv","validator","getErrors","get","formatNumber","separator","decimal","sep","num","Number","toFixed","sum","reduce","a","b","currency","symbol","sym","dec","zero","formatTime","time","temp2","ampm","sortDate","date1","date2","sortNumbers","sortNumbersDescending","form2JSON","rootNode","getFieldValue","fieldNode","getSelectedOptionValue","getFormValues","currentNode","subresult","multiple","selectNode","selected","formValues","ViewErrorMessages","noDataForViewRender","noElementForView","noTemplateForView","viewElementHasNoTemplate","noElementToSetToTemplate","noTemplateToSetToView","noEventsToAdd","noDataToSetForView","noModelToBindToView","viewHasNoModel","viewHasNoData","viewHasNoTemplate","noStyleObject","ChuiStyle","sharedSheet","unitlessProps","columnCount","fillOpacity","flex","flexGrow","flexShrink","fontWeight","lineClamp","lineHeight","opacity","order","orphans","widows","zIndex","zoom","CreateStyleSheet","prefix","unit","_sheet","_prefix","styles","createStyleSheet","rules","rulesFromStyles","set","addUnit","insertRules","head","sheet","block","isPlainObject","combineSelectors","hyphenate","$0","rule","pairs","insertRule","child","pseudoRe","parents","part","supports","stylesheets","view","helpers","defineHelper","View","__element","__origElement","__template","template","__data","__model","model","__index","__rendered","__variable","variable","__events","__startIndexFrom","startIndexFrom","__re","__safeHTML","safeHTML","__es6Template","es6Template","__noTemplate","noTemplate","__id","__styles","parsedTemplate","parseView","interpolate","Template","Function","handleEvents","bubble","extractTemplate","bindToModel","boundViews","render","escapeNumber","String","renderIterableData","Data","interateModelToTemplate","resetIndex","getElement","setElement","getTemplate","setTemplate","bindModel","unbindModel","findIndex","getModel","isRendered","isEmpty","addEvent","boolean","isEscapingHTML","setData","mount","Component","comp","cycle","queue","config","Item","f","schedule","isThenable","_then","obj_type","then","notify","chain","notifyIsolated","state","success","failure","msg","promise","deferred","triggered","deferred_wrapper","MakeDeferred","iteratePromises","Constructor","resolver","rejecter","IIFE","Deferred","executor","isValidPromise","extractChain","catch","PromisePrototype","msgs","count","JSONPCallbacks","jsonp","opts","settings","callbackName","clear","generateCallbackName","response","ok","json","defer","fetch","normalizeName","normalizeValue","Headers","headers","getOwnPropertyNames","list","values","getAll","thisArg","consumed","bodyUsed","fileReaderReady","reader","readBlobAsArrayBuffer","blob","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","support","Blob","formData","arrayBuffer","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","ArrayBuffer","rejected","decode","methods","normalizeMethod","upcased","Request","credentials","mode","referrer","form","bytes","decodeURIComponent","xhr","getAllResponseHeaders","header","Response","bodyInit","status","statusText","redirectStatuses","redirect","RangeError","location","init","request","XMLHttpRequest","responseURL","getResponseHeader","responseText","open","withCredentials","responseType","setRequestHeader","polyfill","predicate","pluck","difference","found","intersection","arr1","arr2","totalDiff","total","concate","ModelErrorMessages","noPropertyOrDataError","noPropertyToSet","noPropertyToDelete","noObjectToMerge","incorrectDataForMerging","noObjForMixin","noCallbackForModelOn","noEventForModelOn","noEventForModelTrigger","noPosForEventDeletion","noPosForPropAt","noPropForPropAt","noValForPropEquals","noPropForPropEquals","noPosForSetPropAt","noValueForSetPropAt","noPropForSetPropAt","noValueForPropEquals","dataStore","Model","create","stopped","updateBoundViews","noDataToReplaceInModel","positionGreaterThanModelLength","noDataToPushToModel","noDataForShiftToModel","start","end","noEndForModelSlice","noStartModelForSlice","noEndForModelSplice","noStartForModelSplice","noDataToInsertInModel","noPosToInserInModel","noPropForPlucking","startFrom","noElementForIndexOf","noCallbackForModelFind","noCallbackFoFindIndex","noCallbackForForEach","compareFunction","props","noPropsForSortBy","orderBy","sortByProperty","sortOrder","numberOfProperties","noDataToConcat","isiPhone","isiPad","isiPod","isiOS","isTouchEnabled","isOnline","onLine","isStandalone","standalone","isWebkit","isDesktop","isSafari","isChrome","isNativeAndroid","theme","dir","Busy","color","spinner","iOSBusy","small","androidBusy","androidActivityIndicator","Block","Unblock","chuiBackButtonSVG","decorateBackButton","buttonText","center","parentHeight","parentWidth","tmpTop","tmpLeft","innerHeight","pageYOffset","innerWidth","EditList","editLabel","doneLabel","deleteLabel","cancelLabel","deletable","movable","modelProp","__editMade","__view","deleteButton","editButton","deletionIndicator","dispelDeletable","enableDeletable","moveUpIndicator","moveDownIndicator","screen","nav","AdjustNavbarLayout","makeEditable","movedItems","__newarray","_this","itemClone","prevClone","offsetHeight","nextClone","transform","listItem","direction","getView","MultiSelectList","__selection","selections","sel","dataObj","getSelection","globalNav","h1","whichSide","oppositeSide","rtl","hidden","visibleSibling","calculateLongest","widthA","widthB","handleOneSibling","sib","sibling","sibwidth","headerWidth","isNavigating","getScreen","makeScreenCurrent","makeScreenPrevious","makeScreenNext","GoToScreen","ChuiRoutes","destination","currentScreen","screens","getCurrent","destinationScreen","scrollTop","Router","dispatch","GoBack","GoBackToScreen","dest","route","handleNavigationEvent","Paging","pager","currentSection","articles","pageForward","pagerButton","currentArticle","pageBack","Popover","title","popover","popoverID","__calcPopPos","calcLeft","calcTop","popoverOffset","ClosePopover","AlignPopover","triggerID","onresize","Popup","message","cancelButton","continueButton","popup","ClosePopup","ShowPopup","Range","newPlace","newPoint","addRoute","getFullRoute","getCurrentLoc","getNext","getPrevious","Segmented","segmented","labels","createSegmentedButton","androidSelectionIndicator","__segmented","androidSelectionBorder","selectedButton","SelectList","Sheet","background","handle","slideFrom","slideDown","HideSheet","ShowSheet","SlideOut","slideoutID","buttonID","slideOutButton","slideOut","slideout","slideOutBtn","menuItems","screenToShow","populate","Stepper","max","stepper","defaultValue","increaseSymbol","decreaseSymbol","disabledDecrease","disabledIncrease","decreaseButton","label","increaseButton","increaseStepperValue","currentValue","newValue","decreaseStepperValue","getValue","Switch","__checked","onCallback","offCallback","swipeOn","swipeOff","documentElement","checkState","__switch","TabBar","icons","__tabbarScreens","screenPrefix","selectedScreen","showIcons","setToCurrent","setToNext","makeTab","icon","tab","tabbarTmpl","tabbar","selectedTabButton","__tabbarButtons","__selectedTabbarButton","__selectedTabbarScreen","handleTabSelectionForAndroid","tabbarButtons","routes","fullRoute","navRoutesFull","navRoutes","routing","whichRoute","getSelectedTab","getSelectedScreen","setSelectedTab","ChuiColor","colorRegex","re","process","bits","processor","channels","g","toHex","toRGB","getBrightness","lightenColor","percent","amt","R","G","B","darkenColor","calculateBrightness","kolor","w","offsetWidth","h","y","navBkColor","backgroundColor","ripple","rippleColor","brightness","dataset","rippleWave","Box","globalObject","indexedDB","webkitIndexedDB","mozIndexedDB","OIndexedDB","msIndexedDB","DETECT_BLOB_SUPPORT_STORE","supportsBlobs","dbContexts","_binStringToArrayBuffer","bin","buf","Uint8Array","charCodeAt","_checkBlobSupportWithoutCaching","txn","createBlob","objectStore","put","onabort","preventDefault","stopPropagation","oncomplete","matchedChrome","matchedEdge","_checkBlobSupport","idb","_deferReadiness","dbInfo","dbContext","deferredOperation","deferredOperations","dbReady","_advanceReadiness","_getConnection","upgradeNeeded","db","close","dbArgs","openreq","onupgradeneeded","createObjectStore","storeName","oldVersion","ex","warn","newVersion","onsuccess","_getOriginalConnection","_getUpgradedConnection","_isUpgradeNeeded","defaultVersion","isNewStore","objectStoreNames","isDowngrade","isUpgrade","incVersion","_encodeBlob","onloadend","base64","btoa","__local_forage_encoded_blob","readAsBinaryString","_decodeBlob","encodedBlob","arrayBuff","atob","_isEncodedBlob","_fullyReady","_initReady","_dbInfo","executeTwoCallbacks","_initStorage","forages","ready","initPromises","ignoreErrors","forage","_defaultConfig","k","store","transaction","req","executeCallback","iterator","openCursor","iterationNumber","continue","blobSupport","delete","n","advanced","advance","asyncStorage","_driver","openDatabase","__initStorage","dbInfoPromise","description","setDriver","LOCALSTORAGE","t","executeSql","boxName","__dbInfo","chuiBoxSerializer","serializer","results","rows","deserialize","originalValue","sqlError","code","QUOTA_ERR","webSQLStorage","__driver","localStorage","keyPrefix","__defaultConfig","_key","keyPrefixLength","_key2","localStorageWrapper","BASE_CHARS","BLOB_TYPE_PREFIX","BLOB_TYPE_PREFIX_REGEX","SERIALIZED_MARKER","SERIALIZED_MARKER_LENGTH","TYPE_ARRAYBUFFER","TYPE_BLOB","TYPE_INT8ARRAY","TYPE_UINT8ARRAY","TYPE_UINT8CLAMPEDARRAY","TYPE_INT16ARRAY","TYPE_INT32ARRAY","TYPE_UINT16ARRAY","TYPE_UINT32ARRAY","TYPE_FLOAT32ARRAY","TYPE_FLOAT64ARRAY","TYPE_SERIALIZED_MARKER_LENGTH","__createBlob","parts","properties","BlobBuilder","MSBlobBuilder","MozBlobBuilder","WebKitBlobBuilder","builder","getBlob","valueString","buffer","marker","bufferToString","fileReader","serializedString","blobType","matcher","stringToBuffer","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","bufferLength","encoded1","encoded2","encoded3","encoded4","base64String","CustomDrivers","DriverType","INDEXEDDB","WEBSQL","DefaultDriverOrder","LibraryMethods","DefaultConfig","driver","driverSupport","IDBKeyRange","callWhenReady","chuiBoxInstance","libraryMethod","__args","isLibraryDriver","driverName","ChuiBox","__config","__driverSet","__initDriver","__ready","__wrapLibraryMethodsWithReady","defineDriver","driverObject","errorCallback","_ret","complianceError","namingError","v","customDriverMethods","customDriverMethod","supportPromise","__support","supportResult","getDriver","getDriverPromise","log","getSerializer","serializerPromise","drivers","supportedDrivers","__getSupportedDrivers","setDriverToConfig","initDriver","currentDriverIndex","driverPromiseLoop","__extend","oldDriverSetDone","libraryMethodsAndProperties","createInstance","chuiBox"],"mappings":"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","file":"chui-box.min.js","sourcesContent":["\n/**\n  * DOMStack, an abstraction of the native NodeList, allowing manipulation of DOM elements without having to extend native elements.\n  * @param {Element[] | Document | Element } args An array of elements, the document, or a node.\n  * @return {DOMStack} DOMStack\n  */\nclass DOMStack {\n  constructor (args) {\n    this.array = [];\n    this.length = 0;\n    this.objectType = 'domstack';\n    if (Array.isArray(args)) {\n      let i = -1;\n      const len = args.length;\n      while (++i < len) {\n        this.array[i] = args[i];\n      }\n    } else if (args) {\n      if (args === document) {\n        this.array[0] = document;\n      } else {\n        const array = Array.prototype.slice.apply(arguments);\n        array.forEach(function(ctx, idx) {\n          this.array[idx] = ctx;\n        });\n      }\n    }\n  }\n\n  eq(index) {\n    let ret = new DOMStack();\n    if (!this.array.length) return ret;\n    let temp = undefined;\n    if (index < 0) {\n      temp = this.array[this.array.length + index];\n      ret.push(temp);\n    } else {\n      temp = this.array[index];\n      ret.push(temp);\n    }\n    ret[0] = ret.array[0];\n    ret.length = ret.array.length;\n    return ret;\n  }\n\n  push(data) {\n    this.array.push(data);\n    this.length = this.array.length;\n    this[0] = this.array[0];\n  }\n\n  pop() {\n    this.length = this.array.length - 1;\n    return this.array.pop();\n  }\n\n  unshift(data) {\n    this.array.unshift(data);\n    this[0] = this.array[0];\n    this.length = this.array.length;\n  }\n\n  shift() {\n    this.length = this.array.length - 1;\n    return this.array.shift();\n  }\n\n  size() {\n    return this.array.length;\n  }\n\n  forEach(callback) {\n    let value = undefined;\n    let i = 0;\n    const len = this.array.length;\n    for (; i < len; i++) {\n      value = callback.call(this.array[i], this.array[i], i);\n      if (value === false) {\n        break;\n      }\n    }\n  }\n\n  each(callback) {\n    let value = undefined;\n    let i = 0;\n    const len = this.array.length;\n    for (; i < len; i++) {\n      value = callback.call(this.array[i], i, this.array[i]);\n      if (value === false) {\n        break;\n      }\n    }\n  }\n\n  slice(...args) {\n    let ret = new DOMStack();\n    ret.concat(this.array.slice.apply(this.array, args));\n    ret.length = ret.array.length;\n    return ret;\n  }\n\n  splice(...args) {\n    this.array.splice.apply(this.array, args);\n    this[0] = this.array[0];\n    return this;\n  }\n\n  filter(...args) {\n    let ret = new DOMStack();\n\n    ret.concat(this.array.filter.apply(this.array, args));\n    ret[0] = ret.array[0];\n    return ret;\n  }\n\n  map(...args) {\n    let ret = new DOMStack();\n    ret.concat(this.array.map.apply(this.array, args));\n    ret[0] = ret.array[0];\n    return ret;\n  }\n\n  concat(collection) {\n    let i = -1;\n    let len = undefined;\n    let temp = undefined;\n    if (Array.isArray(collection)) {\n      temp = collection;\n      len = temp.length;\n    } else if (collection && collection.objectType && collection.objectType === 'domstack') {\n      temp = collection.getData();\n      len = temp.length;\n    } else if (collection.constructor.toString().match(/HTMLBodyElementConstructor/)) {\n      temp = [collection];\n      len = 1;\n    }\n    this.array.push.apply(this.array, temp);\n    this[0] = this.array[0];\n    this.length = this.array.length;\n  }\n\n  reverse(...args) {\n    this.array.reverse.apply(this.array, args);\n    this[0] = this.array[0];\n  }\n\n  indexOf(...args) {\n    return this.array.indexOf.apply(this.array, args);\n  }\n\n  every(...args) {\n    return this.array.every.apply(this.array, args);\n  }\n\n  some(...args) {\n    return this.array.some.apply(this.array, args);\n  }\n\n  unique() {\n    const len = this.array.length;\n    let ret = [];\n    let obj = {};\n    for (let i = 0; i < len; i++) {\n      const arrayItem = JSON.stringify(this.array[i]);\n      const arrayItemValue = this.array[i];\n      if (obj[arrayItem] === undefined) {\n        ret.push(arrayItemValue);\n        obj[arrayItem] = 1;\n      } else {\n        obj[arrayItem]++;\n      }\n    }\n    this.array = ret;\n    this[0] = this.array[0];\n    this.length = this.array.length;\n  }\n\n  getData() {\n    return this.array;\n  }\n\n  purge() {\n    this.array.length = 0;\n    this.length = 0;\n  }\n}\n/**\n * ChocolateChipJS Core. This function exports the ChocolateChipJS singleton.\n */\n(function() {\n\n  /**\n   * ChocolateChipJS singleton. This function can query the DOM with the provided parameters, or execute a callback when the DOM is ready. This is also the base for ChocolateChipJS methods for DOM manipulation.\n   */\n  function chocolatechipjs(selector, context) {\n    const self = this;\n    const idRE = /^#([\\w-]*)$/;\n    const classRE = /^\\.([\\w-])$/;\n    const tagRE = /^[\\w-]+$/;\n    const readyRE = /complete|loaded|interactive/;\n    let temp = undefined;\n\n    const slice = elements => {\n      temp = new DOMStack([].slice.apply(elements));\n      temp[0] = temp.array[0];\n      return temp;\n    };\n\n    const getId = selector => {\n      const el = document.getElementById(selector.split('#')[1]);\n      if (el) {\n        temp = new DOMStack([el]);\n        temp[0] = new DOMStack([el]).array[0];\n        temp.length = 1;\n        return temp;\n      } else {\n        return new DOMStack();\n      }\n    };\n\n    const getTag = (selector, context) => {\n      if (context) {\n        temp = slice(context.getElementsByTagName(selector));\n        temp[0] = temp.array[0];\n        temp.length = temp.length;\n        return temp;\n      } else {\n        temp = slice(document.getElementsByTagName(selector));\n        temp[0] = temp.array[0];\n        temp.length = temp.array.length;\n        return temp;\n      }\n    };\n\n    const getClass = (selector, context) => {\n      if (context) {\n        temp = slice(context.getElementsByClassName(selector.split('.')[1]));\n        temp[0] = temp.array[0];\n        temp.length = temp.length;\n        return temp;\n      } else {\n        temp = slice(document.getElementsByClassName(selector.split('.')[1]));\n        temp[0] = temp.array[0];\n        temp.length = temp.array.length;\n        return temp;\n      }\n    };\n\n    const getNode = (selector, context) => {\n      if (typeof selector === 'string')\n        selector = selector.trim();\n      if (typeof selector === 'string' && idRE.test(selector)) {\n        return getId(selector);\n      }\n\n      if (selector && (selector instanceof Array) && selector.length)\n        return selector;\n      if (!context && typeof selector === 'string') {\n        if (/<\\/?[^>]+>/.test(selector)) {\n          return self.html(selector);\n        }\n\n        if (tagRE.test(selector)) {\n          return getTag(selector);\n\n        } else if (classRE.test(selector)) {\n          return getClass(selector);\n\n        } else {\n          temp = slice(document.querySelectorAll(selector));\n          temp[0] = temp.array[0];\n          temp.length = temp.array.length;\n          return temp;\n        }\n\n      } else {\n        if (context) {\n          temp = slice($(context).find(selector));\n          temp[0] = temp.array[0];\n          temp.length = temp.array / length;\n          return temp;\n\n        } else {\n          temp = slice(document.querySelectorAll(selector));\n          temp[0] = temp.array[0];\n          temp.length = temp.array.length;\n          return temp;\n        }\n      }\n    };\n\n    if (selector && selector.objectType && selector.objectType === 'domstack') {\n      return selector;\n    }\n\n    if (selector === document) {\n      return new DOMStack(document);\n    }\n\n    if (selector === null) {\n      return new DOMStack();\n    }\n\n    if (!!context) {\n      if (typeof context === 'string') {\n        temp = slice(document.querySelectorAll(context + ' ' + selector));\n        temp[0] = temp.array[0];\n        temp.length = temp.array.length;\n        return temp;\n      } else if (context.nodeType === 1) {\n        return getNode(selector, context);\n      }\n\n    } else if (typeof selector === 'function') {\n      if (readyRE.test(document.readyState) && document.body) {\n        selector.call(selector);\n      } else {\n        document.addEventListener(\"DOMContentLoaded\", function() {\n          return selector.call(selector);\n        });\n      }\n\n    } else if (selector && selector.nodeType === 1) {\n      temp = new DOMStack();\n      temp[0] = selector;\n      temp.length = temp.array.length;\n      temp.push(selector);\n      return temp;\n\n    } else if (typeof selector === 'string') {\n      if (selector === '') return new DOMStack();\n      if (/<\\/?[^>]+>/.test(selector)) {\n        return chocolatechipjs.html(selector);\n      } else {\n        try {\n          return getNode(selector) ? getNode(selector) : new DOMStack();\n        } catch (err) {\n          return new DOMStack();\n        }\n      }\n\n    } else if (Array.isArray(selector)) {\n      return new DOMStack(selector);\n      \n    } else if (selector === window) {\n      temp = new DOMStack();\n      temp[0] = window;\n      temp.length = temp.array.length;\n      return temp;\n\n    } else {\n      return new DOMStack();\n    }\n\n    return new DOMStack();\n  }\n  \n  if (window.DefaultLanguageForErrors) {\n    chocolatechipjs.languageForErrors = window.DefaultLanguageForErrors\n  } else {\n    chocolatechipjs.languageForErrors = 'en'\n  }\n\n  let $ = chocolatechipjs;\n\n  /**\n   * ChocolateChip-UI extend method.\n   */\n\n  /**\n   * Polyfill for Object.keys.\n   * Needed for Android older than 4.4.\n   */\n  if (!Object.keys) {\n    Object.keys = (function() {\n      'use strict';\n      const hasOwnProperty = Object.prototype.hasOwnProperty,\n          hasDontEnumBug = !({ toString: null }).propertyIsEnumerable('toString'),\n          dontEnums = [\n            'toString',\n            'toLocaleString',\n            'valueOf',\n            'hasOwnProperty',\n            'isPrototypeOf',\n            'propertyIsEnumerable',\n            'constructor'\n          ],\n          dontEnumsLength = dontEnums.length;\n\n      return function(obj) {\n        if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {\n          throw new TypeError('Object.keys called on non-object');\n        }\n\n        let result = [];\n        let prop = undefined;\n        let i = undefined;\n\n        for (prop in obj) {\n          if (hasOwnProperty.call(obj, prop)) {\n            result.push(prop);\n          }\n        }\n\n        if (hasDontEnumBug) {\n          for (i = 0; i < dontEnumsLength; i++) {\n            if (hasOwnProperty.call(obj, dontEnums[i])) {\n              result.push(dontEnums[i]);\n            }\n          }\n        }\n        return result;\n      };\n    }());\n  }\n\n  $.extend = (obj, prop) => {\n    if (!prop) {\n      prop = obj;\n      obj = chocolatechipjs;\n    }\n    Object.keys(prop).forEach(p => {\n      if (prop.hasOwnProperty(p)) {\n        Object.defineProperty(obj, p, {\n          value: prop[p],\n          writable: true,\n          enumerable: false,\n          configurable: true\n        });\n      }\n    });\n  }\n\n\n  /**\n   * ChocolateChip-UI collection extend method.\n   */\n  $.fn = {\n    extend: object => $.extend(DOMStack.prototype, object)\n  };\n\n  /**\n   * ChocolateChip-UI utility methods.\n   */\n  $.extend({\n    lib: \"ChocolateChipJS\",\n\n    version: 'VERSION_NUMBER',\n\n    noop: () => {},\n\n    uuid: () => {\n      let d = Date.now();\n      d += performance.now();\n      const charset = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".split('');\n      const randomLetter = charset[Math.floor(Math.random() * charset.length)];\n      return randomLetter + 'xxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        let r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n      });\n    },\n\n    html: HTMLString => {\n      let ret = new DOMStack();\n      let temp = undefined;\n\n      const wrapperMap = {\n        option: [1, \"<select multiple='multiple'>\", \"</select>\"],\n        legend: [1, \"<fieldset>\", \"</fieldset>\"],\n        area: [1, \"<map>\", \"</map>\"],\n        param: [1, \"<object>\", \"</object>\"],\n        thead: [1, \"<table>\", \"</table>\"],\n        tr: [2, \"<table><tbody>\", \"</tbody></table>\"],\n        col: [2, \"<table><tbody></tbody><colgroup>\", \"</colgroup></table>\"],\n        td: [3, \"<table><tbody><tr>\", \"</tr></tbody></table>\"],\n        __default: [1, \"<div>\", \"</div>\"]\n      };\n\n      wrapperMap.optgroup = wrapperMap.option;\n      wrapperMap.tbody = wrapperMap.tfoot = wrapperMap.colgroup = wrapperMap.caption = wrapperMap.thead;\n      wrapperMap.th = wrapperMap.td;\n\n      let element = document.createElement('div');\n      const match = /<\\s*\\w.*?>/g.exec(HTMLString);\n\n      if (match !== null) {\n        const tag = match[0].replace(/</g, '').replace(/>/g, '');\n        const map = wrapperMap[tag] || wrapperMap.__default;\n        HTMLString = map[1] + HTMLString + map[2];\n\n        element.innerHTML = HTMLString;\n        element = element.lastChild;\n\n        temp = Array.prototype.slice.apply(element.childNodes);\n        temp.forEach(ctx => {\n          if (ctx.nodeType === 1) {\n            ret.push(ctx);\n          } else if (ctx.nodeType === 3 && ctx.nodeValue.trim().length !== 0) {\n            ret.push(ctx);\n          }\n        });\n\n      } else {\n        element.innerHTML = HTMLString;\n        element = element.lastChild;\n        ret.push(element);\n      }\n\n      return ret;\n    },\n\n    /**\n     * Insert a script tag into the document and\n     * fire a callback when it is loaded: \n     */\n    require: (src, callback, ctx) => {\n      let onerror = \"onerror\";\n      const insertScript = function(script) {\n        let firstScript = document.getElementsByTagName(\"script\")[0];\n        firstScript.parentNode.insertBefore(script, firstScript);\n      };\n      let script = document.createElement(\"script\");\n      let done = false;\n      let err = undefined;\n      let loadScript = undefined;\n      const handleError = function() {\n        err = new Error(src || \"EMPTY\");\n        loadScript();\n      };\n      const setupLoad = function(fn) {\n        return function() {\n          /**\n           * Only call once. \n           */\n          if (done) {\n            return;\n          }\n          done = true;\n          fn();\n          if (callback) {\n            callback.call(ctx, err);\n          }\n        };\n      };\n\n      loadScript = setupLoad(function() {\n        script.onload = script[onerror] = null;\n      });\n\n      script[onerror] = handleError;\n      script.onload = loadScript;\n      script.async = true;\n      script.charset = \"utf-8\";\n      script.src = src;\n      insertScript(script);\n    },\n\n    delay: milliseconds => {\n      return new Promise(function (resolve, reject) {\n        setTimeout(resolve, milliseconds);\n      });\n    },\n\n    each: (obj, callback) => {\n      let value = undefined;\n      let key = undefined;\n      let i = 0;\n      let length = undefined;\n\n      if (Array.isArray(obj)) {\n        length = obj.length;\n        for (; i < length; i++) {\n          value = callback.call(obj[i], i, obj[i]);\n          if (value === false) {\n            break;\n          }\n        }\n        return obj;\n      } else if (obj.objectType && obj.objectType === 'domstack') {\n        obj.forEach((item, idx) => callback.call(item, idx, item));\n        return obj;\n      } else if ($.type(obj) === 'object' && Object.keys(obj).length) {\n        for (key in obj) {\n          if (callback.call(obj[key], key, obj[key]) === false) return obj;\n        }\n      }\n    },\n\n    /**\n     * Eliminate duplicates from array: \n     */\n    unique: array => {\n      if (!array || !Array.isArray(array)) return;\n      const len = array.length;\n      let obj = {};\n      let ret = [];\n      for (let i = 0; i < len; i++) {\n        const arrayItem = JSON.stringify(array[i]);\n        const arrayItemValue = array[i];\n        if (obj[arrayItem] === undefined) {\n          ret.push(arrayItemValue);\n          obj[arrayItem] = 1;\n        } else {\n          obj[arrayItem]++;\n        }\n      }\n      return ret;\n    },\n\n    /** \n     * Replace target element with new element:\n     */\n    replace: (newElement, targetElement) => {\n      if (!newElement || !targetElement) return;\n      let newEl = undefined;\n      let targEl = undefined;\n      if (typeof newElement === 'string') {\n        newEl = $(newElement)[0];\n      } else if (newElement.objectType && newElement.objectType === 'domstack') {\n        newEl = newElement[0];\n      } else if (newElement.nodeType === 1) {\n        newEl = newElement;\n      }\n      if (typeof targetElement === 'string') {\n        targEl = $(targetElement)[0];\n      } else if (targetElement.objectType && targetElement.objectType === 'domstack') {\n        targEl = targetElement[0];\n      } else if (targetElement.nodeType === 1) {\n        targEl = targetElement;\n      }\n      /**\n       * Remove target's bound events:\n       */\n      $(targEl).off();\n      targEl.parentNode.replaceChild(newEl, targEl);\n    },\n\n    /**\n     * Extra boolean types:\n     */\n    isEmptyObject: obj =>  Object.keys(obj).length === 0,\n\n    isInteger: number => (typeof number === 'number' && number % 1 === 0),\n\n    isFloat: number => (typeof number === 'number' && number % 1 !== 0),\n\n    encode: value => encodeURIComponent(value),\n\n    /**\n     * Escape HTML for view templates:\n     */\n    escapeHTML: data => {\n      const tagsToReplace = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '(': '%28',\n        ')': '%29'\n      };\n      let str = JSON.stringify(data);\n\n      const replaceTag = (tag) => tagsToReplace[tag] || tag;\n\n      const safe_tags_replace = (str) => str.replace(/[&<>]/g, replaceTag);\n\n      str = safe_tags_replace(str);\n      return JSON.parse(str);\n    },\n\n    /** \n     * Concat arrays:\n     */\n    concat: args => (args instanceof Array) ? args.join('') : [].slice.apply(arguments).join(''),\n\n    /**\n     * Mixin one object into another:\n     */\n    mixin: (sourceObj, targetObj) => {\n      for (let key in sourceObj) {\n        /* Do not replace property if it exists: */\n        if (!(key in targetObj)) {\n            targetObj[key] = sourceObj[key];\n        }\n      }\n      return targetObj;\n    },\n\n\n    compare: (value1, value2) => {\n\n      function compareNativeSubtypes(value1, value2) {\n        /**\n         * e.g. Function, RegExp, Date \n         */\n        return value1.toString() === value2.toString();\n      }\n\n      function compareArrays(value1, value2) {\n        const len = value1.length;\n        if (len != value2.length) {\n          return false;\n        }\n        let alike = true;\n        for (let i = 0; i < len; i++) {\n          if (!$.compare(value1[i], value2[i])) {\n            alike = false;\n            break;\n          }\n        }\n        return alike;\n      }\n\n      function compareObjects(value1, value2) {\n        const keys1 = Object.keys(value1).sort();\n        const keys2 = Object.keys(value2).sort();\n        const len = keys1.length;\n        if (len != keys2.length) {\n          return false;\n        }\n        for (let i = 0; i < len; i++) {\n          let key1 = keys1[i];\n          let key2 = keys2[i];\n          if (!((key1 == key2) && ($.compare(value1[key1], value2[key2])))) {\n            return false;\n          }\n        }\n        return true;\n      }\n      if (value1 === value2) {\n        return true;\n      }\n      if (typeof value1 != typeof value2) {\n        return false;\n      }\n      if (value1 !== Object(value1)) {\n        /**\n         * Non equal primitives, so stop:\n         */\n        return false;\n      }\n      if (!value1) {\n        return false;\n      }\n      if (Array.isArray(value1)) {\n        return compareArrays(value1, value2);\n      }\n      if (({}).toString.call(value1) == '[object Object]') {\n        return compareObjects(value1, value2);\n      } else {\n        return compareNativeSubtypes(value1, value2);\n      }\n    },\n\n    /** \n     * Chunk an array into pieces based on itemsPerPage.\n     * You can use this to paginate an array of data.\n     */\n    paginate: (data, itemsPerPage) => {\n      let ret = [];\n      let pages = Math.floor(data.length / itemsPerPage);\n      if (data.length % pages) pages++;\n      let temp = 0;\n      for (let i = 0; i < pages; i++) {\n        if (temp === data.length) break;\n        const thing = data.slice(temp, itemsPerPage + temp);\n        ret.push(thing);\n        temp += itemsPerPage;\n      }\n      return ret;\n    },\n\n    /**\n     * Recursively flatten an array.\n     */\n    flatten: (array, ret) => {\n      if (!array || !array.length) return;\n      ret || (ret = []);\n      var len = array.length;\n      var x;\n      for (var i = 0; i < len; i++) {\n        x = array[i];\n        if (Array.isArray(x)) flatten(x, ret);\n        else ret.push(x);\n      }\n      return ret;\n    },\n\n    /**\n     * Fires an event once during provided wait period. Options are: {leading: true/false, trailing: true/false}.\n     * By default leading is true, meaning that the first event input will fire. Setting leading to false will disable this.\n     * By default trailing is true. Set this to false to disable it.\n     */\n    throttle: (func, wait, options) => {\n      var context, args, result;\n      var timeout = null;\n      var previous = 0;\n      if (!options) options = {};\n      var later = function() {\n        previous = options.leading === false ? 0 : new Date().getTime();\n        timeout = null;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      };\n      return function() {\n        var now = new Date().getTime();\n        if (!previous && options.leading === false) previous = now;\n        var remaining = wait - (now - previous);\n        context = this;\n        args = arguments;\n        if (remaining <= 0 || remaining > wait) {\n          if (timeout) {\n            clearTimeout(timeout);\n            timeout = null;\n          }\n          previous = now;\n          result = func.apply(context, args);\n          if (!timeout) context = args = null;\n        } else if (!timeout && options.trailing !== false) {\n          timeout = setTimeout(later, remaining);\n        }\n        return result;\n      }\n    },\n\n    /**\n     * Fires and event once after the designated wait time, regardless of how many other events occurred.\n     * In the case of an input, this will start with the first keypress. After the last keypress and the wait time, the event will fire.\n     * You can make the event fire after the time by passing a third optional truthy argument.\n     */\n    debounce: (func, wait, immediate) => {\n      var timeout, args, context, timestamp, result;\n\n      var later = function() {\n        var last = new Date().getTime() - timestamp;\n\n        if (last < wait && last >= 0) {\n          timeout = setTimeout(later, wait - last);\n        } else {\n          timeout = null;\n          if (!immediate) {\n            result = func.apply(context, args);\n            if (!timeout) context = args = null;\n          }\n        }\n      };\n\n      return function() {\n        context = this;\n        args = arguments;\n        timestamp = new Date().getTime();\n        var callNow = immediate && !timeout;\n        if (!timeout) timeout = setTimeout(later, wait);\n        if (callNow) {\n          result = func.apply(context, args);\n          context = args = null;\n        }\n\n        return result;\n      };\n    },\n\n    /**\n     * Execute a function only once.\n     */\n    once: func => {\n      var times = 2;\n      var memo;\n      return function() {\n        if (--times > 0) {\n          memo = func.apply(this, arguments);\n        }\n        if (times <= 1) func = null;\n        return memo;\n      };\n    },\n\n    /**\n     * Execute a function only upto x times.\n     * This takes two arguments: the times upto when execution can happen and the callback to execute.\n     */\n\n    before: (times, func) => {\n      var memo;\n      return function() {\n        if (--times > 0) {\n          memo = func.apply(this, arguments);\n        }\n        if (times <= 1) func = null;\n        return memo;\n      }\n    },\n\n    /**\n     * Execute a function only after x times.\n     * This takes two arguments: the times to wait before execution and the callback to execute.\n     */\n\n     after: (times, func) => {\n      return function() {\n        if (--times < 1) {\n          return func.apply(this, arguments);\n        }\n      }\n    }\n    \n  });\n\n  \n  \n  /** \n   * Pubsub methods:\n   */\n  const topics = {};\n  const hasProp = topics.hasOwnProperty;\n  $.extend({\n    /**\n     * Set up subscriber: \n     */\n    on: (topic, handler) => {\n      /**\n       * Create the topic's object: \n       */\n      if (!hasProp.call(topics, topic)) topics[topic] = [];\n\n      /**\n       * Add subscriber: \n       */\n      let index = topics[topic].push(handler) -1;\n\n      /**\n       * Return method to delete subscriber: \n       */\n      return {\n        off: () => delete topics[topic][index],\n\n        /**\n         * Return method to run this subscriber - `mySubscriber.run('foo', myDataHere)` \n         */\n        run: (data) => {\n          if (topics[topic]) topics[topic][index](data)\n        },\n\n        getTopic: () => topic\n      };\n    },\n\n    /**\n     * Send event and data to subscribers: \n     */\n    send: (topic, payload) => {\n      if (!hasProp.call(topics, topic)) return;\n\n      /**\n       * Loop through topics and execute: \n       */\n      topics[topic].forEach(item => {\n        item(payload != undefined ? payload : {});\n      });\n    },\n\n    /**\n     * Get all subscribed topics: \n     */\n    getTopics: () => topics,\n\n    /**\n     * Remove a topic and any registered subscribers: \n     */\n    removeTopic: topic => delete topics[topic],\n\n    production: false,\n\n    /**\n     * Suppress ChocolateChip-UI's error messages:\n     */\n    supressErrorMessages: false\n    \n  })\n\n  /**\n   * ChocolateChip-UI DOM methods.\n   */\n  $.fn.extend({\n    find(selector, context) {\n      let ret = new DOMStack();\n      if (!this.size())\n        return ret;\n      if (context) {\n        $(context).forEach(() => {\n          Array.prototype.slice.apply(context.querySelectorAll(selector)).forEach(node=> {\n            return ret.push(node);\n          });\n        });\n      } else {\n        this.forEach(ctx => {\n          if (ctx && ctx.children && ctx.children.length) {\n            Array.prototype.slice.apply(ctx.querySelectorAll(selector)).forEach(node => {\n              return ret.push(node);\n            });\n          }\n        });\n      }\n      return ret;\n    },\n\n    is(arg) {\n      let ret = false;\n      if (!this.size() || !arg) return;\n      if (!this.size()) return;\n      const that = this;\n      const __is = (node, arg) => {\n        if (typeof arg === 'string') {\n          let nodes = undefined;\n          if (node.parentNode) nodes = node.parentNode.querySelectorAll(arg);\n          let elements = undefined;\n          if (nodes && nodes.length) {\n            elements = Array.prototype.slice.apply(node.parentNode.querySelectorAll(arg));\n          }\n          if (elements && elements.length) {\n            if (elements.indexOf(node) >= 0) {\n              ret = true;\n            }\n          }\n        } else if (typeof arg === 'function') {\n          if (arg.call(that)) {\n            ret = true;\n          }\n        } else if (arg.objectType && arg.objectType === 'domstack') {\n          if (node === arg[0]) {\n            ret = true;\n          }\n        } else if (arg && arg.length) {\n          if (this.slice.apply(arg).indexOf(node) !== -1) {\n            ret = true;\n          }\n        } else if (arg.nodeType === 1) {\n          if (node === arg) {\n            ret = true;\n          }\n        } else {\n          return;\n        }\n        return ret;\n      };\n      this.forEach(item => {\n        if (__is(item, arg)) {\n          ret = true;\n        }\n      });\n      return ret;\n    },\n\n    not(selector) {\n      if (!this.size() || !selector) return new DOMStack();\n      let ret = new DOMStack();\n      let temp = [];\n      let elems = undefined;\n      if (typeof selector === 'string') {\n        elems = Array.prototype.slice.apply(this.array[0].parentNode.querySelectorAll(selector));\n        this.forEach(element => {\n          if (!elems[0]) {\n            ret.push(element);\n          } else {\n            elems.forEach(item => {\n              if (element !== item) {\n                ret.push(element);\n              }\n            });\n          }\n        });\n        return ret;\n      } else if (selector && selector.objectType && selector.objectType === 'domstack') {\n        this.forEach(element => {\n          selector.forEach(node => {\n            if (node !== element) {\n              temp.push(element);\n            }\n          });\n        });\n        if (temp.length) {\n          ret.concat(temp);\n        }\n        return ret;\n      } else if (selector && selector.nodeType === 1) {\n        this.forEach(element => {\n          if (element !== selector) {\n            temp.push(element);\n          }\n        });\n        if (temp.length) {\n          ret.concat(temp);\n        }\n        return ret;\n      }\n    },\n\n    has(arg) {\n      if (!this.size()) return new DOMStack();\n      let items = new DOMStack();\n\n      const __has = (node, arg) => {\n        if (typeof arg === 'string') {\n          if (node.querySelector(arg)) {\n            return true;\n          }\n        } else if (arg.nodeType === 1) {\n          if (Array.prototype.slice(this.children).data.indexOf(arg)) {\n            return true;\n          }\n        } else {\n          return false;\n        }\n      };\n\n      this.forEach(element => {\n        if (__has(element, arg)) {\n          items.push(element);\n        }\n      });\n      return items;\n    },\n\n    prev(selector) {\n      if (!this.size()) return new DOMStack();\n      let ret = new DOMStack();\n      let children = undefined;\n      const prevElement = this[0].previousElementSibling;\n      if (selector && typeof selector === 'string') {\n        children = this.siblings(selector);\n        children.forEach(element => {\n          if (prevElement === element) ret.push(element);\n        });\n      } else {\n        ret.push(this[0].previousElementSibling);\n      }\n      return ret;\n    },\n\n    prevAll(selector) {\n      if (!this.size()) return new DOMStack();\n      let ret = new DOMStack();\n      let __siblings = undefined;\n      const __self = this[0];\n      let __sibs = Array.prototype.slice.apply(this[0].parentNode.children);\n      let pos = __sibs.indexOf(__self);\n      __sibs.splice(pos, __sibs.length - 1);\n      if (selector && typeof selector === 'string') {\n        __siblings = this.siblings(selector).array;\n        __sibs.forEach(element => {\n          if (__siblings.indexOf(element) > -1) {\n            ret.push(element);\n          }\n        });\n      } else {\n        __siblings = Array.prototype.slice.apply(this[0].parentNode.children);\n        pos = __siblings.indexOf(__self);\n        __siblings.splice(pos, __siblings.length - 1);\n        ret.concat(__siblings);\n      }\n      return ret;\n    },\n\n    next(selector) {\n      if (!this.size()) return new DOMStack();\n      let ret = new DOMStack();\n      let children = undefined;\n      let nextElement = this[0].nextElementSibling;\n      if (selector && typeof selector === 'string') {\n        children = this.siblings(selector);\n        children.forEach(element => {\n          if (nextElement === element) ret.push(element);\n        });\n      } else {\n        ret.push(this[0].nextElementSibling);\n      }\n      return ret;\n    },\n\n    nextAll(selector) {\n      if (!this.size()) return new DOMStack();\n      let ret = new DOMStack();\n      let __siblings = undefined;\n      let __parent = undefined;\n      const __self = this[0];\n      let __sibs = Array.prototype.slice.apply(this[0].parentNode.children);\n      let pos = __sibs.indexOf(__self);\n      __sibs.splice(0, pos + 1);\n      if (selector && typeof selector === 'string') {\n        __parent = this.array[0].parentNode;\n        __siblings = $(__parent).find(selector);\n        __sibs.splice(0, __sibs.indexOf(this.array[0]));\n        __sibs.forEach(element => {\n          if (__siblings.array.indexOf(element) > -1) {\n            ret.push(element);\n          }\n        });\n      } else {\n        __siblings = Array.prototype.slice.apply(this[0].parentNode.children);\n        pos = __siblings.indexOf(__self);\n        __siblings.splice(0, pos + 1);\n        ret.concat(__siblings);\n      }\n      return ret;\n    },\n\n    first() {\n      if (!this.size()) return new DOMStack();\n      return this.eq(0);\n\n    },\n\n    last() {\n      if (!this.size()) return new DOMStack();\n      return this.eq(-1);\n    },\n\n    index(element) {\n      if (!this.size()) return undefined;\n      if (!element) {\n        return Array.prototype.slice.apply(this[0].parentNode.children).indexOf(this[0]);\n      } else {\n        if (element && element.objectType && element.objectType === 'domstack') {\n          return this.indexOf(element.getData()[0]);\n        } else if (element.nodeType === 1) {\n          return this.indexOf(element);\n        } else {\n          return this.indexOf(element);\n        }\n      }\n    },\n\n    children(selector) {\n      if (!this.size()) return new DOMStack();\n      let ret = new DOMStack();\n      if (!selector) {\n        this.forEach(node => {\n          Array.prototype.slice.apply(node.children).forEach(ctx => ret.push(ctx));\n        });\n        ret[0] = ret.array[0];\n      } else {\n        this.forEach(node => {\n          Array.prototype.slice.apply(node.children).forEach(ctx => {\n            if ($(ctx).is(selector)) {\n              ret.push(ctx);\n            }\n          });\n        });\n        ret[0] = ret.array[0];\n      }\n      return ret;\n    },\n\n    siblings(selector) {\n      if (!this.size())\n        return new DOMStack();\n      let __siblings = undefined;\n      let ret = new DOMStack();\n      const $this = this;\n      let parent = undefined;\n      let children = Array.prototype.slice.apply(this.array[0].parentNode.children);\n\n      /**\n       * Remove this from siblings:\n       */\n      const pos = children.indexOf($this[0]);\n      children.splice(pos, 1);\n\n      children.splice(children.indexOf(this.array[0]), 0);\n      if (selector && typeof selector === 'string') {\n        parent = this.array[0].parentNode;\n        __siblings = $(parent).find(selector);\n        __siblings.array.splice(__siblings.array.indexOf(this.array[0]), 0);\n        ret.concat(__siblings.array);\n      } else {\n        ret.concat(children);\n      }\n      return ret;\n    },\n\n    parent() {\n      if (!this.size()) return new DOMStack();\n      let ret = new DOMStack();\n      this.forEach(ctx => {\n        return ret.push(ctx.parentNode);\n      });\n      ret.unique();\n      return ret;\n    },\n\n    closest(selector) {\n      if (!this.size())\n        return new DOMStack();\n      let ret = new DOMStack();\n      if (typeof selector === 'undefined') {\n        return new DOMStack();\n      }\n      let position = null;\n      let p = undefined;\n      if (this[0]) {\n        p = this[0].parentNode;\n      }\n      if (!p) {\n        return new DOMStack();\n      }\n      if (typeof selector === 'string') {\n        selector.trim();\n      }\n      if (typeof selector === 'number') {\n        position = selector || 1;\n        for (let i = 1; i < position; i++) {\n          if (p && p.nodeName === 'HTML') {\n            return p;\n          } else {\n            if (p !== null) {\n              p = p.parentNode;\n            }\n          }\n        }\n        ret.push(p);\n      } else if (typeof selector === 'string') {\n        if (p && $(p).is(selector)) {\n          ret.push(p);\n        } else {\n          ret.push($(p).closest(selector).array[0]);\n        }\n      }\n      return ret;\n    },\n\n    css(property, value) {\n      if (!this.size()) return new DOMStack();\n      const pixelRE = /top|bottom|left|right|margin|padding/img;\n      let postFix = '';\n      let ret = new DOMStack();\n      const testForPixelSupport = (value, property) => {\n        if ($.type(value) === 'number' && property.match(pixelRE)) {\n          postFix = 'px';\n        }\n      };\n      if (!property) return new DOMStack();\n      if (!value && $.type(property) === 'object') {\n        this.forEach(node => {\n          for (let key in property) {\n            if (property.hasOwnProperty(key)) {\n              testForPixelSupport(property[key], key);\n              node.style[$.camelize(key)] = property[key] + postFix;\n            }\n          }\n          ret.push(node);\n        });\n      } else if (!value && typeof property === 'string') {\n        if (!this.size())\n          return;\n        return document.defaultView.getComputedStyle(this.eq(0).array[0], null).getPropertyValue(property.toLowerCase());\n      } else if (!!value) {\n        this.forEach(node => {\n          testForPixelSupport(value, property);\n          node.style[$.camelize(property)] = value + postFix;\n          ret.push(node);\n        });\n      }\n      return ret;\n    },\n\n    width(amount) {\n      if (!this.size()) return;\n      if (amount) {\n        if(/px]+|[pt]+|[em]+|[en]+|[%]+|[ex]+|[in]+|[cm]+|[mm]+|[ch]+|[in]+|[rem]+|[vw]+|[vh]+$/.test(amount)) {\n          this.forEach(function(element) {\n            element.style.width = amount;\n          });\n        } else {\n          this.forEach(function(element) {\n            element.style.width = amount + 'px';\n          });\n        }\n      } else {\n        return this.eq(0).array[0].clientWidth;\n      }\n    },\n\n    height(amount) {\n      if (!this.size()) return;\n      if (amount) {\n        if(/px]+|[pt]+|[em]+|[en]+|[%]+|[ex]+|[in]+|[cm]+|[mm]+|[ch]+|[in]+|[rem]+|[vw]+|[vh]+$/.test(amount)) {\n          this.forEach(function(element) {\n            element.style.height = amount;\n          });\n        } else {\n          this.forEach(function(element) {\n            element.style.height = amount + 'px';\n          });\n        }\n      } else {\n        return this.eq(0).array[0].clientHeight;\n      }\n    },\n\n    before(content) {\n      if (!this.size()) {\n        return new DOMStack();\n      }\n      const __before = (node, content) => {\n        if (typeof content === 'string' || typeof content === 'number') {\n          content = $.html(content);\n        }\n        if (content && content.objectType && content.objectType === 'domstack') {\n          const len = content.size();\n          let i = 0;\n          while (i < len) {\n            node.parentNode.insertBefore(content.array[i], node);\n            i++;\n          }\n        } else if (content && content.nodeType === 1) {\n          node.parentNode.insertBefore(content, node);\n        }\n        return this;\n      };\n      this.forEach(node => {\n        return __before(node, content);\n      });\n      return this;\n    },\n\n    after(args) {\n      if (!this.size()) return new DOMStack();\n      const __after = (node, content) => {\n        let parent = node.parentNode;\n        if (typeof content === 'string' || typeof content === 'number') {\n          content = $.html(content);\n        }\n        if (content && content.objectType && content.objectType === 'domstack') {\n          let i = 0,\n            len = content.size();\n          while (i < len) {\n            if (node === parent.lastChild) {\n              parent.appendChild(content.array[i]);\n            } else {\n              parent.insertBefore(content.array[i], node.nextSibling);\n            }\n            i++;\n          }\n        } else if (content && content.nodeType === 1) {\n          parent.appendChild(content);\n        }\n        return this;\n      };\n      this.forEach(node => {\n        return __after(node, args);\n      });\n      return this;\n    },\n\n    prepend(content) {\n      if (!this.size()) return new DOMStack();\n\n      if (typeof content === 'string' || typeof content === 'number') {\n        this.forEach(element => {\n          element.insertAdjacentHTML('afterbegin', content);\n        });\n      } else if (content && content.objectType && content.objectType === 'domstack') {\n        this.forEach(element => {\n          content.forEach(node => {\n            element.insertBefore(node, element.firstChild);\n          });\n        });\n      } else if (content && content.nodeType === 1) {\n        this.forEach(element => {\n          element.insertBefore(node, element.firstChild);\n        });\n      }\n      return this;\n    },\n\n    append(content) {\n      if (!this.size()) return new DOMStack();\n\n      if (typeof content === 'string' || typeof content === 'number') {\n        this.forEach(element => {\n          element.insertAdjacentHTML('beforeend', content);\n        });\n      } else if (content && content.objectType && content.objectType === 'domstack') {\n        this.forEach(element => {\n          content.forEach(node => {\n            element.insertBefore(node, null);\n          });\n        });\n\n      } else if (content && content.nodeType === 1) {\n        this.forEach(element => {\n          element.insertBefore(node, null);\n        });\n      }\n      return this;\n    },\n\n    prependTo(selector) {\n      if (!this.size()) return new DOMStack();\n      this.reverse();\n      this.forEach(item => {\n        return $(selector).prepend(item);\n      });\n      return this;\n    },\n\n    appendTo(selector) {\n      if (!this.size()) return new DOMStack();\n      this.forEach(item => {\n        return $(selector).append(item);\n      });\n      return this;\n    },\n\n    clone(value) {\n      if (!this.size()) return new DOMStack();\n      let ret = new DOMStack();\n      this.forEach(ctx => {\n        if (value === true || !value) {\n          ret.push(ctx.cloneNode(true));\n        } else {\n          ret.push(ctx.cloneNode(false));\n        }\n      });\n      return ret;\n    },\n\n    wrap(string) {\n      if (!this.size() || !string) return new DOMStack();\n      let tempNode = undefined;\n      let empNode = undefined;\n      let whichClone = undefined;\n      this.forEach(ctx => {\n        tempNode = $.html(string);\n        empNode = tempNode.array[0];\n        whichClone = $(ctx).clone(true);\n        tempNode.append(whichClone);\n        $(ctx).before(tempNode);\n        $(ctx).remove();\n      });\n    },\n\n    unwrap() {\n      if (!this.size()) return new DOMStack();\n      let parentNode = null;\n      this.forEach(node => {\n        if (node.parentNode === parentNode) {\n          return;\n        }\n        parentNode = node.parentNode;\n        if (node.parentNode.nodeName === 'BODY') {\n          return false;\n        }\n        $.replace(node, node.parentNode);\n      });\n    },\n\n    offset() {\n      if (!this.size())\n        return;\n      const offset = this.eq(0).array[0].getBoundingClientRect();\n      return {\n        top: Math.round(offset.top),\n        left: Math.round(offset.left),\n        bottom: Math.round(offset.bottom),\n        right: Math.round(offset.right)\n      };\n    },\n\n    position() {\n      let obj = {\n        top: 0,\n        left: 0\n      };\n      const pos = this.array[0].getBoundingClientRect();\n      const borderTop = parseInt(this.parent().css('border-top-width'), 10) || 0;\n      const borderLeft = parseInt(this.parent().css('border-left-width'), 10) || 0;\n      const parentPos = this.array[0].parentNode.getBoundingClientRect();\n      const compareOffsets1 = function(val1, val2) {\n        return Math.round(val1 - val2);\n      };\n      obj.top = compareOffsets1(pos.top, (parentPos.top + borderTop));\n      obj.left = compareOffsets1(pos.left, (parentPos.left + borderLeft));\n      return obj;\n    },\n\n    empty() {\n      if (!this.size()) return new DOMStack();\n      let ret = new DOMStack();\n      this.forEach(ctx => {\n        $(ctx).children().off();\n        ctx.textContent = '';\n        ret.push(ctx);\n      });\n      return ret;\n    },\n\n    html(content) {\n      if (!this.size()) return new DOMStack();\n      if (content === '') {\n        this.forEach(node => {\n          node.innerHTML = '';\n        });\n        return this;\n      } else if (content) {\n        this.forEach(node => {\n          node.innerHTML = content;\n        });\n        return this;\n      } else if (!content) {\n        return this.array[0].innerHTML.trim();\n      }\n    },\n\n    text(string) {\n      let ret = '';\n      if (!this.size()) return new DOMStack();\n      if (!!string || string === 0) {\n        this.forEach(element => {\n          element.innerText = string;\n        });\n        return this;\n      } else {\n        this.forEach(element => {\n          ret += element.innerText;\n          ret.trim();\n        });\n        return ret;\n      }\n    },\n\n    replaceWith(content) {\n      if (content && content.nodeType && content.nodeType === 1) {\n        $(content).off();\n      } else if (content && content.objectType && content.objectType === 'domstack') {\n        content.off();\n      }\n      this.forEach(node => {\n        $(node).off();\n        if (typeof content === 'string') {\n          $.replace($(content), node);\n        } else {\n          $.replace($(content), node);\n        }\n      });\n    },\n\n    remove() {\n      if (!this.size()) return new DOMStack();\n      this.forEach(node => {\n        $(node).off();\n        if (node.parentNode) node.parentNode.removeChild(node);\n      });\n    },\n\n    addClass(className) {\n      if (!this.size()) return new DOMStack();\n      if (typeof className !== \"string\")\n        return;\n      let ret = new DOMStack();\n      let classes = undefined;\n      this.forEach(node => {\n        if (/\\s/.test(className)) {\n          classes = className.split(' ');\n          classes.forEach(name => {\n            node.classList.add(name);\n          });\n        } else {\n          node.classList.add(className);\n        }\n        ret.push(node);\n      });\n      return ret;\n    },\n\n    hasClass(className) {\n      if (!this.size()) return new DOMStack();\n      let temp = false;\n      this.forEach(element => {\n        if (element.classList.contains(className)) {\n          temp = true;\n        }\n      });\n      return temp;\n    },\n\n    removeClass(className) {\n      if (!this.size()) return new DOMStack();\n      let ret = new DOMStack();\n      let classes = undefined;\n      this.forEach(node => {\n        if (!node)\n          return;\n        if (/\\s/.test(className)) {\n          classes = className.split(' ');\n          classes.forEach(name => {\n            node.classList.remove(name);\n          });\n        } else {\n          node.classList.remove(className);\n        }\n        if (node.getAttribute('class') === '') {\n          node.removeAttribute('class');\n        }\n        ret.push(node);\n      });\n      return ret;\n    },\n\n    toggleClass(className) {\n      if (!this.size()) return new DOMStack();\n      let ret = new DOMStack();\n      this.forEach(node => {\n        node.classList.toggle(className);\n        ret.push(node);\n      });\n      return ret;\n    },\n\n    attr(property, value) {\n      if (!this.size()) return new DOMStack();\n      let ret = new DOMStack();\n      const __attr = (node, property, value) => {\n        if (value === undefined) {\n          return node.getAttribute(property);\n        } else {\n          return node.setAttribute(property, value);\n        }\n      };\n      if (value === undefined) {\n        if (this[0].hasAttribute(property)) {\n          return this[0].getAttribute(property);\n        }\n      } else {\n        this.forEach(node => {\n          __attr(node, property, value);\n          ret.push(node);\n        });\n      }\n      if (ret.length) {\n        return ret;\n      }\n    },\n\n    removeAttr(attribute) {\n      if (!this.size()) return new DOMStack();\n      let ret = new DOMStack();\n      this.forEach(node => {\n        if (!!node.hasAttribute(attribute)) {\n          node.removeAttribute(attribute);\n          ret.push(node);\n        }\n      });\n      return ret;\n    },\n\n    prop(property, value) {\n      if (!this.size()) return new DOMStack();\n      if (value === false || !!value) {\n        this.forEach(element => {\n          element[property] = value;\n        });\n        return this;\n      } else if (this.array[0] && this.array[0][property]) {\n        return this.array[0][property];\n      }\n    },\n\n    removeProp(property) {\n      if (!this.size()) return new DOMStack();\n      this[0][property] = false;\n      return [this[0]];\n    },\n\n    disable() {\n      if (!this.size()) return new DOMStack();\n      this.forEach(node => {\n        node.classList.add('disabled');\n        node.disabled = true;\n        node.style.cursor = 'default';\n      });\n      return this;\n    },\n\n    enable() {\n      if (!this.size()) return new DOMStack();\n      this.forEach(node => {\n        node.classList.remove('disabled');\n        node.removeAttribute('disabled');\n        node.style.cursor = 'auto';\n      });\n      return this;\n    },\n\n    val(value) {\n      if (!this.size()) return new DOMStack();\n      if (value) {\n        this.array[0].value = value;\n        return this;\n      } else {\n        if (this.array[0] && this.array[0].value) {\n          return this.array[0].value;\n        }\n      }\n    },\n\n    hide() {\n      let display = this.css('display');\n      this.data('display_attr', display);\n      this.css('display', 'none');\n    },\n\n    show() {\n      let display = this.data('display_attr');\n      if (display === 'none' || !display) {\n        display = 'block';\n      }\n      this.css('display', display);\n    }\n  });\n\n  /**\n   * ChocolateChip-UI event methods.\n   */\n\n  (() => {\n    const EventErrorMessages = {\n      en: {\n        noEventOrCallback: \"ChocolateChip-UI Event Error: No event or callback was provided to bind to the element. These are the minimal requirements for this method to work. Please provide an event and callback.\",\n        noCallbackForEventBinding: \"ChocolateChip-UI Event Error: No callback was provided for the event you are trying to bind. A callback is required for the event binding to work.\",\n        noEventToTrigger: \"ChocolateChip-UI Event Error: No event was provided to trigger. As such we cannot do anything.\"\n      },\n      es: {\n        noEventOrCallback: \"Hubo Error de Evento ChocolateChip-UI: No se proporcionó ningún evento ni función callback para asignar al elemento. Cuando menos se nesecitan éstos para realizar esta operación en el elemento. Por favor proporcione un evento y una callback.\",\n        noCallbackForEventBinding: \"Hubo Error de Evento ChocolateChip-UI: No se proporcionó ninguna función callback para el evento que se quiere asignar al element. Se reqiere una callback para asignar el evento al elemento.\",\n        noEventToTrigger: \"Hubo Error de Evento ChocolateChip-UI: No se proporcionó ningún evento que gatillar. Por eso no podemos hacer nada.\"\n      }\n    }\n\n    let errors = undefined;\n    if ($('html').attr('lang') == 'en') errors = EventErrorMessages.en;\n    if ($('html').attr('lang') == 'es') errors = EventErrorMessages.es;\n        \n    /**\n     * Define interface for handling events:\n     */\n    let EventStack = (array) => {\n      let __array = [];\n      if (array && Array.isArray(array)) {\n        let i = -1;\n        const len = array.length;\n        while (++i < len) {\n          __array[i] = array[i];\n        }\n      } else if (array) {\n        const arr = Array.prototype.slice.apply(arguments);\n        arr.forEach((ctx, idx) => {\n          __array[idx] = ctx;\n        });\n      }\n      return {\n\n        size: () => __array.length,\n\n        push: (data) => __array.push(data),\n\n        pop: () => __array.pop(),\n\n        eq: (index) => {\n          if (index < 0) {\n            return __array[__array.length + index];\n          } else {\n            return __array[index];\n          }\n        },\n\n        forEach: (callback) => {\n          let value = undefined;\n          let i = -1;\n          const len = __array.length;\n          while (++i < len) {\n            value = callback.call(__array[i], __array[i], i);\n            if (value === false) {\n              break;\n            }\n          }\n        },\n\n        shift: () => __array.shift.apply(__array, arguments),\n\n        unshift: () => __array.unshift.apply(__array, arguments),\n\n        splice: () => __array.splice.apply(__array, arguments),\n\n        indexOf: () => __array.indexOf.apply(__array, arguments),\n\n        getData: () => __array,\n\n        purge: () => __array = []\n      };\n    };\n\n    let ChuiEventCache = {\n      elements: {}\n    };\n\n    /* jshint, evil: false, validthis:true, unused:false, loopfunc: false,\n    smarttabs: true, nonew: false */\n\n    /**\n     * Private method to set events on ChuiEventCache\n     */\n    const bind = function(element, event, callback, capturePhase) {\n      if (!element.id) element.id = chocolatechipjs.uuid();\n      if (!ChuiEventCache.elements[element.id]) {\n        ChuiEventCache.elements[element.id] = EventStack(); // jshint ignore:line\n      }\n      ChuiEventCache.elements[element.id].push({\n        event: event,\n        callback: callback\n      });\n      element.addEventListener(event, callback, capturePhase);\n    };\n\n\n    /**\n     * Delete items from event stack:\n     */\n    const deleteFromEventStack = function(toDelete, evtStck) {\n      let len = toDelete.length;\n      for (let i = 0; len > i; len--) {\n        evtStck.splice(toDelete[len - 1], 1);\n      }\n    };\n    /**\n     * Private method to unbind events on ChuiEventCache\n     */\n    const unbind = function(element, event, callback, capturePhase) {\n\n      const eventStack = ChuiEventCache.elements[element.id];\n      if (!eventStack) return;\n      let deleteOrder = [];\n\n      if (!event) {\n        deleteOrder = [];\n        eventStack.forEach((evt, idx) => {\n          element.removeEventListener(evt.event, evt.callback, evt.capturePhase);\n          deleteOrder.push(idx);\n        });\n\n        deleteFromEventStack(deleteOrder, eventStack);\n\n      } else if (!!event && !callback) {\n        deleteOrder = [];\n        eventStack.forEach((evt, idx) => {\n          if (evt.event === event) {\n            element.removeEventListener(evt.event, evt.callback, evt.capturePhase);\n            deleteOrder.push(idx);\n          }\n        });\n\n        deleteFromEventStack(deleteOrder, eventStack);\n\n      } else if (callback) {\n        deleteOrder = [];\n        eventStack.forEach((evt, idx) => {\n          if (callback === evt.callback) {\n            element.removeEventListener(evt.event, evt.callback, evt.capturePhase);\n            deleteOrder.push(idx);\n          }\n        });\n        deleteFromEventStack(deleteOrder, eventStack);\n      }\n    };\n\n\n    /**\n     * Set delegated events on ChuiEventCache\n     */\n\n    const delegate = (element, selector, event, callback, capturePhase) => {\n      let delegateElement = $(element).array[0];\n      $(element).forEach(ctx => {\n        $(ctx).on(event, (e) => {\n          let target = e.target;\n          if (e.target.nodeType === 3) {\n            target = e.target.parentNode;\n          }\n          $(ctx).find(selector).forEach(delegateElement => {\n            if (delegateElement === target) {\n              callback.call(delegateElement, e);\n            } else {\n              try {\n                const ancestor = $(target).closest(selector);\n                if (delegateElement === ancestor.array[0]) {\n                  callback.call(delegateElement, e);\n                }\n              } catch (err) {}\n            }\n          });\n        }, capturePhase);\n      });\n    };\n\n\n    /**\n     * Method to remove delegated events from ChuiEventCache:\n     */\n    const undelegate = (element, selector, event, callback, capturePhase) => {\n\n      unbind($(element).array[0], event, callback, capturePhase);\n    };\n\n    $.fn.extend({\n      on: function(event, selector, callback, capturePhase) {\n        if (!event) {\n          if ($.supressErrorMessages) return;\n          console.error(errors.noEventOrCallback);\n          return;\n        }\n        if (!selector) {\n          if ($.supressErrorMessages) return;\n          console.error(errors.noCallbackForEventBinding);\n          return;\n        }\n\n        if (!selector && /Object/img.test(event.constructor.toString())) {\n          this.forEach(element => {\n            for (let key in event) {\n              if (event.hasOwnProperty(key)) {\n                $(element).on(key, event[key]);\n              }\n            }\n          });\n        }\n        let ret = [];\n        let events = undefined;\n        if (typeof event === 'string') {\n          event = event.trim();\n          if (/\\s/.test(event)) {\n            events = event.split(' ');\n            this.forEach(ctx => {\n              events.forEach(evt => {\n                if (typeof selector === 'function') {\n                  bind(ctx, evt, selector, callback);\n                  ret.push(ctx);\n                } else {\n                  delegate(ctx, selector, evt, callback, capturePhase);\n                }\n              });\n            });\n          }\n        }\n        this.forEach(ctx => {\n          if (typeof selector === 'function') {\n            return bind(ctx, event, selector, callback);\n          } else {\n            delegate(ctx, selector, event, callback, capturePhase);\n          }\n        });\n        return this;\n      },\n\n      off: function(event, selector, callback, capturePhase) {\n        let ret = new DOMStack();\n        if (!this.size()) return ret;\n\n        this.forEach(function(ctx) {\n          if (typeof event === 'undefined') {\n            ret.push(ctx);\n            unbind(ctx);\n            return ret;\n          } else if (typeof selector === 'function' || !selector) {\n            unbind(ctx, event, selector, callback, capturePhase);\n            return this;\n          } else {\n            undelegate(ctx, selector, event, callback, capturePhase);\n            return this;\n          }\n        });\n      },\n\n      trigger: function(event) {\n        if (!event) {\n          if ($.supressErrorMessages) return;\n          console.error(errors.noEventToTrigger);\n          return;\n        }\n        if (!this.size()) return new DOMStack();\n        this.forEach(ctx => {\n          if (document.createEvent) {\n            const evtObj = document.createEvent('Events');\n            evtObj.initEvent(event, true, false);\n            ctx.dispatchEvent(evtObj);\n          }\n        });\n      }\n    });\n  })();\n\n\n  window.$ = window.chocolatechipjs = chocolatechipjs;\n\n  return $;\n})();\n\n  /**\n   * ChocolateChip-UI event aliases.\n   */\n  $.extend({\n    eventStart: null,\n    eventEnd: null,\n    eventMove: null,\n    eventCancel: null,\n    /**\n     * Define min-length for gesture detection:\n     */\n    gestureLength: 30\n  });\n  $(() => {\n    /**\n     * Setup Event Variables:\n     */\n    if ('ontouchstart' in window && /mobile/img.test(navigator.userAgent)) {\n      $.eventStart = 'touchstart';\n      $.eventEnd = 'touchend';\n      $.eventMove = 'touchmove';\n      $.eventCancel = 'touchcancel';\n      /** \n       * Mouse events for desktop: \n       */\n    } else {\n      $.eventStart = 'mousedown';\n      $.eventEnd = 'click';\n      $.eventMove = 'mousemove';\n      $.eventCancel = 'mouseout';\n    }\n  });\n\n  /**\n   * ChocolateChip-UI gestures.\n   */\n  (function() {\n    \"use strict\";\n    let touch = {};\n    let touchTimeout = undefined;\n    let swipeTimeout = undefined;\n    let tapTimeout = undefined;\n    const longTapDelay = 750;\n    let singleTapDelay = 150;\n    $.gestureLength = 50;\n    if ($.isAndroid) singleTapDelay = 200;\n    let longTapTimeout = undefined;\n\n    function parentIfText(node) {\n      return 'tagName' in node ? node : node.parentNode;\n    }\n\n    function swipeDirection(x1, x2, y1, y2) {\n      return Math.abs(x1 - x2) >=\n        Math.abs(y1 - y2) ? (x1 - x2 > 0 ? 'left' : 'right') : (y1 - y2 > 0 ? 'up' : 'down');\n    }\n\n    function longTap() {\n      longTapTimeout = null;\n      if (touch.last) {\n        try {\n          if (touch && touch.el) {\n            touch.el.trigger('longtap');\n            touch = {};\n          }\n        } catch (err) {};\n      }\n    }\n\n    function cancelLongTap() {\n      if (longTapTimeout) clearTimeout(longTapTimeout);\n      longTapTimeout = null;\n    }\n\n    function cancelAll() {\n      if (touchTimeout) clearTimeout(touchTimeout);\n      if (tapTimeout) clearTimeout(tapTimeout);\n      if (swipeTimeout) clearTimeout(swipeTimeout);\n      if (longTapTimeout) clearTimeout(longTapTimeout);\n      touchTimeout = tapTimeout = swipeTimeout = longTapTimeout = null;\n      touch = {};\n    }\n\n    /** \n     * Execute this after DOM loads: \n     */\n    $(() => {\n      let now = undefined;\n      let delta = undefined;\n      const body = $('body');\n      let twoTouches = false;\n\n      /** \n       * Capture start of event: \n       */\n      body.on($.eventStart, function(e) {\n        now = Date.now();\n        delta = now - (touch.last || now);\n        if (e.originalEvent) e = e.originalEvent;\n\n        if ($.eventStart === 'mousedown') {\n          touch.el = $(parentIfText(e.target));\n          if (e.target.nodeName === 'ripple') {\n            touch.el = $(el.target.parentNode);\n          }\n          touchTimeout && clearTimeout(touchTimeout);\n          touch.x1 = e.pageX;\n          touch.y1 = e.pageY;\n          twoTouches = false;\n\n        /** \n         * Detect two or more finger gestures: \n         */\n        } else {\n          if (e.touches.length === 1) {\n            touch.el = $(parentIfText(e.touches[0].target));\n            touchTimeout && clearTimeout(touchTimeout);\n            touch.x1 = e.touches[0].pageX;\n            touch.y1 = e.touches[0].pageY;\n            if (e.targetTouches.length === 2) {\n              twoTouches = true;\n            } else {\n              twoTouches = false;\n            }\n          }\n        }\n        \n        if (delta > 0 && delta <= 250) {\n          touch.isDoubleTap = true;\n        }\n        touch.last = now;\n        longTapTimeout = setTimeout(longTap, longTapDelay);\n      });\n\n      /** \n       * Capture event move: \n       */\n      body.on($.eventMove, e => {\n        if (e.originalEvent) e = e.originalEvent;\n        cancelLongTap();\n        if ($.eventMove === 'mousemove') {\n          touch.x2 = e.pageX;\n          touch.y2 = e.pageY;\n        } else {\n          /** \n           * One finger gesture: \n           */\n          if (e.touches.length === 1) {\n            touch.x2 = e.touches[0].pageX;\n            touch.y2 = e.touches[0].pageY;\n          }\n        }\n      });\n\n      /** \n       * Capture event end: \n       */\n      body.on($.eventEnd, e => {\n\n        cancelLongTap();\n        if (!!touch.el) {\n          /** \n           * Swipe detection: \n           */\n          if ((touch.x2 && Math.abs(touch.x1 - touch.x2) > $.gestureLength) ||\n            (touch.y2 && Math.abs(touch.y1 - touch.y2) > $.gestureLength)) {\n            swipeTimeout = setTimeout(function() {\n              if (touch && touch.el) {\n                touch.el.trigger('swipe');\n                touch.el.trigger('swipe' + (swipeDirection(touch.x1, touch.x2, touch.y1, touch.y2)));\n                touch = {};\n              }\n            }, 0);\n\n          /** \n           * Normal tap: \n           */\n          } else if ('last' in touch) {\n            /** \n             * Delay by one tick so we can cancel the 'tap' event if 'scroll' fires: \n             */\n            tapTimeout = setTimeout(() => {\n              /** \n               * Trigger double tap immediately: \n               */\n              if (touch && touch.isDoubleTap) {\n                if (touch && touch.el) {\n                  touch.el.trigger('doubletap');\n                  touch = {};\n                }\n\n              } else {\n                /** \n                 * Trigger tap after singleTapDelay: \n                 */\n                touchTimeout = setTimeout(() => {\n                  touchTimeout = null;\n                  if (touch && touch.el) {\n                    touch.el.trigger('tap');\n                    touch = {};\n                    return false;\n                  }\n                }, singleTapDelay);\n              }\n            }, 0);\n          }\n\n        } else {\n          return;\n        }\n      });\n      body.on('touchcancel', cancelAll);\n    });\n\n    /**\n     * Register events:\n     */\n    ['tap', 'doubletap', 'longtap', 'swipeleft', 'swiperight', 'swipeup', 'swipedown'].forEach(method => {\n      $.fn.extend({\n        method: function(callback) {\n          return this.on(method, callback);\n        }\n      });\n    });\n  })();\n\n  /**\n   * ChocolateChipJS data cache.\n   */\n  let CCDataCache = {\n    elements: {}\n  };\n  $.fn.extend({\n    data(key, value) {\n      if (!this.size()) return new DOMStack();\n      let val = undefined;\n      let id = undefined;\n      const ctx = this.array[0];\n      if (!ctx.id) {\n        ctx.id = $.uuid();\n      }\n      id = ctx.id;\n      if (!CCDataCache.elements[id]) {\n        CCDataCache.elements[id] = {};\n      }\n      if (key === 'undefined' || key === null) {\n        return;\n      }\n      if (value || value === 0) {\n        val = value;\n        let obj = {};\n        obj[key] = value;\n\n        CCDataCache.elements[id][key] = value;\n      } else {\n        if (!CCDataCache.elements[id]) return;\n        if (CCDataCache.elements[id][key] === 0) {\n          return CCDataCache.elements[id][key];\n        }\n        if (!CCDataCache.elements[id][key]) return;\n        return CCDataCache.elements[id][key];\n      }\n      return this;\n    },\n\n    removeData(key) {\n      if (!this.size()) return this;\n      this.forEach((element) => {\n        const id = element.id;\n        if (!id) return this;\n        if (!CCDataCache.elements[id]) {\n          return this;\n        }\n        if (!key) {\n          delete CCDataCache.elements[id];\n          return this;\n        }\n        if (Object.keys(CCDataCache.elements[id]).length === 0) {\n          delete CCDataCache.elements[id];\n        } else {\n          delete CCDataCache.elements[id][key];\n        }\n        return this;\n      });\n    }\n  });\n\n/**\n * ChocolateChip-UI types method.\n */\n$.extend({\n  type: type => {\n    switch (typeof type) {\n      case 'boolean':\n        return 'boolean';\n      case 'number':\n        return 'number';\n      case 'string':\n        return 'string';\n      case 'function':\n        return 'function';\n      case 'object':\n        if (Array.isArray(type)) {\n          return 'array';\n        } else if (Object.prototype.toString.call(type) === '[object Date]') {\n          return 'date';\n        } else if (Object.prototype.toString.call(type) === '[object Error]') {\n          return 'error';\n        } else if (Object.prototype.toString.call(type) === '[object RegExp]') {\n          return 'regexp';\n        } else if (Object.prototype.toString.call(type) === '[object Object]') {\n          return 'object';\n        }\n    }\n  }\n});\n\n/**\n * ChocolateChip-UI string methods.\n */\n$.extend({\n  camelize: string => {\n    if (typeof string !== 'string')\n      return;\n    return string.replace(/\\-(.)/g, (match, letter) => {\n      return letter.toUpperCase();\n    });\n  },\n\n  deCamelize: string => {\n    if (typeof string !== 'string')\n      return;\n    return string.replace(/([A-Z])/g, '-$1').toLowerCase();\n  },\n\n  capitalize: (string, all) => {\n    const self = this;\n    if (!string) {\n      return;\n    }\n    if (typeof string !== 'string')\n      return;\n    if (all) {\n      const str = string.split(' ');\n      let newstr = [];\n      str.forEach(item => {\n        return newstr.push(self.capitalize(item));\n      });\n      return newstr.join(' ');\n    } else {\n      return string.charAt(0).toUpperCase() + string.substring(1).toLowerCase();\n    }\n  }\n});\n\n/**\n * ChocolateChip-UI collection utilities.\n */\n$.fn.extend({\n  forEach(callback) {\n    this.each((idx, ctx) => {\n      callback.call(ctx, ctx, idx);\n    });\n  },\n\n  disable() {\n    if (!this.size()) return $();\n    this.forEach(node => {\n      node.classList.add('disabled');\n      node.disabled = true;\n      node.style.cursor = 'default';\n    });\n    return this;\n  },\n\n  enable() {\n    if (!this.size()) return $();\n    this.forEach(node => {\n      node.classList.remove('disabled');\n      node.removeAttribute('disabled');\n      node.style.cursor = 'auto';\n    });\n    return this;\n  },\n\n  iz(selector) {\n    const ret = $();\n    this.forEach(ctx => {\n      if ($(ctx).is(selector)) {\n        ret.push(ctx);\n      }\n    });\n    return ret;\n  },\n\n  iznt(selector) {\n    const ret = $();\n    this.each((_, ctx) => {\n      if (!$(ctx).is(selector)) {\n        ret.push(ctx);\n      }\n    });\n    return ret;\n  },\n\n  haz(selector) {\n    let ret = new DOMStack();\n    this.forEach(element => {\n      if ($(element).has(selector)[0]) {\n        ret.push(element);\n      }\n    });\n    return ret;\n  },\n\n  haznt(selector) {\n    let ret = new DOMStack();\n    this.forEach(element => {\n      if (!$(element).has(selector)[0]) {\n        ret.push(element);\n      }\n    });\n    return ret;\n  },\n\n  hazClass(className) {\n    if (className) {\n      return this.iz('.' + className);\n    } else {\n      return new DOMStack();\n    }\n  },\n\n  hazntClass(className) {\n    if (className) {\n      return this.iznt('.' + className);\n    } else {\n      return new DOMStack();\n    }\n  },\n\n  hazAttr(attribute) {\n    if (attribute) {\n      return this.iz('[' + attribute + ']');\n    } else {\n      return new DOMStack();\n    }\n  },\n\n  hazntAttr(attribute) {\n    if (attribute) {\n      return this.iznt('[' + attribute + ']');\n    } else {\n      return new DOMStack();\n    }\n  }\n});\n\n/**\n * ChocolateChip-UI - Validators.\n */\n\n/**\n * Set validity state of form elements: \n */\nconst setValidityStatus = (element, valid) => {\n  if (valid) {\n    $(element).prop('valid', true);\n    $(element).prop('invalid', false);\n    $(element).addClass('valid').removeClass('invalid');\n  } else {\n    $(element).prop('valid', false);\n    $(element).prop('invalid', true);\n    $(element).addClass('invalid').removeClass('valid');\n  }\n};\n\n/**\n * Used to check input validity: \n */\nconst checkValidity = (element, expression) => {\n  if (expression) {\n    setValidityStatus(element, true);\n  } else {\n    setValidityStatus(element, false);\n  }\n  return expression;\n};\n\n$.fn.extend({\n  isNotEmpty: function(ctx) {\n    if (this[0].nodeName !== 'INPUT') return;\n    return checkValidity(this, this[0].nodeName === 'INPUT' && this[0].value);\n  },\n\n  validateAlphabetic: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    const letters = /^[A-Za-z]+$/;\n    const value = this[0].nodeName === 'INPUT' && this[0].value;\n    checkValidity(this, value.match(letters));\n    if (value) {\n      return checkValidity(this, value.match(letters));\n    }\n  },\n\n  validateText: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    const letters = /^[A-Za-z\\W]+$/;\n    const value = this[0].nodeName === 'INPUT' && this[0].value;\n    checkValidity(this, value.match(letters));\n    if (value) {\n      return checkValidity(this, value.match(letters));\n    }\n  },\n\n  validateNumber: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    const numbers = /^[+-]?\\d+(\\.\\d+)?$/;\n    const value = this[0].nodeName === 'INPUT' && this[0].value;\n    checkValidity(this, value.match(numbers));\n    if (value) {\n      return checkValidity(this, value.match(numbers));\n    }\n  },\n\n  validateAlphaNumeric: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    const letters = /^[0-9a-zA-Z]+$/;\n    const value = this[0].nodeName === 'INPUT' && this[0].value;\n    checkValidity(this, value.match(letters));\n    if (value) {\n      return checkValidity(this, value.match(letters));\n    }\n  },\n\n  validateUserName: function(minimum) {\n    if (this[0].nodeName !== 'INPUT') return;\n    const letters = /^[a-zA-Z0-9]+$/;\n    const username = this[0].value;\n    if (!username) return checkValidity(this, username);\n    if (minimum && username.match(letters)) {\n      if (username.length >= minimum) {\n        return checkValidity(this, username);\n      } else {\n        return checkValidity(this, false);\n      }\n    } else {\n      return checkValidity(this, checkValidity(this, username.match(letters)));\n    }\n  },\n\n  validateEmail: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    const value = this[0].value;\n    const email = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n    if (value) {\n      return checkValidity(this, value.match(email));\n    } else {\n      return checkValidity(this, false);\n    }\n  },\n\n  validatePhoneNumber: function(int) {\n    if (this[0].nodeName !== 'INPUT') return;\n    let phone = undefined;\n    let phoneNumber = undefined;\n    const convertLettersToNumbers = value => {\n      let phonenumber = \"\";\n      value = value.toLowerCase();\n      const len = value.length;\n      for (let i = 0; i < len; i++) {\n        let character = value.charAt(i);\n        switch (character) {\n          case '0':\n            phonenumber += \"0\";\n            break;\n          case '1':\n            phonenumber += \"1\";\n            break;\n          case '2':\n            phonenumber += \"2\";\n            break;\n          case '3':\n            phonenumber += \"3\";\n            break;\n          case '4':\n            phonenumber += \"4\";\n            break;\n          case '5':\n            phonenumber += \"5\";\n            break;\n          case '6':\n            phonenumber += \"6\";\n            break;\n          case '7':\n            phonenumber += \"7\";\n            break;\n          case '8':\n            phonenumber += \"8\";\n            break;\n          case '9':\n            phonenumber += \"9\";\n            break;\n          case '-':\n            phonenumber += \"-\";\n            break;\n          case 'a':\n          case 'b':\n          case 'c':\n            phonenumber += \"2\";\n            break;\n          case 'd':\n          case 'e':\n          case 'f':\n            phonenumber += \"3\";\n            break;\n          case 'g':\n          case 'h':\n          case 'i':\n            phonenumber += \"4\";\n            break;\n          case 'j':\n          case 'k':\n          case 'l':\n            phonenumber += \"5\";\n            break;\n          case 'm':\n          case 'n':\n          case 'o':\n            phonenumber += \"6\";\n            break;\n          case 'p':\n          case 'q':\n          case 'r':\n          case 's':\n            phonenumber += \"7\";\n            break;\n          case 't':\n          case 'u':\n          case 'v':\n            phonenumber += \"8\";\n            break;\n          case 'w':\n          case 'x':\n          case 'y':\n          case 'z':\n            phonenumber += \"9\";\n            break;\n        }\n      }\n      return phonenumber;\n    };\n    if (this[0].value) {\n\n      /**\n       * International Numbers:\n       */\n      if (int) {\n        phoneNumber = this[0].value.replace(/[\\(\\)\\.\\-\\ ]/g, '');\n        return checkValidity(this, this.isNotEmpty() && !isNaN(phoneNumber));\n\n        /**\n         * North America (US and Canada):\n         */\n      } else {\n        phoneNumber = this[0].value.replace(/[\\(\\)\\.\\-\\ ]/g, '');\n        phoneNumber = convertLettersToNumbers(phoneNumber);\n        phone = /((\\(\\d{3}\\)?)|(\\d{3}))([\\s-./]?)(\\d{3})([\\s-./]?)(\\d{4})/;\n        return checkValidity(this, phoneNumber.match(phone));\n      }\n    } else {\n      return checkValidity(this, false);\n    }\n  },\n\n  validateUrl: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    if (this[0].value) {\n      const url = /^(ftp|http|https):\\/\\/([w]{3}\\.)?(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?$/;\n      return checkValidity(this, this[0].value.match(url));\n    } else {\n      return checkValidity(this, false);\n    }\n  },\n\n  validateAge: function(minimum) {\n    if (this[0].nodeName !== 'INPUT') return;\n    if (!minimum) return;\n    const age = this[0].value;\n    if (age) {\n      return checkValidity(this, age >= minimum);\n    } else {\n      return checkValidity(this, false);\n    }\n  },\n\n  validateCheckbox: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    if (this[0].nodeName === 'INPUT' && this[0].type === 'checkbox') {\n      return checkValidity(this, this[0].checked === true);\n    }\n  },\n\n  validateRadioButtons: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    let choice = false;\n    if (this[0].nodeName === 'INPUT' && this[0].type === 'radio') {\n      $.each(this, function(idx, button) {\n        if (button.checked === true) {\n          choice = true;\n        }\n      });\n      return checkValidity(this, choice);\n    }\n  },\n\n  validateSelectBox: function() {\n    if (this[0].nodeName === 'SELECT') {\n      return checkValidity(this, this[0].selectedIndex);\n    } else {\n      return;\n    }\n  },\n\n  validateSwitch: function() {\n    const checkbox = this.find('input[type=checkbox]')[0];\n    if (checkbox.checked) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  validateSelectList: function() {\n    const radio = this.find('input[type=radio]');\n    if (radio.iz('[checked]')[0]) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  validateMultiSelectList: function() {\n    const checkboxes = this.find('input[type=checkbox]');\n    let checked = false;\n    checkboxes.forEach(function(item) {\n      if ($(item).prop('checked')) {\n        checked = true;\n      }\n    });\n    if (checked) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n});\n\n$.extend({\n  validatePassword: function(input1, input2, minimum) {\n    if (minimum && $(input1).val().length < minimum || $(input2).val().length < minimum) {\n      $(input1).addClass('invalid').removeClass('valid');\n      $(input2).addClass('invalid').removeClass('valid');\n      return false;\n    } else {\n      const letters = /^(?=.*[a-zA-Z])(?=.*[0-9]).+$/;\n      if (!letters.test($(input1).val()) && !letters.test($(input2).val())) return false;\n      if ($(input1).val() === $(input2).val()) {\n        $(input1).removeClass('invalid').addClass('valid');\n        $(input2).removeClass('invalid').addClass('valid');\n      } else {\n        $(input1).addClass('invalid').removeClass('valid');\n        $(input2).addClass('invalid').removeClass('valid');\n      }\n      return $(input1).val() === $(input2).val();\n    }\n  },\n\n  validateWithRegex: function(input, regex) {\n    if (!regex) {\n      console.error('This method requires a regular expression.');\n      return;\n    }\n    const value = $(input).val();\n    if (value) {\n      return checkValidity(input, value.match(regex));\n    }\n  },\n\n  customValidators: [],\n\n  registerCustomValidator: function(name, regex) {\n    this.customValidators.push({name: name, regex: regex});\n  }\n});\n\n/**\n * ChocolateChip-UI serialize methods.\n */\n$.fn.extend({\n  serializeArray() {\n    let name = undefined;\n    let type = undefined;\n    let ret = [];\n    const add = value => {\n      if ($.type(value) === 'array') {\n        return value.forEach(add);\n      }\n      ret.push({\n        name: name,\n        value: value\n      });\n    };\n    if (this[0]) {\n      $.each([].slice.apply(this[0].elements), (idx, field) => {\n        type = field.type;\n        name = field.name;\n        if (name && field.nodeName.toLowerCase() != 'fieldset' &&\n          !field.disabled && type != 'submit' && type != 'reset' && type != 'button' && type != 'file' &&\n          ((type != 'radio' && type != 'checkbox') || field.checked)) {\n          add($(field).val());\n        }\n      });\n    }\n    return ret;\n  },\n\n  /**\n   * Serialize the values of a form: \n   */\n  serialize() {\n    let ret = [];\n    this.serializeArray().forEach(element => {\n      ret.push(encodeURIComponent(element.name) + '=' + encodeURIComponent(element.value));\n    });\n    return ret.join('&');\n  }\n});\n\n/**\n * ChocolateChip-UI param method.\n */\n$.extend({\n\n  /** \n   * Serialize an object for posting to server:\n   */\n  param(obj, traditional) {\n\n    /** \n     * Private function used by $.param:\n     */\n    function serialize(params, obj, traditional, scope) {\n      let type = undefined;\n      let array = $.type(obj) === 'array';\n      let hash = $.isEmptyObject(obj);\n\n      /** \n       * If it's an array of objects: \n       */\n      if ($.type(obj) === 'array') {\n        $.each(obj, (key, value) => {\n          type = $.type(value);\n          if (scope) {\n            key = traditional ? scope : scope + '[' + (hash || type == 'object' || type == 'array' ? key : '') + ']';\n          }\n          if (!scope && array) {\n            params.add(value.name, value.value);\n          } else if (type == \"array\" || (!traditional && type == \"object\")) {\n            serialize(params, value, traditional, key);\n          } else {\n            params.add(key, value);\n          }\n        });\n\n      /**\n       * Else its an object (use key/value loop): \n       */\n      } else if ($.type(obj) === 'object') {\n        for (let key in obj) {\n          type = $.type(obj[key]);\n          if (scope) {\n            key = traditional ? scope : scope + '[' + (hash || type == 'object' || type == 'array' ? key : '') + ']';\n          }\n          if (!scope && array) {\n            params.add(obj[key].name, obj[key].obj[key]);\n          } else if (type == \"array\" || (!traditional && type == \"object\")) {\n            serialize(params, obj[key], traditional, key);\n          } else {\n            params.add(key, obj[key]);\n          }\n        }\n      }\n    }\n    let params = [];\n    params.add = function(key, value) {\n      if ($.type(value) === 'function') value = value();\n      if (value === null) value = \"\";\n      this.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n    };\n    serialize(params, obj, traditional);\n    return params.join('&').replace(/%20/g, '+');\n  }\n});\n\n/**\n * ChocolateChip-UI - Form Validation & JSON.\n */\n$.extend({\n  /**\n   * Setup Form object to convert data to JSON, and to validate form values:\n   */\n  Form: options => {\n    if (!options || $.type(options) !== 'array') return;\n\n    let __passed = false;\n    let __errors = [];\n    let __result = [];\n\n    /** \n     * Helper to validate form elements: \n     */\n    function validateElement(item) {\n      if (!item) return;\n      if (!__passed) {\n        __errors.push({\n          element: item.element,\n          type: item.type\n        });\n        if (item.callback) item.callback();\n      } else {\n        convertToObject($(item.element).attr('name'), $(item.element).val());\n      }\n    }\n\n    /** \n     * Helper to convert form element names to JSON: \n     */\n    function convertToObject(name, value) {\n      __result.push({\n        name: name,\n        value: value\n      });\n    }\n\n    /** \n     * Convert form names and values to JSON: \n     */\n    function convertObjectToJSON(data) {\n      const delimiter = '_';\n      let result = {};\n      let arrays = {};\n      data.forEach(item => {\n        const value = item.value;\n        if (value !== '') {\n          let name = item.name;\n          let nameParts = name.split(delimiter);\n          let currResult = result;\n          for (let j = 0; j < nameParts.length; j++) {\n            const namePart = nameParts[j];\n            let arrName = undefined;\n            if (namePart.indexOf('[]') > -1 && j === nameParts.length - 1) {\n\n              arrName = namePart.substr(0, namePart.indexOf('['));\n              if (!currResult[arrName]) {\n                currResult[arrName] = [];\n              }\n              currResult[arrName].push(value);\n            } else {\n              if (namePart.indexOf('[') > -1) {\n                arrName = namePart.substr(0, namePart.indexOf('['));\n                const arrIdx = namePart.replace(/^[a-z]+\\[|\\]$/gi, '');\n                if (!arrays[arrName]) {\n                  arrays[arrName] = {};\n                }\n                if (!currResult[arrName]) {\n                  currResult[arrName] = [];\n                }\n                if (j === nameParts.length - 1) {\n                  currResult[arrName].push(value);\n                } else {\n                  if (!arrays[arrName][arrIdx]) {\n                    currResult[arrName].push({});\n                    arrays[arrName][arrIdx] = currResult[arrName][currResult[arrName].length - 1];\n                  }\n                }\n                currResult = arrays[arrName][arrIdx];\n              } else {\n                if (j < nameParts.length - 1) {\n                  if (!currResult[namePart]) {\n                    currResult[namePart] = {};\n                  }\n                  currResult = currResult[namePart];\n                } else {\n                  currResult[namePart] = value;\n                }\n              }\n            }\n          }\n        }\n      });\n      return result;\n    }\n\n    /** \n     * Validate form elements: \n     */\n    options.forEach(item => {\n      if (!$(item.element)[0]) return;\n      switch (item.type) {\n        case 'notempty':\n          __passed = validateElement(item.element, item.type);\n          __errors.push({\n            element: item.element,\n            type: item.type\n          });\n          return;\n        case 'number':\n          __passed = $(item.element).validateNumber();\n          validateElement(item);\n          return;\n        case 'text':\n          __passed = $(item.element).validateText();\n          validateElement(item);\n          return;\n        case 'alphanumeric':\n          __passed = $(item.element).validateAlphaNumeric();\n          validateElement(item);\n          return;\n        case 'username':\n          __passed = $(item.element).validateUserName(item.min);\n          validateElement(item);\n          return;\n        case 'email':\n          __passed = $(item.element).validateEmail();\n          validateElement(item);\n          return;\n        case 'phone':\n          __passed = $(item.element).validatePhoneNumber();\n          validateElement(item);\n          return;\n        case 'url':\n          __passed = $(item.element).validateUrl();\n          validateElement(item);\n          return;\n        case 'age':\n          __passed = $(item.element).validateAge(item.min);\n          validateElement(item);\n          return;\n        case 'checkbox':\n          __passed = $(item.element).validateCheckbox();\n          if (__passed) {\n            validateElement(item);\n          }\n          return;\n        case 'radio':\n          __passed = $(item.element).validateRadioButtons();\n          validateElement(item);\n          return;\n        case 'selectbox':\n          __passed = $(item.element).validateSelectBox();\n          validateElement(item);\n          return;\n        case 'password':\n          __passed = $.validatePassword(item.element, item.element2, item.min);\n          __errors.push({\n            element: item.element,\n            element2: item.element2,\n            type: item.type\n          });\n          return;\n        case 'switch':\n          __passed = $(item.element).validateSwitch();\n          if (__passed) {\n            validateElement(item);\n          }\n          return;\n        case 'selectlist':\n          __passed = $(item.element).validateSelectList();\n          if (__passed) {\n            validateElement(item);\n          }\n        case 'multiselectlist':\n          __passed = $(item.element).validateMultiSelectList();\n          let inputs = undefined;\n          if (__passed) {\n            inputs = $(item.element).find('input[type=checkbox]');\n            inputs.forEach(item => {\n              if (item.checked) {\n                convertToObject(item.name, item.value);\n              }\n            });\n          }\n      }\n      if (item.type.match(/custom/)) { \n        const cv = $.customValidators.filter(validator => {\n          return (validator.name) === item.type;\n        });\n        if (cv) {\n          const result = $.validateWithRegex(item.element, cv[0].regex);\n          if (result) {\n            const el = $(item.element);\n            convertToObject(el[0].name, el[0].value);\n          } else {\n            __errors.push({\n              element: item.element,\n              type: item.type\n            });\n            if (item.callback) item.callback();\n          }\n        }\n      }\n    });\n\n\n\n    return {\n      getErrors() {\n        if (__errors.length) {\n          return __errors;\n        }\n      },\n\n      errors() {\n        if (__errors.length) {\n          return true;\n        }\n      },\n\n      get() {\n        return convertObjectToJSON(__result);\n      }\n    };\n  }\n});\n\n/**\n * ChocolateChip-UI  - Data Formatters.\n */\n\n$.extend({\n  /**\n   * Format Numbers for Thousands:\n   */\n  formatNumber(amount, separator, decimal) {\n    const sep = separator || \",\";\n    /** \n     * Allow the user to round a float to a whole number: \n     */\n    if (decimal === 0) {\n      const num = Math.round(amount);\n      return Number(num).toString().replace(/(?=(?:\\d{3})+$)(?!^)/g, sep);\n    }\n    if (decimal === undefined) {\n      /** \n       * Check if amount is a float: \n       */\n      if (typeof amount === 'number' && amount % 1 !== 0) {\n        return Number(amount).toString().replace(/\\d(?=(\\d{3})+\\.)/g, '$&' + sep);\n        /** \n         * Otherwise treat it as an integer: \n         */\n      } else {\n        return Number(amount).toString().replace(/(?=(?:\\d{3})+$)(?!^)/g, sep);\n      }\n      /** \n       * If a decimal value was provided, format it to that amount: \n       */\n    } else {\n      return Number(amount).toFixed(decimal).replace(/\\d(?=(\\d{3})+\\.)/g, '$&' + sep);\n    }\n  },\n\n  /**\n   * Return sum of numbers:\n   */\n  sum(arr) {\n    let ret = undefined;\n    if (Array.isArray(arr) && arr.length) {\n      ret = arr;\n    } else {\n      ret = [].slice.apply(arguments);\n    }\n    return ret.reduce(function(a, b) {\n      return a + b;\n    });\n  },\n\n  /**\n   * Format currency:\n   */\n  currency(amount, symbol, separator, decimal) {\n    const sym = symbol || \"$\";\n    const sep = separator || \",\";\n    const dec = decimal || 2;\n    let zero = false;\n    if (decimal === 0) {\n      zero = true;\n    }\n    /* Private function to format amounts: */\n    const formatNumber = function(amount, sep) {\n      /**\n       * A decimal value of '0' means we need to round the amount off before adding in thousands separators:\n       */\n      if (zero) {\n        const num = Math.round(amount);\n        return Number(num).toString().replace(/^0+/, '').replace(/(?=(?:\\d{3})+$)(?!^)/g, sep);\n      } else {\n        /**\n         * Otherwise, we can just add the thousands separators with the decimal placement provided by the user or the default:\n         */\n        return Number(amount).toFixed(dec).replace(/^0+/, '').replace(/\\d(?=(\\d{3})+\\.)/g, '$&' + sep);\n      }\n    };\n    return sym + formatNumber(amount, sep);\n  },\n\n  /**\n   * Format Time:\n   */\n  formatTime(time) {\n    const temp = time.split(':');\n    const temp2 = temp[0] + ':' + temp[1];\n    const ampm = time.split(' ')[1];\n    return temp2 + ' ' + ampm;\n  },\n\n  sortDate(date1, date2) {\n    return new Date(date1) - new Date(date2);\n  },\n\n  /**\n   * Sort Numbers:\n   */\n  sortNumbers(a, b) {\n    return a - b;\n  },\n\n  sortNumbersDescending(a, b) {\n    return b - a;\n  }\n});\n\n/**\n * ChocolateChip-UI - form to JSON.\n */  \n$.extend({\n  form2JSON(rootNode, delimiter) {\n    rootNode = typeof rootNode === 'string' ? $(rootNode)[0] : rootNode;\n    delimiter = delimiter || '.';\n    const result = {};\n    const arrays = {};\n    const getFieldValue = function(fieldNode) {\n      if (fieldNode.nodeName === 'INPUT') {\n        if (fieldNode.type.toLowerCase() === 'radio' || fieldNode.type.toLowerCase() === 'checkbox') {\n          if (fieldNode.checked) {\n            return fieldNode.value;\n          }\n        } else {\n          if (!fieldNode.type.toLowerCase().match(/button|reset|submit|image/i)) {\n            return fieldNode.value;\n          }\n        }\n      } else {\n        if (fieldNode.nodeName === 'TEXTAREA') {\n          return fieldNode.value;\n        } else {\n          if (fieldNode.nodeName === 'SELECT') {\n            return getSelectedOptionValue(fieldNode);\n          }\n        }\n      }\n      return '';\n    };\n    const getFormValues = rootNode => {\n      let result = [];\n      let currentNode = rootNode.firstChild;\n      while (currentNode) {\n        if (currentNode.nodeName.match(/INPUT|SELECT|TEXTAREA/i)) {\n          result.push({\n            name: currentNode.name,\n            value: getFieldValue(currentNode)\n          });\n        } else {\n          let subresult = getFormValues(currentNode);\n          result = result.concat(subresult);\n        }\n        currentNode = currentNode.nextSibling;\n      }\n      return result;\n    };\n    const getSelectedOptionValue = selectNode => {\n      const multiple = selectNode.multiple;\n      if (!multiple) {\n        return selectNode.value;\n      }\n      if (selectNode.selectedIndex > -1) {\n        let result = [];\n        $('option', selectNode).each(function(idx, item) {\n          if (item.selected) {\n            result.push(item.value);\n          }\n        });\n        return result;\n      }\n    };\n    const formValues = getFormValues(rootNode);\n    formValues.forEach(function(item) {\n      const value = item.value;\n      if (value !== '') {\n        let name = item.name;\n        const nameParts = name.split(delimiter);\n        let currResult = result;\n        for (let j = 0; j < nameParts.length; j++) {\n          const namePart = nameParts[j];\n          let arrName = undefined;\n          if (namePart.indexOf('[]') > -1 && j === nameParts.length - 1) {\n            arrName = namePart.substr(0, namePart.indexOf('['));\n            if (!currResult[arrName]) {\n              currResult[arrName] = [];\n            }\n            currResult[arrName].push(value);\n          } else {\n            if (namePart.indexOf('[') > -1) {\n              arrName = namePart.substr(0, namePart.indexOf('['));\n              const arrIdx = namePart.replace(/^[a-z]+\\[|\\]$/gi, '');\n              if (!arrays[arrName]) {\n                arrays[arrName] = {};\n              }\n              if (!currResult[arrName]) {\n                currResult[arrName] = [];\n              }\n              if (j === nameParts.length - 1) {\n                currResult[arrName].push(value);\n              } else {\n                if (!arrays[arrName][arrIdx]) {\n                  currResult[arrName].push({});\n                  arrays[arrName][arrIdx] = currResult[arrName][currResult[arrName].length - 1];\n                }\n              }\n              currResult = arrays[arrName][arrIdx];\n            } else {\n              if (j < nameParts.length - 1) {\n                if (!currResult[namePart]) {\n                  currResult[namePart] = {};\n                }\n                currResult = currResult[namePart];\n              } else {\n                currResult[namePart] = value;\n              }\n            }\n          }\n        }\n      }\n    });\n    return result;\n  }\n});\n\n/**\n * ChocolateChip-UI - View Factory.\n */\n(() => {\n  const ViewErrorMessages = {\n    en: {\n      noDataForViewRender: \"ChocolateChip-UI View Error: No data was provided for the view to render. If you want to render the view, please provide data, or redefine the view with a data source or model. Otherwise rendering will be skipped.\",\n      noElementForView: \"ChocolateChip-UI View Error: No element was provided for the view. Please provide an element in the view initialization so that we can access it.\",\n      noTemplateForView: \"ChocolateChip-UI View Error: No template was provided for this view. This means that you did not provide a template in the view initialization, or the element did not have any template in its markup.\",\n      viewElementHasNoTemplate: \"ChocolateChip-UI View Error: The element for this view has no template in its markup. Either correct the element by defining a template in the element's markup, or define a template in the view's initialization.\",\n      noElementToSetToTemplate: \"ChocolateChip-UI View Error: No element was provided to set to this view. Please provide one.\",\n      noTemplateToSetToView: \"ChocolateChip-UI View Error: You did not provide a template to set to this view. Please provide one.\",\n      noEventsToAdd: \"ChocolateChip-UI View Error: No event was provided to attach fo the view. Please provide an event to procede.\",\n      noDataToSetForView: \"ChocolateChip-UI View Error: No data was provided to set for the view. Please provide some data.\",\n      noModelToBindToView: \"ChocolateChip-UI View Error: No model was provided to bind the view to. Please provide a valid model to complete this operation.\",\n      viewHasNoModel: \"ChocolateChip-UI View Error: Could not get this view's model because it is not bound to one. You can use `bindModel()` to bind a model to this view.\",\n      viewHasNoData: \"ChocolateChip-UI View Error: This view has no data. Did you render it with data, or did you bind it to a model? Try using `getModel()` to see if this view is using a model.\",\n      viewHasNoTemplate: \"ChocolateChip-UI View Error: This view has no template. Either you created it without a template, or there was some problem parsing the template. Please check how this view is set up.\",\n      noStyleObject: \"ChocolateChip-UI View Error: No style object was provided for the view style property. Check that a proper style object was provided. If you are not sure,  consult the documentation.\"\n    },\n    es: {\n      noDataForViewRender: \"Hubo Error de Vista ChocolateChip-UI: : No se proporcionó datos para que la vista los utilice. Si desea renderizar la vista, proporcione datos o redefinir la vista con un valor para sus datos o un modelo de datos. De lo contrario, la vista no se renderizará.\",\n      noElementForView: \"Hubo Error de Vista ChocolateChip-UI: : No se proporcionó ningún elemento para la vista. Por favor proporcione un elemento en la inicialización de la vista para que podamos acceder a él.\",\n      noTemplateForView: \"Hubo Error de Vista ChocolateChip-UI: : No se proporcionó ninguna plantilla para esta vista. Esto significa que usted no proporcionó una plantilla en la vista de inicialización, o el elemento no tiene ninguna plantilla en su marcado.\",\n      viewElementHasNoTemplate: \"Hubo Error de Vista ChocolateChip-UI: : El elemento de esta vista no tiene ninguna plantilla en su marcado. O bien corrija el elemento por definir una plantilla en el marcado del elemento, o defina una plantilla en la inicialización de la vista misma.\",\n      noElementToSetToTemplate: \"Hubo Error de Vista ChocolateChip-UI: : No se proporcionó ningún elemento en el cual se renderizará la pantilla. Por favor proporcione un elemento.\",\n      noTemplateToSetToView: \"Hubo Error de Vista ChocolateChip-UI: No se proporcionó una plantilla para esta vista. Por favor proporcione una plantilla.\",\n      noEventsToAdd: \"Hubo Error de Vista ChocolateChip-UI: No se proporcionó ningún event para unir a la vista. Por favor, proporcione un evento para proceder.\",\n      noDataToSetForView: \"Hubo Error de Vista ChocolateChip-UI: No se proporcionó datos para la vista. Por favor proporcione algunos datos.\",\n      noModelToBindToView: \"Hubo Error de Vista ChocolateChip-UI: No se proporcionó un modelo para establecer un enlace entre él y la vista. Por favor proporcione un modelo válido para completar esta operación.\",\n      viewHasNoModel: \"Hubo Error de Vista ChocolateChip-UI: No pudimos acceder al modelo de esta vista porque no está asociada con uno. Puede realizar esto usando `bindModel()`.\",\n      viewHasNoData: \"Hubo Error de Vista ChocolateChip-UI: Esta vista no tiene datos. A caso no se renderizó con datos o no se asoció con ningún modelo. Trate de executar `getModel()` para averiguar si esta vista está usando un modelo.\",\n      viewHasNoTemplate: \"Hubo Error de Vista ChocolateChip-UI: Esta vista no tiene plantilla. Ó se creó la vista sin plantilla, ó hubo algún error al procesar la plantilla. Debe chequear cómo se definó la vista.\",\n      noStyleObject: \"Hubo Error de Vista ChocolateChip-UI: No se proporcionó un objeto de estilos para la propiedad de estilos de la vista. Debe de chequear que el objeto de estilos está correcto. Si Usted no está serguro de eso, consulte la documentación.\"\n\n    }\n  }\n\n  let errors = undefined;\n  if ($('html').attr('lang') == 'en') errors = ViewErrorMessages.en;\n  if ($('html').attr('lang') == 'es') errors = ViewErrorMessages.es;\n\n  /**\n   * Private function to parse style object in view and convert it into virtual stylesheet based on the view's element.\n   */\n  function ChuiStyle() {\n\n    /**\n     * Reuse the same style sheet for all instances.\n     */\n    let sharedSheet = null;\n\n    /**\n     * Properties that accept a number but do not need a unit.\n     */\n    const unitlessProps = {\n      columnCount: true,\n      fillOpacity: true,\n      flex: true,\n      flexGrow: true,\n      flexShrink: true,\n      fontWeight: true,\n      lineClamp: true,\n      lineHeight: true,\n      opacity: true,\n      order: true,\n      orphans: true,\n      widows: true,\n      zIndex: true,\n      zoom: true\n    };\n\n    /**\n     * If auto units is enabled, any property value that is a number will be converted to a string with the specified unit appended.\n     */\n    function CreateStyleSheet(options) {\n      if (!(this instanceof CreateStyleSheet)) {\n        return new CreateStyleSheet(options);\n      }\n      options || (options = {});\n      options.prefix = !options.hasOwnProperty(\"prefix\") ? true : !!options.prefix;\n      options.unit = options.hasOwnProperty(\"unit\") ? options.unit : \"px\";\n\n      this._sheet = null;\n      this._prefix = null;\n\n      /**\n       * Insert one or more style objects in a stylesheet.\n       */\n      this.css = function (element, styles, selector) {\n        if (styles == null) return \"\";\n        if (this._sheet == null) {\n          this._sheet = sharedSheet = (sharedSheet || createStyleSheet());\n        }\n        selector = element;\n\n        const rules = rulesFromStyles(selector, styles);\n        if (options.prefix || options.unit !== \"\") {\n          rules.forEach(function(set) {\n            if (options.unit !== \"\") {\n              addUnit(set[1], options.unit);\n            }\n          });\n        }\n        insertRules(rules, this._sheet);\n      };\n\n    }\n\n    /**\n     * Returns {CSSStyleSheet}\n     */\n    function createStyleSheet() {\n      if (document.head == null) {\n        throw new Error(\"Can't add stylesheet before <head> is available. Make sure your document has a head element.\");\n      }\n      const style = document.createElement(\"style\");\n      style.id = \"chui_styles_\" + $.uuid();\n      document.head.appendChild(style);\n      return style.sheet;\n    }\n\n    /**\n     * Returns CSS rule sets as selector/style vectors.\n     */\n    function rulesFromStyles(selector, styles) {\n      if (!Array.isArray(styles)) styles = [styles];\n      const style = {};\n      let rules = [];\n      styles = $.flatten(styles);\n      styles.forEach(function(block) {\n        for (const prop in block) {\n          let value = block[prop];\n          if (isPlainObject(value) || Array.isArray(value)) {\n            rules = rules.concat(\n              rulesFromStyles(combineSelectors(selector, prop), value)\n            );\n          } else {\n            if (prop === \"content\") value = \"'\"+value+\"'\";\n            style[prop] = value;\n          }\n        }\n      });\n      rules.push([ selector, style ]);\n      return rules;\n    }\n\n    /**\n     * Add rule sets to stylesheet.\n     */\n    function insertRules(rules, sheet) {\n      function hyphenate(str) {\n        return str.replace(/[A-Z]/g, function($0) { return '-'+$0.toLowerCase(); });\n      }\n      rules.forEach(function(rule) {\n        const pairs = [];\n        for (const prop in rule[1]) {\n          pairs.push(hyphenate(prop) + \":\" + rule[1][prop]);\n        }\n        if (pairs.length > 0) {\n          sheet.insertRule(rule[0] + \"{\" + pairs.join(\";\") + \"}\", 0);\n        }\n      });\n    }\n\n    /**\n     * Pseudo classes/elements and attribute selectors should immediately follow the previous selector, others should be space separated.\n     */\n    function combineSelectors(parent, child) {\n      const pseudoRe = /^[:\\[]/;\n      const parents = parent.split(\",\"), children = child.split(\",\");\n      return parents.map(function(parent) {\n        return children.map(function(part) {\n          let separator = pseudoRe.test(part) ? \"\" : \" \";\n          return parent + separator + part;\n        }).join(\",\");\n      }).join(\",\");\n    }\n\n    /**\n     * Add unit to numeric values not in |unitlessProps|.\n     */\n    function addUnit(style, unit) {\n      for (const prop in style) {\n        let value = style[prop] + \"\";\n        if (!isNaN(value) && !unitlessProps[prop]) {\n          value = value + unit;\n        }\n        style[prop] = value;\n      }\n      return style;\n    }\n\n    const style = document.createElement(\"div\").style;\n    function supports(prop, value) {\n      style[prop] = \"\";\n      style[prop] = value;\n      return !!style[prop];\n    }\n\n    function isPlainObject(obj) {\n      return obj === Object(obj) && Object.prototype.toString === obj.toString;\n    }\n\n    const stylesheets = {};\n    stylesheets.css = CreateStyleSheet().css;\n    return stylesheets;\n  }\n\n  $.extend({\n\n    /* jshint, evil: false, validthis:true, unused:false, smarttabs: true, nonew false */\n    view: {\n      index: 0\n    },\n\n    helpers: {},\n\n    defineHelper: callback => {\n      $.extend($.helpers, callback);\n    },\n\n    View: options => {\n      /**\n      options = {\n        element: undefined,\n        template: stringTemplate,\n        model: undefined,\n        variable: 'whatever',\n        events: [\n          {\n            element: selector || 'self',\n            event: 'click',\n            callback: function() {}\n          },\n          {\n            element: selector2 || 'self',\n            event: 'touchstart',\n            callback: function() {}\n          }\n        ]\n      }\n      */\n\n      /**\n       * Private Properties:\n       */\n      let __element = undefined;\n      let __origElement = undefined;\n      if (!options) options = {};\n      if (options && options.element) {\n        __origElement = options.element;\n        __element = $(options.element);\n      }\n      let __template = options.template;\n      let __data = options.data;\n      let __model = options.model;\n      let __index = options.index || 1;\n      let __rendered = false;\n      let __variable = options.variable || 'data';\n      let __events = options.events || [];\n      let __startIndexFrom = options.startIndexFrom || false;\n      if (options.startIndexFrom === 0) __startIndexFrom = 0;\n      const __re = /data-src/img;\n      let __safeHTML = options.safeHTML || false;\n      let __es6Template = options.es6Template || false;\n      let __noTemplate = options.noTemplate || false;\n      const __id = $.uuid();\n      let __styles = options.styles;\n\n      /**\n       * Private Functions:\n       */\n\n      let parsedTemplate = undefined;\n\n      const parseView = (template, variable) => {\n        if (!template) {\n          console.error(errors.viewElementHasNoTemplate)\n          return;\n        }\n        const interpolate = /\\{=([\\s\\S]+?)\\}/img;\n        variable = variable || 'data';\n        template.replace(\"'\", \"\\'\");\n        /* jshint ignore:start */\n        const Template = new Function(variable,\n          \"var p=[];\" + \"p.push('\" + template\n          .replace(/[\\r\\t\\n]/g, \" \")\n          .split(\"'\").join(\"\\\\'\")\n          .replace(interpolate, \"',$1,'\")\n          /**\n           * Executable:\n           */\n          .split('{{').join(\"');\")\n          .split('}}').join(\"p.push('\") + \"');\" +\n          \"return p.join('');\");\n        return Template;\n        /* jshint ignore:end */\n      };\n\n      /**\n       * Binding any events provided in View options:\n       */\n      const handleEvents = () => {\n        if (!__element) return;\n        if (__events.length) {\n          __events.forEach(item => {\n            const bubble = item.bubble || false;\n            if (item && item.element === 'self' || item && !item.element) {\n              __element.on(item.event, item.callback, bubble);\n            } else {\n              __element.on(item.event, item.element, item.callback, bubble);\n            }\n          });\n        }\n      };\n\n      /**\n       * Get template from element:\n       */\n      const extractTemplate = () => {\n        if (!__element || !__element.size() || __noTemplate) {\n          return;\n        }\n        if (__es6Template) return;\n        if (!__template) {\n          if (__element.children()[0] && __element.children().eq(0).is('script')) {\n            __template = __element.children('script').html();\n            __element.empty();\n          } else if (__element.children()[0] && __element.children().eq(0).is('template')) {\n            __template = __element.children('template').html();\n            __element.empty();\n          } else if (!__element[0].childNodes.length) {\n            console.error(errors.viewElementHasNoTemplate)\n            return;\n          } else {\n            if (__element[0] && __element[0].childNodes.length) {\n              if (!__template) __template = __element.html();\n            }\n            __element.empty();\n          }\n          if (__template) __template = __template.replace(__re, 'src');\n\n          parseView(__template, __variable);\n        } else {\n          __template = __template.replace(__re, 'src');\n          parseView(__template, __variable);\n        }\n        if (__styles && options.element) {\n          if (!$(options.element)[0]) return;\n          const styles = ChuiStyle();\n          if ($.type(__styles) !== 'object') {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noStyleObject)\n            return;\n          }\n          styles.css(options.element, __styles)\n        }\n      };\n      parsedTemplate = extractTemplate();\n\n      if (__events) {\n        handleEvents(__events);\n      }\n\n      /**\n       * Return closure to encapsulate methods & data:\n       */\n      const view = {};\n      let data = undefined;\n\n\n      const bindToModel = (model, view) => {\n        if (model) {\n          model.boundViews.push(view);\n        }\n      }\n\n      bindToModel(__model, view);\n\n      $.extend(view, {\n\n        id: __id,\n\n        render(data, append) {\n          if (!__element) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noElementForView)\n            return ;\n          }\n          function escapeNumber(arg) {\n            if ($.type(arg) === 'number') {\n              return String(arg);\n            } else {\n              return arg;\n            }\n          }\n          window.escapeNumber = escapeNumber;\n          data = escapeNumber(data);\n          __data = escapeNumber(__data);\n          if (!data && !__data && !__model) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noDataForViewRender);\n            return;\n          }\n          if (!data && __data) {\n            data = __data;\n          } else if (!data && __model) {\n            data = __model.get();\n          }\n\n          /**\n           * Private functions for the render method.\n           * These need access to the returned instance.\n           */\n\n          /**\n           * Uncloaks, checks index and loops data:\n           */\n          const renderIterableData = data => {\n            const Data = data ? data : __data;\n            __element.removeClass('cloak');\n            if (__element.data('index')) {\n              __index = Number(__element.data('index'));\n              $.view.index = Number(__element.data('index'));\n            } else {\n              __index = 1;\n              $.view.index = 1;\n            }\n            interateModelToTemplate(Data);\n          };\n\n          /**\n           * Check extracted template:\n           */\n          if (__template && $.type(__template) === 'string') {\n            parsedTemplate = parseView(__template, __variable);\n          }\n\n          /**\n           * If the user supplied data to render:\n           * If it's an array:\n           */\n          if ($.type(data) === 'array') {\n            $.view.index = __startIndexFrom || 1;\n            if (__startIndexFrom === 0) $.view.index = 0;\n            if (!append) __element.empty();\n            data.forEach(item => {\n              if (!__safeHTML) {\n                item = $.escapeHTML(item);\n              }\n              if (!parsedTemplate && !__noTemplate) {\n                if ($.supressErrorMessages) return;\n                console.error(errors.viewElementHasNoTemplate)\n                return;\n              }\n              __element.append(parsedTemplate(item)); // jshint ignore:line\n              $.view.index += 1;\n              __index += 1;\n            });\n            __rendered = true;\n            $.view.index = 0;\n            __element.removeClass('cloak');\n            return;\n\n            /**\n             * Else if it is an object:\n             */\n          } else if ($.type(data) === 'object' || $.type(data) === 'string' || $.type(data) === 'number') {\n            if (!parsedTemplate) {\n              if ($.supressErrorMessages) return;\n              console.error(errors.viewElementHasNoTemplate)\n              return;\n            }\n            $.view.index = __startIndexFrom || 1;\n            if (!append) __element.empty();\n            if (!__safeHTML) {\n              data = $.escapeHTML(data);\n            }\n            __element.append(parsedTemplate(data)); // jshint ignore:line\n            __element.removeClass('cloak');\n            __rendered = true;\n            return;\n          }\n        },\n\n        empty() {\n          if (!__element) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noElementForView)\n            return;\n          }\n          __element.empty();\n        },\n\n        resetIndex() {\n          if (!__element) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noElementForView)\n            return;\n          }\n          __index = 0;\n          __element.data('index', 0);\n          $.view.index = 0;\n        },\n\n        startIndexFrom(number) {\n          if (!__element) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noElementForView)\n            return;\n          }\n          if (number === 0 || (number && !isNaN(number))) {\n            __startIndexFrom = number;\n            $.view.index = number;\n            view.render();\n          }\n        },\n\n        getElement() {\n          if (!__element) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noElementForView)\n            return;\n          } else {\n            return __element;\n          }\n        },\n\n        setElement(element) {\n          if (!element) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noElementForView)\n            return;\n          }\n          __element = $(element);\n          $(element).empty();\n          handleEvents();\n          const styles = ChuiStyle();\n          styles.css(element, __styles)\n        },\n\n        getTemplate() {\n          if (!__template) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.viewHasNoTemplate)\n            return;\n          } else {\n            return __template;\n          }\n        },\n\n        setTemplate(template) {\n          if (!template) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noTemplateToSetToView)\n            return;\n          } else {\n            __template = template.replace(__re, 'src');\n            parsedTemplate = parseView(__template);\n          }\n        },\n\n        bindModel(model) {\n          if (!model) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noModelToBindToView);\n            return;\n          }\n          this.unbindModel(__model);\n          __model = model;\n          bindToModel(__model, view);\n        },\n\n        unbindModel() {\n          if (__model) {\n            const pos = __model.boundViews.findIndex(function(view) {\n              return view.id = __id;\n            })\n            __model.boundViews.splice(pos,1);\n          }\n          __model = undefined;\n        },\n\n        getModel() {\n          if (__model) {\n            return __model\n          } else {\n            if ($.supressErrorMessages) return;\n            console.error(errors.viewHasNoModel)\n          }\n        },\n\n        isRendered() {\n          return __rendered;\n        },\n\n        isEmpty() {\n          if (!__element) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noElementForView)\n            return;\n          }\n          if (__element[0].children.length) {\n            return false;\n          } else {\n            return true;\n          }\n        },\n\n        addEvent(events, replace) {\n          if (!events) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noEventsToAdd);\n            return;\n          }\n          if (replace) {\n            __events = events & events.length ? events : [events];\n          } else {\n            if (events && events.length) {\n              events.forEach(event => {\n                __events.push(event)\n              });\n            } else if (events) {\n              __events.push(events);\n            }\n          }\n          handleEvents();\n        },\n\n        /**\n         * options: event, element (for a delegated event), callback\n         */\n        off(event, element, callback) {\n          __element.off(event, element, callback);\n        },\n\n        safeHTML(boolean) {\n          if (boolean) {\n            __safeHTML = true;\n          } else {\n            __safeHTML = false;\n          }\n        },\n\n        isEscapingHTML() {\n          return !__safeHTML;\n        },\n\n        getData() {\n          if (__data) {\n            return __data\n          } else {\n            if ($.supressErrorMessages) return;\n            console.error(errors.viewHasNoData);\n            return;\n          }\n        },\n\n        setData(data) {\n          if (!data) {\n            if ($.supressErrorMessages) return;\n            console.error(errors.noDataToSetForView);\n            return;\n          }\n          if (data) {\n            __data = data;\n          }\n        },\n\n        /**\n         * This method is for use after importing a view as an ES6 module. It resets the view's element since this cannot be determined at the time of import.\n         */\n        mount() {\n          __element = $(__origElement);\n          handleEvents();\n          const styles = ChuiStyle();\n          styles.css(options.element, __styles)\n        }\n\n      });\n      return view;\n    }\n  });\n})();\n\n\n/**\n * ChocolateChip-UI - Component Factory.\n */\n$.extend({\n  Component: options => {\n    const comp = $.Component;\n    $[options.name] = () => {\n      comp.options = options;\n      delete comp.options.name\n      return $.View(comp.options);\n    };\n  }\n});\n\n/**\n * Promise Polyfill.\n */\n(function() {\n  /**\n   * Define polyfill for ES6 Promises: \n   */\n\n  let extend = undefined;\n  let cycle = undefined;\n  let queue = undefined;\n  extend = function(obj, name, val, config) {\n    return Object.defineProperty(obj, name, {\n      value: val,\n      writable: true,\n      configurable: config !== false\n    });\n  };\n  queue = (function() {\n    let first = undefined;\n    let last = undefined;\n    let item = undefined;\n    function Item(func, self) {\n      this.func = func;\n      this.self = self;\n      this.next = undefined;\n    }\n    return {\n      add(func, self) {\n        item = new Item(func, self);\n        if (last) {\n          last.next = item;\n        } else {\n          first = item;\n        }\n        last = item;\n        item = undefined;\n      },\n      unshift() {\n        let f = first;\n        first = last = cycle = undefined;\n        while (f) {\n          f.func.call(f.self);\n          f = f.next;\n        }\n      }\n    };\n  })();\n  function schedule(func, self) {\n    queue.add(func, self);\n    if (!cycle) {\n      cycle = setTimeout(queue.unshift);\n    }\n  }\n  /**\n   * Check that Promise is thenable: \n   */\n  function isThenable(obj) {\n    let _then = undefined;\n    let obj_type = typeof obj;\n    if (obj !== null &&\n      (obj_type === \"object\" || obj_type === \"function\")) {\n      _then = obj.then;\n    }\n    return typeof _then === \"function\" ? _then : false;\n  }\n  function notify() {\n    for (let i = 0; i < this.chain.length; i++) {\n      notifyIsolated(this, (this.state === 1) ? this.chain[i].success : this.chain[i].failure, this.chain[i]);\n    }\n    this.chain.length = 0;\n  }\n  function notifyIsolated(self, callback, chain) {\n    let ret = undefined;\n    let _then = undefined;\n    try {\n      if (callback === false) {\n        chain.reject(self.msg);\n      } else {\n        if (callback === true) {\n          ret = self.msg;\n        } else {\n          ret = callback.call(undefined, self.msg);\n        }\n        if (ret === chain.promise) {\n          chain.reject(new TypeError(\"Promise-chain cycle\"));\n        } else if (_then = isThenable(ret)) { // jshint ignore:line\n          _then.call(ret, chain.resolve, chain.reject);\n        } else {\n          chain.resolve(ret);\n        }\n      }\n    } catch (err) {\n      chain.reject(err);\n    }\n  }\n  function resolve(msg) {\n    let _then = undefined;\n    let deferred = undefined;\n    let self = this;\n    if (self.triggered) {\n      return;\n    }\n    self.triggered = true;\n    if (self.deferred) {\n      self = self.deferred;\n    }\n    try {\n      if (_then = isThenable(msg)) {  // jshint ignore:line\n        schedule(function() {\n          const deferred_wrapper = new MakeDeferred(self);\n          try {\n            _then.call(msg, function() { resolve.apply(deferred_wrapper, arguments); }, function() { reject.apply(deferred_wrapper, arguments); });\n          } catch (err) {\n            reject.call(deferred_wrapper, err);\n          }\n        });\n      } else {\n        self.msg = msg;\n        self.state = 1;\n        if (self.chain.length > 0) {\n          schedule(notify, self);\n        }\n      }\n    } catch (err) {\n      reject.call(new MakeDeferred(self), err);\n    }\n  }\n  function reject(msg) {\n    let self = this;\n    if (self.triggered) {\n      return;\n    }\n    self.triggered = true;\n    if (self.deferred) {\n      self = self.deferred;\n    }\n    self.msg = msg;\n    self.state = 2;\n    if (self.chain.length > 0) {\n      schedule(notify, self);\n    }\n  }\n  function iteratePromises(Constructor, arr, resolver, rejecter) {\n    for (let idx = 0; idx < arr.length; idx++) {\n      (function IIFE(idx) {\n        Constructor.resolve(arr[idx])\n          .then(function(msg) {\n          resolver(idx, msg);\n        }, rejecter);\n      })(idx);\n    }\n  }\n  function MakeDeferred(self) {\n    this.deferred = self;\n    this.triggered = false;\n  }\n  function Deferred(self) {\n    this.promise = self;\n    this.state = 0;\n    this.triggered = false;\n    this.chain = [];\n    this.msg = undefined;\n  }\n  function Promise(executor) {\n    if (typeof executor !== \"function\") {\n      throw new TypeError(\"Not a function\");\n    }\n    if (this.isValidPromise !== 0) {\n      throw new TypeError(\"Not a promise\");\n    }\n    /**\n     * Indicate the Promise is initialized:\n     */\n    this.isValidPromise = 1;\n    let deferred = new Deferred(this);\n    this.then = function(success, failure) {\n      let obj = {\n        success: typeof success === \"function\" ? success : true,\n        failure: typeof failure === \"function\" ? failure : false\n      };\n      /**\n       * `.then()` can be used against a different promise constructor for making a chained promise. \n       */\n      obj.promise = new this.constructor(function extractChain(resolve, reject) {\n        if (typeof resolve !== \"function\" || typeof reject !== \"function\") {\n          throw new TypeError(\"Not a function\");\n        }\n        obj.resolve = resolve;\n        obj.reject = reject;\n      });\n      deferred.chain.push(obj);\n      if (deferred.state !== 0) {\n        schedule(notify, deferred);\n      }\n      return obj.promise;\n    };\n    this.catch = function(failure) {\n      return this.then(undefined, failure);\n    };\n    try {\n      executor.call(undefined, function(msg) {\n        resolve.call(deferred, msg);\n      }, function(msg) {\n        reject.call(deferred, msg);\n      });\n    } catch (err) {\n      reject.call(deferred, err);\n    }\n  }\n  const PromisePrototype = extend({}, \"constructor\", Promise, false);\n  extend(Promise, \"prototype\", PromisePrototype, false);\n\n  /**\n   * Check if Promise is initialized: \n   */\n  extend(PromisePrototype, \"isValidPromise\", 0, false);\n  extend(Promise, \"resolve\", function(msg) {\n    const Constructor = this;\n\n    /**\n     * Make sure it is a valide Promise: \n     */\n    if (msg && typeof msg === \"object\" && msg.isValidPromise === 1) {\n      return msg;\n    }\n    return new Constructor(function executor(resolve, reject) {\n      if (typeof resolve !== \"function\" || typeof reject !== \"function\") {\n        throw new TypeError(\"Not a function\");\n      }\n      resolve(msg);\n    });\n  });\n  extend(Promise, \"reject\", function(msg) {\n    return new this(function executor(resolve, reject) {\n      if (typeof resolve !== \"function\" || typeof reject !== \"function\") {\n        throw new TypeError(\"Not a function\");\n      }\n      reject(msg);\n    });\n  });\n  extend(Promise, \"all\", function(arr) {\n    const Constructor = this;\n\n    /**\n     * Make sure argument is an array: \n     */\n    if (Object.prototype.toString.call(arr) !== \"[object Array]\") {\n      return Constructor.reject(new TypeError(\"Not an array\"));\n    }\n    if (arr.length === 0) {\n      return Constructor.resolve([]);\n    }\n    return new Constructor(function executor(resolve, reject) {\n      if (typeof resolve !== \"function\" || typeof reject !== \"function\") {\n        throw new TypeError(\"Not a function\");\n      }\n      const len = arr.length;\n      let msgs = new Array(len);\n      let count = 0;\n      iteratePromises(Constructor, arr, function resolver(idx, msg) {\n        msgs[idx] = msg;\n        if (++count === len) {\n          resolve(msgs);\n        }\n      }, reject);\n    });\n  });\n  extend(Promise, \"race\", function(arr) {\n    const Constructor = this;\n\n    /**\n     * Make sure argument is an array: \n     */\n    if (Object.prototype.toString.call(arr) !== \"[object Array]\") {\n      return Constructor.reject(new TypeError(\"Not an array\"));\n    }\n    return new Constructor(function executor(resolve, reject) {\n      if (typeof resolve !== \"function\" || typeof reject !== \"function\") {\n        throw new TypeError(\"Not a function\");\n      }\n      iteratePromises(Constructor, arr, function resolver(idx, msg) {\n        resolve(msg);\n      }, reject);\n    });\n  });\n\n  /**\n   * If native Promise exists in window, do not use this. \n   */\n  if (\"Promise\" in window && \"resolve\" in window.Promise && \"reject\" in window.Promise && \"all\" in window.Promise && \"race\" in window.Promise) {\n    return;\n  } else {\n\n    /**\n     * Otherwise do use this: \n     */\n    return window.Promise = Promise;\n  }\n})();\n\n/**\n * Fetch polyfill\n */\n(function() {\n\n  /**\n   *\n   * JSONP with API like fetch.\n   */\n  $.extend({\n    /* Container for jsonp methods: */\n    JSONPCallbacks: [],\n    /* JSONP method: */\n    jsonp: function(url, opts) {\n      var settings = {\n        timeout: 2000,\n        callbackName: 'callback',\n        clear: true\n      };\n      if (opts) {\n        $.extend(settings, opts);\n      }\n      /** \n       * Method to create callback: \n       */\n      function generateCallbackName() {\n        const callbackName = settings.callbackName + '_' + ($.JSONPCallbacks.length + 1);\n        $.JSONPCallbacks.push(callbackName);\n        return callbackName;\n      }\n      const callbackName = generateCallbackName();\n      /** \n       * Create and return Promise with result from request: \n       */\n      return new Promise(function(resolve, reject) {\n        let timeout = undefined;\n        window.jsonp = window.jsonp || {};\n        window.jsonp[callbackName] = function(response) {\n          resolve({\n            ok: true,\n            json: function() {\n              return Promise.resolve(response);\n            }\n          });\n          if (timeout) {\n            clearTimeout(timeout);\n          }\n        };\n        /** \n         * Create script tag: \n         */\n        const script = document.createElement('script');\n        script.async = true;\n        script.defer = true;\n        script.src = url + (url.indexOf('?') > -1 ? '&' : '?') + 'callback=jsonp.' + callbackName;\n        document.body.appendChild(script);\n        /** \n         * Delete script tag: \n         */\n        setTimeout(function() {\n          script.parentNode.removeChild(script);\n        });\n        /** \n         * Clear JSONP methods from window: \n         */\n        if (settings.clear) {\n          const pos = $.JSONPCallbacks.indexOf(callbackName);\n          $.JSONPCallbacks.splice(pos, 1);\n        }\n        /** \n         * Handle timeout: \n         */\n        timeout = setTimeout(function() {\n          reject(new Error('JSONP request to ' + url + ' timed out'));\n        }, settings.timeout);\n      });\n    },\n    /**\n     * Helper function for fetch Promises.\n     * Returns the respons as parsed JSON.\n     * Usage: .then($.json)\n     */\n    json: function(response) {\n      return response.json();\n    }\n  });\n  if (window && window.fetch) {\n    return;\n  }\n  const self = window;\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name');\n    }\n    return name.toLowerCase();\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value;\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    let list = this.map[name];\n    if (!list) {\n      list = [];\n      this.map[name] = list;\n    }\n    list.push(value);\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    const values = this.map[normalizeName(name)];\n    return values ? values[0] : null;\n  };\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || [];\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name));\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)];\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this);\n      }, this);\n    }, this);\n  };\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'));\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    });\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    const reader = new FileReader();\n    reader.readAsArrayBuffer(blob);\n    return fileReaderReady(reader);\n  }\n\n  function readBlobAsText(blob) {\n    const reader = new FileReader();\n    reader.readAsText(blob);\n    return fileReaderReady(reader);\n  }\n\n  const support = {\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob();\n        return true;\n      } catch(e) {\n        return false;\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function Body() {\n    this.bodyUsed = false;\n\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (!body) {\n        this._bodyText = '';\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        /** \n         * Only support ArrayBuffers for POST method.\n         * Receiving ArrayBuffers happens via Blobs, instead.\n         */\n      } else {\n        throw new Error('unsupported BodyInit type');\n      }\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        const rejected = consumed(this);\n        if (rejected) {\n          return rejected;\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob);\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob');\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]));\n        }\n      };\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer);\n      };\n\n      this.text = function() {\n        const rejected = consumed(this);\n        if (rejected) {\n          return rejected;\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob);\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text');\n        } else {\n          return Promise.resolve(this._bodyText);\n        }\n      };\n    } else {\n      this.text = function() {\n        const rejected = consumed(this);\n        return rejected ? rejected : Promise.resolve(this._bodyText);\n      };\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode);\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse);\n    };\n\n    return this;\n  }\n\n  /** \n   * HTTP methods whose capitalization should be normalized. \n   */\n  const methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    const upcased = method.toUpperCase();\n    return (methods.indexOf(upcased) > -1) ? upcased : method;\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    let body = options.body;\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read');\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      if (!body) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = input;\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests');\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this);\n  };\n\n  function decode(body) {\n    const form = new FormData();\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        const split = bytes.split('=');\n        const name = split.shift().replace(/\\+/g, ' ');\n        const value = split.join('=').replace(/\\+/g, ' ');\n        form.append(decodeURIComponent(name), decodeURIComponent(value));\n      }\n    });\n    return form;\n  }\n\n  function headers(xhr) {\n    const head = new Headers();\n    const pairs = xhr.getAllResponseHeaders().trim().split('\\n');\n    pairs.forEach(function(header) {\n      const split = header.trim().split(':');\n      const key = split.shift().trim();\n      const value = split.join(':').trim();\n      head.append(key, value);\n    });\n    return head;\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = options.statusText;\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    });\n  };\n\n  Response.error = function() {\n    const response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response;\n  };\n\n  const redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code');\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  self.Headers = Headers;\n  self.Request = Request;\n  self.Response = Response;\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      let request = undefined;\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input;\n      } else {\n        request = new Request(input, init);\n      }\n\n      const xhr = new XMLHttpRequest();\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL;\n        }\n\n        /* Avoid security warnings on getResponseHeader when not allowed by CORS */\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL');\n        }\n\n        return;\n      }\n\n      xhr.onload = function() {\n        const options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        const body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    });\n  };\n  self.fetch.polyfill = true;\n})();\n\n/** \n * Array extras for managing collections of objects.\n * Provides the following methods: find, findIndex,\n * pluck, difference, intersection, merge, unique.\n */\n\nif (!Array.prototype.find) {\n  $.extend(Array.prototype, {\n    find(predicate) {\n      if (this == null) {\n        throw new TypeError('Array.prototype.find called on null or undefined');\n      }\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n      let list = Object(this);\n      let length = list.length >>> 0;\n      let thisArg = arguments[1];\n      let value = undefined;\n\n      for (let i = 0; i < length; i++) {\n        value = list[i];\n        if (predicate.call(thisArg, value, i, list)) {\n          return value;\n        }\n      }\n      return undefined;\n    }\n  })\n}\nif (!Array.prototype.findIndex) {\n  $.extend(Array.prototype, {\n    findIndex(predicate) {\n      if (this === null) {\n        throw new TypeError('Array.prototype.findIndex called on null or undefined');\n      }\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n      let list = Object(this);\n      let length = list.length >>> 0;\n      let thisArg = arguments[1];\n      let value = undefined;\n\n      for (let i = 0; i < length; i++) {\n        value = list[i];\n        if (predicate.call(thisArg, value, i, list)) {\n          return i;\n        }\n      }\n      return -1;\n    }\n  })\n}\n\nif (!Array.prototype.pluck) {\n  $.extend(Array.prototype, {\n    pluck(p) {\n      return this.map(function(prop) {\n        return prop[p];\n      })\n    }\n  })\n}\n\nif (!Array.prototype.difference) {\n  $.extend(Array.prototype, {\n    difference(a) {\n      return this.filter(function(after) {\n        return !a.reduce(function(found, before) {\n          if (!found) {\n            found = true;\n            for (let key in before) {\n              if (before.hasOwnProperty(key)) {\n                  found = found && (before[key] === after[key]);\n              }\n            }\n          }\n          return found;\n        }, false);\n      });\n    }\n  })\n}\n\nif (!Array.prototype.intersection) {\n  $.extend(Array.prototype, {\n    intersection(array) {\n      const self = this;\n      const arr1 = self.difference(array);\n      const arr2 = array.difference(this);\n      const totalDiff = arr1.concat(arr2);\n      const total = self.concat(array);\n      return total.difference(totalDiff).unique()\n    }\n  })\n}\n\nif (!Array.prototype.mixin) {\n  $.extend(Array.prototype, {\n    mixin(array) {\n      return this.unique(this.concate(array));\n    }\n  })\n}\n\nif (!Array.prototype.unique) {\n  $.extend(Array.prototype, {\n    unique() {\n      const len = this.length;\n      let obj = {};\n      let ret = [];\n      for (let i = 0; i < len; i++) {\n        const arrayItem = JSON.stringify(this[i]);\n        const arrayItemValue = this[i];\n        if (obj[arrayItem] === undefined) {\n          ret.push(arrayItemValue);\n          obj[arrayItem] = 1;\n        } else {\n          obj[arrayItem]++;\n        }\n      }\n      return ret;\n    }\n  })\n}\n\n/**\n * ChocolateChip-UI Model Factory.\n */\n(() => {\n  const ModelErrorMessages = {\n    en: {\n      noPropertyOrDataError: \"ChocolateChip-UI Model Error: No property or data were provided to set on the model.\",\n      noPropertyToSet: \"ChocolateChip-UI Model Error: No data was provided to set on the model's property.\",\n      noPropertyToDelete: \"ChocolateChip-UI Model Error: No property was provided to delete from the model.\",\n      noObjectToMerge: \"ChocolateChip-UI Model Error: No object was provided to merge into the model's data.\",\n      incorrectDataForMerging: \"ChocolateChip-UI Model Error: An incorrect type of data was provided for merging into the model. You must use a proper object for this model.\",\n      noObjForMixin: \"ChocolateChip-UI Model Error: No object was passed to the mixin. Please provide one.\",\n      noCallbackForModelOn: \"ChocolateChip-UI Model Error: No callback was provided for the model `on` event. Without it the event cannot work. Please provide one.\",\n      noEventForModelOn: \"ChocolateChip-UI Model Error: No event was provided for the model's `on` handler. Without an event the handler cannot work. Please provide one an event and a callback to handle the event.\",\n      noEventForModelTrigger: \"ChocolateChip-UI Model Error: No event was provided for the model trigger. Without it no event can be triggered. Please provide one.\",\n      noPosForEventDeletion: \"ChocolateChip-UI Model Error: No position was provided for the callback to be deleted from the model events. Please provide one.\",\n      noPosForPropAt: \"ChocolateChip-UI Model Error: No position was provided for getting a property on the model's collection. Please provide one.\",\n      noPropForPropAt: \"ChocolateChip-UI Model Error: No property was provided. Without one we cannot get the property from the model collection. Please provide a property and the position in the collection to get it.\",\n      noValForPropEquals: \"ChocolateChip-UI Model Error: No value was provided to use for getting an object property. Please provide one.\",\n      noPropForPropEquals: \"ChocolateChip-UI Model Error: No property or value was provided. Without them we cannot get an object whose property equals some value in this model.\",\n      noPosForSetPropAt: \"ChocolateChip-UI Model Error: No position was provided for setting a property in the model collection. Please provide one.\",\n      noValueForSetPropAt: \"ChocolateChip-UI Model Error: No value or position was provided for setting an object by property in the model collection. Please provide a value and a position.\",\n      noPropForSetPropAt: \"ChocolateChip-UI Model Error: No property, value or position were provided for setting the value of an object in the model collection. Please provide a property, value and position to set on the model.\",\n      noValueForPropEquals: \"ChocolateChip-UI Model Error: No value was provided. With a value, we cannot find a matching object in the model collection. Please provide one\",\n      noPropForPropEquals: \"ChocolateChip-UI Model Error: No property or value were provided. Without these we cannot find a matching object in the model collection. Please provide both of them.\",\n      noDataToPushToModel: \"ChocolateChip-UI Model Error: No data was provided to push onto the model collection.\",\n      noDataForShiftToModel: \"ChocolateChip-UI Model Error: No data was provided to insert at the beginning of the model collection.\",\n      noEndForModelSlice: \"ChocolateChip-UI Model Error: No end value was provided to slice the model collection. Please provide a numeral value.\",\n      noStartModelForSlice: \"ChocolateChip-UI Model Error: No start value was provided for slicing the model collection. Please provide both a start and end numeral value so that we can slice the model collection for you.\",\n      noEndForModelSplice: \"ChocolateChip-UI Model Error: No end position was provided to splice the model collection. Please provide one.\",\n      noStartForModelSplice: \"ChocolateChip-UI Model Error: No start position was provided for splicing the model collection. Please provide a start and end position for splicing the model collection.\",\n      noDataToInsertInModel: \"ChocolateChip-UI Model Error: No data was provided to insert into the model collection. Was expecting an object, but found nothing. Please provide some an object of data. Check that you have your arguments in the correct order: position first, data second.\",\n      noPosToInserInModel: \"ChocolateChip-UI Model Error: No position was provided to insert data into the model collection. Please provide a position and some data to insert in the model collection. The first argument should be a numerical value for the position, followed by the data to insert.\",\n      noPropForPlucking: \"ChocolateChip-UI Model Error: No property was provided to pluck from the model collection. Please provide a property.\",\n      noCallbackForModelFind: \"ChocolateChip-UI Model Error: No callback was provided as an argument for the find on the model collection. Please provide one.\",\n      noElementForIndexOf: \"ChocolateChip-UI Model Error: No element was provided for finding the index of an object in the model collection. Please provide one.\",\n      noDataToConcat: \"ChocolateChip-UI Model Error: No data was provided to concat to this model. Did you forget to provide the data?\",\n      noPropsForSortBy: \"ChocolateChip-UI Model Error: No property was provided for sorting. Without a property we cannot sort.\",\n      noEventForEventDeletion: \"ChocolateChip-UI Model Error: No event was provided to delete the callback for this model. Please provide both and event and an array position for the callback. An event can have more than one callback registered to it.\",\n      noCallbackForForEach: \"ChocolateChip-UI Model Error: No callback was provided for the forEach method. This is required.\",\n      noDataToReplaceInModel: \"ChocolateChip-UI Model Error: No data was provided to replace the data in the model. If you want to do so, please provide some data to complete this operation. Otherwise, if you are trying to empty the model, use `purge()`.\",\n      modelHasNoDataToReturn: \"ChocolateChip-UI Model Error: This model has no data associated with it. Perhaps you forgot to give it any data when you created it.\",\n      positionGreaterThanModelLength: \"ChocolateChip-UI Model Error: The position you provided to set a property is greater than the number of items in this model.\"\n    },\n    es: {\n      noPropertyOrDataError: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninguna propiedad ni datos para establecer el valor del modelo.\",\n      noPropertyToSet: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ningunos datos para establecer el valor de una propiedad del modelo.\",\n      noPropertyToDelete: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninguna propiedad para eliminar del modelo.\",\n      noObjectToMerge: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó objeto de fundirse en los datos del modelo.\",\n      incorrectDataForMerging: \"Hubo Error de Modelo ChocolateChip-UI: Se proporcionó un tipo incorrecto de los datos con el fin de fundirse en el modelo. Debe utilizar un objeto adecuado para este modelo.\",\n      noObjForMixin: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ningún objeto al mixin. Por favor proporcione uno.\",\n      noCallbackForModelOn: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninguna función callback para el event `on` del modelo. Sin ella el evento no puede funcionar. Por favor proporcione una.\",\n      noEventForModelOn: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ningún evento para la función del evento `on` del modelo.Sin un evento la función no puede realizarse. Por favor proporcione un evento.\",\n      noEventForModelTrigger: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ningún evento para el gatillo del modelo. Sin él no se puede disparar ningún evento. Por favor proporcione uno.\",\n      noPosForEventDeletion: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninguna función callback la cual se puede eliminar de los eventos del modelo. Por favor proporcione una.\",\n      noPosForPropAt: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninguna posición para acceder a una propiedad en la colección del modelo. Por favor proporcione una.\",\n      noPropForPropAt: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninugna propiedad. Sin una no se puede acceder a una propiedad en la colección del modelo. Por favor proporcione una propiedad y una posición en la colección para acceder a ella.\",\n      noValForPropEquals: \"Hubo Error de Modelo ChocolateChip-UI: No se proporiconó ningún valor para acceder a una propiedad de un objeto. Por favor proprocione uno.\",\n      noPropForPropEquals: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ningúna propiedad ni valor. Sin ellos no podemos acceder a un objeto que tenga propiedad del mismo valor en este modelo.\",\n      noPosForSetPropAt: \"Hubo Error de Modelo ChocolateChip-UI: No se proprocionó ninguna posición para establecer una propiedad en la colección del modelo. Por favor proporcione una.\",\n      noValueForSetPropAt: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninún valor ni posición para actualizar un objeto en la colección del modelo. Por favor proporcione un valor y una posición.\",\n      noPropForSetPropAt: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionaron ninunga propiedad, valor ni posición para establecer el valor de un objeto en la colección del modelo. Por favor proporcione una propiedad, valor y posición para actualizar el objeto.\",\n      noValueForPropEquals: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ningún valor. Sin algún valor no podemos encontrar a un objeto idéntico en la colección del modelo. Por favor proporcione uno.\",\n      noPropForPropEquals: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninguna propiedad ni valor. Sin ellos no podemos encontrar un objeto de iqual valor en la colección del modelo. Por favor proporcione los dos.\",\n      noDataToPushToModel: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionaron ningunos datos para añadir al fin de la colección del modelo.\",\n      noDataForShiftToModel: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninungos datos para agregar al inicio de la colección del modelo.\",\n      noEndForModelSlice: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ningún valor final para extraer de la colección del modelo. Por favor proporcione un valor numérico.\",\n      noStartModelForSlice: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ningún valor inicial para extraer datos de la colección del modelo. Por favor proporcione un valor numérico inicial así como un final para que podamos extraer los datos de la colección del modelo.\",\n      noEndForModelSplice: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninguna posición final para realizar una acción de «splice» en la colección del modelo. Por favor proporcione una.\",\n      noStartForModelSplice: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninguna posición inicial para realizar una acción de «splice» en la colección del modelo. Por favor proporcione una.\",\n      noDataToInsertInModel: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionaron ningunos datos para insertar en la colección del modelo. Se esperaba un objeto, pero no se encontró nada. Por favor proporcione un objeto de datos. El primer argumento debe de ser una position, seguido por los datos.\",\n      noPosToInserInModel: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninguna posición para saber en dónde insertar los datos en la colección del modelo. Por favor proporcione una posición de valor numérico y unos datos para insertar en la colección del modelo. El primer argumento debe de ser un valor numérico para la posición, y entonces unos datos que insertar.\",\n      noPropForPlucking: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninguna propiedad para extraerla de la colección del modelo. Por favor proporcione una propiedad.\",\n      noCallbackForModelFind: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninguna función callback como parámetro a fin de realizar una búsqueda en la colección del modelo. Por favor proporcione una.\",\n      noElementForIndexOf: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ningun element a fin de averiguar el índice de un objeto en la colección del modelo. Por favor proporcione una.\",\n      noDataToConcat: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionaron ningunos datos para concatenar en este modelo. ¿Se le olvidó proporcionar los datos?\",\n      noPropsForSortBy: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninguna propiedad. Sin una no se puede ordenar los datos del modelo.\",\n      noEventForEventDeletion: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ningún evento a fin de eliminar la función callback de este modelo. Por favor proporcione tanto un evento como una posición en la colección para la callback que se quiere eliminar. Es posible que un evento tenga más de una callback registrada a él.\",\n      noCallbackForForEach: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionó ninguna función callback para el método «forEach». Ésta se requiere.\",\n      noDataToReplaceInModel: \"Hubo Error de Modelo ChocolateChip-UI: No se proporcionaron ningunos datos para reemplazar los del modelo. Si es lo que usted quiere hacer, por favor proporicone unos datos para realizar esta operación. En otro caso, si el propósito de esta operación es el de vaciar el modelo, use `purge()`.\",\n      modelHasNoDataToReturn: \"Hubo Error de Modelo ChocolateChip-UI: Este modelo no tiene datos suyos. Quizás se le olvidó asignarselos cuando lo creó.\",\n      positionGreaterThanModelLength: \"Hubo Error de Modelo ChocolateChip-UI: The position you provided is to set a property is greater than the number of items in this model. La positición que se proporicionó es más grande que el número de objetos en este modelo.\"\n    }\n  };\n\n  let errors = undefined;\n  if ($('html').attr('lang') == 'en') errors = ModelErrorMessages.en;\n  if ($('html').attr('lang') == 'es') errors = ModelErrorMessages.es;\n\n  const dataStore = {\n    id: $.uuid()\n  };\n\n  class Model {\n    constructor (data) {\n      let d = undefined;\n      if ($.type(data) == 'array') {\n        d = data.slice();\n      } else if ($.type(data) == 'object') {\n        d = Object.create(data);\n      } else {\n        d = data;\n      }\n      this.id = $.uuid();\n      this[dataStore] = d;\n      this.events = {};\n      this.stopped = false;\n      this.boundViews = [];\n    }\n\n    /**\n     * This method is used internally by the model to update any views bound to it. There is never a situation where you will need to use it. It gets invoked whenever you perform an operation that changes the model's data.\n     */\n    updateBoundViews() {\n      /* No bound views, so exit: */\n      if (!this.boundViews || !this.boundViews.length) {\n        return;\n      }\n\n      /** \n       * Loop thru bound views to render: \n       */\n      this.boundViews.forEach(function(view) {\n        view.render();\n      })\n    }\n\n    /**\n     * Set model state to `stopped`. Used to determine whether to execute a model event. \n     */\n    stop() {\n     this.stopped = true\n    }\n\n    /** \n     * Set model state to run: \n     */\n    start() {\n      this.stopped = false\n    }\n\n    /** \n     * Check if model is stopped; \n     */\n    isStopped() {\n      return this.stopped\n    }\n\n    /** \n     * Get the value of an object property.\n     * This only works when the model's data is an object.\n     * If used without parameter, will return all data from model, whether object or array. \n     */\n    get(property) {\n      if (property && $.type(this[dataStore]) === 'object') {\n        return this[dataStore][property];\n      } else {\n        return this[dataStore]\n      }\n    }\n\n    /** \n     * Set the value of an object property.\n     * This only works when the model's data is an object.\n     */\n    set(property, data) {\n      if (!property) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPropertyOrDataError)\n        return;\n      } else if (!data) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPropertyToSet + property)\n        return;\n      }\n      if ($.type(this[dataStore]) === 'object') {\n        this[dataStore][property] = data;\n        this.updateBoundViews();\n      }\n    }\n\n    /** \n     * Clear out the model's data.\n     * Works with models with objects or arrays.\n     */\n    purge() {\n      if ($.type(this[dataStore]) === 'object') {\n        this[dataStore] = {}\n      } else if ($.type(this[dataStore]) === 'array') {\n        this[dataStore] = [];\n      } else {\n        this[dataStore] = undefined;\n      }\n    }\n\n    /**\n     * Merge new object into model's object.\n     * This only works when the model's data is an object.\n     * Will replace any existing properties of the same name.\n     */\n    merge(obj) {\n      if (!obj) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noObjectToMerge);\n        return;\n      } else if ($.type(obj) !== 'object') {\n        if ($.supressErrorMessages) return;\n        console.error(errors.incorrectDataForMerging)\n      } else if ($.type(this[dataStore]) === 'object') {\n        for (let key in obj) {\n          this[dataStore][key] = obj[key];\n        }\n        this.updateBoundViews();\n      }\n    }\n\n    /**\n     * Mixin new object into model's object.\n     * This only works when the model's data is an object.\n     * This will not replace any existing properties of the same name.\n     * Only new properties will be added.\n     */\n    mixin(data) {\n      if (!data) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noObjForMixin);\n        return;\n      }\n      if ($.type(this[dataStore]) === 'object') {\n        for (let key in data) {\n          /** \n           * Do not replace property if it exists: \n           */\n          if (!(key in this[dataStore])) {\n            this[dataStore][key] = data[key];\n            this.updateBoundViews();\n          }\n        }\n      } else if ($.type(this[dataStore]) === 'array') {\n        this[dataStore].concat(data).unique();\n        this.updateBoundViews();\n      }\n    }\n\n    /**\n     * Replace the data of the model with the provided data.\n     * This works for models of an object or array.\n     */\n    replace(data) {\n      if (data) {      \n      let d = undefined;\n      if ($.type(data) == 'array') {\n        d = data.slice();\n      } else if ($.type(data) == 'object') {\n        d = Object.create(data);\n      } else {\n        d = data;\n      }\n        this[dataStore] = d;\n        this.updateBoundViews(this);\n      } else {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noDataToReplaceInModel)\n      }\n    }\n\n    /**\n     * Remove a property from a model's data.\n     * Only works if the data is an object.\n     */\n    remove(prop) {\n      if (!prop) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPropertyToDelete);\n        return;\n      }\n      if ($.type(this[dataStore]) !== 'object') return;\n      delete this[dataStore][prop];\n      this.updateBoundViews();\n    }\n\n    /**\n     * Register an event on the model:\n     */\n    on(event, callback) {\n      if (this.stopped) return;\n      if (!event) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noEventForModelOn);\n        return;\n      } else if (!callback) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noCallbackForModelOn);\n        return;\n      } \n      if (!this.events[event]) {\n        this.events[event] = [callback];\n      } else {\n        this.events[event].push(callback)\n      }\n    }\n\n    /**\n     * Trigger an event on the model:\n     */\n    trigger(event, data) {\n      if (this.stopped) return;\n      if (!event) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noEventForModelTrigger);\n        return;\n      }\n      data != undefined ? data : {}\n      this.events[event].forEach(item => {\n          item(data);\n      });\n    }\n\n    /**\n     * Remove an event on the model.\n     * If no event is provided, all events will be removed.\n     */\n    off(event) {\n      if (!event) {\n        this.events = {};\n      } else {\n        delete this.events[event];\n      }\n    }\n\n    /**\n     * Array specific methods:\n     */\n\n    getPropAt(property, position) {\n      if (!property) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPropForPropAt);\n        return;\n      } else if (position === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPosForPropAt);\n        return;\n      } \n      if ($.type(this[dataStore]) === 'array') {\n        if (position < 0) {\n          const pos = this[dataStore].length + position;\n          return this[dataStore][pos][property];\n        } else {\n          return this[dataStore][position][property];\n        }\n      }\n    }\n\n    setPropAt(property, value, position) {\n      if (!property) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPropForSetPropAt);\n        return;\n      } else if (value === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noValueForSetPropAt);\n        return;\n      } else if (position === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPosForSetPropAt);\n        return;\n      } else if (position > this[dataStore].length -1) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.positionGreaterThanModelLength);\n        return;\n      }\n      if ($.type(this[dataStore]) === 'array') {\n        if (position < 0) {\n          const pos = this[dataStore].length + position;\n          this[dataStore][pos][property] = value;\n          this.updateBoundViews();\n        } else {\n          this[dataStore][position][property] = value;\n          this.updateBoundViews();\n        }\n      }\n    }\n\n    push(data) {\n      if (!data) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noDataToPushToModel);\n        return;\n      }\n      if ($.type(this[dataStore]) === 'array') {\n        this[dataStore].push(data);\n        this.updateBoundViews();\n      }\n    }\n\n    pop() {\n      if ($.type(this[dataStore]) === 'array') {\n        this[dataStore].pop();\n        this.updateBoundViews();\n      }\n    }\n\n    unshift(data) {\n      if (!data) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noDataForShiftToModel);\n        return;\n      } else if ($.type(this[dataStore]) === 'array') {\n        this[dataStore].unshift(data);\n        this.updateBoundViews();\n      }\n    }\n          \n    shift() {\n      if ($.type(this[dataStore]) === 'array') {\n        this[dataStore].shift();\n        this.updateBoundViews();\n      }\n    }\n\n\n    slice(start, end) {\n      if (end === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noEndForModelSlice);\n        return;\n      } else if (start === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noStartModelForSlice);\n        return;\n      }\n      if ($.type(this[dataStore]) === 'array') {\n        return this[dataStore].slice(start, end)\n      }\n    }\n\n    splice(start, end, data) {\n      if (end === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noEndForModelSplice);\n        return;\n      } else if (start === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noStartForModelSplice);\n        return;\n      }\n      if ($.type(this[dataStore]) === 'array' && data) {\n        this[dataStore].splice(start, end, data);\n        this.updateBoundViews();\n      } else if ($.type(this[dataStore]) === 'array') {\n        if(start == null || !end) return;\n        this[dataStore].splice(start, end);\n        this.updateBoundViews();\n      }\n    }\n\n    /**\n     * Instert an object into the model's array at the designated position:\n     */\n    insert(position, data) {\n      if (data === undefined) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noDataToInsertInModel);\n        return;\n      } else if (position === undefined || $.type(position) !== 'number') {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPosToInserInModel);\n        return;\n      }\n      if ($.type(this[dataStore]) === 'array') {\n        if ($.type(position) !== 'number') return;\n        this[dataStore].splice(position, 0, data);\n        this.updateBoundViews();\n      }\n    }\n\n    /**\n     * Get an array of the provided property values in the model's array:\n     */\n    pluck(property) {\n      if (!property) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPropForPlucking);\n        return;\n      } else {\n        let ret = [];\n        if (this[dataStore] && this[dataStore].length) {\n          const len = this[dataStore].length;\n          for (let i = 0; i < len; i++) {\n            ret.push(this[dataStore][i][property]);\n          }\n          return ret;\n        }\n      }\n    }\n\n    /**\n     * \n     */\n    indexOf(element, startFrom) {\n      if (!element) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noElementForIndexOf);\n        return;\n      } else if ($.type(this[dataStore]) === 'array') {\n        return this[dataStore].indexOf(element, startFrom);\n      }\n    }\n\n    /**\n     * This method lets you pass a callback that checks for a property or other state in the array's items and return the match. It returns the first match only.\n     */\n    find(callback) {\n      if (!callback) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noCallbackForModelFind);\n        return;\n      } else if ($.type(this[dataStore]) === 'array') {\n        return this[dataStore].find(callback);\n      }\n    }\n\n    findIndex(callback) {\n      if (!callback) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noCallbackFoFindIndex);\n        return;\n      } else if ($.type(this[dataStore]) === 'array') {\n        return this[dataStore].findIndex(callback);\n      }\n    }\n\n    forEach(callback) {\n      if (!callback) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noCallbackForForEach);\n        return;\n      }\n      if (this[dataStore] && this[dataStore].length) {\n        let value = undefined;\n        let i = -1;\n        const len = this[dataStore].length;\n        while (++i < len) {\n          value = callback.call(this[dataStore][i], this[dataStore][i], i);\n          if (value === false) {\n            break;\n          }\n        }\n      }\n    }\n\n    filter(...args) {\n      if (this[dataStore] && this[dataStore].length) {\n        return this[dataStore].filter.apply(this[dataStore], args);\n      }\n    }\n\n    map(...args) {\n      if (this[dataStore] && this[dataStore].length) {\n        return this[dataStore].map.apply(this[dataStore], args);\n      }\n    }\n\n    reverse() {\n      if (this[dataStore] && this[dataStore].length) {\n        this[dataStore].reverse();\n        this.updateBoundViews();\n      }\n    }\n\n    sort(compareFunction) {\n      if (this[dataStore] && this[dataStore].length) {\n        if (compareFunction) {\n          this[dataStore].sort(compareFunction);\n          this.updateBoundViews();\n        } else {\n          this[dataStore].sort();\n          this.updateBoundViews();\n        }\n      }\n    }\n\n    /**\n     * Sort the model's array based on passed properties. By default the ordering is ascendeing. By prefixing the property with a hyphen, the order will be descending. You can use more than one property separated by commas.\n     */\n    orderBy(...props) {\n      if (!props || !props.length) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noPropsForSortBy);\n        return;\n      }\n      const orderBy = (args) => {\n        return (a, b) => {\n          const sortByProperty = (property) => {\n            /** \n             * Default sort order: \n             */\n            let sortOrder = 1;\n            /** \n             * If user provided property with \"-\" prefix, make sort order descending: \n             */\n            if (property[0] === \"-\") {\n              sortOrder = -1;\n              /** \n               * Extract property from hyphen prefix: \n               */\n              property = property.substr(1);\n            }\n            /** \n             * Sort objects by provided properties:\n             */\n            return (a, b) => {\n              const result = (a[property] < b[property]) ? -1 : (a[property] > b[property]) ? 1 : 0;\n              return result * sortOrder;\n            };\n          };\n\n          /** \n           * Loop over all properties and sort objects based on those properties: \n           */\n          let i = 0;\n          let result = 0;\n          const numberOfProperties = props.length;\n          while (result === 0 && i < numberOfProperties) {\n            /** \n             * Use the private function to compare two values: \n             */\n            result = sortByProperty(props[i])(a, b);\n            i++;\n          }\n          return result;\n        };\n      };\n      if (this[dataStore] && this[dataStore].length) {\n        this[dataStore].sort(orderBy.apply(null, props));\n        this.updateBoundViews();\n      }\n    }\n\n    /**\n     * Concat and array of data to the model's array.\n     * After concating, it will remove any duplicates.\n     */\n    concat(data) {\n      if (!data) {\n        if ($.supressErrorMessages) return;\n        console.error(errors.noDataToConcat);\n        return;\n      }\n      if ($.type(this[dataStore]) === 'array') {\n        let temp = this[dataStore].concat(data);\n        this[dataStore] = temp;\n        this.updateBoundViews();\n      }\n    }\n\n    /**\n     * Remove any duplicates from the model's array:\n     */\n    unique() {\n      if ($.type(this[dataStore]) === 'array') {\n        let temp = this[dataStore].unique();\n        this[dataStore] = temp;\n        this.updateBoundViews();\n      }\n    }\n\n    /**\n     * Get an object out of the model's array based on its index:\n     */\n    eq(position) {\n      if ($.type(this[dataStore]) === 'array') {\n        return this[dataStore][position]\n      }\n    } \n\n    /**\n     * Get the length of the model's array.\n     * Only works if the data is an array.\n     */\n    size() {\n      if ($.type(this[dataStore]) === 'array') {\n        return this[dataStore].length\n      }\n    }\n  }\n\n  $.extend({\n    Model: function(data) {\n      return new Model(data)\n    }\n  });\n\n})();\n\n/**\n * Check environment properties.\n */\n$.extend($, {\n  isiPhone: /iphone/img.test(navigator.userAgent),\n  isiPad: /ipad/img.test(navigator.userAgent),\n  isiPod: /ipod/img.test(navigator.userAgent),\n  isiOS: /ip(hone|od|ad)/img.test(navigator.userAgent),\n  isAndroid: (/android/img.test(navigator.userAgent) && !/trident/img.test(navigator.userAgent)),\n  isTouchEnabled: !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && 'createTouch' in document,\n  isOnline: navigator.onLine,\n  isStandalone: navigator.standalone,\n  isWebkit: (!/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /webkit/img.test(navigator.userAgent)),\n  isDesktop: (!/mobile/img.test(navigator.userAgent)),\n  isSafari: (!/edge/img.test(navigator.userAgent) && !/Chrome/img.test(navigator.userAgent) && /Safari/img.test(navigator.userAgent) && !/android/img.test(navigator.userAgent)),\n  isChrome: !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /Chrome/img.test(navigator.userAgent) && !((/samsung/img.test(navigator.userAgent) || /Galaxy Nexus/img.test(navigator.userAgent) || /HTC/img.test(navigator.userAgent) || /LG/img.test(navigator.userAgent)) && !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /android/i.test(navigator.userAgent) && /webkit/i.test(navigator.userAgent)),\n  isNativeAndroid: ((/samsung/img.test(navigator.userAgent) || /Galaxy Nexus/img.test(navigator.userAgent) || /HTC/img.test(navigator.userAgent) || /LG/img.test(navigator.userAgent)) && !/trident/img.test(navigator.userAgent) && !/edge/img.test(navigator.userAgent) && /android/i.test(navigator.userAgent) && /webkit/i.test(navigator.userAgent))\n});\n\n/**\n * ChocolateChip-UI Widget - Setup.\n */\n$(function () {\n  if (!/(mobile)|(ios)|(android)/img.test(navigator.userAgent)) {\n    $('body').addClass('isDesktop');\n  }\n  if ($('link[href*=ios]')[0]) {\n    $('body').addClass('themeIsiOS');\n    $.theme = 'ios';\n  } else if ($('link[href*=android]')[0]) {\n    $('body').addClass('themeIsAndroid');\n    $.theme = 'android';\n  }\n  $.dir = 'ltr';\n  if ($('html').attr('dir') === 'rtl') {\n    $.dir = 'rtl'\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Activity Indicator.\n */\n$.fn.extend({\n  /**\n   * Setup activitiy indicator:\n   */\n  Busy: function(options) {\n    let settings = {\n      size: 40,\n      color: '#666',\n    };\n    $.extend(settings, options);\n\n    const $this = this;\n    let spinner = undefined;\n    /**\n     * For iOS:\n     */\n    const iOSBusy = () => {\n      let small = undefined;\n      /**\n       * Smaller busy indicator (less tines):\n       */\n      if (parseInt(settings.size, 10) < 30) {\n        spinner = `<svg class='chui-busy small' width='${ settings.size }px' height='${ settings.size }px' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' preserveAspectRatio='xMidYMid'>  \n  <g x='0' y='0' width='100' height='100' fill='none' class='bk'>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(0 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(45 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(90 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(135 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(180 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(225 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(270 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(315 50 50) translate(0 -30)'></rect>\n  </g>\n</svg>`;\n        $this.append(spinner);\n      /**\n       * Larger busy indicator (more tines);\n       */\n      } else {\n        spinner = `<svg class='chui-busy' width='${ settings.size }px' height='${ settings.size }px' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' preserveAspectRatio='xMidYMid' class='uil-default'> \n  <g x='0' y='0' width='100' height='100' fill='none'>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(0 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(30 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(60 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(90 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(120 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(150 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(180 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(210 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(240 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(270 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(300 50 50) translate(0 -30)'></rect>\n    <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(330 50 50) translate(0 -30)'></rect>\n  </g>\n</svg>`;\n        $this.append(spinner);\n      }\n    };\n\n    /**\n     * For Android:\n     */\n    const androidBusy = () => {\n      settings.id = $.uuid();\n      let androidActivityIndicator = null;\n      if ($.isNativeAndroid) {\n        androidActivityIndicator = `<svg class=\"chui-busy\" version=\"1.1\" id=\"${ settings.id }\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\" enable-background=\"new 0 0 100 100\" xml:space=\"preserve\">\n  <g>\n    <path fill=\"none\" stroke=\"${ settings.color }\" stroke-width=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M74.2,65c2.7-4.4,4.3-9.5,4.3-15c0-15.7-12.8-28.5-28.5-28.5S21.5,34.3,21.5,50c0,5.5,1.6,10.6,4.3,15\"/>\n  </g>\n  <polyline fill=\"none\" stroke=\"${ settings.color }\" stroke-width=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"89.4,56.1 74.3,65 65.4,49.9 \"/>\n</svg>`;\n\n        $this.append(androidActivityIndicator);\n        return;\n      } else {\n        androidActivityIndicator = `<svg id=\"${ settings.id }\" class=\"chui-busy\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\"><circle stroke=\"url(#SVGID_1_)\" cx=\"50\" cy=\"50\" r=\"28.5\"/></svg>`;\n        $this.append(androidActivityIndicator);\n        $this.addClass('hasActivityIndicator');\n        if (options.color) {\n          $('#' + settings.id).find('circle').css('stroke', options.color);\n        }\n      }\n      $('#' + settings.id).css({\n        'height': settings.size + 'px',\n        'width': settings.size + 'px'\n      });\n    };\n\n    /**\n     * Create Busy control for appropriate OS:\n     */\n    if ($.theme === 'android') {\n      androidBusy(options);\n    } else if ($.theme === 'ios') {\n      iOSBusy(options);\n    }\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Screen Blocker.\n */\n$.extend({\n\n  /**\n   * Cover screen:\n   */\n  Block: opacity => {\n    opacity = opacity ? ` style='opacity:${ opacity };'` : ` style='opacity: .5;'`;\n    if ($('.mask')[0]) return;\n    $('body').append(`<div class='mask'${ opacity }></div>`);\n    $('screen.current').attr('aria-hidden', true);\n  },\n\n  /**\n   * Uncover screen:\n   */\n  Unblock: () => {\n    $('.mask').remove();\n    $('screen.current').removeAttr('aria-hidden');\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Button functions.\n */\nconst chuiBackButtonSVG = `<svg id=\"chui-back-button-svg\" width=\"100px\" height=\"100px\" viewBox=\"0 0 100 100\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n  <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n    <g id=\"chui-back-arrow\" stroke=\"#979797\">\n      <path d=\"M50.7822487,4.05872022 L5.60302012,49.1913445 L50.4625593,94.6779982\" id=\"back-arrow-bracket\"></path>\n      <path d=\"M6,49.368351 L95.8300018,49.368351\" id=\"back-arrow-shaft\"></path>\n    </g>\n  </g>\n</svg>`;\n\n$.fn.extend({\n  decorateBackButton: function() {\n    if ($(this).hasClass('back') || $(this).hasClass('backTo')) {\n      this.forEach(button => {\n        const buttonText = $(button).text();\n        $(button).html(`<span>${ buttonText }</span>`);\n        $(button).prepend(chuiBackButtonSVG);\n      });\n    }\n  }\n});\n$(function () {\n  $('.back').decorateBackButton();\n  $('.backTo').decorateBackButton();\n});\n\n/**\n * ChocolateChip-UI Widget - Center Elements.\n */\n$.fn.extend({\n  /**\n   * Center an Element on Screen\n   */\n  center: function(position) {\n    if (!this[0]) return;\n    const $this = $(this);\n    const parent = $this.parent();\n    if (position) {\n      $(this.css('position', position));\n    } else if ($this.css('position') === 'absolute') {\n      position = 'absolute';\n    } else {\n      position = 'relative';\n    }\n    let height = undefined;\n    let width = undefined;\n    let parentHeight = undefined;\n    let parentWidth = undefined;\n    if (position === 'absolute') {\n      height = $this[0].clientHeight;\n      width = $this[0].clientWidth;\n      parentHeight = parent[0].clientHeight;\n      parentWidth = parent[0].clientWidth;\n    } else {\n      height = parseInt($this.css('height'), 10);\n      width = parseInt($this.css('width'), 10);\n      parentHeight = parseInt(parent.css('height'), 10);\n      parentWidth = parseInt(parent.css('width'), 10);\n      $(this).css({\n        'margin-left': 'auto',\n        'margin-right': 'auto'\n      });\n    }\n    let tmpTop = undefined;\n    let tmpLeft = undefined;\n    if (parent[0].nodeName === 'body') {\n      tmpTop = ((window.innerHeight / 2) + window.pageYOffset) - height / 2 + 'px';\n      tmpLeft = ((window.innerWidth / 2) - (width / 2) + 'px');\n    } else {\n      tmpTop = (parentHeight / 2) - (height / 2) + 'px';\n      tmpLeft = (parentWidth / 2) - (width / 2) + 'px';\n    }\n    if (position !== 'absolute') tmpLeft = 0;\n    $this.css({\n      left: tmpLeft,\n      top: tmpTop\n    });\n    return $this;\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Edit List.\n */\n$.extend({\n  /**\n   * Setup an editable list, enabling reording of items and deletion:\n   */\n  EditList: function(options) {\n    /**\n      options = {\n        editLabel: labelName,\n        doneLabel: labelName,\n        deleteLabel: labelName,\n        cancelLabel: cancelName,\n        callback: callback (Tapping \"Done\" fires this),\n        deletable: false (no deletables),\n        movable: false (no movables),\n        model: myModel,\n        modelProp: 'id',\n        view: myView\n      }\n    */\n    const settings = {\n      editLabel: 'Edit',\n      doneLabel: 'Done',\n      deleteLabel: 'Delete',\n      cancelLabel: 'Cancel',\n      callback: $.noop,\n      deletable: true,\n      movable: true,\n      model: undefined,\n      modelProp: 'id',\n      view: undefined\n    };\n\n    let __data = [];\n    let __editMade = false;\n    if (!options) {\n      return;\n    }\n    $.extend(settings, options);\n    const __model = settings.model || false;\n\n    if (!settings.deletable && !settings.movable) {\n      return;\n    }\n    const __view = settings.view;\n\n    if (options) $.extend(settings, options);\n\n    let deleteButton = undefined;\n    let editButton = undefined;\n    let deletionIndicator = undefined;\n    let button = undefined;\n    let dispelDeletable = 'swiperight';\n    let enableDeletable = 'swipeleft';\n    let moveUpIndicator = undefined;\n    let moveDownIndicator = undefined;\n    let element = settings.element;\n    let deleteLabel = undefined;\n\n    let dir = $('html').attr('dir');\n    dir = dir ? dir.toLowerCase() : '';\n    if (dir === 'rtl') {\n      dispelDeletable = 'swipeleft';\n      enableDeletable = 'swiperight';\n    }\n\n    if (settings.deletable) {\n      deleteButton = \n        `<button class=\"delete\">\n          <label>${ settings.deleteLabel }</label>\n          <svg width=\"27px\" height=\"30px\" viewBox=\"0 0 27 30\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <g id=\"delete-icon\" fill=\"#3A3A3A\">\n                <g transform=\"translate(3.000000, 1.000000)\">\n                  <path d=\"M1,6 L20,6 L20,24.9986131 C20,26.6562333 18.6639569,28 16.9998779,28 L4.00012207,28 C2.3432004,28 1,26.6569187 1,24.9986131 L1,6 Z M4,9 L5,9 L5,25 L4,25 L4,9 Z M8,9 L9,9 L9,25 L8,25 L8,9 Z M12,9 L13,9 L13,25 L12,25 L12,9 Z M16,9 L17,9 L17,25 L16,25 L16,9 Z\" id=\"can\"></path><path d=\"M0,4.96611425 L0,1.67759301 L5.1776507,1.7511163 L6.482399,0 L14.5847825,0 L15.8789491,1.7511163 L21,1.7511163 L21,4.9447157 L0,4.96611425 L0,4.96611425 Z\" id=\"lid\"></path>\n                </g>\n              </g>\n            </g>        \n          </svg>      \n        </button>`;\n      deletionIndicator = \n        `<span class=\"deletion-indicator\">\n          <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <g id=\"deletion-indicator\">\n                <g id=\"ios-indicator\">\n                  <circle id=\"ios-circle\" fill=\"#FF0000\" cx=\"10\" cy=\"10\" r=\"10\"></circle>\n                  <path d=\"M3.5,10 L16.5,10\" id=\"ios-bar\" stroke=\"#FFFFFF\" stroke-width=\"2\" stroke-linecap=\"square\"></path>\n                </g>\n                <path d=\"M2,13 L9.9294326,16.8406135 L17.1937075,1.90173332\" id=\"checkmark\" stroke=\"#FA0303\" stroke-width=\"2\"></path>\n              </g>\n            </g>\n          </svg>\n        </span>`;\n      $(element).addClass('deletable');\n    }\n    if (settings.movable) {\n      moveUpIndicator = \n        `<span class='move-up'>\n          <svg width=\"22px\" height=\"22px\" viewBox=\"0 0 22 22\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <g id=\"move-indicator\">\n                <circle id=\"circle\" cx=\"11\" cy=\"11\" r=\"10\"></circle>\n                <path d=\"M4,13.9645823 L10.9316382,5.94630319 L17.795297,13.9073417\" id=\"move-up\"></path>\n              </g>\n            </g>\n          </svg>\n        </span>`;\n      moveDownIndicator = \n        `<span class='move-down'>\n          <svg width=\"22px\" height=\"22px\" viewBox=\"0 0 22 22\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <g id=\"move-indicator\">\n                <circle id=\"circle\" cx=\"11\" cy=\"11\" r=\"10\"></circle>\n                <path d=\"M4.0421421,7.98172087 L10.912246,16 L17.7960071,8.1103389\" id=\"move-down\"></path>\n              </g>\n            </g>\n          </svg>\n        </span>`;\n      $(element).addClass('editable');\n    }\n\n    editButton = `<button class=\"edit\">${ settings.editLabel }</button>`;\n    const screen = $(element).closest('screen');\n    const nav = $(element).closest('screen').find('nav');\n    nav.append(editButton);\n    nav.find('.back').hide();\n    nav.prepend(`<button class=\"cancel\">${ settings.cancelLabel }</button>`);\n    nav.find('.cancel').hide();\n    $.AdjustNavbarLayout($(element).closest('screen'));\n\n    button = $(element).closest('screen').find('.edit');\n    $(element).find('li').forEach(function (ctx) {\n      if (!$(ctx).has('.deletion-indicator').length) {\n        if (settings.deletable) {\n          $(ctx).prepend(deletionIndicator);\n        }\n        if (settings.movable) {\n          $(ctx).append(moveDownIndicator);\n          $(ctx).append(moveUpIndicator);\n        }\n        if (settings.deletable) {\n          $(ctx).append(deleteButton);\n        }\n      }\n    });\n\n    /**\n     * Callback to setup indicator interactions:\n     */\n    const makeEditable = function makeEditable(callback, list, button) {\n      $(function () {\n\n        /**\n         * Check for view and update its template:\n         */\n        if (__view) {\n          const temp = $('<div></div>');\n          temp[0].insertAdjacentHTML('afterbegin', __view.getTemplate());\n          temp.find('li').prepend(deletionIndicator);\n          temp.find('li').append(moveDownIndicator);\n          temp.find('li').append(moveUpIndicator);\n          const template = temp.html();\n          __view.setTemplate(template);\n        }\n\n        button.on('tap', function () {\n          const $this = this;\n\n          /**\n           * When button is in \"Edit\" state:\n           */\n          if (this.classList.contains('edit')) {\n            $(list).addClass('editing');\n            setTimeout(function () {\n              $this.classList.remove('edit');\n              $this.classList.add('done');\n              $($this).text(settings.doneLabel);\n              $(list).addClass('showIndicators');\n              $($this).siblings('.back').hide();\n              $($this).siblings('.cancel').show();\n              $.AdjustNavbarLayout(screen);\n            });\n\n            /**\n             * When button is in \"Done\" state:\n             */\n          } else if (this.classList.contains('done')) {\n            $(list).removeClass('editing');\n            /**\n             * Execute callback if edit was performed:\n             */\n            setTimeout(function () {\n              $this.classList.remove('done');\n              $this.classList.add('edit');\n              $($this).text(settings.editLabel);\n              $(list).removeClass('showIndicators');\n              $(list).find('li').removeClass('selected');\n              $($this).siblings('.cancel').hide();\n              if (settings.deletable) {\n                if ($(list).find('button.delete')[0]) return;\n                $(list).find('li').append(deleteButton);\n              }\n              $.AdjustNavbarLayout(screen);\n            });\n            if (!__editMade) return;\n            const movedItems = [];\n            $(list).find('li').forEach(function (ctx, idx) {\n              __data.push($(ctx).attr('data-id'));\n            });\n\n            /**\n             * Reorder model based on user choice:\n             */\n            if (__model) {\n              (function () {\n                let __newarray = [];\n                __data.filter(function (item) {\n                  const ret = __model.filter(function (b) {\n                    return b[settings.modelProp] == item;\n                  });\n                  __newarray.push(ret[0]);\n                });\n                __data = [];\n                __model.purge();\n                __model.replace(__newarray, false);\n                __newarray = [];\n              })();\n            }\n            if ($(list).data('list-edit')) {\n              callback.call(callback, __model);\n            }\n            __editMade = false;\n          }\n          setTimeout(function () {\n            $.AdjustNavbarLayout(screen);\n          });\n        });\n\n        /**\n         * Handle deletion indicators:\n         */\n        $(list).off('tap', '.deletion-indicator');\n        $(list).on('tap', '.deletion-indicator', function () {\n          if ($(this).closest('li').hasClass('selected')) {\n            $(this).closest('li').removeClass('selected');\n            return;\n          } else {\n            $(this).closest('li').addClass('selected');\n          }\n        });\n\n        /**\n         * Handle swipe gestures:\n         */\n        $(list).on(dispelDeletable, 'li', function () {\n          /**\n           * If no deletables, disable swipes:\n           */\n          if (!settings.deletable) return;\n          /**\n           * Else reveal delete button:\n           */\n          $(this).removeClass('selected');\n        });\n\n        $(list).on(enableDeletable, 'li', function () {\n          /**\n           * If no deletables, disable swipes:\n           */\n          if (!settings.deletable) return;\n          /**\n           * Else reveal delete button:\n           */\n          $(this).addClass('selected');\n        });\n\n        /**\n         * Move list item up:\n         */\n        $(list).on('tap', '.move-up', function (e) {\n          const _this = this;\n          __editMade = true;\n\n          let item = $(this).closest('li');\n          if (item.is('li:first-child')) {\n            return;\n          } else {\n            (function () {\n              /**\n               * Mark list as edited:\n               */\n              $(list).data('list-edit', true);\n              item = $(_this).closest('li');\n              const prev = item.prev();\n              /**\n               * Clone the items to replace the transitioned ones alter:\n               */\n              const itemClone = item.clone();\n              const prevClone = prev.clone();\n              const height = item[0].offsetHeight;\n              item.css({\n                \"-webkit-transform\": 'translate3d(0,-' + height + 'px,0)',\n                \"transform\": 'translate3d(0,-' + height + 'px,0)'\n              });\n\n              prev.css({\n                \"-webkit-transform\": 'translate3d(0,' + height + 'px,0)',\n                \"transform\": 'translate3d(0,' + height + 'px,0)'\n              });\n              setTimeout(function () {\n                $.replace(prevClone, item);\n                $.replace(itemClone, prev);\n                /**\n                 * Remove Android ripple from moved list item.\n                 */\n                $('ripple-sheath').remove();\n              }, 250);\n            })();\n          }\n        });\n\n        /**\n         * Move list item down:\n         */\n        $(list).on('tap', '.move-down', function (e) {\n          __editMade = true;\n          const item = $(this).closest('li');\n          const next = item.next();\n          if (item.is('li:last-child')) {\n            return;\n          } else {\n            (function () {\n              /**\n               * Clone the items to replace the transitioned ones alter:\n               */\n              const itemClone = item.clone();\n              const nextClone = next.clone();\n              /**\n               * Mark list as edited:\n               */\n              $(list).data('list-edit', true);\n\n              const height = item[0].offsetHeight;\n              item.css({\n                '-webkit-transform': 'translate3d(0,' + height + 'px,0)',\n                transform: 'translate3d(0,' + height + 'px,0)'\n              });\n              next.css({\n                \"-webkit-transform\": 'translate3d(0,-' + height + 'px,0)',\n                \"transform\": 'translate3d(0,-' + height + 'px,0)'\n              });\n              setTimeout(function () {\n                \n                $.replace(nextClone, item);\n                $.replace(itemClone, next);\n                /**\n                 * Remove Android ripple from moved list item.\n                 */\n                $('ripple-sheath').remove();\n              }, 250);\n            })();\n          }\n        });\n\n        /**\n         * Handle deletion of list item:\n         */\n        $(list).on('tap', '.delete', function () {\n          const $this = this;\n          __editMade = true;\n          const listItem = $(this).parent();\n\n          /**\n           * Mark list as edited:\n           */\n          $(list).data('list-edit', true);\n          let direction = '-1200%';\n          if ($('html').attr('dir') === 'rtl') direction = '1000%';\n          $(this).siblings().css({\n            '-webkit-transform': 'translate3d(' + direction + ',0,0)',\n            '-webkit-transition': 'all 1s ease-out',\n            'transform': 'translate3d(' + direction + ',0,0)',\n            'transition': 'all 1s ease-out'\n          });\n\n          setTimeout(function () {\n            listItem.remove();\n          }, 500);\n        });\n\n        /**\n         * Cancel edits:\n         */\n        nav.find('.cancel').on('tap', function () {\n          __editMade = false;\n          nav.find('.back').show();\n          $(this).hide();\n          __view.render();\n          nav.find('.done').addClass('edit').removeClass('done').text(settings.editLabel);\n          $(list).removeClass('showIndicators');\n          $(list).find('li').removeClass('selected');\n          $(this).hide();\n          if (settings.deletable) {\n            $(list).find('li').append(deleteButton);\n          }\n        });\n      });\n    };\n    /**\n     * Initialize the editable list:\n     */\n    makeEditable(settings.callback, element, button);\n\n    return {\n      getModel: function getModel() {\n        return __model;\n      },\n\n      getView: function getView() {\n        return __view;\n      }\n    };\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Multi-Select List.\n */\n$.extend({\n  /**\n   * Setup a multi-select list:\n   */\n  MultiSelectList: options => {\n    if (!options || !options.element) return;\n    let settings = {\n      element: undefined,\n      selected: [],\n      name: $.uuid() + '[]',\n      callback: $.noop,\n      model: undefined\n    };\n    let __selection = [];\n    $.extend(settings, options);\n    let selections = settings.selected;\n    const name = settings.name;\n    const list = $(settings.element);\n    list.addClass('multi-select-list');\n    list.find('li').forEach(function(ctx, idx) {\n      let value = ctx.getAttribute(\"data-select\") !== null ? ctx.getAttribute(\"data-select\") : \"\";\n      selections.forEach(function(item) {\n        if (item.index === idx) {\n          __selection.push({\n            index: idx,\n            value: value\n          });\n        }\n      });\n\n      ctx.setAttribute('role', 'checkbox');\n      $(ctx).removeClass('selected').find('input').removeAttr('checked');\n      $(ctx).prepend(`<aside>\n        <span class=\"multi-selection-indicator\">\n          <svg width=\"30px\" height=\"30px\" viewBox=\"0 0 30 30\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"multi-select-icon\" stroke=\"#979797\">\n              <g id=\"multi-select-circle-+-multi-select-checkmark\" transform=\"translate(2.000000, 2.000000)\">\n                <circle id=\"multi-select-circle\" cx=\"13\" cy=\"13\" r=\"13\"></circle>\n                <path d=\"M4.71521456,15.9877529 L13.0000002,20.7028494 L19.977049,5.70284941\" id=\"multi-select-checkmark\"></path>\n                </g>\n              </g>\n            </g>\n          </svg>\n        </span>\n      </aside>`);\n      $(ctx).append(`<input type=\"checkbox\" name=\"${ name }\" value=\"${ value }\">`);\n      if (selections.length) {\n        selections.forEach(function(sel) {\n          if (sel === idx) {\n            ctx.setAttribute('aria-checked', 'true');\n            ctx.classList.add('selected');\n            $(ctx).find('input').prop('checked', true).attr('value', value);\n            __selection.push({\n              index: sel,\n              value: value\n            });\n          }\n        });\n\n      }\n    });\n\n    list.on('tap', 'li', function() {\n      const item = $(this);\n      if (item.hasClass('selected')) {\n        item.removeClass('selected').removeAttr('aria-checked');\n        item.find('input').removeProp('checked');\n        let dataObj = {\n          index: item.index(),\n          value: item.attr('data-select')\n        }\n        let pos = undefined;\n        __selection.forEach(function(item, idx) {\n          if (item.index === dataObj.index && item.value === dataObj.value) {\n            pos = idx;\n          }\n        });\n        __selection.splice(pos, 1);\n\n        settings.callback.apply(this, arguments);\n      } else {\n        __selection.push({\n          index: item.index(),\n          value: item.attr('data-select')\n        });\n        __selection.unique();\n        item.addClass('selected');\n        item.attr('aria-checked', true);\n        item.find('input').prop('checked', true);\n\n        settings.callback.apply(this, arguments);\n      }\n\n    });\n\n    return {\n      val: () => __selection,\n      getSelection: () => __selection\n    };\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Adjust Navbar for iOS.\n */\n$(() => {\n\n  /**\n   * Method to center H1 in Navbar.\n   * Check on widths of siblings:\n   */\n  $.extend({\n\n    /**\n     * Track whether to add a global nav for styling navbars.\n     */\n    globalNav: false,\n\n    AdjustNavbarLayout: function(screen) {\n      if (!$('link[href*=ios]')[0]) return;\n      if (document.body && document.body.hasAttribute('nocenterheader')) {\n        return;\n      }\n      screen = $(screen);\n      if (!screen[0]);\n      const h1 = screen.find('h1');\n      if (h1.hasClass('do-not-adjust')) return;\n      const siblings = h1.siblings();\n      let whichSide = undefined;\n      let oppositeSide = undefined;\n      const rtl = $('html').attr('dir') === 'rtl';\n      let amount = 0;\n      let hidden = false;\n      let visibleSibling = undefined;\n\n      const calculateLongest = function calculateLongest(a, b) {\n        let widthA = a[0].clientWidth;\n        let widthB = b[0].clientWidth;\n        if (!widthA) {\n          widthA = 0;\n          whichSide = 'margin-right';\n          oppositeSide = 'margin-left';\n          if (rtl) {\n            whichSide = 'margin-left';\n            oppositeSide = 'margin-right';\n          }\n        }\n        if (!widthB) {\n          widthB = 0;\n          whichSide = 'margin-left';\n          oppositeSide = 'margin-right';\n          if (rtl) {\n            whichSide = 'margin-right';\n            oppositeSide = 'margin-left';\n          }\n        }\n        if (widthB > widthA) {\n          whichSide = 'margin-left';\n          oppositeSide = 'margin-right';\n          if (rtl) {\n            whichSide = 'margin-right';\n            oppositeSide = 'margin-left';\n          }\n          amount = widthB - widthA;\n        } else if (widthA > widthB) {\n          whichSide = 'margin-right';\n          oppositeSide = 'margin-left';\n          if (rtl) {\n            whichSide = 'margin-left';\n            oppositeSide = 'margin-right';\n          }\n          amount = widthA - widthB;\n        } else {\n          amount = 0;\n        }\n      };\n\n      function handleOneSibling(sib) {\n        const sibling = sib || h1.siblings();\n        amount = sibling[0].clientWidth;\n        if (sibling.is(':first-child')) {\n          whichSide = 'margin-right';\n          oppositeSide = 'margin-left';\n          if (rtl) {\n            whichSide = 'margin-left';\n            oppositeSide = 'margin-right';\n          }\n        } else if (sibling.is(':last-child')) {\n          whichSide = 'margin-left';\n          oppositeSide = 'margin-right';\n          if (rtl) {\n            whichSide = 'margin-right';\n            oppositeSide = 'margin-left';\n          }\n        }\n      }\n\n      /**\n       * If one sibling:\n       */\n      if (siblings.length === 1) {\n        handleOneSibling();\n\n        /**\n         * If two siblings:\n         */\n      } else if (siblings.length === 2) {\n          siblings.forEach(function (item) {\n            if ($(item).css('display') === 'none') {\n              hidden = true;\n            } else {\n              visibleSibling = $(item);\n            }\n          });\n          if (hidden) {\n            handleOneSibling(visibleSibling);\n          } else {\n            calculateLongest(siblings.eq(0), siblings.eq(1));\n          }\n\n          /**\n           * H1 is alone:\n           */\n      } else {\n        whichSide = 'margin-left';\n        oppositeSide = 'margin-right';\n        amount = 0;\n      }\n      let props = {};\n      props[whichSide] = amount;\n      props[oppositeSide] = 0;\n      let sibwidth = 0;\n      if (siblings.size()) {\n        siblings.forEach(function (item) {\n          sibwidth += $(item)[0].clientWidth;\n        });\n      }\n      let headerWidth = screen.find('nav').width() / 2;\n      if (sibwidth + 20 > headerWidth) {\n        h1.css({\n          'margin-left': 0,\n          'margin-right': 0\n        });\n      } else {\n        h1.css(props);\n      }\n    }\n  });\n  setTimeout(function() {\n    if ($.globalNav === true && !$('#globalNav')[0]) {\n      $('body').prepend('<nav id=\"globalNav\"></nav>')\n    }\n    $('screen').forEach(function(screen) {\n      $.AdjustNavbarLayout(screen);\n    });\n  });\n});\n\n/**\n * ChocolateChip-UI Widget - Navigation Module.\n */\n\n$(() => {\n  /**\n   * Private variable to track navigation state:\n   */\n  let isNavigating = false;\n  /**\n   * get screen by id:\n   */\n  const getScreen = screen => $('#' + screen);\n\n  /**\n   * Handle state of screens:\n   */\n  const makeScreenCurrent = screen => {\n    screen = $(screen);\n    screen.addClass('current');\n    screen.removeClass('previous');\n    screen.removeClass('next');\n  };\n  const makeScreenPrevious = screen => {\n    screen = $(screen);\n    screen.removeClass('current');\n    screen.removeClass('next');\n    screen.addClass('previous');\n  };\n  const makeScreenNext = screen => {\n    screen = $(screen);\n    screen.removeClass('current');\n    screen.removeClass('previous');\n    screen.addClass('next');\n  };\n\n  $.extend({\n\n    /**\n     * Navigate to Specific Article\n     */\n    GoToScreen: destination => {\n      if ($.isNavigating) return;\n      $.isNavigating = true;\n      setTimeout(function () {\n        $.isNavigating = false;\n      }, 500);\n      $.ChuiRoutes.push(destination);\n      const currentScreen = $.screens.getCurrent();\n      const destinationScreen = function () {\n        let temp = undefined;\n        const regex = /:/img;\n        temp = regex.test(destination) ? destination.split(':')[0] : destination;\n        return getScreen(temp);\n      }();\n      if (currentScreen[0]) currentScreen[0].scrollTop = 0;\n      if (destinationScreen[0]) destinationScreen[0].scrollTop = 0;\n      makeScreenPrevious(currentScreen);\n      makeScreenCurrent(destinationScreen);\n      $.Router.dispatch(destination);\n    },\n\n    /**\n     * Navigate Back to Previous Article\n     */\n    GoBack: () => {\n      if ($.isNavigating) return;\n      $.isNavigating = true;\n      const currentScreen = $.screens.getCurrent();\n      $.ChuiRoutes.pop();\n      const destination = $.ChuiRoutes[$.ChuiRoutes.length - 1];\n      const destinationScreen = function () {\n        let temp = undefined;\n        const regex = /:/img;\n        temp = regex.test(destination) ? destination.split(':')[0] : destination;\n        return getScreen(temp);\n      }();\n      if (currentScreen[0]) currentScreen[0].scrollTop = 0;\n      if (destinationScreen[0]) destinationScreen[0].scrollTop = 0;\n      makeScreenNext(currentScreen);\n      makeScreenCurrent(destinationScreen);\n      $.Router.dispatch(destination);\n      setTimeout(function () {\n        $.isNavigating = false;\n      }, 500);\n    },\n\n    isNavigating: false,\n\n    /**\n     * Navigate Back to Non-linear Article\n     */\n    GoBackToScreen: destination => {\n      const position = $.ChuiRoutes.findIndex(function(dest) {\n        return dest = destination\n      });\n      const destinationScreen = getScreen(destination);\n      while ($.ChuiRoutes.length > position + 1) {\n        let route = $.ChuiRoutes.pop();\n        route = route.split(':')[0];\n        let screen = getScreen(route);\n        makeScreenNext(screen);\n      }\n      makeScreenCurrent(destinationScreen);\n      $.Router.dispatch(destination);\n    }\n  });\n\n  /**\n   * Initialize Back Buttons:\n   */\n  $('body').on('tap', '.back', function () {\n    if (this.hasAttribute('disabled')) return;\n    $.GoBack();\n  });\n\n  /**\n   * Handle navigation events:\n   */\n  const handleNavigationEvent = element => {\n    element = $(element);\n    if ($.isNavigating) return;\n    if (!element.hazAttr('data-goto')[0]) return;\n    if (element.closest('ul').is('.deletable')) return;\n    let destination = element.attr('data-goto');\n    if (!destination) return;\n    element.addClass('selected');\n    setTimeout(() => element.removeClass('selected'), 1000);\n    /**\n     * Handle navigation:\n     */\n    $.GoToScreen(destination);\n  };\n\n  $('body').on('tap', 'li', function () {\n    handleNavigationEvent($(this));\n  });\n  \n  $('body').on('doubletap', 'li', function () {\n    if (!$.isNavigating) {\n      handleNavigationEvent($(this));\n    }\n  });\n});\n\n/**\n * ChocolateChip-UI Widget - Paging.\n */\n$.extend({\n  /**\n   * Setup a paging control:\n   */\n  Paging: options => {\n    if (!options || !options.element) return;\n    const screen = $(options.element);\n    const pager = \n      '<div class=\"pager\">\\n\\\n        <button class=\"previous\">\\n\\\n          <svg width=\"24px\" height=\"36px\" viewBox=\"0 0 24 36\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"pagination-icons\" stroke=\"#979797\"><path d=\"M19.7729197,3 L4.25431067,17.8699971 L19.7729196,32.9558941\" id=\"page-previous\"></path></g></g></svg>\\n\\\n        </button>\\n\\\n        <button class=\"next\">\\n\\\n          <svg width=\"24px\" height=\"36px\" viewBox=\"0 0 24 36\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"pagination-icons\" stroke=\"#979797\"><path d=\"M4.08862955,3.06871359 L20.0261609,18.0528447 L4.08862956,32.9999994\" id=\"page-next\"></path></g></g></svg>\\n\\\n        </button>\\n\\\n      </div>';\n\n    $(screen).find('nav').append(pager);\n\n    const currentSection = $(screen).find('section');\n\n    const articles = function() {\n      return currentSection.find('article').length;\n    };\n    $.AdjustNavbarLayout(screen);\n\n    /**\n     * Handle paging forward:\n     */\n    const pageForward = pagerButton => {\n      if (articles() < 2) return;\n      pagerButton.prev().removeClass('selected');\n      pagerButton.addClass('selected');\n      let currentArticle = undefined;\n      if (pagerButton[0] && pagerButton[0].classList.contains('disabled')) return;\n      currentArticle = currentSection.find('article.current');\n      if (currentArticle.index() === articles() - 1) {\n        /**\n         * Start again!\n         */\n        currentArticle.removeClass('current').addClass('next');\n        currentArticle.siblings().removeClass('previous').addClass('next');\n        currentSection.find('article').eq(0).addClass('current').removeClass('previous').removeClass('next');\n      } else {\n        currentArticle.removeClass('current').addClass('previous');\n        currentArticle.next().removeClass('next').addClass('current');\n      }\n      setTimeout(function() {\n        pagerButton.removeClass('selected');\n      }, 250);\n    };\n\n    const pageBack = pagerButton => {\n      if (articles() === 1) return;\n      pagerButton.next().removeClass('selected');\n      pagerButton.addClass('selected');\n      let currentArticle = undefined;\n      currentArticle = currentSection.find('article.current');\n\n      if (currentArticle.index() === 0) {\n        currentArticle.removeClass('current');\n        currentArticle.siblings().eq(-1).addClass('current').removeClass('next');\n        currentArticle.siblings().eq(-1).siblings().removeClass('next').addClass('previous');\n      } else {\n        currentArticle.removeClass('current').addClass('next');\n        currentArticle.prev().removeClass('previous').addClass('current');\n      }\n      setTimeout(() => {\n        pagerButton.removeClass('selected');\n      }, 250);\n    };\n\n    $('.pager').on($.eventStart, 'button:last-of-type', () => {\n      pageForward($(this));\n    });\n    $('.pager').on($.eventStart, 'button:first-of-type', () => {\n      pageBack($(this));\n    });\n\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Popover.\n */\n$.extend({\n  /**\n   * Setup a popover (dropdown menu):\n   */\n  Popover: options => {\n    /**\n      id: myUniqueID,\n      title: 'Great',\n      callback: myCallback,\n    */\n    options = options || {};\n    let settings = {\n      id: $.uuid(),\n      callback: $.noop,\n      title: '',\n    };\n    $.extend(settings, options);\n    if (options && options.content) {\n      settings.content = options.content;\n    } else {\n      settings.content = '';\n    }\n    const header = `<header><h1>${ settings.title }</h1></header>`;\n    const popover = `<div class=\"popover\" id=\"${ settings.id }\">${ header }<section></section></div>`;\n    const popoverID = '#' + settings.id;\n\n    /**\n     * Calculate position of popover relative to the button that opened it:\n     */\n    const __calcPopPos = element => {\n      const offset = $(element).offset();\n      let left = offset.left;\n      let calcLeft = undefined;\n      let calcTop = undefined;\n      let popover = $(popoverID);\n      const popoverOffset = popover.offset();\n      calcLeft = popoverOffset.left;\n      calcTop = offset.top + $(element)[0].clientHeight;\n      if ((popover.width() + offset.left) > window.innerWidth) {\n        popover.css({\n          'left': ((window.innerWidth - popover.width()) - 20) + 'px',\n          'top': (calcTop) + 25 + 'px'\n        });\n      } else {\n        popover.css({\n          'left': left + 'px',\n          'top': (calcTop - 30) + 'px'\n        });\n      }\n    };\n\n    if ($('.mask')[0]) {\n      $.ClosePopover();\n      $('body').Unblock();\n      return;\n    }\n    $.Block('.5');\n    $('body').append(popover);\n    if ($('body').hasClass('themeIsAndroid')) {\n      setTimeout(() => {\n        $(popoverID).addClass('opened');\n      }, 200);\n    }\n    $(popoverID).data('triggerEl', settings.trigger);\n    $(popoverID).find('section').append(settings.content);\n    settings.callback.call(settings.callback, settings.trigger);\n    __calcPopPos(settings.trigger);\n\n  },\n\n  AlignPopover: () => {\n    let popover = $('.popover');\n    if (!popover.length) return;\n    const triggerID = popover.data('triggerEl');\n    const offset = $(triggerID).offset();\n    const left = offset.left;\n    if (($(popover).width() + offset.left) > window.innerWidth) {\n      popover.css({\n        'left': ((window.innerWidth - $(popover).width()) - 20) + 'px'\n      });\n    } else {\n      popover.css({\n        'left': left + 'px'\n      });\n    }\n  },\n\n  ClosePopover: () => {\n    $.Unblock();\n    $('.popover').css({transform: 'scaleY(0)'});\n    setTimeout(() => {\n      $('.popover').off();\n      $('.popover').remove();\n    }, 100);\n  }\n});\n\n$(() => {\n  /**\n   * Reposition popovers on window resize:\n   */\n  window.onresize = () => {\n    $.AlignPopover();\n  };\n  // const events = \"$.eventStart singletap $.eventEnd\";\n  $('body').on($.eventStart, '.mask', e => {\n    // if ($('.popover')[0]) {\n    //   if (e && e.nodeType === 1) return;\n    // } else {\n      // alert('closing popover')\n      $.ClosePopover();\n    // }\n  });\n});\n\n/**\n * ChocolateChip-UI Widget - Popup.\n */\n$.extend({\n  /**\n   * Setup  a popup dialog:\n   */\n  Popup: function(options) {\n    /**\n    options {\n      id: 'alertID',\n      title: 'Alert',\n      message: 'This is a message from me to you.',\n      cancelButton: 'Cancel',\n      continueButton: 'Go Ahead',\n      width: '100px',\n      callback: function() { // do something },\n      empty: true\n    }\n    */\n    if (!options) return;\n    let settings = {};\n    settings.id = $.uuid();\n    settings.content = true;\n    $.extend(settings, options);\n    let width = '';\n    if (settings.width) {\n      width = `style=\"width:${settings.width}px;\"`;\n    }\n\n    const id = settings.id;\n    const title = settings.title ? `<header><h1>${settings.title}</h1></header>` : '';\n    const message = settings.message ? `<p role=\"note\">${options.message}</p>` : '';\n    const cancelButton = options.cancelButton ? `<button class=\"cancel\" role=\"button\">${settings.cancelButton}</button>` : '';\n    const continueButton = settings.continueButton ? `<button class=\"continue\" role=\"button\">${settings.continueButton}</button>` : '';\n    const callback = settings.callback || $.noop;\n    let popup = undefined;\n    if (settings.empty) {\n      popup = `<div id=\"${id}\" class=\"popup\"><div ${width} class=\"dialog\" role=\"alertdialog\"></div></div>`;\n    } else {\n      popup = `<div class=\"popup\" id=\"${id}\"><div class=\"dialog\" role=\"alertdialog\"><div class=\"panel\">${title}${message}</div><footer>${cancelButton}${continueButton}</footer></div></div>`;\n    }\n    $('#' + id).remove();\n    $('body').append(popup);\n    if (settings.empty) {\n      $('.dialog').css({\n        \"display\": \"-webkit-flex\",\n        \"-webkit-justify-content\": \"center\", \n        \"-webkit-align-items\": \"center\", \n        \"display\": \"flex\",\n        \"justify-content\": \"center\", \n        \"align-items\": \"center\"\n      })\n    }\n    if (callback && continueButton) {\n      $('#' + id).find('.continue').on('tap', function () {\n        const $this = $(this);\n        if ($.isAndroid || $.isChrome) {\n          $this.addClass('selected');\n          setTimeout(function () {\n            $this.removeClass('selected');\n            $('.popup').ClosePopup();\n            callback.call(callback);\n          }, 300);\n        } else {\n          $('#' + id).ClosePopup();\n          callback.call(callback);\n        }\n      });\n      $('#' + id).find('.cancel').on('tap', function () {\n        const $this = $(this);\n        if ($.isAndroid || $.isChrome) {\n          $this.addClass('selected');\n          setTimeout(function () {\n            $this.removeClass('selected');\n            $('#' + id).ClosePopup();\n          }, 300);\n        } else {\n          $('#' + id).ClosePopup();\n        }\n      });\n    }\n\n    $('.popup').on('tap', function (e) {\n      $(this).removeClass('opened')\n    });\n  },\n\n});\n$.fn.extend({\n  /**\n   * Show Popup:\n   */\n  ShowPopup: function ShowPopup() {\n    const self = $(this);\n    self.removeClass('forPopup')\n    self.addClass('opened');\n    setTimeout(function() {\n      self.find('.popup').addClass('opened')\n    }, 0)\n  },\n\n  /**\n   * Close Popup:\n   */\n  ClosePopup: function ClosePopup() {\n    const self = $(this);\n    self.removeClass('opened');\n    self.find('.popup').removeClass('opened')\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Range Input.\n */\n$.fn.extend({\n  /**\n   * Setup a range input:\n   */\n  Range: function() {\n    if (this[0].nodeName !== 'INPUT') return;\n    let input = $(this);\n    let newPlace = undefined;\n    const width = input.width();\n    const newPoint = (input.val() - input.attr(\"min\")) / (input.attr(\"max\") - input.attr(\"min\"));\n    let offset = -1.3;\n    if (newPoint < 0) {\n      newPlace = 0;\n    } else if (newPoint > 1) {\n      newPlace = width;\n    } else {\n      newPlace = width * newPoint + offset;\n      offset -= newPoint;\n    }\n    if ($.theme === 'android') {\n      input.css({\n        'background-size': Math.round(newPlace) + 'px 3px, 100% 3px'\n      });\n    } else {\n      input.css({\n        'background-size': Math.round(newPlace) + 'px 10px'\n      });\n    }\n  }\n});\n$(() => {\n  $('input[type=range]').forEach(ctx => {\n    $(ctx).Range();\n  });\n  $('body').on('input', 'input[type=range]', function() {\n    $(this).Range();\n  });\n});\n\n/**\n * ChocolateChip-UI Widget - Router.\n */\n$.extend({\n  /**\n   * Define Router:\n   */\n  ChuiRoutes: [],\n\n  Router: () => {\n\n    return {\n      addRoute: options => {\n        if ($.type(options) === 'array') {\n          options.forEach(item => $.on(item.route, item.callback));\n        }\n      },\n\n      getFullRoute: () => $.ChuiRoutes.join('/'),\n\n      getCurrentLoc: () => {\n        const temp = this.getFullRoute().split('/');\n        return temp[temp.length - 1];\n      },\n\n      dispatch: route => {\n        let temp = undefined;\n        let id = undefined;\n        if (route.match(/\\:/)) {\n          temp = route.split(':');\n          id = temp[1];\n          route = temp[0];\n        }\n        $.send(route);\n      },\n\n      mount: function() {\n        if ($('screen').size() && !$.ChuiRoutes.length) {\n          $.ChuiRoutes.push($('screen')[0].id);\n        }\n      }\n    };\n  }\n});\n\n$.extend($.Router, {\n  dispatch: route => {\n    if (!route) return;\n    let temp = undefined;\n    let id = undefined;\n    if (route.match(/\\:/)) {\n      temp = route.split(':');\n      id = temp[1];\n      route = temp[0];\n    }\n    $.send(route, id)\n  }\n});\n\n$.extend($.ChuiRoutes, {\n  getFullRoute: function getFullRoute() {\n    return this.join('/');\n  }\n});\n\n$(() => {\n  /**\n   * Set up initial route:\n   */\n  if ($('screen').size() && !$.ChuiRoutes.length) {\n    $.ChuiRoutes.push($('screen')[0].id);\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Screens.\n */\n$(() => {\n  /**\n   * Interface for the app's screens:\n   */\n  $.extend({\n    screens: $('screen')\n  });\n  $.extend($.screens, {\n    getCurrent: function() {\n      return this.hazClass('current');\n    },\n\n    getNext: function() {\n      return this.hazClass('next');\n    },\n\n    getPrevious: function() {\n      return this.hazClass('previous');\n    }\n  });\n});\n\n/**\n * ChocolateChip-UI Widget - Segmented Buttons.\n */\n$(() => {\n  $.extend({\n    /**\n     * Setup a segmented button:\n     */\n    Segmented: function(options) {\n      if (!options || !options.element) return;\n      /**\n        options = {\n          element: '#segmentHolder'\n          labels : ['first','second','third'],\n          selected: 0,\n          callback: function() { alert('Boring!'); }\n        }\n      */\n      let settings = {\n        selected: 0,\n        callback: $.noop\n      };\n      $.extend(settings, options);\n\n      let segmented = undefined;\n      const labels = (settings.labels) ? settings.labels : [];\n      let __selection = undefined;\n      let __element = settings.element;\n\n      function createSegmentedButton() {\n        let androidSelectionIndicator = '';\n        if ($.theme = 'android') {\n          androidSelectionIndicator = '<span class=\"androidSelectionBorder\"></span>';\n        }\n        let __segmented = ['<div class=\"segmented\">'];\n        labels.forEach(function(ctx, idx) {\n          if (settings.selected === idx) {\n            __segmented.push('<button role=\"radio\" aria-checked=\"true\" class=\"selected\">');\n            __selection = idx;\n          } else {\n            __segmented.push('<button role=\"radio\">');\n          }\n\n          __segmented.push(ctx);\n          __segmented.push('</button>');\n        });\n        __segmented.push(androidSelectionIndicator + '</div>');\n        segmented = __segmented.join('');\n        $(settings.element).append(segmented);\n\n\n      }\n      createSegmentedButton();\n\n      /**\n       * For Android Material Design:\n       */\n      let androidSelectionBorder = undefined;\n      if ($.theme === 'android') {\n        androidSelectionBorder = $(__element).find('.androidSelectionBorder');\n        let selectedButton = $(__element).find('button').eq(settings.selected);\n        let width = selectedButton.width();\n        let left = selectedButton.offset().left -16;\n        if ($.dir === 'rtl') {\n          left = selectedButton.offset().left +16;\n        }\n        androidSelectionBorder.css({width: width + 'px', left: left + 'px'});\n      }\n\n      const callback = settings.callback;\n      $(__element).on('tap', '.segmented > button', function(e) {\n        let $this = $(this);\n        if (this.parentNode.classList.contains('paging')) return;\n        $this.siblings('button').removeClass('selected');\n        $this.siblings('button').removeAttr('aria-checked');\n        $this.addClass('selected');\n        __selection = $this.index();\n        __element = $(this);\n        $this.attr('aria-checked', true);\n        callback.call(this, e);\n\n        /**\n         * For Android Material Design:\n         */\n        if ($.theme === 'android') {\n          let width = $this.width();\n          let left = $this.offset().left -16;\n          if ($.dir === 'rtl') {\n            left = $this.offset().left +16;\n          }\n          androidSelectionBorder.css({width: width + 'px', left: left + 'px'});\n        }\n      });\n\n      return {\n        val: function() {\n          return {\n            index: __selection,\n            element: __element\n          }\n        },\n        getSelection: function() {\n          return {\n            index: __selection,\n            element: __element\n          }\n        }\n      }\n    }\n  });\n});\n\n/**\n * ChocolateChip-UI Widget - Select List.\n */\n$.extend({\n  /**\n   * Setup a select list:\n   */\n  SelectList: function(options) {\n    if (!options || !options.element) return;\n    let settings = {\n      element: undefined,\n      selected: undefined,\n      name: $.uuid(),\n      callback: $.noop,\n      model: undefined\n    };\n    let __selection = {};\n\n    $.extend(settings, options);\n    const name = settings.name;\n    let list = $(settings.element);\n    list.addClass('select-list');\n    list.find('li').forEach((ctx, idx) => {\n      const value = ctx.getAttribute(\"data-select\") !== null ? ctx.getAttribute(\"data-select\") : \"\";\n      ctx.setAttribute('role', 'radio');\n      $(ctx).removeClass('selected').find('input').removeAttr('checked');\n      $(ctx).append(`<aside>\n          <span class=\"selection-indicator\">\n            <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n              <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                <g id=\"selection-indicator\">\n                  <path d=\"M2,13 L9.9294326,16.8406135 L17.1937075,1.90173332\" id=\"checkmark\" stroke=\"#007AFF\" stroke-width=\"2\"></path>\n                  <circle id=\"outer-circle\" stroke=\"#007AFF\" stroke-width=\"2\" cx=\"10\" cy=\"10\" r=\"9\"></circle><circle id=\"inner-circle\" fill=\"#007AFF\" cx=\"10\" cy=\"10\" r=\"5\"></circle>\n                </g>\n              </g>\n            </svg>\n          </span>\n        </aside>`);\n      if (settings.selected === idx) {\n        ctx.setAttribute('aria-checked', 'true');\n        ctx.classList.add('selected');\n        if (!$(ctx).find('input')[0]) {\n          $(ctx).append(`<input type=\"radio\" checked=\"checked\" name=\"${ name }\" value=\"${ value }\">`);\n        } else {\n          $(ctx).find('input').prop('checked', true).attr('value', value);\n        }\n        __selection = {\n          index: settings.selected,\n          value: value\n        };\n      } else {\n        if (!$(ctx).find('input')[0]) {\n          $(ctx).append(`<input type=\"radio\" name=\"${ name }\" value=\"${ value }\">`);\n        }\n      }\n    });\n    list.on('tap', 'li', function() {\n      const item = $(this);\n      __selection = {\n        index: item.index(),\n        value: item.find('input').val()\n      };\n      item.siblings('li').removeClass('selected');\n      item.siblings('li').removeAttr('aria-checked');\n      item.siblings('li').find('input').removeProp('checked');\n      item.addClass('selected');\n      item.attr('aria-checked', true);\n      item.find('input').prop('checked', true);\n      settings.callback.apply(this, arguments);\n    });\n\n    return {\n      val: () => __selection,\n      getSelection: () => __selection\n    };\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Sheets.\n */\n$.extend({\n  /**\n   * Create a sliding sheet:\n   */\n  Sheet: options => {\n    /**\n      var options {\n        id : 'starTrek',\n        background: 'transparent',\n        handle: false,\n        slideDown: false // default is slideUp\n      }\n    */\n    if (!options) return;\n    let settings = {\n      id: $.uuid(),\n      background: '',\n      handle: true,\n      slideFrom: false\n    };\n\n    $.extend(settings, options);\n\n    if (settings.background) settings.background = ' style=\"background-color:' + settings.background + '\" ';\n    if (settings.slideFrom === 'top') {\n      settings.slideDown = ' class=\"slideDown\" ';\n    } else {\n      settings.slideFrom = '';\n    }\n    if (settings.handle === false) settings.handle = '';\n    else settings.handle = \n      `<chui-sheet-handle>\n        <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 76 27\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:butt;stroke-linejoin:butt;stroke-miterlimit:1.41421;\">\n          <g id=\"sheet-handle\" transform=\"matrix(1,0,0,1,-29.7966,-15.7797)\">\n            <path id=\"sheet-handle-path\" d=\"M36.25,26.242L67.645,34.215L98.176,25.789\" style=\"fill:none;\"/>\n          </g>\n        </svg>\n      </chui-sheet-handle>`;\n\n    const sheet = `<sheet id=\"${ settings.id }\"${ settings.slideDown }${ settings.background }>${ settings.handle }<section></section></sheet>`;\n\n    $('body').append(sheet);\n\n    $('#' + settings.id).find('chui-sheet-handle').on($.eventStart, () => {\n      $.HideSheet('#' + settings.id);\n    });\n  },\n  ShowSheet: id => {\n    let sheet = id ? id : '.sheet';\n    $('screen.current').addClass('blurred');\n    if ($.isAndroid || $.isChrome) {\n      $(sheet).css('display', 'block');\n      setTimeout(function() {\n        $(sheet).addClass('opened');\n      }, 20);\n    } else {\n      $(sheet).addClass('opened');\n    }\n  },\n  HideSheet: id => {\n    $(id).removeClass('opened');\n    $('screen.current').addClass('removeBlurSlow');\n    setTimeout(() => {\n      $('screen').removeClass('blurred');\n      $('screen').removeClass('removeBlurSlow');\n    }, 500);\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Slide Out Menu.\n */\n$.extend({\n  /**\n   * Setup a slide out menu:\n   */\n  SlideOut: () => {\n    const slideoutID = $.uuid();\n    const buttonID = $.uuid();\n    const slideOutButton = $(`<button id=\"${ buttonID }\" class=\"slide-out-button\"></button>`);\n    const slideOut = `<slideout id=\"${ slideoutID }\"><section></section></slideout>`;\n    $('body').prepend(slideOut);\n    $('body').append(slideOutButton);\n    /**\n     * Get Slide Out & Slide Out button:\n     */\n    let slideout = $(`#${ slideoutID }`);\n    let slideOutBtn = $(`#${ buttonID }`);\n\n    /**\n     * Set up state for Slide Out and screens:\n     */\n    slideout.attr('aria-hidden', true);\n    $(\"screens\").attr('aria-hidden', true);\n    $(\"screens\").eq(0).addClass('show').attr('aria-hidden', \"false\");\n\n    /**\n     * Handle Slide Out button events:\n     */\n    slideOutBtn.on('tap', function() {\n      $(this).toggleClass('focused');\n      if (slideout.hasClass('open')) {\n        slideout.removeClass('open');\n        slideout.removeAttr('aria-hidden');\n        $('button.back').removeClass('disabled').removeProp('disabled');\n        $('button.backTo').removeClass('disabled').removeProp('disabled');\n      } else {\n        slideout.addClass('open')\n        slideout.attr('aria-hidden', true);\n        $('button.back').addClass('disabled').prop('disabled', true);\n        $('button.backTo').addClass('disabled').prop('disabled', true);\n      }\n    });\n\n    $(`#${ slideoutID }`).on('tap', 'li', function() {\n      let menuItems = slideout.find('li[data-show]');\n      slideout.attr('aria-hidden', 'true')\n\n      /**\n       * Toggle Slide Out button:\n       */\n      slideOutBtn.toggleClass('focused');\n      \n      $('button.back').removeClass('disabled').removeProp('disabled');\n      $('button.backTo').removeClass('disabled').removeProp('disabled');\n\n      /**\n       * This list item shows a single screen:\n       */\n      menuItems.hazClass('selected').removeClass('selected');\n      $.screens.hazClass('show').removeClass('show').attr('aria-hidden', true);\n      const screenToShow = '#' + $(this).attr('data-show').split(':')[0];\n      /**\n       * Account for presence of navigation list state:\n       */\n      setTimeout(function() {\n        $(screenToShow)[0].classList.remove('next');\n      }, 200);\n      $(screenToShow)[0].classList.add('show')\n      $(screenToShow).attr('aria-hidden', false);\n      $('screen.current').addClass('next').removeClass('current');\n      $('screen.previous').addClass('next').removeClass('previous');\n      /**\n       * Get route to dispatch:\n       */\n      $.Router.dispatch($(this).attr('data-show'));\n      if ($.ChuiRoutes.length > 1) $.ChuiRoutes.pop()\n\n      /**\n       * Close slide out:\n       */\n      slideout.removeClass('open');\n    });\n\n    return {\n      populate: options => {\n        const slideout = $(`#${ slideoutID }`);\n        if (!slideout[0]) return;\n        if (!options) {\n          return;\n        } else {\n          slideout.find('section').append('<ul class=\"list\"></ul>');\n          let list = slideout.find('ul');\n          options.forEach(ctx => {\n            for (let key in ctx) {\n              if (key === 'header') {\n                list.append('<li class=\"menu-header\"><h2>' + ctx[key] + '</h2></li>');\n              } else {\n                list.append('<li data-show=\"' + key + '\"><h3>' + ctx[key] + '</h3></li>');\n              }\n            }\n          });\n          slideout.find('li').eq(0).addClass('selected');\n        }\n      }\n    };\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Stepper.\n */\n$.extend({\n  /**\n   * Create a stepper:\n   */\n  Stepper: options => {\n    if (!options) return;\n    if (!options.element) return;\n    if (!options.min) return;\n    if (!options.max) return;\n\n    let stepper = $(options.element);\n    const min = options.min;\n    const max = options.max;\n    const defaultValue = options.defaultValue ? options.defaultValue : options.min;\n    let increaseSymbol = '+';\n    let decreaseSymbol = '-';\n    let disabledDecrease = '';\n    let disabledIncrease = '';\n    if (min === defaultValue) {\n      disabledDecrease = ' disabled ';\n    } else if (max === defaultValue) {\n      disabledIncrease = ' disabled ';\n    }\n    const decreaseButton = '<button ' + disabledDecrease + ' class=\"decrease\"><span>-</span></button>';\n    const label = `<label>${ defaultValue }</label><input type=\"text\" value=\"${ defaultValue }\">`;\n    const increaseButton = '<button ' + disabledIncrease + '  class=\"increase\"><span>+</span></button>';\n    stepper.append(decreaseButton + label + increaseButton);\n    stepper.data('data-value', {\n      min: min,\n      max: max,\n      defaultValue: defaultValue\n    });\n\n    const increaseStepperValue = function() {\n      const currentValue = stepper.find('input').val();\n      const value = stepper.data('data-value');\n      const max = value.max;\n      let newValue = undefined;\n      newValue = parseInt(currentValue, 10) + 1;\n      stepper.find('button:first-of-type').removeAttr('disabled');\n      stepper.find('label').text(newValue);\n      stepper.find('input')[0].value = newValue;\n      if (newValue === max) {\n        $(this).attr('disabled', 'disabled');\n      }\n    };\n\n    const decreaseStepperValue = function() {\n      const currentValue = stepper.find('input').val();\n      const value = stepper.data('data-value');\n      let newValue = undefined;\n      newValue = parseInt(currentValue, 10) - 1;\n      stepper.find('button:last-of-type').removeAttr('disabled');\n      stepper.find('label').text(newValue);\n      stepper.find('input')[0].value = newValue;\n      if (newValue === min) {\n        $(this).attr('disabled', 'disabled');\n      }\n    };\n\n    stepper.find('button:last-of-type').on($.eventStart, function() {\n      increaseStepperValue.call(this, stepper);\n    });\n\n    stepper.find('button:first-of-type').on($.eventStart, function() {\n      decreaseStepperValue.call(this, stepper);\n    });\n\n    return {\n      val: () => stepper.find('input').val(),\n      getValue: () => stepper.find('input').val()\n    }\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Switches.\n */\n$.extend({\n  /**\n   * Create a switch control:\n   */\n  Switch: options => {\n    if (!options || !options.element) return;\n    let __checked = false;\n    let settings = {\n      element: undefined,\n      name: undefined,\n      value: undefined,\n      checked: false,\n      on: $.noop,\n      off: $.noop,\n      onCallback: $.noop,\n      offCallback: $.noop\n    };\n\n    $.extend(settings, options);\n    let __selection = {\n      checked: __checked,\n      value: settings.value\n    };\n\n    let __element = $(settings.element);\n    __checked = settings.checked;\n\n    /**\n     * Abrstract swipe for left-to-right and right-to-left:\n     */\n    let swipeOn = \"swiperight\";\n    let swipeOff = \"swipeleft\";\n    if (document.documentElement.dir === \"rtl\") {\n      swipeOn = \"swipeleft\";\n      swipeOff = \"swiperight\";\n    }\n\n    let checkState = settings.checked ? ' checked' : '';\n    const __switch = `<em></em><input type=\"checkbox\" name=\"${ settings.name }\" ${ checkState } value=\"${ settings.value }\">`;\n\n    __element.append(__switch);\n\n    if (__checked) {\n      __element.addClass('checked');\n      __element.attr('role', 'checkbox');\n    }\n\n    __element.on('tap', function() {\n      const checkbox = this.querySelector('input');\n      if (this.classList.contains('checked')) {\n        this.classList.remove('checked');\n        this.setAttribute('aria-checked', false);\n        checkbox.removeAttribute('checked');\n        __selection.checked = false;\n        __checked = false;\n        if (options.offCallback) {\n          settings.offCallback.call(this);\n        } else {\n          settings.off.call(this);\n        }\n      } else {\n        this.classList.add('checked');\n        checkbox.setAttribute('checked', 'checked');\n        this.setAttribute('aria-checked', true);\n        __selection.checked = true;\n        __checked = true;\n        if (options.onCallback) {\n          settings.onCallback.call(this);\n        } else {\n          settings.on.call(this);\n        }\n        \n      }\n    });\n    __element.on(swipeOn, function() {\n      const checkbox = this.querySelector('input');\n      if (this.classList.contains('checked')) {\n        this.classList.remove('checked');\n        this.setAttribute('aria-checked', false);\n        checkbox.removeAttribute('checked');\n        __selection.checked = true;\n        __checked = true;\n        if (options.onCallback) {\n          settings.onCallback.call(this);\n        } else {\n          settings.on.call(this);\n        }\n      }\n    });\n    __element.on(swipeOff, function() {\n      const checkbox = this.querySelector('input');\n      if (!this.classList.contains('checked')) {\n        this.classList.add('checked');\n        checkbox.setAttribute('checked', 'checked');\n        this.setAttribute('aria-checked', true);\n        __selection.checked = false;\n        __checked = false;\n        if (options.offCallback) {\n          settings.offCallback.call(this);\n        } else {\n          settings.off.call(this);\n        }\n      }\n    });\n\n    return {\n      val: () => __selection,\n      getValue: () => __selection\n    };\n  }\n});\n\n/**\n * ChocolateChip-UI Widget - Tab Bar.\n */\n$.extend({\n  /**\n   * Creates a Tab Bar for Toggling Articles:\n   */\n  TabBar: options => {\n    /**\n    var options = {\n      id: 'mySpecialTabbar',\n      labels: [\"Refresh\", \"Add\", \"Info\", \"Downloads\", \"Favorite\"],\n      icons: [\"refresh\", \"add\", \"info\", \"downloads\", \"favorite\"],\n      screens: [],\n      selected: 2,\n      showIcons: false // set to true for Android\n    }\n    */\n    if (!options) return;\n    let id = $.uuid();\n    let settings = {\n      selected: 0\n    };\n    $.extend(settings, options);\n    if (!settings.icons.length) {\n      settings.icons = settings.labels;\n    }\n    if (!settings.id) {\n      settings.id = id;\n    } else {\n      id = settings.id;\n    }\n\n    /**\n     * Private variable to keep track of screens:\n     */\n    let __tabbarScreens = $();\n\n    let screens = $();\n    const screenPrefix = '#';\n\n    if (settings.screens) {\n      settings.screens.forEach(function (screen) {\n        if (!/screenPrefix/img.test(screen)) {\n          __tabbarScreens.push($(screenPrefix + screen)[0]);\n          $(screenPrefix + screen).addClass('tabScreen');\n        } else {\n          __tabbarScreens.concat($(screen)[0]);\n          $(screen).addClass('tabScreen');\n        }\n      });\n    } else {\n      settings.labels.forEach(function (screen, idx) {\n        __tabbarScreens.push(screens.eq(idx));\n      });\n    }\n    let selectedScreen = undefined;\n    let androidSelectionIndicator = '';\n    if ($.theme === 'android') {\n      androidSelectionIndicator = '<span class=\"androidSelectionBorder\"></span>';\n    }\n    const showIcons = settings.showIcons ? ' class=\"showIcons\" ' : '';\n\n    /**\n     * Helper: Set Screen to Current:\n     */\n    const setToCurrent = element => {\n      $(element).removeClass('previous').removeClass('next').addClass('current');\n      $(element).attr('aria-hidden', 'false');\n    };\n\n    /**\n     * Helper: Set Screen to Next:\n     */\n    const setToNext = element => {\n      $(element).removeClass('current').addClass('next');\n      $(element).attr('aria-hidden', 'true');\n    };\n\n    /**\n     * Create tabs:\n     */\n    const makeTab = (label, icon, idx) => {\n      let tab = '<button role=\"tab\" class=\"' + icon;\n      if (settings.selected === idx) {\n        tab += ' selected';\n      }\n      tab += '\"';\n      if (settings.screens && settings.screens.length) {\n        tab += ` data-id=\"${ settings.screens[idx] }\"`;\n      }\n      tab += `><span class=\"icon\"></span><label>${ settings.labels[idx] }</label></button>`;\n      return tab;\n    };\n    /**\n     * Create tab bar:\n     */\n    let tabbarTmpl = $(`<tabbar role=\"tabpanel\"${ showIcons }>${ androidSelectionIndicator }</tabbar>`);\n    tabbarTmpl[0].id = settings.id;\n    tabbarTmpl.addClass('tabbar');\n\n    setToNext($('screen'));\n    selectedScreen = $('screen').eq(settings.selected);\n    setToCurrent(selectedScreen);\n\n    if (settings.labels.length) {\n      settings.labels.forEach(function (label, idx) {\n        tabbarTmpl.append(makeTab(label, settings.icons[idx], idx));\n      });\n    }\n\n    /**\n     * Append tabbar to page:\n     */\n    $('body').prepend(tabbarTmpl);\n\n    /**\n     * Get id of appended tab bar:\n     */\n    const tabbar = $('#' + settings.id);\n    const selectedTabButton = tabbar.find('button.selected');\n\n\n    /**\n     * Private variables to manage tab bar: \n     */\n    const __tabbarButtons = tabbar.find('button');\n    const __selectedTabbarButton = __tabbarButtons.eq(settings.selected);\n    const __selectedTabbarScreen = __tabbarScreens.eq(settings.selected);\n\n    /**\n     * For Android Material Design:\n     */\n    const androidSelectionBorder = tabbar.find('.androidSelectionBorder');\n    function handleTabSelectionForAndroid(tab) {\n      let width = $(tab).width();\n      let left = $(tab).offset().left;\n      androidSelectionBorder.css({width: width + 'px', left: left + 'px'});\n    }\n    if ($.theme === 'android') {\n      handleTabSelectionForAndroid(selectedTabButton);\n    }\n\n    /**\n     * Setup events on tabs:\n     */\n    $(() => {\n\n      $.ChuiRoutes = [];\n      $.ChuiRoutes.push(__tabbarScreens.eq(settings.selected)[0].id);\n\n      const tabbarButtons = tabbar.find('button');\n      $.Router.dispatch(__selectedTabbarScreen[0].id);\n      tabbarButtons.forEach(function (button, idx) {\n        $(button).data('chui-route', __tabbarScreens.eq(idx)[0].id);\n      });\n\n      /**\n       * Tap on tab:\n       */\n      tabbar.on('tap', 'button', function () {\n        const tab = $(this);\n        const routes = tab.data('chui-route').split('/');\n        const fullRoute = $.ChuiRoutes.join('/');\n        let navRoutesFull = tab.data('chui-route');\n        const navRoutes = navRoutesFull.split('/');\n\n        /**\n         * This tab holds a navigation list:\n         */\n        if (routes.length > 1) {\n          __tabbarButtons.hazClass('selected').data('chui-route', fullRoute);\n          __tabbarButtons.hazClass('selected').removeClass('selected').addClass('next');\n          navRoutesFull = $(this).data('chui-route');\n          /**\n           * Set this tab to `selected`:\n           */\n          tab.addClass('selected');\n          /**\n           * Deal with previously selected tab and screen:\n           */\n          $('screens').removeClass('current').addClass('next').attr('aria-hidden', true);\n          $('screens').removeClass('previous').addClass('next').attr('aria-hidden', true);\n          const navRoutes = navRoutesFull.split('/');\n          navRoutes.forEach( function(route, idx) {\n            const routing = route.split(':');\n            let whichRoute = routing[0];\n            if (idx !== routes.length - 1) {\n              $('#' + whichRoute).removeClass('next').addClass('previous').attr('aria-hidden', true);\n            } else {\n              $('#' + whichRoute).removeClass('next').addClass('current').attr('aria-hidden', false);\n            }\n          });\n          /**\n           * Take care of routes:\n           */\n          $.ChuiRoutes = routes;\n          $.Router.dispatch(routes[routes.length - 1]); \n\n          /**\n           * Handle Android ripple effect:\n           */\n          if ($.theme === 'android') {\n            handleTabSelectionForAndroid(tab);\n          }\n\n          /**\n           * This tab has a single screen:\n           */\n        } else {\n          const screen = $('screen').eq(tab.index());\n          __tabbarButtons.hazClass('selected').data('chui-route', fullRoute);\n          __tabbarButtons.hazClass('selected').removeClass('selected').addClass('next');\n          /**\n           * Deal with previously selected tab and screen:\n           */\n          $('screen').removeClass('current').addClass('next').attr('aria-hidden', true);\n          $('screen').removeClass('previous').addClass('next').attr('aria-hidden', true);\n          /**\n           * Set this tab to `selected`:\n           */\n          tab.addClass('selected');\n          if ($.theme === 'android') {\n            handleTabSelectionForAndroid(tab);\n          }\n\n          routes.forEach(function (route, idx) {\n            const routing = route.split(':');\n            const whichRoute = routing[0];\n            if (idx !== routes.length - 1) {\n              $('#' + whichRoute).removeClass('next').addClass('previous').attr('aria-hidden', true);\n            } else {\n              $('#' + whichRoute).removeClass('next').addClass('current').attr('aria-hidden', false);\n            }\n          });\n          \n          /**\n           * Take care of routes:\n           */\n          $.ChuiRoutes = routes;\n          $.Router.dispatch(fullRoute);\n        }\n      });\n    });\n\n    return {\n      getSelectedTab: () => {\n        return __selectedTabbarButton;\n      },\n\n      getSelectedScreen: () => {\n        return __selectedTabbarScreen;\n      },\n\n      setSelectedTab: (position) => {\n        tabbar.find('button').iz('.selected').removeClass('selected').addClass('next');\n        tabbar.children('button').eq(position).addClass('selected');\n        setToNext(__tabbarScreens.iz('.current')[0]);\n        setToCurrent(__tabbarScreens.eq(position)[0]);\n      }\n    };\n  }\n});\n\n/**\n * Methods to handle color management and coversion.\n */\n$.extend({\n  /** \n   * Create a color object from provided color value.\n   * Handles three values:\n   * rgb(255,0,0) -- with or without spaces\n   * #ff0000\n   * #f00\n   * The returned object has two methods:\n   * myColor.toHex()\n   * myColor.toRGB()\n   *\n   * @constructor - Must use new keyword\n   * @param {string} color - A hex or rgb value.\n   * @return {object} ChuiColor\n   */\n  ChuiColor: function(color) {\n    this.ok = false;\n    /** \n     * console.log(color)\n     * Check for hex color value.\n     * String \"#\" if found.\n     */\n    if (color.charAt(0) == '#') {\n      color = color.substr(1,6);\n    }\n    color = color.toLowerCase();\n\n\n    /**\n     * Array of color format regex patterns.\n     * These will identify the format of the color provided above.\n     * The process function converts hex color values into decimal (rgb).\n     */\n    const colorRegex = [\n      {\n        /* Example: ['rgb(123, 234, 45)', 'rgb(255, 234, 245)'] */\n        re: /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/,\n        process: function(bits) {\n          return [\n            parseInt(bits[1]),\n            parseInt(bits[2]),\n            parseInt(bits[3])\n          ];\n        }\n      },\n      {\n        /* Example: ['#00ff00', '336699'] */\n        re: /^(\\w{2})(\\w{2})(\\w{2})$/,\n        process: function(bits) {\n          return [\n            parseInt(bits[1], 16),\n            parseInt(bits[2], 16),\n            parseInt(bits[3], 16)\n          ];\n        }\n      },\n      {\n        /**\n         * Example: ['#fb0', 'f0f'] \n         */\n        re: /^(\\w{1})(\\w{1})(\\w{1})$/,\n        process: function(bits) {\n          return [\n            parseInt(bits[1] + bits[1], 16),\n            parseInt(bits[2] + bits[2], 16),\n            parseInt(bits[3] + bits[3], 16)\n          ];\n        }\n      }\n    ];\n\n    /**\n     * Check for a match using each regex. \n     */\n    for (let i = 0; i < 3; i++) {\n      const re = colorRegex[i].re;\n      const processor = colorRegex[i].process;\n      const bits = re.exec(color);\n      if (bits) {\n        const channels = processor(bits);\n        this.r = channels[0];\n        this.g = channels[1];\n        this.b = channels[2];\n        this.ok = true;\n      }\n    }\n\n    /**\n     * Validate/cleanup values. \n     */\n    this.r = (this.r < 0 || isNaN(this.r)) ? 0 : ((this.r > 255) ? 255 : this.r);\n    this.g = (this.g < 0 || isNaN(this.g)) ? 0 : ((this.g > 255) ? 255 : this.g);\n    this.b = (this.b < 0 || isNaN(this.b)) ? 0 : ((this.b > 255) ? 255 : this.b);\n\n    this.toHex = function() {\n      let r = this.r.toString(16);\n      let g = this.g.toString(16);\n      let b = this.b.toString(16);\n      if (r.length == 1) r = '0' + r;\n      if (g.length == 1) g = '0' + g;\n      if (b.length == 1) b = '0' + b;\n      return '#' + r + g + b;\n    }\n\n    this.toRGB = function() {\n      return 'rgb(' + this.r +',' + this.g + ',' + this.b + ')';\n    }\n  },\n\n  /**\n   * Make global method to get brightness of provided color.\n   * This is based on the values of YIQ color formula.\n   * This method expects a color object created by $.ChuiColor.\n   */\n  getBrightness: function(color) {\n    if ($.type(color) === 'string') color = $.ChuiColor(color);\n    return (color.r * .299) + (color.g * .587) + (color.b * .114);           \n  },\n\n  /**\n   * Function to light a color.\n   * Expects a hex value as string and an integer as percent:\n   */\n  lightenColor: function(color, percent) {  \n    const num = parseInt(color.slice(1), 16);\n    const amt = Math.round(2.55 * percent);\n    let R = (num >> 16) + amt;\n    let G = (num >> 8 & 0x00FF) + amt;\n    let B = (num & 0x0000FF) + amt;\n    return \"#\" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);\n  },\n\n  /**\n   * Function to darken a color.\n   * Expects a hex value as string and an integer as percent:\n   */\n  darkenColor: function(color, percent) {  \n    const num = parseInt(color.slice(1), 16);\n    const amt = Math.round(2.55 * percent);\n    let R = (num >> 16) - amt;\n    let G = (num >> 8 & 0x00FF) - amt;\n    let B = (num & 0x0000FF) - amt;\n    return \"#\" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);\n  },\n\n  /**\n   * Method to calculate color contrast.\n   * It expects a hex or rgb value:\n   */\n  calculateBrightness: function(color) {\n    if ($.type(color) === 'object') color = color.toHex();\n    const kolor = new $.ChuiColor(color);\n    return $.getBrightness(kolor);\n  }\n});\n\n\n/**\n * Android Ripple Effect - Triggered when Android theme is detected.\n */\n$(function() {\n\n  if ($.theme === 'android') {\n    $('body').on($.eventStart, \"button, ul.editing > li, li[data-show], li[data-select], li[data-goto], chui-sheet-handle, switch, .popover li\", function(e) {\n\n      let target = this;\n      \n      /**\n       * If item is disabled, do nothing.\n       */\n      if (target.hasAttribute(\"disabled\") || target.classList.contains(\"disabled\")) {\n        return;\n      }\n      \n      /**\n       * Get dimensions of target:\n       */\n      const offset = $(target).offset();\n      let w = Math.min(this.offsetWidth, 160);\n      let h = Math.min(this.offsetHeight, 160);\n      const d = Math.max(w, h);\n      /**\n       * Set width and height to whichever is greater:\n       */\n      w = d;\n      h = d;\n\n      const x = $.isAndroid ? e.touches[0].pageX - offset.left : e.pageX - offset.left;\n      const y = $.isAndroid ? e.touches[0].pageY - offset.top :  e.pageY - offset.top;\n\n      let navBkColor = undefined;\n      let backgroundColor = undefined;\n\n      /**\n       * Create ripple sheath and append to target:\n       */\n      const ripple = $('<ripple-sheath></ripple-sheath>');\n      $(target).append(ripple);\n\n      /**\n       * Check if button  is in navbar.\n       * If it is, get navbar background color and base ripple on that:\n       */\n\n      if (target.nodeName === 'BUTTON' && target.classList.contains('slide-out-button')) {\n        let navBkColor = $('screen > nav').eq(0).css('background-color');\n        backgroundColor = new $.ChuiColor(navBkColor).toHex();\n      } else if ((target.nodeName === 'BUTTON' && $(target).closest('nav')[0])) {\n        navBkColor = $(target).closest('nav').css('background-color');\n        backgroundColor = new $.ChuiColor(navBkColor).toHex();\n\n      } else if ((target.nodeName === 'BUTTON' && $(target).closest('toolbar')[0])) {\n        navBkColor = $(target).closest('toolbar').css('background-color');\n        backgroundColor = new $.ChuiColor(navBkColor).toHex();\n\n      } else {\n        backgroundColor = $(this).css('background-color');\n        if (!backgroundColor || backgroundColor === 'rgba(0, 0, 0, 0)') {\n          backgroundColor = '#fff'\n        }\n      }\n\n      /**\n       * Handle ripple color:\n       */\n      let rippleColor = '#fff';\n      const brightness = $.calculateBrightness(backgroundColor);\n      if (brightness > 195) {\n        rippleColor = '#aaa';\n      } else {\n        rippleColor = '#fff';\n      }\n\n      /**\n       * If ripple parent has custom color for ripple, use that:\n       */\n      if (target.dataset.rippleColor) {\n        rippleColor = target.dataset.rippleColor\n      }\n      \n      /**\n       * Create expanding ripple effect:\n       */\n      const rippleWave = $('<ripple-wave></ripple-wave>');\n      rippleWave.css({\n        \"background-color\": rippleColor,\n        width: h + 'px',\n        height: h + 'px',\n        left: x - (h/2) + 'px',\n        top: y - (h/2) + 'px',\n      });\n\n      /**\n       * Append to ripple, then delete:\n       */\n      ripple.append(rippleWave);\n      setTimeout(function() {\n        ripple.remove();\n      }, 1000);\n    });\n  }\n});\n$.extend({\n  Box: (function (globalObject) {\n    /**\n     * IndexedDB Driver:\n     */\n    (function () {\n      const self = this;\n      let indexedDB = indexedDB || globalObject.indexedDB || globalObject.webkitIndexedDB || globalObject.mozIndexedDB || globalObject.OIndexedDB || globalObject.msIndexedDB;\n      if (!indexedDB) {\n        return;\n      }\n\n      const DETECT_BLOB_SUPPORT_STORE = 'local-forage-detect-blob-support';\n      let supportsBlobs;\n      let dbContexts;\n      const toString = Object.prototype.toString;\n\n      function _binStringToArrayBuffer(bin) {\n        const length = bin.length;\n        const buf = new ArrayBuffer(length);\n        const arr = new Uint8Array(buf);\n        for (let i = 0; i < length; i++) {\n          arr[i] = bin.charCodeAt(i);\n        }\n        return buf;\n      }\n\n      function _checkBlobSupportWithoutCaching(txn) {\n        return new Promise(function(resolve) {\n          const blob = createBlob(['']);\n          txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob, 'key');\n\n          txn.onabort = function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            resolve(false);\n          };\n\n          txn.oncomplete = function() {\n            const matchedChrome = navigator.userAgent.match(/Chrome\\/(\\d+)/);\n            const matchedEdge = navigator.userAgent.match(/Edge\\//);\n            resolve(matchedEdge || !matchedChrome ||\n              parseInt(matchedChrome[1], 10) >= 43);\n          };\n        }).catch(function() {\n          return false;\n        });\n      }\n\n      function _checkBlobSupport(idb) {\n        if (typeof supportsBlobs === 'boolean') {\n          return Promise.resolve(supportsBlobs);\n        }\n        return _checkBlobSupportWithoutCaching(idb).then(function(value) {\n          supportsBlobs = value;\n          return supportsBlobs;\n        });\n      }\n\n      function _deferReadiness(dbInfo) {\n        const dbContext = dbContexts[dbInfo.name];\n        const deferredOperation = {};\n\n        deferredOperation.promise = new Promise(function(resolve) {\n          deferredOperation.resolve = resolve;\n        });\n\n        dbContext.deferredOperations.push(deferredOperation);\n\n        if (!dbContext.dbReady) {\n          dbContext.dbReady = deferredOperation.promise;\n        } else {\n          dbContext.dbReady = dbContext.dbReady.then(function() {\n            return deferredOperation.promise;\n          });\n        }\n      }\n\n      function _advanceReadiness(dbInfo) {\n        const dbContext = dbContexts[dbInfo.name];\n        const deferredOperation = dbContext.deferredOperations.pop();\n\n        if (deferredOperation) {\n          deferredOperation.resolve();\n        }\n      }\n\n      function _getConnection(dbInfo, upgradeNeeded) {\n        return new Promise(function(resolve, reject) {\n\n          if (dbInfo.db) {\n            if (upgradeNeeded) {\n              _deferReadiness(dbInfo);\n              dbInfo.db.close();\n            } else {\n              return resolve(dbInfo.db);\n            }\n          }\n\n          const dbArgs = [dbInfo.name];\n\n          if (upgradeNeeded) {\n            dbArgs.push(dbInfo.version);\n          }\n\n          const openreq = idb.open.apply(idb, dbArgs);\n\n          if (upgradeNeeded) {\n            openreq.onupgradeneeded = function(e) {\n              const db = openreq.result;\n              try {\n                db.createObjectStore(dbInfo.storeName);\n                if (e.oldVersion <= 1) {\n                  db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);\n                }\n              } catch (ex) {\n                if (ex.name === 'ConstraintError') {\n                  console.warn('The database \"' + dbInfo.name + '\"' +\n                    ' has been upgraded from version ' + e.oldVersion +\n                    ' to version ' + e.newVersion +\n                    ', but the storage \"' + dbInfo.storeName + '\" already exists.');\n                } else {\n                  throw ex;\n                }\n              }\n            };\n          }\n\n          openreq.onerror = function() {\n            reject(openreq.error);\n          };\n\n          openreq.onsuccess = function() {\n            resolve(openreq.result);\n            _advanceReadiness(dbInfo);\n          };\n        });\n      }\n\n      function _getOriginalConnection(dbInfo) {\n        return _getConnection(dbInfo, false);\n      }\n\n      function _getUpgradedConnection(dbInfo) {\n        return _getConnection(dbInfo, true);\n      }\n\n      function _isUpgradeNeeded(dbInfo, defaultVersion) {\n        if (!dbInfo.db) {\n          return true;\n        }\n\n        const isNewStore = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);\n        const isDowngrade = dbInfo.version < dbInfo.db.version;\n        const isUpgrade = dbInfo.version > dbInfo.db.version;\n\n        if (isDowngrade) {\n          if (dbInfo.version !== defaultVersion) {\n            console.warn('The database \"' + dbInfo.name + '\"' +\n              ' can\\'t be downgraded from version ' + dbInfo.db.version +\n              ' to version ' + dbInfo.version + '.');\n          }\n          dbInfo.version = dbInfo.db.version;\n        }\n\n        if (isUpgrade || isNewStore) {\n          if (isNewStore) {\n            const incVersion = dbInfo.db.version + 1;\n            if (incVersion > dbInfo.version) {\n              dbInfo.version = incVersion;\n            }\n          }\n          return true;\n        }\n        return false;\n      }\n\n      function _encodeBlob(blob) {\n        return new Promise(function(resolve, reject) {\n          const reader = new FileReader();\n          reader.onerror = reject;\n          reader.onloadend = function(e) {\n            const base64 = btoa(e.target.result || '');\n            resolve({\n              __local_forage_encoded_blob: true,\n              data: base64,\n              type: blob.type\n            });\n          };\n          reader.readAsBinaryString(blob);\n        });\n      }\n\n      function _decodeBlob(encodedBlob) {\n        const arrayBuff = _binStringToArrayBuffer(atob(encodedBlob.data));\n        return createBlob([arrayBuff], {type: encodedBlob.type});\n      }\n\n      function _isEncodedBlob(value) {\n        return value && value.__local_forage_encoded_blob;\n      }\n\n      function _fullyReady(callback) {\n        const self = this;\n\n        const promise = self._initReady().then(function() {\n          let dbContext = dbContexts[self._dbInfo.name];\n\n          if (dbContext && dbContext.dbReady) {\n            return dbContext.dbReady;\n          }\n        });\n\n        executeTwoCallbacks(promise, callback, callback);\n        return promise;\n      }\n\n      function _initStorage(options) {\n        const self = this;\n        const dbInfo = {\n          db: null\n        };\n\n        if (options) {\n          for (let i in options) {\n            dbInfo[i] = options[i];\n          }\n        }\n\n        if (!dbContexts) {\n          dbContexts = {};\n        }\n\n        let dbContext = dbContexts[dbInfo.name];\n\n        if (!dbContext) {\n          dbContext = {\n            forages: [],\n            db: null,\n            dbReady: null,\n            deferredOperations: []\n          };\n          dbContexts[dbInfo.name] = dbContext;\n        }\n\n        dbContext.forages.push(self);\n\n        if (!self._initReady) {\n          self._initReady = self.ready;\n          self.ready = _fullyReady;\n        }\n\n        const initPromises = [];\n\n        function ignoreErrors() {\n          return Promise.resolve();\n        }\n\n        for (let j = 0; j < dbContext.forages.length; j++) {\n          const forage = dbContext.forages[j];\n          if (forage !== self) {\n            initPromises.push(forage._initReady().catch(ignoreErrors));\n          }\n        }\n\n        const forages = dbContext.forages.slice(0);\n\n        return Promise.all(initPromises).then(function() {\n          dbInfo.db = dbContext.db;\n          return _getOriginalConnection(dbInfo);\n        }).then(function(db) {\n          dbInfo.db = db;\n          if (_isUpgradeNeeded(dbInfo, self._defaultConfig.version)) {\n            return _getUpgradedConnection(dbInfo);\n          }\n          return db;\n        }).then(function(db) {\n          dbInfo.db = dbContext.db = db;\n          self._dbInfo = dbInfo;\n          for (let k = 0; k < forages.length; k++) {\n            let forage = forages[k];\n            if (forage !== self) {\n              forage._dbInfo.db = dbInfo.db;\n              forage._dbInfo.version = dbInfo.version;\n            }\n          }\n        });\n      }\n\n      function get(key, callback) {\n        const self = this;\n\n        if (typeof key !== 'string') {\n          console.warn(key +\n            ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = new Promise(function(resolve, reject) {\n          self.ready().then(function() {\n            const dbInfo = self._dbInfo;\n            const store = dbInfo.db.transaction(dbInfo.storeName, 'readonly')\n              .objectStore(dbInfo.storeName);\n            const req = store.get(key);\n\n            req.onsuccess = function() {\n              let value = req.result;\n              if (value === undefined) {\n                value = null;\n              }\n              if (_isEncodedBlob(value)) {\n                value = _decodeBlob(value);\n              }\n              resolve(value);\n            };\n\n            req.onerror = function() {\n              reject(req.error);\n            };\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function each(iterator, callback) {\n        const self = this;\n\n        const promise = new Promise(function(resolve, reject) {\n          self.ready().then(function() {\n            const dbInfo = self._dbInfo;\n            const store = dbInfo.db.transaction(dbInfo.storeName, 'readonly')\n              .objectStore(dbInfo.storeName);\n\n            const req = store.openCursor();\n            let iterationNumber = 1;\n\n            req.onsuccess = function() {\n              const cursor = req.result;\n\n              if (cursor) {\n                let value = cursor.value;\n                if (_isEncodedBlob(value)) {\n                  value = _decodeBlob(value);\n                }\n                const result = iterator(value, cursor.key,\n                  iterationNumber++);\n\n                if (result !== void(0)) {\n                  resolve(result);\n                } else {\n                  cursor.continue();\n                }\n              } else {\n                resolve();\n              }\n            };\n\n            req.onerror = function() {\n              reject(req.error);\n            };\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n\n        return promise;\n      }\n\n      function set(key, value, callback) {\n        const self = this;\n\n        if (typeof key !== 'string') {\n          console.warn(key +\n            ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = new Promise(function(resolve, reject) {\n          let dbInfo;\n          self.ready().then(function() {\n            dbInfo = self._dbInfo;\n            if (toString.call(value) === '[object Blob]') {\n              return _checkBlobSupport(dbInfo.db).then(function(blobSupport) {\n                if (blobSupport) {\n                  return value;\n                }\n                return _encodeBlob(value);\n              });\n            }\n            return value;\n          }).then(function(value) {\n            const transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');\n            const store = transaction.objectStore(dbInfo.storeName);\n\n            if (value === null) {\n              value = undefined;\n            }\n\n            transaction.oncomplete = function() {\n              if (value === undefined) {\n                value = null;\n              }\n\n              resolve(value);\n            };\n            transaction.onabort = transaction.onerror = function() {\n              const err = req.error ? req.error : req.transaction.error;\n              reject(err);\n            };\n\n            const req = store.put(value, key);\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function remove(key, callback) {\n        const self = this;\n\n        if (typeof key !== 'string') {\n          console.warn(key +\n            ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = new Promise(function(resolve, reject) {\n          self.ready().then(function() {\n            const dbInfo = self._dbInfo;\n            const transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');\n            const store = transaction.objectStore(dbInfo.storeName);\n            const req = store.delete(key);\n            transaction.oncomplete = function() {\n              resolve();\n            };\n\n            transaction.onerror = function() {\n              reject(req.error);\n            };\n\n            transaction.onabort = function() {\n              const err = req.error ? req.error : req.transaction.error;\n              reject(err);\n            };\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function clear(callback) {\n        const self = this;\n\n        const promise = new Promise(function(resolve, reject) {\n          self.ready().then(function() {\n            const dbInfo = self._dbInfo;\n            const transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');\n            const store = transaction.objectStore(dbInfo.storeName);\n            const req = store.clear();\n\n            transaction.oncomplete = function() {\n              resolve();\n            };\n\n            transaction.onabort = transaction.onerror = function() {\n              const err = req.error ? req.error : req.transaction.error;\n              reject(err);\n            };\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function length(callback) {\n        const self = this;\n\n        const promise = new Promise(function(resolve, reject) {\n          self.ready().then(function() {\n            const dbInfo = self._dbInfo;\n            const store = dbInfo.db.transaction(dbInfo.storeName, 'readonly')\n              .objectStore(dbInfo.storeName);\n            const req = store.count();\n\n            req.onsuccess = function() {\n              resolve(req.result);\n            };\n\n            req.onerror = function() {\n              reject(req.error);\n            };\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function key(n, callback) {\n        const self = this;\n\n        const promise = new Promise(function(resolve, reject) {\n          if (n < 0) {\n            resolve(null);\n\n            return;\n          }\n\n          self.ready().then(function() {\n            const dbInfo = self._dbInfo;\n            const store = dbInfo.db.transaction(dbInfo.storeName, 'readonly')\n              .objectStore(dbInfo.storeName);\n\n            let advanced = false;\n            const req = store.openCursor();\n            req.onsuccess = function() {\n              const cursor = req.result;\n              if (!cursor) {\n                resolve(null);\n\n                return;\n              }\n\n              if (n === 0) {\n                resolve(cursor.key);\n              } else {\n                if (!advanced) {\n                  advanced = true;\n                  cursor.advance(n);\n                } else {\n                  resolve(cursor.key);\n                }\n              }\n            };\n\n            req.onerror = function() {\n              reject(req.error);\n            };\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function keys(callback) {\n        const self = this;\n\n        const promise = new Promise(function(resolve, reject) {\n          self.ready().then(function() {\n            const dbInfo = self._dbInfo;\n            const store = dbInfo.db.transaction(dbInfo.storeName, 'readonly')\n              .objectStore(dbInfo.storeName);\n\n            const req = store.openCursor();\n            const keys = [];\n\n            req.onsuccess = function() {\n              const cursor = req.result;\n\n              if (!cursor) {\n                resolve(keys);\n                return;\n              }\n\n              keys.push(cursor.key);\n              cursor.continue();\n            };\n\n            req.onerror = function() {\n              reject(req.error);\n            };\n          }).catch(reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      const asyncStorage = {\n        _driver: 'asyncStorage',\n        _initStorage: _initStorage,\n        each: each,\n        get: get,\n        set: set,\n        remove: remove,\n        clear: clear,\n        length: length,\n        key: key,\n        keys: keys\n      };\n\n      /**\n       * Export driver:\n       */\n      this.asyncStorage = asyncStorage;\n      globalObject.asyncStorage = asyncStorage;\n    }).call(window);\n\n    /**\n     * WebSQL Driver:\n     */\n    (function () {\n      const globalObject = this;\n      const openDatabase = this.openDatabase;\n      if (!openDatabase) {\n        return;\n      }\n\n      function __initStorage(options) {\n        const self = this;\n        let dbInfo = {\n          db: null\n        };\n\n        if (options) {\n          for (let i in options) {\n            dbInfo[i] = typeof options[i] !== 'string' ? options[i].toString() : options[i];\n          }\n        }\n\n        const dbInfoPromise = new Promise(function (resolve, reject) {\n          try {\n            dbInfo.db = openDatabase(dbInfo.name, String(dbInfo.version), dbInfo.description, dbInfo.size);\n          } catch (e) {\n            return self.setDriver(self.LOCALSTORAGE).then(function () {\n              return self.__initStorage(options);\n            }).then(resolve)['catch'](reject);\n          }\n\n          dbInfo.db.transaction(function (t) {\n            t.executeSql('CREATE TABLE IF NOT EXISTS ' + dbInfo.boxName + ' (id INTEGER PRIMARY KEY, key unique, value)', [], function () {\n              self.__dbInfo = dbInfo;\n              resolve();\n            }, function (t, error) {\n              reject(error);\n            });\n          });\n        });\n\n        return new Promise(function (resolve, reject) {\n          resolve(chuiBoxSerializer);\n        }).then(function (lib) {\n          dbInfo.serializer = lib;\n          return dbInfoPromise;\n        });\n      }\n\n      function get(key, callback) {\n        const self = this;\n        if (typeof key !== 'string') {\n          globalObject.console.warn(key + ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            const dbInfo = self.__dbInfo;\n            dbInfo.db.transaction(function (t) {\n              t.executeSql('SELECT * FROM ' + dbInfo.boxName + ' WHERE key = ? LIMIT 1', [key], function (t, results) {\n                let result = results.rows.length ? results.rows.item(0).value : null;\n                if (result) {\n                  result = dbInfo.serializer.deserialize(result);\n                }\n                resolve(result);\n              }, \n              function (t, error) {\n                reject(error);\n              });\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function each(iterator, callback) {\n        const self = this;\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            const dbInfo = self.__dbInfo;\n\n            dbInfo.db.transaction(function (t) {\n              t.executeSql('SELECT * FROM ' + dbInfo.boxName, [], function (t, results) {\n                const rows = results.rows;\n                const length = rows.length;\n\n                for (let i = 0; i < length; i++) {\n                  const item = rows.item(i);\n                  let result = item.value;\n                  if (result) {\n                    result = dbInfo.serializer.deserialize(result);\n                  }\n                  result = iterator(result, item.key, i + 1);\n                  if (result !== undefined) {\n                    resolve(result);\n                    return;\n                  }\n                }\n\n                resolve();\n              }, function (t, error) {\n                reject(error);\n              });\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function set(key, value, callback) {\n        const self = this;\n        if (typeof key !== 'string') {\n          globalObject.console.warn(key + ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            if (value === undefined) {\n              value = null;\n            }\n\n            const originalValue = value;\n            const dbInfo = self.__dbInfo;\n\n            dbInfo.serializer.serialize(value, function (value, error) {\n              if (error) {\n                reject(error);\n              } else {\n                dbInfo.db.transaction(function (t) {\n                  t.executeSql('INSERT OR REPLACE INTO ' + dbInfo.boxName + ' (key, value) VALUES (?, ?)', [key, value], function () {\n                    resolve(originalValue);\n                  }, function (t, error) {\n                    reject(error);\n                  });\n                }, function (sqlError) {\n                  if (sqlError.code === sqlError.QUOTA_ERR) {\n                    reject(sqlError);\n                  }\n                });\n              }\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function remove(key, callback) {\n        const self = this;\n        if (typeof key !== 'string') {\n          globalObject.console.warn(key + ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            const dbInfo = self.__dbInfo;\n            dbInfo.db.transaction(function (t) {\n              t.executeSql('DELETE FROM ' + dbInfo.boxName + ' WHERE key = ?', [key], function () {\n                resolve();\n              }, function (t, error) {\n\n                reject(error);\n              });\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function clear(callback) {\n        const self = this;\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            const dbInfo = self.__dbInfo;\n            dbInfo.db.transaction(function (t) {\n              t.executeSql('DELETE FROM ' + dbInfo.boxName, [], function () {\n                resolve();\n              }, function (t, error) {\n                reject(error);\n              });\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function size(callback) {\n        const self = this;\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            const dbInfo = self.__dbInfo;\n            dbInfo.db.transaction(function (t) {\n              t.executeSql('SELECT COUNT(key) as c FROM ' + dbInfo.boxName, [], function (t, results) {\n                const result = results.rows.item(0).c;\n\n                resolve(result);\n              }, function (t, error) {\n\n                reject(error);\n              });\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function key(n, callback) {\n        const self = this;\n\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            const dbInfo = self.__dbInfo;\n            dbInfo.db.transaction(function (t) {\n              t.executeSql('SELECT key FROM ' + dbInfo.boxName + ' WHERE id = ? LIMIT 1', [n + 1], function (t, results) {\n                const result = results.rows.length ? results.rows.item(0).key : null;\n                resolve(result);\n              }, function (t, error) {\n                reject(error);\n              });\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function keys(callback) {\n        const self = this;\n        const promise = new Promise(function (resolve, reject) {\n          self.ready().then(function () {\n            const dbInfo = self.__dbInfo;\n            dbInfo.db.transaction(function (t) {\n              t.executeSql('SELECT key FROM ' + dbInfo.boxName, [], function (t, results) {\n                const keys = [];\n\n                for (var i = 0; i < results.rows.length; i++) {\n                  keys.push(results.rows.item(i).key);\n                }\n                resolve(keys);\n\n              }, function (t, error) {\n                reject(error);\n              });\n            });\n          })['catch'](reject);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function executeCallback(promise, callback) {\n        if (callback) {\n          promise.then(function (result) {\n            callback(null, result);\n          }, function (error) {\n            callback(error);\n          });\n        }\n      }\n\n      const webSQLStorage = {\n        __driver: 'webSQLStorage',\n        __initStorage: __initStorage,\n        each: each,\n        get: get,\n        set: set,\n        remove: remove,\n        clear: clear,\n        size: size,\n        key: key,\n        keys: keys\n      };\n\n      /**\n       * Export driver:\n       */\n      this.webSQLStorage = webSQLStorage;\n      globalObject.webSQLStorage = webSQLStorage;\n    }).call(window);\n\n    /**\n     * localStorage Driver:\n     */\n    (function () {\n      const globalObject = this;\n      let localStorage = null;\n      try {\n        if (!this.localStorage || !('set' in this.localStorage)) {\n          return;\n        }\n        localStorage = this.localStorage;\n      } catch (e) {\n        return;\n      }\n\n      function __initStorage(options) {\n        const self = this;\n        const dbInfo = {};\n        if (options) {\n          for (var i in options) {\n            dbInfo[i] = options[i];\n          }\n        }\n\n        dbInfo.keyPrefix = dbInfo.name + '/';\n\n        if (dbInfo.boxName !== self.__defaultConfig.boxName) {\n          dbInfo.keyPrefix += dbInfo.boxName + '/';\n        }\n\n        self.__dbInfo = dbInfo;\n\n        return new Promise(function (resolve, reject) {\n          resolve(chuiBoxSerializer);\n        }).then(function (lib) {\n          dbInfo.serializer = lib;\n          return Promise.resolve();\n        });\n      }\n\n      function clear(callback) {\n        const self = this;\n        const promise = self.ready().then(function () {\n          const keyPrefix = self.__dbInfo.keyPrefix;\n\n          for (let i = localStorage.length - 1; i >= 0; i--) {\n            const _key = localStorage.key(i);\n\n            if (_key.indexOf(keyPrefix) === 0) {\n              localStorage.remove(_key);\n            }\n          }\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function get(key, callback) {\n        const self = this;\n        if (typeof key !== 'string') {\n          globalObject.console.warn(key + ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = self.ready().then(function () {\n          const dbInfo = self.__dbInfo;\n          let result = localStorage.get(dbInfo.keyPrefix + key);\n          if (result) {\n            result = dbInfo.serializer.deserialize(result);\n          }\n          return result;\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function each(iterator, callback) {\n        const self = this;\n\n        const promise = self.ready().then(function () {\n          const dbInfo = self.__dbInfo;\n          const keyPrefix = dbInfo.keyPrefix;\n          const keyPrefixLength = keyPrefix.length;\n          const length = localStorage.length;\n          let iterationNumber = 1;\n\n          for (var i = 0; i < length; i++) {\n            const _key2 = localStorage.key(i);\n            if (_key2.indexOf(keyPrefix) !== 0) {\n              continue;\n            }\n            let value = localStorage.get(_key2);\n            if (value) {\n              value = dbInfo.serializer.deserialize(value);\n            }\n\n            value = iterator(value, _key2.substring(keyPrefixLength), iterationNumber++);\n            if (value !== undefined) {\n              return value;\n            }\n          }\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function key(n, callback) {\n        const self = this;\n        const promise = self.ready().then(function () {\n          const dbInfo = self.__dbInfo;\n          let result = undefined;\n          try {\n            result = localStorage.key(n);\n          } catch (error) {\n            result = null;\n          }\n\n          if (result) {\n            result = result.substring(dbInfo.keyPrefix.length);\n          }\n          return result;\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function keys(callback) {\n        const self = this;\n        const promise = self.ready().then(function () {\n          const dbInfo = self.__dbInfo;\n          const length = localStorage.length;\n          const keys = [];\n\n          for (let i = 0; i < length; i++) {\n            if (localStorage.key(i).indexOf(dbInfo.keyPrefix) === 0) {\n              keys.push(localStorage.key(i).substring(dbInfo.keyPrefix.length));\n            }\n          }\n          return keys;\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function size(callback) {\n        const self = this;\n        const promise = self.keys().then(function (keys) {\n          return keys.length;\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function remove(key, callback) {\n        const self = this;\n        if (typeof key !== 'string') {\n          globalObject.console.warn(key + ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = self.ready().then(function () {\n          const dbInfo = self.__dbInfo;\n          localStorage.remove(dbInfo.keyPrefix + key);\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function set(key, value, callback) {\n        const self = this;\n        if (typeof key !== 'string') {\n          globalObject.console.warn(key + ' used as a key, but it is not a string.');\n          key = String(key);\n        }\n\n        const promise = self.ready().then(function () {\n          if (value === undefined) {\n            value = null;\n          }\n          const originalValue = value;\n\n          return new Promise(function (resolve, reject) {\n            const dbInfo = self.__dbInfo;\n            dbInfo.serializer.serialize(value, function (value, error) {\n              if (error) {\n                reject(error);\n              } else {\n                try {\n                  localStorage.set(dbInfo.keyPrefix + key, value);\n                  resolve(originalValue);\n                } catch (e) {\n                  if (e.name === 'QuotaExceededError' || e.name === 'NS_ERROR_DOM_QUOTA_REACHED') {\n                    reject(e);\n                  }\n                  reject(e);\n                }\n              }\n            });\n          });\n        });\n\n        executeCallback(promise, callback);\n        return promise;\n      }\n\n      function executeCallback(promise, callback) {\n        if (callback) {\n          promise.then(function (result) {\n            callback(null, result);\n          }, function (error) {\n            callback(error);\n          });\n        }\n      }\n\n      const localStorageWrapper = {\n        __driver: 'localStorageWrapper',\n        __initStorage: __initStorage,\n        each: each,\n        get: get,\n        set: set,\n        remove: remove,\n        clear: clear,\n        size: size,\n        key: key,\n        keys: keys\n      };\n\n      /**\n       * Export driver:\n       */\n      this.localStorageWrapper = localStorageWrapper;\n      window.localStorageWrapper = localStorageWrapper;\n    }).call(window);\n\n    /**\n     * Blob Serializer:\n     */\n    (function () {\n      const BASE_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n      const BLOB_TYPE_PREFIX = '~~chui_box_type~';\n      const BLOB_TYPE_PREFIX_REGEX = /^~~chui_box_type~([^~]+)~/;\n      const SERIALIZED_MARKER = '__lfsc__:';\n      const SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;\n      const TYPE_ARRAYBUFFER = 'arbf';\n      const TYPE_BLOB = 'blob';\n      const TYPE_INT8ARRAY = 'si08';\n      const TYPE_UINT8ARRAY = 'ui08';\n      const TYPE_UINT8CLAMPEDARRAY = 'uic8';\n      const TYPE_INT16ARRAY = 'si16';\n      const TYPE_INT32ARRAY = 'si32';\n      const TYPE_UINT16ARRAY = 'ur16';\n      const TYPE_UINT32ARRAY = 'ui32';\n      const TYPE_FLOAT32ARRAY = 'fl32';\n      const TYPE_FLOAT64ARRAY = 'fl64';\n      const TYPE_SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;\n      const globalObject = this;\n\n      function __createBlob(parts, properties) {\n        parts = parts || [];\n        properties = properties || {};\n\n        try {\n          return new Blob(parts, properties);\n        } catch (err) {\n          if (err.name !== 'TypeError') {\n            throw err;\n          }\n\n          const BlobBuilder = globalObject.BlobBuilder || globalObject.MSBlobBuilder || globalObject.MozBlobBuilder || globalObject.WebKitBlobBuilder;\n\n          const builder = new BlobBuilder();\n          for (let i = 0; i < parts.length; i += 1) {\n            builder.append(parts[i]);\n          }\n          return builder.getBlob(properties.type);\n        }\n      }\n\n      function serialize(value, callback) {\n        let valueString = '';\n        if (value) {\n          valueString = value.toString();\n        }\n\n        if (value && (value.toString() === '[object ArrayBuffer]' || value.buffer && value.buffer.toString() === '[object ArrayBuffer]')) {\n          let buffer = undefined;\n          let marker = SERIALIZED_MARKER;\n\n          if (value instanceof ArrayBuffer) {\n            buffer = value;\n            marker += TYPE_ARRAYBUFFER;\n          } else {\n            buffer = value.buffer;\n\n            if (valueString === '[object Int8Array]') {\n              marker += TYPE_INT8ARRAY;\n            } else if (valueString === '[object Uint8Array]') {\n              marker += TYPE_UINT8ARRAY;\n            } else if (valueString === '[object Uint8ClampedArray]') {\n              marker += TYPE_UINT8CLAMPEDARRAY;\n            } else if (valueString === '[object Int16Array]') {\n              marker += TYPE_INT16ARRAY;\n            } else if (valueString === '[object Uint16Array]') {\n              marker += TYPE_UINT16ARRAY;\n            } else if (valueString === '[object Int32Array]') {\n              marker += TYPE_INT32ARRAY;\n            } else if (valueString === '[object Uint32Array]') {\n              marker += TYPE_UINT32ARRAY;\n            } else if (valueString === '[object Float32Array]') {\n              marker += TYPE_FLOAT32ARRAY;\n            } else if (valueString === '[object Float64Array]') {\n              marker += TYPE_FLOAT64ARRAY;\n            } else {\n              callback(new Error('Failed to get type for BinaryArray'));\n            }\n          }\n\n          callback(marker + bufferToString(buffer));\n        } else if (valueString === '[object Blob]') {\n          const fileReader = new FileReader();\n\n          fileReader.onload = function () {\n            const str = BLOB_TYPE_PREFIX + value.type + '~' + bufferToString(this.result);\n            callback(SERIALIZED_MARKER + TYPE_BLOB + str);\n          };\n\n          fileReader.readAsArrayBuffer(value);\n        } else {\n          try {\n            callback(JSON.stringify(value));\n          } catch (e) {\n            console.error(\"Couldn't convert value into a JSON string: \", value);\n\n            callback(null, e);\n          }\n        }\n      }\n\n      function deserialize(value) {\n        if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {\n          return JSON.parse(value);\n        }\n        let serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);\n        const type = value.substring(SERIALIZED_MARKER_LENGTH, TYPE_SERIALIZED_MARKER_LENGTH);\n        let blobType = undefined;\n        if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {\n          const matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);\n          blobType = matcher[1];\n          serializedString = serializedString.substring(matcher[0].length);\n        }\n        const buffer = stringToBuffer(serializedString);\n\n        switch (type) {\n          case TYPE_ARRAYBUFFER:\n            return buffer;\n          case TYPE_BLOB:\n            return __createBlob([buffer], {\n              type: blobType\n            });\n          case TYPE_INT8ARRAY:\n            return new Int8Array(buffer);\n          case TYPE_UINT8ARRAY:\n            return new Uint8Array(buffer);\n          case TYPE_UINT8CLAMPEDARRAY:\n            return new Uint8ClampedArray(buffer);\n          case TYPE_INT16ARRAY:\n            return new Int16Array(buffer);\n          case TYPE_UINT16ARRAY:\n            return new Uint16Array(buffer);\n          case TYPE_INT32ARRAY:\n            return new Int32Array(buffer);\n          case TYPE_UINT32ARRAY:\n            return new Uint32Array(buffer);\n          case TYPE_FLOAT32ARRAY:\n            return new Float32Array(buffer);\n          case TYPE_FLOAT64ARRAY:\n            return new Float64Array(buffer);\n          default:\n            throw new Error('Unkown type: ' + type);\n        }\n      }\n\n      function stringToBuffer(serializedString) {\n        let bufferLength = serializedString.length * 0.75;\n        const len = serializedString.length;\n        let i = undefined;\n        let p = 0;\n        var encoded1 = undefined,\n            encoded2 = undefined,\n            encoded3 = undefined,\n            encoded4 = undefined;\n        if (serializedString[serializedString.length - 1] === '=') {\n          bufferLength--;\n          if (serializedString[serializedString.length - 2] === '=') {\n            bufferLength--;\n          }\n        }\n        const buffer = new ArrayBuffer(bufferLength);\n        const bytes = new Uint8Array(buffer);\n\n        for (i = 0; i < len; i += 4) {\n          encoded1 = BASE_CHARS.indexOf(serializedString[i]);\n          encoded2 = BASE_CHARS.indexOf(serializedString[i + 1]);\n          encoded3 = BASE_CHARS.indexOf(serializedString[i + 2]);\n          encoded4 = BASE_CHARS.indexOf(serializedString[i + 3]);\n\n          /*jslint bitwise: true */\n          bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n          bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n          bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n        }\n        return buffer;\n      }\n\n      function bufferToString(buffer) {\n        const bytes = new Uint8Array(buffer);\n        let base64String = '';\n        let i = undefined;\n\n        for (i = 0; i < bytes.length; i += 3) {\n          /*jslint bitwise: true */\n          base64String += BASE_CHARS[bytes[i] >> 2];\n          base64String += BASE_CHARS[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];\n          base64String += BASE_CHARS[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];\n          base64String += BASE_CHARS[bytes[i + 2] & 63];\n        }\n        if (bytes.length % 3 === 2) {\n          base64String = base64String.substring(0, base64String.length - 1) + '=';\n        } else if (bytes.length % 3 === 1) {\n          base64String = base64String.substring(0, base64String.length - 2) + '==';\n        }\n        return base64String;\n      }\n\n      const chuiBoxSerializer = {\n        serialize: serialize,\n        deserialize: deserialize,\n        stringToBuffer: stringToBuffer,\n        bufferToString: bufferToString\n      };\n\n      /**\n       * Export driver:\n       */\n      this.chuiBoxSerializer = chuiBoxSerializer;\n      window.chuiBoxSerializer = chuiBoxSerializer;\n    }).call(window);\n\n    /**\n     * ChocolateChip-UI Box Implementation:\n     */\n    const CustomDrivers = {};\n    const DriverType = {\n      INDEXEDDB: 'asyncStorage',\n      LOCALSTORAGE: 'localStorageWrapper',\n      WEBSQL: 'webSQLStorage'\n    };\n    const DefaultDriverOrder = [DriverType.INDEXEDDB, DriverType.WEBSQL, DriverType.LOCALSTORAGE];\n    const LibraryMethods = ['clear', 'get', 'each', 'key', 'keys', 'size', 'remove', 'set'];\n\n    const DefaultConfig = {\n      description: '',\n      driver: DefaultDriverOrder.slice(),\n      name: 'chuibox',\n      size: 4980736,\n      boxName: 'keyvaluepairs',\n      version: 1.0\n    };\n\n    const driverSupport = (function (self) {\n      const indexedDB = indexedDB || self.indexedDB || self.webkitIndexedDB || self.mozIndexedDB || self.OIndexedDB || self.msIndexedDB;\n      const result = {};\n      result[DriverType.WEBSQL] = !!self.openDatabase;\n      result[DriverType.INDEXEDDB] = !!(function () {\n        if (typeof self.openDatabase !== 'undefined' && self.navigator && self.navigator.userAgent && /Safari/.test(self.navigator.userAgent) && !/Chrome/.test(self.navigator.userAgent)) {\n          return false;\n        }\n        try {\n          return indexedDB && typeof indexedDB.open === 'function' && typeof self.IDBKeyRange !== 'undefined';\n        } catch (e) {\n          return false;\n        }\n      })();\n\n      result[DriverType.LOCALSTORAGE] = !!(function () {\n        try {\n          return self.localStorage && 'set' in self.localStorage && self.localStorage.set;\n        } catch (e) {\n          return false;\n        }\n      })();\n\n      return result;\n    })(window);\n\n    const isArray = Array.isArray || function (arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    };\n\n    function callWhenReady(chuiBoxInstance, libraryMethod) {\n      chuiBoxInstance[libraryMethod] = function () {\n        const __args = arguments;\n        return chuiBoxInstance.ready().then(function () {\n          return chuiBoxInstance[libraryMethod].apply(chuiBoxInstance, __args);\n        });\n      };\n    }\n\n    function extend() {\n      for (let i = 1; i < arguments.length; i++) {\n        const arg = arguments[i];\n\n        if (arg) {\n          for (let key in arg) {\n            if (arg.hasOwnProperty(key)) {\n              if (isArray(arg[key])) {\n                arguments[0][key] = arg[key].slice();\n              } else {\n                arguments[0][key] = arg[key];\n              }\n            }\n          }\n        }\n      }\n\n      return arguments[0];\n    }\n\n    function isLibraryDriver(driverName) {\n      for (let driver in DriverType) {\n        if (DriverType.hasOwnProperty(driver) && DriverType[driver] === driverName) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    const ChuiBox = (function () {\n      function ChuiBox(options) {\n\n        this.INDEXEDDB = DriverType.INDEXEDDB;\n        this.LOCALSTORAGE = DriverType.LOCALSTORAGE;\n        this.WEBSQL = DriverType.WEBSQL;\n\n        this.__defaultConfig = extend({}, DefaultConfig);\n        this.__config = extend({}, this.__defaultConfig, options);\n        this.__driverSet = null;\n        this.__initDriver = null;\n        this.__ready = false;\n        this.__dbInfo = null;\n\n        this.__wrapLibraryMethodsWithReady();\n        this.setDriver(this.__config.driver);\n      }\n\n      ChuiBox.prototype.config = function (options) {\n        if (typeof options === 'object') {\n          if (this.__ready) {\n            return new Error(\"Can't call config() after chuibox \" + 'has been used.');\n          }\n          for (let i in options) {\n            if (i === 'boxName') {\n              options[i] = options[i].replace(/\\W/g, '_');\n            }\n\n            this.__config[i] = options[i];\n          }\n          if ('driver' in options && options.driver) {\n            this.setDriver(this.__config.driver);\n          }\n\n          return true;\n        } else if (typeof options === 'string') {\n          return this.__config[options];\n        } else {\n          return this.__config;\n        }\n      };\n\n      ChuiBox.prototype.defineDriver = function (driverObject, callback, errorCallback) {\n        const promise = new Promise(function (resolve, reject) {\n          try {\n            const _ret = (function () {\n              const driverName = driverObject.__driver;\n              const complianceError = new Error('Custom driver not compliant; see ChocolateChip-UI Box documentation');\n              const namingError = new Error('Custom driver name already in use: ' + driverObject.__driver);\n              if (!driverObject.__driver) {\n                reject(complianceError);\n                return {\n                  v: undefined\n                };\n              }\n              if (isLibraryDriver(driverObject.__driver)) {\n                reject(namingError);\n                return {\n                  v: undefined\n                };\n              }\n\n              const customDriverMethods = LibraryMethods.concat('__initStorage');\n              for (let i = 0; i < customDriverMethods.length; i++) {\n                const customDriverMethod = customDriverMethods[i];\n                if (!customDriverMethod || !driverObject[customDriverMethod] || typeof driverObject[customDriverMethod] !== 'function') {\n                  reject(complianceError);\n                  return {\n                    v: undefined\n                  };\n                }\n              }\n\n              let supportPromise = Promise.resolve(true);\n              if ('__support' in driverObject) {\n                if (driverObject.__support && typeof driverObject.__support === 'function') {\n                  supportPromise = driverObject.__support();\n                } else {\n                  supportPromise = Promise.resolve(!!driverObject.__support);\n                }\n              }\n\n              supportPromise.then(function (supportResult) {\n                driverSupport[driverName] = supportResult;\n                CustomDrivers[driverName] = driverObject;\n                resolve();\n              }, reject);\n            })();\n\n            if (typeof _ret === 'object') return _ret.v;\n          } catch (e) {\n            reject(e);\n          }\n        });\n\n        promise.then(callback, errorCallback);\n        return promise;\n      };\n\n      ChuiBox.prototype.driver = function () {\n        return this.__driver || null;\n      };\n\n      ChuiBox.prototype.getDriver = function (driverName, callback, errorCallback) {\n        const self = this;\n        const getDriverPromise = (function () {\n          if (isLibraryDriver(driverName)) {\n            switch (driverName) {\n              case self.INDEXEDDB:\n                return new Promise(function (resolve, reject) {\n                  resolve(asyncStorage);\n                });\n              case self.LOCALSTORAGE:\n                return new Promise(function (resolve, reject) {\n                  resolve(localStorageWrapper);\n                });\n              case self.WEBSQL:\n                return new Promise(function (resolve, reject) {\n                  resolve(webSQLStorage);\n                });\n            }\n          } else if (CustomDrivers[driverName]) {\n            console.log('Using: ' + driverName);\n            return Promise.resolve(CustomDrivers[driverName]);\n          }\n\n          return Promise.reject(new Error('Driver not found.'));\n        })();\n\n        getDriverPromise.then(callback, errorCallback);\n        return getDriverPromise;\n      };\n\n      ChuiBox.prototype.getSerializer = function (callback) {\n        const serializerPromise = new Promise(function (resolve, reject) {\n          resolve(chuiBoxSerializer);\n        });\n        if (callback && typeof callback === 'function') {\n          serializerPromise.then(function (result) {\n            callback(result);\n          });\n        }\n        return serializerPromise;\n      };\n\n      ChuiBox.prototype.ready = function (callback) {\n        const self = this;\n\n        const promise = self.__driverSet.then(function () {\n          if (self.__ready === null) {\n            self.__ready = self.__initDriver();\n          }\n\n          return self.__ready;\n        });\n\n        promise.then(callback, callback);\n        return promise;\n      };\n\n      ChuiBox.prototype.setDriver = function (drivers, callback, errorCallback) {\n        const self = this;\n\n        if (!isArray(drivers)) {\n          drivers = [drivers];\n        }\n\n        const supportedDrivers = this.__getSupportedDrivers(drivers);\n\n        function setDriverToConfig() {\n          self.__config.driver = self.driver();\n        }\n\n        function initDriver(supportedDrivers) {\n          return function () {\n            var currentDriverIndex = 0;\n\n            function driverPromiseLoop() {\n              while (currentDriverIndex < supportedDrivers.length) {\n                const driverName = supportedDrivers[currentDriverIndex];\n                currentDriverIndex++;\n\n                self.__dbInfo = null;\n                self.__ready = null;\n\n                return self.getDriver(driverName).then(function (driver) {\n                  self.__extend(driver);\n                  setDriverToConfig();\n\n                  self.__ready = self.__initStorage(self.__config);\n                  return self.__ready;\n                })['catch'](driverPromiseLoop);\n              }\n\n              setDriverToConfig();\n              const error = new Error('No available storage method found.');\n              self.__driverSet = Promise.reject(error);\n              return self.__driverSet;\n            }\n\n            return driverPromiseLoop();\n          };\n        }\n\n        const oldDriverSetDone = this.__driverSet !== null ? this.__driverSet['catch'](function () {\n          return Promise.resolve();\n        }) : Promise.resolve();\n\n        this.__driverSet = oldDriverSetDone.then(function () {\n          const driverName = supportedDrivers[0];\n          self.__dbInfo = null;\n          self.__ready = null;\n\n          return self.getDriver(driverName).then(function (driver) {\n            self.__driver = driver.__driver;\n            setDriverToConfig();\n            self.__wrapLibraryMethodsWithReady();\n            self.__initDriver = initDriver(supportedDrivers);\n          });\n        })['catch'](function () {\n          setDriverToConfig();\n          const error = new Error('No available storage method found.');\n          self.__driverSet = Promise.reject(error);\n          return self.__driverSet;\n        });\n\n        this.__driverSet.then(callback, errorCallback);\n        return this.__driverSet;\n      };\n\n      ChuiBox.prototype.supports = function (driverName) {\n        return !!driverSupport[driverName];\n      };\n\n      ChuiBox.prototype.__extend = function (libraryMethodsAndProperties) {\n        extend(this, libraryMethodsAndProperties);\n      };\n\n      ChuiBox.prototype.__getSupportedDrivers = function (drivers) {\n        var supportedDrivers = [];\n        for (let i = 0, len = drivers.length; i < len; i++) {\n          const driverName = drivers[i];\n          if (this.supports(driverName)) {\n            supportedDrivers.push(driverName);\n          }\n        }\n        return supportedDrivers;\n      };\n\n      ChuiBox.prototype.__wrapLibraryMethodsWithReady = function () {\n        for (let i = 0; i < LibraryMethods.length; i++) {\n          callWhenReady(this, LibraryMethods[i]);\n        }\n      };\n\n      ChuiBox.prototype.createInstance = function (options) {\n        return new ChuiBox(options);\n      };\n\n      return ChuiBox;\n    })();\n\n    const chuiBox = new ChuiBox();\n    return chuiBox;\n  })(window)\n});"]}