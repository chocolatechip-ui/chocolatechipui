{"version":3,"sources":["widgets.min.js"],"names":["UIColor","color","_this","this","ok","charAt","substr","toLowerCase","colorRegex","re","bits","parseInt","process","processor","i","channels","b","r","isNaN","g","toHex","toString","length","toRGB","$","extend","getBrightness","type","lightenColor","Math","percent","R","num","slice","G","round","amt","B","darkenColor","calculateBrightness","kolor","hasAttribute","theme","on","eventStart","e","target","classList","contains","w","d","min","offsetWidth","offsetHeight","max","h","offset","y","isAndroid","getBoundingClientRect","navBkColor","touches","pageX","left","backgroundColor","pageY","top","ripple","nodeName","createElement","closest","css","brightness","rippleColor","dataset","rippleWave","style","append","setTimeout","height","remove","x","block","opacity","document","querySelector","screen","setAttribute","display","add","unblock","UIBusy","removeAttribute","settings","options","element","spinner","iOSBusy","tmpLeft","uuid","busy","parent","parentWidth","position","id","parentHeight","array","width","clientWidth","innerHeight","window","size","isNativeAndroid","find","tmpTop","clientHeight","ReorderList","list","ariaRole","tabIndex","focus","items","attachedBodyHandlerHack","FixForChrome","test","navigator","userAgent","testElementStyle","transformJSPropertyName","transformCSSPropertyName","hwLayerMagicStyle","hwTopLayerMagicStyle","prototype","setState","bind","states","idle","onTouchEnd","state","onMouseUp","onMouseLeave","usingTouch","onSelection","mouseHandlersAttached","onContainerFocus","startPosition","onEventStart","latestPosition","onEventMove","previousPosition","canPreventScrolling","insertBefore","willChange","detail","getTransform","node","allowTextSelection","transform","value","undecided","transitionJSPropertyName","original","move","getAbsoluteMovement","accessibility","parentNode","getComputedStyle","globalInstances","leaveState","clearTimeout","onMove","removeMouseHandlers","onEnd","reorder","reorderStateInit","holdTimer","nodes","childNodes","mouseOutsideTimer","nodeType","otherNodes","baseTransform","pos","t","zero","zIndex","onLeave","updateScrolling","dispatch","originalTarget","o","getTotalMovement","forEach","off","originalIndex","index","offsetTop","call","push","userSelectJSPropertyName","spliceIndex","addEventListener","onTouchCancel","setChildNodesAriaRoles","eventMove","attach","detach","noop","newStateCtor","prevState","nextState","ctor","targetNode","unSetChildNodesAriaRoles","Array","self","isRelated","findTargetNode","preventDefault","addMouseHandlers","documentElement","iOS","time","timeStamp","button","setTarget","scrollContainer","relatedTarget","origScrollHeight","origScrollTop","startAtPosition","clientX","clientY","updatePosition","isTouchEnabled","body","scrollTop","scrollOffset","directionX","directionY","scrollable","targetRect","bottomOffset","triggerOffset","topOffset","event","createEvent","initCustomEvent","dispatchEvent","animateToZero","containerRect","bottom","maxScrollTop","editLabel","cancelLabel","eventName","data","callback","deletionIndicator","deletable","reorderable","stateProp","initEvent","moveHandle","__data","__editMade","moveUpIndicator","UIEditList","moveDownIndicator","deleteLabel","elm","undefined","temp","html","_templateObject","deleteButton","textContent","_templateObject2","_templateObject3","reorderList","boundComponents","dir","editButton","isArray","map","item","render","empty","editBtn","$this","li","prepend","val","backBtn","deleteListItem","el","listItem","getAttribute","direction","selectedItems","cancelBtn","movedItems","found","__newarray","nav","hide","text","UIMultiSelectList","doneLabel","selection","selectionIndicator","get","liData","listItems","selected","indexOf","idx","show","select","name","decorateBackButton","makeScreenCurrent","makeScreenPrevious","apply","querySelectorAll","makeScreenNext","isNavigating","ChuiRoutes","destination","currentScreen","destinationScreen","regex","dataObj","splice","GoBack","arguments","pop","checked","fn","getScreen","trim","route","buttonText","chuiBackButtonSVG","Router","handleNavigationEvent","goto","GoTo","globalNav","split","pagingControls","currPage","nextPage","GoBackTo","findIndex","dest","previousElementSibling","className","is","UIPopover","title","_classCallCheck","UIPaging","popoverID","positionPopover","chunks","chunk","calcLeft","calcTop","po","clientLeft","nextElementSibling","disabled","getElementById","innerWidth","popover","UIPopup","content","header","cancelButton","popup","trigger","triggerEl","continueButton","offsetLeft","ClosePopup","closePopup","isChrome","open","closePopover","UIRange","_range","input","newPoint","newPlace","ranges","message","range","_$$css","-webkit-justify-content","-webkit-align-items","_defineProperty","close","getFullRoute","UISegmented","createSegmentedButton","androidSelectionIndicator","__segmented","labels","ctx","background-size","androidSelectionBorder","selectedButton","_len","_key","subscribe","publish","join","segmented","settingsData","eq","siblings","sib","btn","background","handle","slideFrom","UISelectList","slideDown","sheet","populate","template","slideoutID","buttonID","slideOutButton","slideOut","slideout","slideOutBtn","toggle","menuItems","UISheet","shownScreen","screenToShow","appendChild","key","UIStepper","stepper","decreaseSymbol","UISlideOut","disabledDecrease","disabledIncrease","defaultValue","decreaseButton","dataVal","increaseStepperValue","newValue","decreaseStepperValue","currentValue","__element","swipeOn","swipeOff","checkState","__switch","checkbox","__el","increaseButton","label","JSON","stringify","parse","UITabbar","__stepper","UISwitch","__tabbarScreens","screens","screenPrefix","selectedScreen","tab","tabbarTmpl","role","showIcons","insertAdjacentHTML","makeTab","tabbar","selectedTabButton","__selectedTabbarScreen","handleTabSelectionForAndroid","getSelectedTab","__selectedTabbarButton","getSelectedScreen","fullRoute","navRoutes","currBtn","chuiRoute","navRoutesFull","currScreen","Stack","prevScreen","whichRoute","routing","ui","icon","icons","wr","__tabbarButtons","console","routes"],"mappings":"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","file":"widgets.min.js","sourcesContent":["\n\n/**\n * Create a color object from provided color value.\n * Handles three values:\n * rgb(255,0,0) -- with or without spaces\n * #ff0000\n * #f00\n * The returned object has two methods:\n * myColor.toHex()\n * myColor.toRGB()\n *\n * @constructor - Must use new keyword\n * @param {string} color - A hex or rgb value.\n * @return {object} UIColor\n */\nconst UIColor = function(color) {\n  this.ok = false\n  /**\n   * Check for hex color value.\n   * String \"#\" if found.\n   */\n  if (color.charAt(0) == '#') {\n    color = color.substr(1,6)\n  }\n  color = color.toLowerCase()\n\n\n  /**\n   * Array of color format regex patterns.\n   * These will identify the format of the color provided above.\n   * The process function converts hex color values into decimal (rgb).\n   */\n  const colorRegex = [\n    {\n      /* Example: ['rgb(123, 234, 45)', 'rgb(255, 234, 245)'] */\n      re: /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/,\n      process: function(bits) {\n        return [\n          parseInt(bits[1]),\n          parseInt(bits[2]),\n          parseInt(bits[3])\n        ]\n      }\n    },\n    {\n      /* Example: ['#00ff00', '336699'] */\n      re: /^(\\w{2})(\\w{2})(\\w{2})$/,\n      process: function(bits) {\n        return [\n          parseInt(bits[1], 16),\n          parseInt(bits[2], 16),\n          parseInt(bits[3], 16)\n        ]\n      }\n    },\n    {\n      /**\n       * Example: ['#fb0', 'f0f']\n       */\n      re: /^(\\w{1})(\\w{1})(\\w{1})$/,\n      process: function(bits) {\n        return [\n          parseInt(bits[1] + bits[1], 16),\n          parseInt(bits[2] + bits[2], 16),\n          parseInt(bits[3] + bits[3], 16)\n        ]\n      }\n    }\n  ]\n\n  /**\n   * Check for a match using each regex.\n   */\n  for (let i = 0; i < 3; i++) {\n    const re = colorRegex[i].re\n    const processor = colorRegex[i].process\n    const bits = re.exec(color)\n    if (bits) {\n      const channels = processor(bits)\n      this.r = channels[0]\n      this.g = channels[1]\n      this.b = channels[2]\n      this.ok = true\n    }\n  }\n\n  /**\n   * Validate/cleanup values.\n   */\n  this.r = (this.r < 0 || isNaN(this.r)) ? 0 : ((this.r > 255) ? 255 : this.r)\n  this.g = (this.g < 0 || isNaN(this.g)) ? 0 : ((this.g > 255) ? 255 : this.g)\n  this.b = (this.b < 0 || isNaN(this.b)) ? 0 : ((this.b > 255) ? 255 : this.b)\n\n  this.toHex = () => {\n    let r = this.r.toString(16)\n    let g = this.g.toString(16)\n    let b = this.b.toString(16)\n    if (r.length == 1) r = '0' + r\n    if (g.length == 1) g = '0' + g\n    if (b.length == 1) b = '0' + b\n    return '#' + r + g + b\n  }\n\n  this.toRGB = function() {\n    return 'rgb(' + this.r +',' + this.g + ',' + this.b + ')'\n  }\n}\n\n$.extend({\n\n  /**\n   * Make global method to get brightness of provided color.\n   * This is based on the values of YIQ color formula.\n   * This method expects a color object created by UIColor.\n   */\n  getBrightness: (color) => {\n    if ($.type(color) === 'string') color = UIColor(color)\n    return (color.r * .299) + (color.g * .587) + (color.b * .114)\n  },\n\n  /**\n   * Function to light a color.\n   * Expects a hex value as string and an integer as percent:\n   */\n  lightenColor: (color, percent) => {\n    const num = parseInt(color.slice(1), 16)\n    const amt = Math.round(2.55 * percent)\n    let R = (num >> 16) + amt\n    let G = (num >> 8 & 0x00FF) + amt\n    let B = (num & 0x0000FF) + amt\n    return \"#\" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1)\n  },\n\n  /**\n   * Function to darken a color.\n   * Expects a hex value as string and an integer as percent:\n   */\n  darkenColor: (color, percent) => {\n    const num = parseInt(color.slice(1), 16)\n    const amt = Math.round(2.55 * percent)\n    let R = (num >> 16) - amt\n    let G = (num >> 8 & 0x00FF) - amt\n    let B = (num & 0x0000FF) - amt\n    return \"#\" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1)\n  },\n\n  /**\n   * Method to calculate color contrast.\n   * It expects a hex or rgb value:\n   */\n  calculateBrightness: (color) => {\n    if ($.type(color) === 'object') color = color.toHex()\n    const kolor = new UIColor(color)\n    return $.getBrightness(kolor)\n  }\n})\n\n\n$(function() {\n  if ($.theme === 'android') {\n    $('body').on($.eventStart, 'button, ul.editing > li, li[data-show], li[data-select], li[data-goto], ui-sheet-handle, ui-switch, .ui-popover li', function(e) {\n      let target = this\n      if (target.hasAttribute(\"disabled\") || target.classList.contains(\"disabled\")) {\n        return\n      }\n\n      let w = Math.min(this.offsetWidth, 160)\n      let h = Math.min(this.offsetHeight, 160)\n      const d = Math.max(w, h)\n      w = d\n      h = d\n\n      const offset = this.getBoundingClientRect()\n\n      const x = $.isAndroid ? e.touches[0].pageX - offset.left : e.pageX - offset.left\n      const y = $.isAndroid ? e.touches[0].pageY - offset.top :  e.pageY - offset.top\n\n      let navBkColor\n      let backgroundColor\n\n      const ripple = document.createElement('ripple-sheath')\n      $(target).append(ripple)\n\n      if (target.nodeName === 'BUTTON' && target.classList.contains('slide-out-button')) {\n        let navBkColor = $('ui-screen > nav').eq(0).css('background-color')\n        backgroundColor = new UIColor(navBkColor).toHex()\n      } else if ((target.nodeName === 'BUTTON' && $(target).closest('nav')[0])) {\n        navBkColor = $(target).closest('nav').css('background-color')\n        backgroundColor = new UIColor(navBkColor).toHex()\n\n      } else if ((target.nodeName === 'BUTTON' && $(target).closest('toolbar')[0])) {\n        navBkColor = $(target).closest('toolbar').css('background-color')\n        backgroundColor = new UIColor(navBkColor).toHex()\n\n      } else {\n        backgroundColor = $(this).css('background-color')\n        if (!backgroundColor || backgroundColor === 'rgba(0, 0, 0, 0)') {\n          backgroundColor = '#fff'\n        }\n      }\n\n      let rippleColor = '#fff'\n      const brightness = $.calculateBrightness(backgroundColor)\n      if (brightness > 195) {\n        rippleColor = '#aaa'\n      } else {\n        rippleColor = '#fff'\n      }\n\n      if (target.dataset.rippleColor) {\n        rippleColor = target.dataset.rippleColor\n      }\n\n      const rippleWave = document.createElement('ripple-wave')\n      rippleWave.style.backgroundColor = rippleColor\n      rippleWave.style.width = `${h}px`\n      rippleWave.style.height = `${h}px`\n      rippleWave.style.left = `${x - (h/2)}px`\n      rippleWave.style.top = `${y - (h/2)}px`\n\n      ripple.append(rippleWave)\n      setTimeout(function() {\n        $(ripple).remove()\n      }, 1000)\n    })\n  }\n})\n\n\n$.extend({\n\n  /**\n   * Cover screen:\n   */\n  block: opacity => {\n    if (document.querySelector('ui-mask')) return\n    $('body').append(`<ui-mask></ui-mask>`)\n    document.querySelector('ui-mask').style.display = 'block'\n    setTimeout(function() {\n      document.querySelector('ui-mask').classList.add('opened')\n      if (opacity) $('ui-mask').css({opacity: opacity})\n    })\n    const screen = document.querySelector('ui-screen.current')\n    if (screen) screen.setAttribute('aria-hidden', true)\n  },\n\n  /**\n   * Uncover screen:\n   */\n  unblock: () => {\n    $('ui-mask').remove()\n    const screen = document.querySelector('ui-screen.current')\n    if (screen) screen.removeAttribute('aria-hidden')\n  }\n})\n\n\nclass UIBusy {\n  constructor(options) {\n    if (!options) return\n    let settings = {\n      size: 40,\n      color: '#666',\n    }\n    $.extend(settings, options)\n    const element = $(settings.element)\n\n    let spinner\n    /**\n     * For iOS:\n     */\n    const iOSBusy = () => {\n      let small\n      /**\n       * Smaller busy indicator (less tines):\n       */\n      if (parseInt(settings.size, 10) < 30) {\n        spinner = `<svg class='chui-busy small' width='${ settings.size }px' height='${ settings.size }px' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' preserveAspectRatio='xMidYMid'>\n        <g x='0' y='0' width='100' height='100' fill='none' class='bk'>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(0 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(45 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(90 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(135 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(180 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(225 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(270 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(315 50 50) translate(0 -30)'></rect>\n        </g>\n      </svg>`\n        element.append(spinner)\n      /**\n       * Larger busy indicator (more tines)\n       */\n      } else {\n        spinner = `<svg class='chui-busy' width='${ settings.size }px' height='${ settings.size }px' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' preserveAspectRatio='xMidYMid' class='uil-default'>\n        <g x='0' y='0' width='100' height='100' fill='none'>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(0 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(30 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(60 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(90 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(120 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(150 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(180 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(210 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(240 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(270 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(300 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(330 50 50) translate(0 -30)'></rect>\n        </g>\n      </svg>`\n        element.append(spinner)\n      }\n    }\n\n    /**\n     * For Android:\n     */\n    const androidBusy = () => {\n      settings.id = $.uuid()\n      let androidActivityIndicator = null\n      if ($.isNativeAndroid) {\n        androidActivityIndicator = `<svg class=\"chui-busy\" version=\"1.1\" id=\"${ settings.id }\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\" enable-background=\"new 0 0 100 100\" xml:space=\"preserve\">\n        <g>\n          <path fill=\"none\" stroke=\"${ settings.color }\" stroke-width=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M74.2,65c2.7-4.4,4.3-9.5,4.3-15c0-15.7-12.8-28.5-28.5-28.5S21.5,34.3,21.5,50c0,5.5,1.6,10.6,4.3,15\"/>\n        </g>\n        <polyline fill=\"none\" stroke=\"${ settings.color }\" stroke-width=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"89.4,56.1 74.3,65 65.4,49.9 \"/>\n      </svg>`\n\n        element.append(androidActivityIndicator)\n        return\n      } else {\n        androidActivityIndicator = `<svg id=\"${ settings.id }\" class=\"chui-busy\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\"><circle stroke=\"url(#SVGID_1_)\" cx=\"50\" cy=\"50\" r=\"28.5\"/></svg>`\n        element.append(androidActivityIndicator)\n        element.array[0].classList.add('hasActivityIndicator')\n        if (options.color) {\n          $('#' + settings.id).find('circle').css('stroke', options.color)\n        }\n      }\n      $('#' + settings.id).css({\n        'height': settings.size + 'px',\n        'width': settings.size + 'px'\n      })\n    }\n\n    /**\n     * Create Busy control for appropriate OS:\n     */\n    if ($.theme === 'android') {\n      androidBusy(options)\n    } else if ($.theme === 'ios') {\n      iOSBusy(options)\n    }\n\n    this.center = function(position) {\n      if (!element) return\n      const busy = element.find('.chui-busy')\n      const parent = element.array[0]\n      if (position) {\n        busy.css('position', position)\n      } else {\n        position = busy.css('position')\n      }\n      let height\n      let width\n      let parentHeight\n      let parentWidth\n      if (position === 'absolute') {\n        busy.css('position', 'absolute')\n        height = busy.array[0].clientHeight\n        width = busy.array[0].clientWidth\n        parentHeight = parent.clientHeight\n        parentWidth = parent.clientWidth\n      } else {\n        height = parseInt(busy.css('height'), 10)\n        width = parseInt(busy.css('width'), 10)\n        parentHeight = parseInt($(parent).css('height'), 10)\n        parentWidth = parseInt(($(parent)).css('width'), 10)\n        $(busy).css({\n          'margin-left': 'auto',\n          'margin-right': 'auto'\n        })\n      }\n      let tmpTop\n      let tmpLeft\n      if (parent.nodeName === 'body') {\n        tmpTop = ((window.innerHeight / 2) + window.pageYOffset) - height / 2 + 'px'\n        tmpLeft = ((window.innerWidth / 2) - (width / 2) + 'px')\n      } else {\n        tmpTop = (parentHeight / 2) - (height / 2) + 'px'\n        tmpLeft = (parentWidth / 2) - (width / 2) + 'px'\n      }\n      if (position !== 'absolute') tmpLeft = 0\n      busy.css({\n        left: tmpLeft,\n        top: tmpTop\n      })\n      return busy\n    }\n\n  }\n}\n\n\n/**\n * Class to enable reording list items.\n */\nconst ReorderList = (function() {\n  'use strict'\n\n  const accessibility = {\n    list: {\n      ariaRole: \"listbox\",\n      tabIndex: 0,\n      focus: false\n    },\n    items: {\n      ariaRole: \"option\",\n      tabIndex: -1,\n      focus: false\n    },\n  }\n\n  let FixForChrome = /Chrome\\/[3-5]/.test(navigator.userAgent)\n  let testElementStyle = document.createElement('div').style\n  const transitionJSPropertyName = \"transition\" in testElementStyle ? \"transition\" : \"webkitTransition\"\n  const transformJSPropertyName = \"transform\" in testElementStyle ? \"transform\" : \"webkitTransform\"\n  const transformCSSPropertyName = transformJSPropertyName === \"webkitTransform\" ? \"-webkit-transform\" : \"transform\"\n  const userSelectJSPropertyName = \"userSelect\" in testElementStyle ? \"userSelect\" : \"webkitUserSelect\"\n  let hwLayerMagicStyle = testElementStyle[transformJSPropertyName] ? 'translateZ(0) ' : ''\n  let hwTopLayerMagicStyle = testElementStyle[transformJSPropertyName] ? 'translateZ(1px) ' : ''\n  testElementStyle = null\n\n  let globalInstances = 0\n  let attachedBodyHandlerHack = false\n\n  function ReorderList(list, options) {\n    list = document.querySelector(list)\n    if (!this || this === window) return new ReorderList(list, options)\n    this.options = options = options || {}\n    this.onTouchCancel = this.setState.bind(this, this.states.idle)\n    this.onTouchEnd = this.onTouchEnd.bind(this)\n    this.onMouseUp = this.onMouseUp.bind(this)\n    this.onMouseLeave = this.onMouseLeave.bind(this)\n    this.onSelection = this.onSelection.bind(this)\n    this.onContainerFocus = this.onContainerFocus.bind(this)\n    this.onEventStart = this.onEventStart.bind(this)\n    this.onEventMove = this.onEventMove.bind(this)\n    this.setState(this.states.idle)\n    this.attach(list)\n\n    $(list).on('reorder:reorder', function(e) {\n      if (!this.classList.contains('showIndicators')) {\n        return\n      }\n      e.target.parentNode.insertBefore(e.target, e.detail.insertBefore)\n      return false\n    }, false)\n  }\n\n  function getTransform(node) {\n    const transform = node.style[transformJSPropertyName]\n    if (transform) {\n      return {\n        value:transform,\n        original:transform,\n      }\n    }\n    if (window.getComputedStyle) {\n      let style = window.getComputedStyle(node).getPropertyValue(transformCSSPropertyName)\n      if (style && style !== 'none') return {value:style, original:''}\n    }\n    return {value:'', original:''}\n  }\n\n  ReorderList.prototype = {\n\n    list: null,\n    options: {},\n    state: null,\n    target: null,\n    usingTouch: false,\n    mouseHandlersAttached: false,\n    startPosition: null,\n    latestPosition: null,\n    previousPosition: null,\n    canPreventScrolling: false,\n    states: {\n      idle: function idleStateInit() {\n        // if(this.list && !this.list.classList.contains('showIndicators')) return\n        this.removeMouseHandlers()\n        if (this.target) {\n          this.target.node.style.willChange = ''\n          this.target = null\n        }\n        this.usingTouch = false\n\n        return {\n          allowTextSelection: true,\n        }\n      },\n\n      undecided: function undecidedStateInit() {\n        // if(!this.list.classList.contains('showIndicators')) return\n        this.target.height = this.target.node.offsetHeight\n        this.target.node.style.willChange = transformCSSPropertyName\n        this.target.node.style[transitionJSPropertyName] = ''\n\n        let holdTimer = setTimeout(function() {\n          const move = this.getAbsoluteMovement()\n          if (this.canPreventScrolling && move.x < 15 && move.y < 25) {\n            this.setState(this.states.reorder)\n          }\n        }.bind(this), 300)\n\n        return {\n          leaveState: function() {\n            clearTimeout(holdTimer)\n          },\n\n          onMove: function() {\n            const move = this.getAbsoluteMovement()\n            if (move.x > 20 && move.y < Math.max(100, this.target.height)) {\n              this.setState(this.states.idle)\n            }\n            if (move.y > 20) {\n              this.setState(this.states.idle)\n            }\n            if (move.x > move.y*1.2) return false\n          },\n\n          onLeave: function() {\n            this.setState(this.states.idle)\n          },\n\n          onEnd: function() {\n            const allowDefault = this.dispatch(this.target.originalTarget, 'tap')\n            this.setState(this.states.idle)\n            return allowDefault\n          },\n        }\n      },\n\n      reorder: function reorderStateInit() {\n        if (this.target.node.focus && accessibility.items.focus) {\n          this.target.node.focus()\n        }\n        this.target.height = this.target.node.offsetHeight\n        const nodes = this.list.childNodes\n        let originalIndex = $(this.target).index()\n        let mouseOutsideTimer\n        const zero = this.target.node.offsetTop + this.target.height/2\n        const otherNodes = []\n        for(let i = 0; i < nodes.length; i++) {\n          if (nodes[i].nodeType != 1 || nodes[i] === this.target.node) continue\n          const t = nodes[i].offsetTop\n          nodes[i].style[transitionJSPropertyName] = transformCSSPropertyName + ' 0.2s ease-in-out'\n          otherNodes.push({\n            node: nodes[i],\n            baseTransform: getTransform(nodes[i]),\n            pos: t + (t < zero ? nodes[i].offsetHeight : 0) - zero,\n          })\n        }\n\n        this.target.node.classList.add('reordering-list-item')\n        this.target.node.style.zIndex = '99999'\n        this.target.node.style[userSelectJSPropertyName] = 'none'\n        if (FixForChrome) {\n          this.list.style.webkitTransformStyle = 'preserve-3d'\n        }\n\n        function onMove() {\n          this.updateScrolling()\n          if (mouseOutsideTimer) {\n            clearTimeout(mouseOutsideTimer)\n            mouseOutsideTimer = null\n          }\n          const move = this.getTotalMovement()\n          this.target.node.style[transformJSPropertyName] = 'translate(0,' + move.y + 'px) ' + hwTopLayerMagicStyle + this.target.baseTransform.value\n          const height = this.target.height\n          otherNodes.forEach(function(o) {\n            let off = 0\n            if (o.pos < 0 && move.y < 0 && o.pos > move.y) {\n              off = height\n            }\n            else if (o.pos > 0 && move.y > 0 && o.pos < move.y) {\n              off = -height\n            }\n            o.node.style[transformJSPropertyName] = off ? 'translate(0,'+off+'px) ' + hwLayerMagicStyle + o.baseTransform.value : o.baseTransform.original\n          })\n\n\n          return false\n        }\n\n        onMove.call(this)\n\n        return {\n          leaveState: function() {\n            if (mouseOutsideTimer) clearTimeout(mouseOutsideTimer)\n            if (FixForChrome) {\n              this.list.style.webkitTransformStyle = ''\n            }\n            if (this.list.focus && accessibility.list.focus) {\n              this.list.focus()\n            }\n            this.target.node.classList.remove('reordering-list-item')\n            this.target.node.style[userSelectJSPropertyName] = ''\n            this.animateToZero(function(target) {\n              target.node.style.zIndex = ''\n            })\n            otherNodes.forEach(function(o) {\n              o.node.style[transformJSPropertyName] = o.baseTransform.original\n              o.node.style[transitionJSPropertyName] = ''\n            })\n          },\n\n          onMove: onMove,\n\n          onLeave: function() {\n            if (mouseOutsideTimer) clearTimeout(mouseOutsideTimer)\n            mouseOutsideTimer = setTimeout(function() {\n              mouseOutsideTimer = null\n              this.onTouchCancel()\n            }.bind(this), 700)\n          },\n\n          onEnd: function() {\n            const move = this.getTotalMovement()\n            let i\n            let spliceIndex\n            if (move.y < 0) {\n              for (i = 0; i < otherNodes.length; i++) {\n                if (otherNodes[i].pos > move.y) {\n                  break\n                }\n              }\n              spliceIndex = i\n            } else {\n              for (i = otherNodes.length-1; i >= 0; i--) {\n                if (otherNodes[i].pos < move.y) {\n                  break\n                }\n              }\n              spliceIndex = i+1\n            }\n\n            this.dispatch(this.target.node, 'reorder', {spliceIndex:spliceIndex, insertBefore:otherNodes[spliceIndex] ? otherNodes[spliceIndex].node : null, originalIndex: originalIndex})\n            this.setState(this.states.idle)\n            return false\n          },\n        }\n      },\n    },\n\n    attach: function(list) {\n      globalInstances++\n      if (this.list) this.detach()\n      if (!attachedBodyHandlerHack && FixForChrome) {\n        attachedBodyHandlerHack = true\n        document.body.addEventListener('touchstart', $.noop, false)\n      }\n\n      this.list = list\n\n      if (false !== accessibility.list.tabIndex) {\n        this.list.tabIndex = accessibility.list.tabIndex\n      }\n      if (accessibility.list.ariaRole) {\n        this.list.setAttribute('aria-role', accessibility.list.ariaRole)\n      }\n      this.setChildNodesAriaRoles()\n      this.list.addEventListener('focus', this.onContainerFocus, false)\n      this.otherNodes = []\n\n      $(document).on(\"selectionchange\", this.onSelection, false)\n      $(this.list).on('touchcancel', this.onTouchCancel, false)\n      $(this.list).on('touchend', this.onTouchEnd, false)\n      $(this.list).on($.eventStart, this.onEventStart, false)\n      $(this.list).on($.eventMove, this.onEventMove, false)\n    },\n\n    detach: function() {\n      this.onTouchCancel()\n      $(document).off(\"selectionchange\", this.onSelection, false)\n      $(this.list).off('touchcancel', this.onTouchCancel, false)\n      $(this.list).off('touchend', this.onTouchEnd, false)\n      $(this.list).off($.eventMove, this.onEventMove, false)\n\n      if (false !== accessibility.list.tabIndex) {\n        this.list.removeAttribute('tabIndex')\n      }\n      if (accessibility.list.ariaRole) {\n        this.list.removeAttribute('aria-role')\n      }\n      this.unSetChildNodesAriaRoles()\n\n      globalInstances--\n      if (!globalInstances && attachedBodyHandlerHack) {\n        attachedBodyHandlerHack = false\n        $('body').off('touchstart', $.noop, false)\n      }\n    },\n\n    setState: function(newStateCtor) {\n      if(this.list && !this.list.classList.contains('showIndicators')) return\n\n      if (this.state) {\n        if (this.state.ctor === newStateCtor) return\n        if (this.state.leaveState) this.state.leaveState.call(this)\n      }\n      let prevState = this.state\n      let nextState = newStateCtor.call(this)\n      if (this.state === prevState) {\n        nextState.ctor = newStateCtor\n        this.state = nextState\n      }\n    },\n\n    findTargetNode: function(targetNode) {\n      while(targetNode && targetNode.parentNode !== this.list) {\n        targetNode = targetNode.parentNode\n      }\n      return targetNode\n    },\n\n    onContainerFocus: function(e) {\n      if(!this.list.classList.contains('showIndicators')) return\n      this.list.style.outline = 'none'\n      this.setChildNodesAriaRoles()\n    },\n\n    setChildNodesAriaRoles: function() {\n      const self = this\n      const nodes = Array.prototype.slice.call(self.list.childNodes)\n      for(let i = 0; i < nodes.length; i++) {\n        if (nodes[i].nodeType != 1) continue\n        if (accessibility.items.ariaRole) {\n          nodes[i].setAttribute('aria-role', accessibility.items.ariaRole)\n        }\n        if (false !== accessibility.items.tabIndex) {\n          nodes[i].tabIndex = accessibility.items.tabIndex\n        }\n      }\n    },\n\n    unSetChildNodesAriaRoles: function() {\n      const nodes = Array.prototype.slice.call(self.list.childNodes)\n      for(let i = 0; i < nodes.length; i++) {\n        if (nodes[i].nodeType != 1) continue\n        if (accessibility.items.ariaRole) {\n          nodes[i].removeAttribute('aria-role')\n        }\n        if (false !== accessibility.items.tabIndex) {\n          nodes[i].removeAttribute('tabIndex')\n        }\n      }\n    },\n    onSelection: function(e) {\n      const isRelated = e.target === document || this.findTargetNode(e)\n      const iOS = /(iPhone|iPad|iPod)/i.test(navigator.userAgent) && !/(Android|Windows)/i.test(navigator.userAgent)\n      if (!isRelated) return\n\n      if (iOS) {\n        this.setState(this.states.idle)\n      } else {\n        if (!this.state.allowTextSelection) {\n          e.preventDefault()\n        }\n      }\n    },\n\n    addMouseHandlers: function() {\n      if (!this.mouseHandlersAttached) {\n        this.mouseHandlersAttached = true\n        $(document).on('mouseleave', this.onMouseLeave, false)\n        $(document).on('mouseup', this.onMouseUp, true)\n        $(document).on('blur', this.onTouchCancel, false)\n      }\n    },\n\n    removeMouseHandlers: function() {\n      if (this.mouseHandlersAttached) {\n        this.mouseHandlersAttached = false\n        $(document).off('mouseleave', this.onMouseLeave, false)\n        $(document).off('mouseup', this.onMouseUp, true)\n        $(document).off('blur', this.onTouchCancel, false)\n      }\n    },\n\n    onMouseLeave: function(e) {\n      if (this.usingTouch) return\n      if (e.target === document.documentElement || e.relatedTarget === document.documentElement) {\n        if (this.state.onLeave) {\n          this.state.onLeave.call(this)\n        }\n      }\n    },\n\n    onEventStart: function(e) {\n      if ($.isTouchEnabled) {\n        this.usingTouch = true\n        this.canPreventScrolling = true\n        if (e.touches.length > 1) {\n          this.setState(this.states.idle)\n          return\n        }\n        if (!this.setTarget(e)) return\n        this.startAtPosition({\n          x: e.touches[0].clientX,\n          y: e.touches[0].clientY,\n          time: e.timeStamp\n        })\n      } else {\n        if (this.usingTouch || e.button != 0 || !this.setTarget(e)) return\n        this.addMouseHandlers()\n        this.canPreventScrolling = true\n        this.startAtPosition({\n          x: e.clientX,\n          y: e.clientY,\n          time: e.timeStamp\n        })\n      }\n    },\n\n    setTarget: function(e) {\n      const targetNode = this.findTargetNode(e.target)\n      if (!targetNode) {\n        this.setState(this.states.idle)\n        return false\n      }\n      let scrollContainer = targetNode.parentNode\n      while (scrollContainer) {\n        if (scrollContainer == document.body) break\n        if (scrollContainer.scrollHeight > scrollContainer.clientHeight && window.getComputedStyle(scrollContainer)['overflow-y'] != 'visible') break\n        scrollContainer = scrollContainer.parentNode\n      }\n      scrollContainer = scrollContainer || document.body\n\n      this.target = {\n        originalTarget: e.target,\n        node: targetNode,\n        scrollContainer: scrollContainer,\n        origScrollTop: scrollContainer.scrollTop,\n        origScrollHeight: scrollContainer.scrollHeight,\n        baseTransform: getTransform(targetNode)\n      }\n      return true\n    },\n\n    startAtPosition: function(pos) {\n      this.startPosition = this.previousPosition = this.latestPosition = pos\n      this.setState(this.states.undecided)\n    },\n\n    updatePosition: function(e, pos) {\n      if (this.target == null) {\n        return\n      }\n      this.latestPosition = pos\n\n      if (this.state.onMove) {\n        if (this.state.onMove.call(this) === false) {\n          e.preventDefault()\n        }\n      }\n      if (this.latestPosition.time - this.previousPosition.time > 100) {\n        this.previousPosition = this.latestPosition\n      }\n    },\n\n    onEventMove: function(e) {\n      if ($.isTouchEnabled) {\n        this.updatePosition(e, {\n          x: e.touches[0].clientX,\n          y: e.touches[0].clientY,\n          time: e.timeStamp\n        })\n        this.canPreventScrolling = false\n      } else {\n        this.updatePosition(e, {\n          x: e.clientX,\n          y: e.clientY,\n          time: e.timeStamp\n        })\n      }\n    },\n\n    onMouseUp: function(e) {\n      if (this.usingTouch || e.button !== 0) return\n\n      if (this.state.onEnd && false === this.state.onEnd.call(this)) {\n        e.preventDefault()\n      }\n    },\n\n    onTouchEnd: function(e) {\n      if (e.touches.length > 1) {\n        this.onTouchCancel()\n      } else if (this.state.onEnd && false === this.state.onEnd.call(this)) {\n        e.preventDefault()\n      }\n    },\n\n    getTotalMovement: function() {\n      const scrollOffset = this.target.scrollContainer.scrollTop - this.target.origScrollTop\n      return {\n        x: this.latestPosition.x - this.startPosition.x,\n        y: this.latestPosition.y - this.startPosition.y + scrollOffset,\n        time: this.latestPosition.time - this.startPosition.time,\n      }\n    },\n\n    getAbsoluteMovement: function() {\n      const move = this.getTotalMovement()\n      return {\n        x: Math.abs(move.x),\n        y: Math.abs(move.y),\n        time: move.time,\n        directionX: move.x < 0 ? 'left' : 'right',\n        directionY: move.y < 0 ? 'up' : 'down'\n      }\n    },\n\n    updateScrolling: function() {\n      const triggerOffset = 40\n      let offset = 0\n\n      const scrollable = this.target.scrollContainer,\n        containerRect = scrollable.getBoundingClientRect(),\n        targetRect = this.target.node.getBoundingClientRect(),\n        bottomOffset = Math.min(containerRect.bottom, window.innerHeight) - targetRect.bottom,\n        topOffset = targetRect.top - Math.max(containerRect.top, 0),\n        maxScrollTop = this.target.origScrollHeight - Math.min(scrollable.clientHeight, window.innerHeight)\n\n      if (bottomOffset < triggerOffset) {\n        offset = Math.min(triggerOffset, triggerOffset - bottomOffset)\n      }\n      else if (topOffset < triggerOffset) {\n        offset = Math.max(-triggerOffset, topOffset - triggerOffset)\n      }\n      scrollable.scrollTop = Math.max(0, Math.min(maxScrollTop, scrollable.scrollTop + offset))\n    },\n\n    dispatch: function(targetNode, eventName, data) {\n      let event = document.createEvent('CustomEvent')\n      if (event && event.initCustomEvent) {\n        event.initCustomEvent('reorder:' + eventName, true, true, data)\n      } else {\n        event = document.createEvent('Event')\n        event.initEvent('reorder:' + eventName, true, true)\n        event.data = data\n      }\n      return targetNode.dispatchEvent(event)\n    },\n\n    animateToZero: function(callback, target) {\n      target = target || this.target\n\n      target.node.style[transitionJSPropertyName] = transformCSSPropertyName + ' 0.1s ease-out'\n      target.node.style[transformJSPropertyName] = 'translate(0,0) ' + hwLayerMagicStyle + target.baseTransform.value\n      setTimeout(function() {\n        target.node.style[transitionJSPropertyName] = ''\n        target.node.style[transformJSPropertyName] = target.baseTransform.original\n        if (callback) callback.call(this, target)\n      }.bind(this), 101)\n    }\n  }\n  return ReorderList\n})()\n/**\n * ChocolateChip-UI Widget - Edit List.\n */\nclass UIEditList {\n  constructor(options) {\n    if (!options) return\n    const self = this\n    let settings = {\n      element: undefined,\n      editLabel: 'Edit',\n      doneLabel: 'Done',\n      deleteLabel: 'Delete',\n      cancelLabel: 'Cancel',\n      callback: $.noop,\n      deletable: false,\n      reorderable: false,\n      state: undefined,\n      stateProp: 'id'\n    }\n    $.extend(settings, options)\n\n    let deletionIndicator = html`\n      <aside class=\"deletion-indicator\">\n        <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n          <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <g id=\"deletion-indicator\">\n              <g id=\"ios-indicator\">\n                <circle id=\"ios-circle\" fill=\"#FF0000\" cx=\"10\" cy=\"10\" r=\"10\"></circle>\n                <path d=\"M3.5,10 L16.5,10\" id=\"ios-bar\" stroke=\"#FFFFFF\" stroke-width=\"2\" stroke-linecap=\"square\"></path>\n              </g>\n              <path d=\"M2,13 L9.9294326,16.8406135 L17.1937075,1.90173332\" id=\"checkmark\" stroke=\"#FA0303\" stroke-width=\"2\"></path>\n            </g>\n          </g>\n        </svg>\n      </aside>`\n\n    let deleteButton = html`\n      <button class=\"delete\">\n        <label>${ settings.deleteLabel }</label>\n        <svg width=\"27px\" height=\"30px\" viewBox=\"0 0 27 30\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n          <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <g id=\"delete-icon\" fill=\"#3A3A3A\">\n              <g transform=\"translate(3.000000, 1.000000)\">\n                <path d=\"M1,6 L20,6 L20,24.9986131 C20,26.6562333 18.6639569,28 16.9998779,28 L4.00012207,28 C2.3432004,28 1,26.6569187 1,24.9986131 L1,6 Z M4,9 L5,9 L5,25 L4,25 L4,9 Z M8,9 L9,9 L9,25 L8,25 L8,9 Z M12,9 L13,9 L13,25 L12,25 L12,9 Z M16,9 L17,9 L17,25 L16,25 L16,9 Z\" id=\"can\"></path><path d=\"M0,4.96611425 L0,1.67759301 L5.1776507,1.7511163 L6.482399,0 L14.5847825,0 L15.8789491,1.7511163 L21,1.7511163 L21,4.9447157 L0,4.96611425 L0,4.96611425 Z\" id=\"lid\"></path>\n              </g>\n            </g>\n          </g>\n        </svg>\n      </button>`\n\n    let moveHandle = html`\n      <svg class='handle' width=\"19px\" height=\"18px\" viewBox=\"0 0 19 18\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" style=\"background: rgba(255,255,255,0.01)\">\n        <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <g id=\"Artboard\" stroke=\"#C7C7CC\">\n            <g id=\"Move-Indicator-iOS\" transform=\"translate(2.000000, 5.000000)\">\n              <path d=\"M0,0.5 L15,0.5\" id=\"Line-1\"></path>\n              <path d=\"M0,3.5 L15,3.5\" id=\"Line-2\"></path>\n              <path d=\"M0,6.5 L15,6.5\" id=\"Line-3\"></path>\n            </g>\n          </g>\n        </g>\n      </svg>`\n\n    let __data = []\n    let __editMade = false\n    this.callback = settings.callback || $.noop\n\n    if (!settings.deletable && !settings.reorderable) {\n      return\n    }\n\n    if (options) $.extend(settings, options)\n\n    // let editButton\n    let button\n    let dispelDeletable = 'swiperight'\n    let enableDeletable = 'swipeleft'\n    let moveUpIndicator\n    let moveDownIndicator\n    let element = settings.element\n    let deleteLabel\n    this.elm = $(settings.element)\n\n    if (settings.deletable) {\n      document.querySelector(settings.element).classList.add('deletable')\n    }\n    if (settings.reorderable) {\n      document.querySelector(settings.element).classList.add('reorderable')\n    }\n\n    if (options.state) options.state.boundComponents.push(this)\n\n    this.render = function(data) {\n      let temp = ''\n      if (!settings.element) {\n        return\n      }\n\n      if (!data && settings.state) {\n        data = settings.state.get()\n      }\n\n      if (Array.isArray(data)) {\n        data.map(function(item) {\n          temp += settings.render(item)\n        })\n      } else {\n        return\n      }\n\n      this.elm.textContent = ''\n      let elm = $(settings.element)\n      elm.empty()\n      elm.append(temp)\n      elm.find('li').array.map(li => {\n        if (settings.deletable) {\n          $(li).prepend(deletionIndicator)\n          $(li).append(deleteButton)\n        }\n        if (settings.reorderable) {\n          $(li).append(moveHandle)\n        }\n      })\n    }\n\n    this.val = () => options.state.get()\n\n    $(() => {\n\n      /**\n       * Handle deletion of list item.\n       */\n      function deleteListItem(el) {\n        let elm = $(settings.element)\n        let $this = this\n        __editMade = true\n        let listItem = $($this).closest('li')\n\n        /**\n         * Mark list as edited:\n         */\n        elm[0].dataset.listEdit = 'true'\n        let direction = '-1200%'\n        if (document.querySelector('html').getAttribute('dir') === 'rtl') direction = '1000%'\n        $($this).siblings().css({\n          '-webkit-transform': 'translate3d(' + direction + ',0,0)',\n          '-webkit-transition': 'all 1s ease-out',\n          'transform': 'translate3d(' + direction + ',0,0)',\n          'transition': 'all 1s ease-out'\n        })\n        setTimeout(function () {\n          listItem.remove()\n        }, 500)\n\n      }\n      /**\n       * Handle moving list item.\n       */\n      if (settings.reorderable) {\n        let reorderList =  new ReorderList(settings.element)\n      }\n\n      $(settings.element).on('tap', '.delete', deleteListItem)\n    })\n\n    let dir = document.dir\n    dir = dir ? dir.toLowerCase() : ''\n    if (dir === 'rtl') {\n      dispelDeletable = 'swipeleft'\n      enableDeletable = 'swiperight'\n    }\n\n\n    let editButton = `<button class=\"edit\">${ settings.editLabel }</button>`\n    let screen = $(settings.element).closest('ui-screen')\n    let nav = screen.find('nav')\n    // console.dir(settings.element)\n    // console.dir('ui-screen')\n    nav.append(editButton)\n    nav.find('.back').hide()\n    nav.prepend(`<button class=\"cancel\">${ settings.cancelLabel }</button>`)\n    nav.find('.cancel').hide()\n    let editBtn = $(settings.element).closest('ui-screen').find('nav .edit')\n    let cancelBtn = $(settings.element).closest('ui-screen').find('nav .cancel')\n    $(settings.element).on('tap', '.deletion-indicator', function() {\n      this.parentNode.classList.toggle('selected')\n    })\n    editBtn.on('tap', function () {\n      let $this = this\n      /**\n       * When button is in \"Edit\" state:\n       */\n      let cancelBtn = $this.parentNode.querySelector('.cancel')\n      if (this.classList.contains('edit')) {\n        setTimeout(function () {\n          $this.classList.remove('edit')\n          $this.classList.add('done')\n          $($this).text(settings.doneLabel)\n          document.querySelector(settings.element).classList.add('showIndicators')\n          let backBtn = $this.parentNode.querySelector('.back')\n          $(backBtn).hide()\n          $(cancelBtn).css('display', 'block')\n\n        })\n\n        /**\n         * When button is in \"Done\" state:\n         */\n      } else if (this.classList.contains('done')) {\n        /**\n         * Execute callback if edit was performed:\n         */\n        setTimeout(function () {\n          $this.classList.remove('done')\n          $this.classList.add('edit')\n          $($this).text(settings.editLabel)\n          let list = document.querySelector(settings.element)\n          list.classList.remove('showIndicators')\n          let selectedItems = $(settings.element + ' li.selected')\n          selectedItems.forEach(function(li) {\n            li.classList.remove('selected')\n          })\n          $(cancelBtn).css('display', 'none')\n        })\n\n        if (!__editMade) return\n        let movedItems = []\n\n        /**\n         * Reorder model based on user choice:\n         */\n        if (settings.state) {\n          // (function () {\n            let __data = settings.state.get()\n            let __newarray = []\n            let liData = $(settings.element).find('li')\n            let temp = []\n            liData.array.map(item => {\n              temp.push(item.dataset.id)\n            })\n            temp.forEach(item => {\n              let found = __data.find(li => {\n                return li.uuid === item\n              })\n              __newarray.push(found)\n            })\n            settings.state.purge()\n            settings.state.replace(__newarray)\n            __newarray = []\n          // })()\n\n          self.callback.call(self, self.callback)\n        }\n      }\n    })\n    cancelBtn.on('tap', function() {\n      let $this = this\n      let editBtn = $(settings.element).closest('ui-screen').find('nav .done')\n      editBtn.text(settings.editLabel)\n      editBtn.array[0].classList.remove('done')\n      editBtn.array[0].classList.add('edit')\n      setTimeout(function () {\n        document.querySelector(settings.element).classList.remove('showIndicators')\n        let backBtn = $this.parentNode.querySelector('.back')\n        $(backBtn).show()\n        $($this).css('display', 'none')\n      })\n    })\n  }\n}\n\n\nclass UIMultiSelectList {\n  constructor(options) {\n    if (!options || !options.element) return\n    const self = this\n    let settings = {\n      element: undefined,\n      selected: [],\n      name: $.uuid() + '[]',\n      callback: $.noop,\n      state: undefined\n    }\n    this.selection = []\n    $.extend(settings, options)\n    let selections = settings.selected\n    const name = settings.name\n    const list = $(settings.element)\n    const selectionIndicator = function(value) {\n      return`<aside>\n        <span class=\"multi-selection-indicator\">\n          <svg width=\"30px\" height=\"30px\" viewBox=\"0 0 30 30\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"multi-select-icon\" stroke=\"#979797\">\n              <g id=\"multi-select-circle-+-multi-select-checkmark\" transform=\"translate(2.000000, 2.000000)\">\n                <circle id=\"multi-select-circle\" cx=\"13\" cy=\"13\" r=\"13\"></circle>\n                <path d=\"M4.71521456,15.9877529 L13.0000002,20.7028494 L19.977049,5.70284941\" id=\"multi-select-checkmark\"></path>\n                </g>\n              </g>\n            </g>\n          </svg>\n        </span>\n      </aside>`\n    }\n    if (settings.state) {\n      settings.state.boundComponents.push(this)\n    }\n\n    // this.val = () => __selection\n\n\n    this.render = function(data, append) {\n      var temp = ''\n      if (!settings.element) {\n        return\n      }\n\n      if (!data && settings.state) {\n        data = settings.state.get()\n      }\n\n      if (Array.isArray(data)) {\n        data.map(function(item, idx) {\n          temp += settings.render(item)\n        }).join('')\n      } else {\n        return\n      }\n\n      var elm = $(settings.element)\n      elm.array[0].classList.add('multi-select-list')\n      elm.empty()\n      elm.append(temp)\n      setTimeout(function() {\n        var data = settings.state.get()\n        var listItems = Array.prototype.slice.apply(elm[0].querySelectorAll('li'))\n        listItems.map((item, idx) => {\n          item.dataset.select = data[idx].value\n          if (settings.selected && settings.selected.length) {\n            if (settings.selected.indexOf(idx) > -1) {\n              item.classList.add('selected')\n\n              self.selection.push({\n                index: idx,\n                value: data[idx].value\n              })\n            }\n          }\n          $(item).prepend(selectionIndicator(data[idx][settings.value]))\n          $(item).append(`<input type=\"checkbox\" name=\"${ name }\" value=\"${ data[idx].value }\">`)\n        })\n      })\n    }\n\n    list.on('tap', 'li', function() {\n      const item = this\n      if (item.classList.contains('selected')) {\n        item.classList.remove('selected')\n        item.removeAttribute('aria-checked')\n        item.querySelector('input').checked = false\n        let dataObj = {\n          index: $(item).index(),\n          value: item.dataset.select\n        }\n        let pos\n        self.selection.forEach(function(item, idx) {\n          if (item.value === dataObj.value) {\n            pos = idx\n          }\n        })\n\n        self.selection.splice(pos, 1)\n        settings.callback.apply(this, arguments)\n\n      } else {\n        self.selection.push({\n          index: $(item).index(),\n          value: item.dataset.select\n        })\n        self.selection.unique()\n        item.classList.add('selected')\n        item.setAttribute('aria-checked', true)\n        item.querySelector('input').checked = true\n        settings.callback.apply(this, arguments)\n      }\n    })\n  }\n}\n\n\n$(() => {\n  const chuiBackButtonSVG = `<svg id=\"chui-back-button-svg\" width=\"100px\" height=\"100px\" viewBox=\"0 0 100 100\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n      <g id=\"chui-back-arrow\" stroke=\"#979797\">\n        <path d=\"M50.7822487,4.05872022 L5.60302012,49.1913445 L50.4625593,94.6779982\" id=\"back-arrow-bracket\"></path>\n        <path d=\"M6,49.368351 L95.8300018,49.368351\" id=\"back-arrow-shaft\"></path>\n      </g>\n    </g>\n  </svg>`\n\n  $.fn.extend({\n    decorateBackButton: function() {\n      this.forEach(button => {\n        if (button.classList.contains('back') || button.classList.contains('backTo')) {\n          const buttonText = button.textContent.trim()\n          button.innerHTML = `<span>${ buttonText }</span>`\n          $(button).prepend(chuiBackButtonSVG)\n        }\n      })\n    }\n  })\n  $(function () {\n    $('.back').decorateBackButton()\n    $('.backTo').decorateBackButton()\n  })\n\n  let isNavigating = false\n  const getScreen = screen => $('#' + screen).array[0]\n\n  const makeScreenCurrent = screen => {\n    if (!screen) return\n    screen.classList.add('current')\n    screen.classList.remove('previous')\n    screen.classList.remove('next')\n  }\n  const makeScreenPrevious = screen => {\n    if (!screen) return\n    screen.classList.remove('current')\n    screen.classList.remove('next')\n    screen.classList.add('previous')\n  }\n  const makeScreenNext = screen => {\n    if (!screen) return\n    screen.classList.remove('current')\n    screen.classList.remove('previous')\n    screen.classList.add('next')\n  }\n\n  $.extend({\n\n    /**\n     * Navigate to Specific Article\n     */\n    GoTo: destination => {\n      if ($.isNavigating) return\n      $.isNavigating = true\n      setTimeout(function () {\n        $.isNavigating = false\n      }, 500)\n      $.ChuiRoutes.push(destination)\n      const currentScreen = $('ui-screen.current').array[0]\n      const destinationScreen = function () {\n        let temp\n        const regex = /:/img\n        temp = regex.test(destination) ? destination.split(':')[0] : destination\n        return getScreen(temp)\n      }()\n      if (currentScreen) currentScreen.scrollTop = 0\n      if (destinationScreen) destinationScreen.scrollTop = 0\n      makeScreenPrevious(currentScreen)\n      makeScreenCurrent(destinationScreen)\n      Router.dispatch(destination)\n    },\n\n    /**\n     * Navigate Back to Previous Article\n     */\n    GoBack: () => {\n      if ($.isNavigating) return\n      $.isNavigating = true\n      const currentScreen = $('ui-screen.current').array[0]\n      $.ChuiRoutes.pop()\n      const destination = $.ChuiRoutes[$.ChuiRoutes.length - 1]\n      const destinationScreen = function () {\n        let temp\n        const regex = /:/img\n        temp = regex.test(destination) ? destination.split(':')[0] : destination\n        return getScreen(temp)\n      }()\n      if (currentScreen[0]) currentScreen[0].scrollTop = 0\n      if (destinationScreen[0]) destinationScreen[0].scrollTop = 0\n      makeScreenNext(currentScreen)\n      makeScreenCurrent(destinationScreen)\n      Router.dispatch(destination)\n      setTimeout(function () {\n        $.isNavigating = false\n      }, 500)\n    },\n\n    isNavigating: false,\n\n    /**\n     * Navigate Back to Non-linear Article\n     */\n    GoBackTo: destination => {\n      const position = $.ChuiRoutes.findIndex(function(dest) {\n        return dest = destination\n      })\n      const destinationScreen = getScreen(destination)\n      while ($.ChuiRoutes.length > position + 1) {\n        let route = $.ChuiRoutes.pop()\n        route = route.split(':')[0]\n        let screen = getScreen(route)\n        makeScreenNext(screen)\n      }\n      makeScreenCurrent(destinationScreen)\n      Router.dispatch(destination)\n    }\n  })\n\n  /**\n   * Initialize Back Buttons:\n   */\n  $('body').on('tap', '.back', function () {\n    if (this.hasAttribute('disabled')) return\n    $.GoBack()\n  })\n\n  /**\n   * Handle navigation events:\n   */\n  const handleNavigationEvent = element => {\n    if ($.isNavigating) return\n    if (!element.dataset.goto) return\n    if ($(element).closest('ul').is('.deletable')) return\n    let destination = element.dataset.goto\n    // console.log(destination)\n    if (!destination) return\n    element.classList.add('selected')\n    setTimeout(() => element.classList.remove('selected'), 1000)\n    /**\n     * Handle navigation:\n     */\n    $.GoTo(destination)\n  }\n\n  $('body').on('tap', 'li', function () {\n    handleNavigationEvent(this)\n  })\n  \n  $('body').on('doubletap', 'li', function () {\n    if (!$.isNavigating) {\n      handleNavigationEvent(this)\n    }\n  })\n  const globalNav = html`<nav id='global-nav'></nav>`\n  $('body').prepend(globalNav)\n})\n\n\n/**\n * Paging control.\n * const options = {\n *   element: selector,\n *   screen: '#main',\n *   data: collection[],\n *   size: 3\n * }\n */\nclass UIPaging {\n  constructor(options) {\n    if (!options) return\n    const pagingControls = `\n      <div class=\"pager\" id='paging-controls'>\n        <button class=\"previous\" id='paging-previous' disabled>\n          <svg width=\"24px\" height=\"36px\" viewBox=\"0 0 24 36\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"pagination-icons\" stroke=\"#979797\"><path d=\"M19.7729197,3 L4.25431067,17.8699971 L19.7729196,32.9558941\" id=\"page-previous\"></path></g></g></svg>\n        </button>\n        <button class=\"next\" id='paging-next'>\n          <svg width=\"24px\" height=\"36px\" viewBox=\"0 0 24 36\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"pagination-icons\" stroke=\"#979797\"><path d=\"M4.08862955,3.06871359 L20.0261609,18.0528447 L4.08862956,32.9999994\" id=\"page-next\"></path></g></g></svg>\n        </button>\n      </div>`;\n    const settings = {}\n    $.extend(settings, options)\n    var screen = $(settings.screen);\n    screen.find('nav').append(pagingControls)\n    var chunks = $.chunk(settings.data, settings.size)\n\n    /**\n     * Setup buttons for paging.\n     */\n    $(() => {\n      $('#paging-next').on($.eventStart, function() {\n        if (this.disabled) return\n        var currPage = document.querySelector('article.current')\n        if (!currPage) return\n        var nextPage = currPage.nextElementSibling\n        if (nextPage && nextPage.className === 'next') {\n          currPage.classList.add('previous')\n          currPage.classList.remove('current')\n          nextPage.classList.add('current')\n          nextPage.classList.remove('next')\n          document.getElementById('paging-previous').removeAttribute('disabled')\n          if (!nextPage.nextElementSibling || !nextPage.nextElementSibling.classList.contains('next')) {\n            this.disabled = true\n          }\n        }\n      })\n      $('#paging-previous').on($.eventStart, function() {\n        if (this.disabled) return\n        var currPage = document.querySelector('article.current')\n        if (!currPage) return\n        var nextPage = currPage.previousElementSibling\n        if (nextPage && nextPage.className === 'previous') {\n          currPage.classList.add('next')\n          currPage.classList.remove('current')\n          nextPage.classList.add('current')\n          nextPage.classList.remove('previous')\n          document.getElementById('paging-next').removeAttribute('disabled')\n          if (!nextPage.previousElementSibling || !nextPage.previousElementSibling.classList.contains('previous')) {\n            this.disabled = true\n          }\n        }\n      })\n\n    })\n\n    this.render = function() {\n      var temp = ''\n      if (Array.isArray(chunks)) {\n\n        temp = settings.render(chunks)\n\n      } else {\n        return\n      }\n      var elm = $(settings.screen).find('section')\n      elm.empty()\n      elm.append(temp)\n    }\n\n  }\n}\n\n\nclass UIPopover {\n  constructor(options) {\n    if (!options) return\n    /**\n      id: myUniqueID,\n      title: 'Great',\n      callback: myCallback,\n    */\n    options = options || {}\n    let settings = {\n      id: $.uuid(),\n      callback: $.noop,\n      title: '',\n    }\n    $.extend(settings, options)\n    if (options && options.content) {\n      settings.content = options.content\n    } else {\n      settings.content = ''\n    }\n    const header = `<header><h1>${ settings.title }</h1></header>`\n    const popover = `<ui-popover id=\"${ settings.id }\">${ header }<section></section></ui-popover>`\n    const popoverID = '#' + settings.id\n\n    var side = document.dir === 'rtl' ? 'right' : 'left'\n\n    this.open = function() {\n      $.block('.5')\n      if (document.body.classList.contains('themeIsAndroid')) {\n        document.getElementById(settings.id).style.display = 'block'\n        setTimeout(() => {\n          document.getElementById(settings.id).classList.add('opened')\n          $.positionPopover(settings.trigger)\n        })\n      } else {\n        document.getElementById(settings.id).style.display = 'block'\n        document.getElementById(settings.id).classList.add('opened')\n        $.positionPopover(settings.trigger)\n      }\n    }\n\n    $('body').append(popover)\n    $(popoverID)[0].dataset.triggerEl = settings.trigger\n    $(popoverID).find('section').append(settings.content)\n    settings.callback.call(settings.callback, settings.trigger)\n\n  }\n}\n\n$.extend({\n  positionPopover: element => {\n    const el = document.querySelector(element)\n    let left = el.offsetLeft\n    let calcLeft\n    let calcTop\n    let po = $('ui-popover.opened')\n    calcLeft = po.array[0].offsetLeft\n    calcTop = el.offsetTop + el.clientHeight\n\n    if (document.dir === 'rtl') {\n      if ((po.array[0].clientWidth + el.offsetLeft) > window.innerWidth) {\n        po.css({\n          left: (po.array[0].clientLeft - 20) + 'px',\n          'top': (calcTop) + 25 + 'px'\n        })\n      } else {\n        if (el.offsetLeft < 250) {\n          po.css({\n            left: 20 + 'px',\n            'top': (calcTop + 25) + 'px'\n          })\n        } else {\n          po.css({\n            left: (left - 20) + 'px',\n            'top': (calcTop + 25) + 'px'\n          })\n        }\n      }\n    } else {\n      if ((po.array[0].clientWidth + el.offsetLeft) > window.innerWidth) {\n        po.css({\n          left: (window.innerWidth - po.array[0].clientWidth - 20) + 'px',\n          'top': (calcTop) + 25 + 'px'\n        })\n      } else {\n        po.css({\n          left: left + 'px',\n          'top': (calcTop + 25) + 'px'\n        })\n      }\n    }\n  },\n\n  closePopover: () => {\n    var popover = document.querySelector('ui-popover.opened')\n    if (!popover) return\n    $.unblock()\n    popover.classList.remove('opened')\n    popover.style.display = 'none'\n  }\n})\n$(() => {\n  window.onresize = () => {\n    const popover = document.querySelector('ui-popover.opened')\n    if (popover) {\n      const trigger = document.querySelector('ui-popover.opened').dataset.triggerEl\n      $.positionPopover(trigger)\n    }\n  }\n  $('body').on($.eventStart, 'ui-mask', e => {\n    $.closePopover()\n  })\n})\n\n\nclass UIPopup {\n  constructor(options) {\n\n    if (!options) return\n    let settings = {}\n    settings.id = $.uuid()\n    settings.content = true\n    $.extend(settings, options)\n    let width = ''\n    if (settings.width) {\n      width = `style=\"width:${settings.width}px\"`\n    }\n\n    const id = settings.id\n    const title = settings.title ? `<header><h1>${settings.title}</h1></header>` : ''\n    const message = settings.message ? `<p role=\"note\">${options.message}</p>` : ''\n    const cancelButton = options.cancelButton ? `<button class=\"cancel\" role=\"button\">${settings.cancelButton}</button>` : ''\n    const continueButton = settings.continueButton ? `<button class=\"continue\" role=\"button\">${settings.continueButton}</button>` : ''\n    const callback = settings.callback || $.noop\n    let popup\n    if (settings.empty) {\n      popup = `<div id=\"${id}\" class=\"popup\"><div ${width} class=\"dialog\" role=\"alertdialog\"></div></div>`\n    } else {\n      popup = `<div class=\"popup\" id=\"${id}\"><div class=\"dialog\" role=\"alertdialog\"><div class=\"panel\">${title}${message}</div><footer>${cancelButton}${continueButton}</footer></div></div>`\n    }\n    function closePopup(popup) {\n      popup.classList.remove('opened')\n    }\n    $('body').append(popup)\n    if (settings.empty) {\n      $('.dialog').css({\n        \"display\": \"-webkit-flex\",\n        \"-webkit-justify-content\": \"center\",\n        \"-webkit-align-items\": \"center\",\n        \"display\": \"flex\",\n        \"justify-content\": \"center\",\n        \"align-items\": \"center\"\n      })\n    }\n    this.close = function() {\n      const popup = document.getElementById(settings.id)\n      if (popup) popup.classList.remove('opened')\n    }\n    if (callback && continueButton) {\n      $('#' + id).find('.continue').on('tap', function () {\n        const self = this\n        if ($.isAndroid || $.isChrome) {\n          self.classList.add('selected')\n          setTimeout(function () {\n            self.classList.remove('selected')\n            $('.popup').ClosePopup()\n            callback.call(callback)\n          }, 300)\n        } else {\n          closePopup($(this).closest('.popup').array[0])\n          callback.call(callback)\n        }\n      })\n    }\n    $('#' + id).find('.cancel').on('tap', function () {\n      const popup = $(this).closest('.popup').array[0]\n      const self = this\n      if ($.isAndroid || $.isChrome) {\n        self.classList.remove('selected')\n        setTimeout(function () {\n          self.classList.remove('selected')\n          closePopup(popup)\n        }, 300)\n      } else {\n          closePopup(popup)\n      }\n    })\n\n    $(function() {\n      $('.popup').on('tap', function (e) {\n        this.classList.remove('opened')\n      })\n    })\n\n    this.open = () => {\n      const popup = document.getElementById(settings.id)\n      if (popup) {\n        popup.classList.remove('forPopup')\n        popup.classList.add('opened')\n      }\n    }\n  }\n}\n\n\nclass UIRange {\n  constructor(range) {\n    function _range(input) {\n      if (!input || input.nodeName !== 'INPUT') return\n      let newPlace\n      const width = input.clientWidth\n      const newPoint = (input.value - input.getAttribute(\"min\")) / (input.getAttribute(\"max\") - input.getAttribute(\"min\"))\n      let offset = -1.3\n      if (newPoint < 0) {\n        newPlace = 0\n      } else if (newPoint > 1) {\n        newPlace = width\n      } else {\n        newPlace = width * newPoint + offset\n        offset -= newPoint\n      }\n      if ($.theme  && $.theme === 'android') {\n        $(input).css({\n          'background-size': Math.round(newPlace) + 'px 3px, 100% 3px'\n        })\n      } else {\n        $(input).css({\n          'background-size': Math.round(newPlace) + 'px 10px'\n        })\n      }\n    }\n    setTimeout(() => {\n      const ranges = $('input[type=range]')\n      if (ranges.array.length) {\n        ranges.array.forEach(ctx => {\n          _range(ctx)\n        })\n      }\n    })\n    $('body').on('input', 'input[type=range]', function() {\n      _range(this)\n    })\n    if (range) {\n      $(() => {\n        _range(range)\n      })\n    }\n  }\n}\n\n\n$.extend({\n  ChuiRoutes: []\n})\nclass Router {\n  constructor() {}\n\n  addRoute(...options) {\n    options.forEach(item => $.subscribe(item.route, item.callback));\n  }\n  static dispatch(route) {\n    if (!route) return\n    let temp\n    let id\n    if (route.match(/\\:/)) {\n      temp = route.split(':')\n      id = temp[1]\n      route = temp[0]\n    }\n    $.publish(route, id)\n  }\n}\n\n$.extend($.ChuiRoutes, {\n  getFullRoute: function getFullRoute() {\n    return this.join('/')\n  }\n})\n\n$(() => {\n  if ($('ui-screen').array.length && !$.ChuiRoutes.length) {\n    $.ChuiRoutes.push($('ui-screen').array[0].id)\n  }\n})\n\n\nclass UISegmented {\n  constructor(options) {\n    if (!options || !options.element) return\n    const self = this\n    let settings = {\n      selected: 0,\n      callback: $.noop\n    }\n    $.extend(settings, options)\n\n    this.button\n    let segmented\n    const labels = (settings.labels) ? settings.labels : []\n    this.index\n    this.element = settings.element\n\n    function createSegmentedButton() {\n      let androidSelectionIndicator = ''\n      if ($.theme = 'android') {\n        androidSelectionIndicator = '<span class=\"androidSelectionBorder\"></span>'\n      }\n      let __segmented = ['<ui-segmented>']\n      labels.forEach(function(ctx, idx) {\n        if (settings.selected === idx) {\n          __segmented.push('<button role=\"radio\" aria-checked=\"true\" class=\"selected\">')\n          self.index = idx\n        } else {\n          __segmented.push('<button role=\"radio\">')\n        }\n\n        __segmented.push(ctx)\n        __segmented.push('</button>')\n      })\n      __segmented.push(androidSelectionIndicator + '</ui-segmented>')\n      segmented = __segmented.join('')\n      $(settings.element).append(segmented)\n      self.button = $(settings.element).find('button').eq(settings.selected).array[0]\n\n\n\n    }\n    createSegmentedButton()\n\n    /**\n     * For Android Material Design:\n     */\n    let androidSelectionBorder\n    if ($.theme === 'android') {\n      androidSelectionBorder = $(this.element).find('.androidSelectionBorder')\n      let selectedButton = $(this.element).find('button').eq(settings.selected)\n      let width = selectedButton.array[0].clientWidth\n      let left = selectedButton.array[0].offsetLeft\n      androidSelectionBorder.css({width: width + 'px', left: left + 'px'})\n    }\n\n    const callback = settings.callback\n    $(this.element).on('tap', 'ui-segmented > button', function(e) {\n      if (this.parentNode.classList.contains('paging')) return\n      $(this).siblings('button').array.map(btn => btn.classList.remove('selected'))\n      $(this).siblings('button').array.map(btn => btn.removeAttribute('aria-checked'))\n      this.classList.add('selected')\n      self.index = $(this).index()\n      self.button = this\n      this.setAttribute('aria-checked', true)\n      callback.call(this, e)\n\n      /**\n       * For Android Material Design:\n       */\n      if ($.theme === 'android') {\n        let width = this.clientWidth\n        let left = this.offsetLeft\n        if (document.dir === 'rtl') {\n          left = this.offsetLeft\n        }\n        androidSelectionBorder.css({width: width + 'px', left: left + 'px'})\n      }\n    })\n  }\n}\n\n\nclass UISelectList {\n  constructor(options) {\n    if (!options || !options.element) return\n    var self = this\n    let settings = {\n      element: undefined,\n      selected: undefined,\n      name: $.uuid(),\n      callback: $.noop,\n      state: undefined,\n      render: undefined,\n      value: undefined,\n    }\n    $.extend(settings, options)\n    this.value = settings.value\n    this.index = settings.selected\n    const name = settings.name\n    this.elm = $(settings.element)\n\n    const selectionIndicator = function(value) {\n      return `\n        <input type='checkbox' value='${value}' name='${settings.name}'><aside>\n        <span class=\"selection-indicator\">\n          <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <g id=\"selection-indicator\">\n                <path d=\"M2,13 L9.9294326,16.8406135 L17.1937075,1.90173332\" id=\"checkmark\" stroke=\"#007AFF\" stroke-width=\"2\"></path>\n                <circle id=\"outer-circle\" stroke=\"#007AFF\" stroke-width=\"2\" cx=\"10\" cy=\"10\" r=\"9\"></circle><circle id=\"inner-circle\" fill=\"#007AFF\" cx=\"10\" cy=\"10\" r=\"5\"></circle>\n              </g>\n            </g>\n          </svg>\n        </span>\n      </aside>\n      `\n    }\n    if (settings.state) {\n      settings.state.boundComponents.push(this)\n    }\n    let settingsData\n    if (settings.state) settingsData = settings.state.get()\n    this.value = settingsData ? settingsData[settings.selected].value : ''\n    this.index = settings.selected\n\n    this.render = function(data, append) {\n      var temp = ''\n      if (!settings.element) {\n        return\n      }\n\n      if (!data && settings.state) {\n        data = settings.state.get()\n      }\n\n      if (Array.isArray(data)) {\n        data.map(function(item) {\n          temp += settings.render(item)\n        }).join('')\n      } else {\n        return\n      }\n\n      this.elm.textContent = ''\n      var elm = $(settings.element)\n      elm.empty()\n      elm.append(temp)\n      setTimeout(function() {\n        var data = settings.state.get()\n        var listItems = Array.prototype.slice.apply(elm[0].querySelectorAll('li'))\n        listItems.map((item, idx) => {\n          $(item).append(selectionIndicator(data[idx].value))\n          if (idx == settings.selected) item.classList.add('selected')\n        })\n      })\n    }\n\n    $(settings.element).on('tap', 'li', function() {\n      const item = $(this)\n      self.value = this.querySelector('input').value\n      self.index = item.index()\n\n      var siblings = item.siblings('li')\n      siblings.forEach(function(sib) {\n        sib.removeAttribute('aria-checked')\n        sib.classList.remove('selected')\n        sib.querySelector('input').checked = false\n      })\n      this.classList.add('selected')\n      this.setAttribute('aria-checked', true)\n      this.querySelector('input').checked = true\n      settings.callback.apply(this, arguments)\n    })\n  }\n}\n\n\nclass UISheet {\n  constructor(options) {\n    if (!options) return\n    /**\n      var options {\n        id : 'starTrek',\n        background: 'transparent',\n        handle: false,\n        slideDown: false // default is slideUp\n      }\n    */\n    if (!options) return\n    let settings = {\n      id: $.uuid(),\n      background: '',\n      handle: true,\n      slideFrom: ''\n    }\n\n    $.extend(settings, options)\n\n    if (settings.background) settings.background = ' style=\"background-color:' + settings.background + '\" '\n    if (settings.slideFrom === 'top') {\n      settings.slideDown = ` class=\"slideDown\" `\n    } else {\n      settings.slideFrom = ' '\n    }\n    if (settings.handle === false) settings.handle = ''\n    else settings.handle =\n      `<ui-sheet-handle>\n        <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 76 27\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:butt;stroke-linejoin:butt;stroke-miterlimit:1.41421;\">\n          <g id=\"sheet-handle\" transform=\"matrix(1,0,0,1,-29.7966,-15.7797)\">\n            <path id=\"sheet-handle-path\" d=\"M36.25,26.242L67.645,34.215L98.176,25.789\" style=\"fill:none;\"/>\n          </g>\n        </svg>\n      </ui-sheet-handle>`\n\n    const sheet = `<ui-sheet id=\"${ settings.id }\" ${ settings.slideDown } ${ settings.background }>${ settings.handle }<section></section></ui-sheet>`\n\n    $('body').append(sheet)\n\n    $('#' + settings.id).find('ui-sheet-handle').on($.eventStart, () => {\n      $('#' + settings.id).array[0].classList.remove('opened')\n      document.querySelector('ui-screen.current').classList.remove('blurred')\n    })\n\n    this.show = () => {\n      let sheet = document.getElementById(settings.id)\n      document.querySelector('ui-screen.current').classList.add('blurred')\n      sheet.classList.add('opened')\n      if ($.isAndroid || $.isChrome) {\n        sheet.style.display = 'block'\n        setTimeout(function() {\n          sheet.classList.add('opened')\n        }, 20)\n      } else {\n        sheet.classList.add('opened')\n      }\n    }\n\n    this.hide = () => {\n      $('#' + settings.id).array[0].classList.remove('opened')\n      document.querySelector('ui-screen.current').classList.remove('blurred')\n    }\n\n    this.populate = (template) => $('#' + settings.id).find('section').append(template)\n  }\n}\n\n\nclass UISlideOut {\n  constructor(id) {\n    const slideoutID = id || $.uuid()\n    this.id = slideoutID\n    const buttonID = 'slideoutBtnID1234'\n    const slideOutButton = `<button id=\"${ buttonID }\" class=\"slide-out-button\"></button>`\n    const slideOut = `<ui-slideout id=\"${ slideoutID }\"><section></section></ui-slideout>`\n    $('body').prepend(slideOut)\n    $('body').append(slideOutButton)\n    /**\n     * Get Slide Out & Slide Out button:\n     */\n    let slideout = document.getElementById(slideoutID)\n    let slideOutBtn = document.getElementById(buttonID)\n\n    /**\n     * Set up state for Slide Out and screens:\n     */\n    slideout.setAttribute('aria-hidden', true)\n    $('ui-screen').forEach(screen => {\n      screen.setAttribute('aria-hidden', true)\n    })\n    document.querySelector('ui-screen').classList.add('show')\n    document.querySelector('ui-screen').setAttribute('aria-hidden', \"false\")\n\n\n    /**\n     * Handle Slide Out button events:\n     */\n    $('#'+buttonID).on('tap', function() {\n      this.classList.toggle('focused')\n      slideout.classList.toggle('open')\n      if (slideout.classList.contains('open')) {\n        $.block('.5')\n      } else {\n        $.unblock()\n      }\n    })\n\n    $(slideout).on('tap', 'li', function() {\n      let menuItems = $(slideout).find('li[data-show]')\n      slideout.setAttribute('aria-hidden', 'true')\n      $.unblock()\n\n      /**\n       * Toggle Slide Out button:\n       */\n      slideOutBtn.classList.toggle('focused')\n      while ($.ChuiRoutes.length > 1) {\n        $.GoBack()\n      }\n\n      /**\n       * This list item shows a single screen:\n       */\n      menuItems.forEach(item => {\n        if (item.classList.contains('selected')) {\n          item.classList.remove('selected')\n        }\n      })\n      const shownScreen = document.querySelector('ui-screen.show')\n      shownScreen.classList.remove('show')\n      shownScreen.setAttribute('aria-hidden', true)\n      const screenToShow = '#' + this.dataset.show.split(':')[0]\n      /**\n       * Account for presence of navigation list state:\n       */\n      setTimeout(function() {\n        document.querySelector(screenToShow).classList.remove('next')\n      }, 200)\n      document.querySelector(screenToShow).classList.add('show')\n      // console.log()\n      Router.dispatch(this.dataset.show)\n      /**\n       * Close slide out:\n       */\n      slideout.classList.remove('open')\n    })\n  }\n\n  populate(options) {\n    if (!options) return\n    const slideout = document.getElementById(this.id)\n    if (!options) {\n      return\n    } else {\n      slideout.querySelector('section').appendChild($.h('<ul class=\"list\"></ul>'))\n      let list = slideout.querySelector('ul')\n      options.forEach(ctx => {\n        for (let key in ctx) {\n          if (key === 'header') {\n            $(list).append('<li class=\"menu-header\"><h2>' + ctx[key] + '</h2></li>')\n          } else {\n            $(list).append('<li data-show=\"' + key + '\"><h3>' + ctx[key] + '</h3></li>')\n          }\n        }\n      })\n    }\n  }\n}\n\n\nclass UIStepper {\n  constructor(options) {\n    if (!options || !options.element || !options.min || !options.max) return\n    var self = this\n    this.stepper = $(options.element)\n    const min = options.min\n    const max = options.max\n    const defaultValue = options.defaultValue ? options.defaultValue : options.min\n    let increaseSymbol = '+'\n    let decreaseSymbol = '-'\n    let disabledDecrease = ''\n    let disabledIncrease = ''\n    this.value\n    if (min === defaultValue) {\n      disabledDecrease = ' disabled '\n    } else if (max === defaultValue) {\n      disabledIncrease = ' disabled '\n    }\n    const decreaseButton = '<button ' + disabledDecrease + ' class=\"decrease\"><span>-</span></button>'\n    const label = `<label>${ defaultValue }</label><input type=\"text\" value=\"${ defaultValue }\">`\n    const increaseButton = '<button ' + disabledIncrease + '  class=\"increase\"><span>+</span></button>'\n    $(options.element).append(decreaseButton + label + increaseButton)\n    var dataVal = {\n      min: min,\n      max: max,\n      defaultValue: defaultValue\n    }\n    $(options.element).array[0].dataset.value = JSON.stringify(dataVal)\n\n    const increaseStepperValue = function() {\n      const currentValue = $(options.element).find('input').array[0].value\n      const value = JSON.parse($(options.element).array[0].dataset.value)\n      const max = value.max\n      let newValue\n      newValue = parseInt(currentValue, 10) + 1\n      $(options.element).find('button:first-of-type').array[0].removeAttribute('disabled')\n      $(options.element).find('label').text(newValue)\n      $(options.element).find('input').array[0].value = newValue\n      self.value = newValue\n      if (newValue == max) {\n        this.setAttribute('disabled', 'disabled')\n      }\n    }\n\n    const decreaseStepperValue = function() {\n      const currentValue = $(options.element).find('input').array[0].value\n      const value = JSON.parse($(options.element).array[0].dataset.value)\n      let newValue\n      newValue = parseInt(currentValue, 10) - 1\n      $(options.element).find('button:last-of-type').array[0].removeAttribute('disabled')\n      $(options.element).find('label').text(newValue)\n      $(options.element).find('input').array[0].value = newValue\n      self.value = newValue\n      if (newValue === min) {\n        this.setAttribute('disabled', 'disabled')\n      }\n    }\n\n    $(options.element).find('button:last-of-type').on($.eventStart, function() {\n      increaseStepperValue.call(this, this.__stepper)\n    })\n\n    $(options.element).find('button:first-of-type').on($.eventStart, function() {\n      decreaseStepperValue.call(this, this.__stepper)\n    })\n  }\n}\n\n\nclass UISwitch {\n  constructor(options) {\n    if (!options || !options.element) return\n    this.checked = false\n    this.value = undefined\n    const self = this\n    let settings = {\n      element: undefined,\n      name: undefined,\n      value: undefined,\n      checked: false,\n      on: $.noop,\n      off: $.noop\n    }\n    $.extend(settings, options)\n    this.checked = settings.checked\n    this.value = settings.value\n    let __element = $(settings.element)\n    let __el = __element.array[0]\n    /**\n     * Abrstract swipe for left-to-right and right-to-left:\n     */\n    let swipeOn = \"swiperight\"\n    let swipeOff = \"swipeleft\"\n    if (document.documentElement.dir === \"rtl\") {\n      swipeOn = \"swipeleft\"\n      swipeOff = \"swiperight\"\n    }\n\n    let checkState = settings.checked ? ' checked' : ''\n    const __switch = `<em></em><input type=\"checkbox\" name=\"${ settings.name }\" ${ checkState } value=\"${ settings.value }\">`\n\n    __element.append(__switch)\n    __el.value =  settings.value\n    __el.setAttribute('name', settings.name)\n\n    if (this.checked) {\n      __el.classList.add('checked')\n      __el.setAttribute('role', 'checkbox')\n      __el.checked = true\n    }\n\n\n\n    __element.on('tap', function() {\n      const checkbox = this.querySelector('input')\n      if (this.classList.contains('checked')) {\n        this.classList.remove('checked')\n        this.setAttribute('aria-checked', false)\n        checkbox.removeAttribute('checked')\n        this.checked = false\n        self.checked = false\n        __el.checked = false\n        if (settings.off) {\n          settings.off.call(this)\n        }\n      } else {\n        this.classList.add('checked')\n        checkbox.setAttribute('checked', 'checked')\n        __el.checked = true\n        this.setAttribute('aria-checked', true)\n        this.checked = true\n        self.checked = true\n        if (settings.on) {\n          settings.on.call(this)\n        }\n\n      }\n    })\n    __element.on(swipeOn, function() {\n      const checkbox = this.querySelector('input')\n      if (this.classList.contains('checked')) {\n        this.classList.remove('checked')\n        this.setAttribute('aria-checked', false)\n        __el.checked = false\n        checkbox.removeAttribute('checked')\n        this.checked = true\n        self.checked = true\n        if (settings.on) {\n          settings.on.call(this)\n        }\n      }\n    })\n    __element.on(swipeOff, function() {\n      const checkbox = this.querySelector('input')\n      if (!this.classList.contains('checked')) {\n        this.classList.add('checked')\n        checkbox.setAttribute('checked', 'checked')\n        this.setAttribute('aria-checked', true)\n        __el.checked = true\n        this.checked = false\n        self.checked = false\n        if (settings.off) {\n          settings.off.call(this)\n        }\n      }\n    })\n  }\n}\n\n\nclass UITabbar {\n  constructor(options) {\n    if (!options) return\n    let id = $.uuid()\n    let settings = {\n      selected: 0\n    }\n    $.extend(settings, options)\n    if (!settings.icons.length) {\n      settings.icons = settings.labels\n    }\n    if (!settings.id) {\n      settings.id = id\n    } else {\n      id = settings.id\n    }\n\n    /* Private variable to keep track of screens. */\n    let __tabbarScreens = new Stack()\n\n    let screens = new Stack()\n    const screenPrefix = '#'\n\n    if (settings.screens) {\n      settings.screens.forEach(function (screen, idx) {\n        if (!/screenPrefix/img.test(screen)) {\n          __tabbarScreens.push(document.getElementById(screen))\n          __tabbarScreens.array[idx].classList.add('tabScreen')\n        } else {\n          __tabbarScreens.concat($(ui-screen))\n          $(screen).array[0].classList.add('tabScreen')\n        }\n      })\n    } else {\n      settings.labels.forEach(function (screen, idx) {\n        __tabbarScreens.push(screens.eq(idx))\n      })\n    }\n    let selectedScreen\n    let androidSelectionIndicator = ''\n    if ($.theme === 'android') {\n      androidSelectionIndicator = '<span class=\"androidSelectionBorder\"></span>'\n    }\n    const showIcons = settings.showIcons ? ' class=\"showIcons\" ' : ''\n\n    /* Create tabs. */\n    const makeTab = (label, icon, idx) => {\n      let tab = '<button role=\"tab\" class=\"' + icon\n      if (settings.selected === idx) {\n        tab += ' selected'\n        $.ChuiRoutes = [settings.screens[idx]]\n      }\n      tab += '\"'\n      if (settings.screens && settings.screens.length) {\n        tab += ` data-id=\"${ settings.screens[idx] }\" data-chui-route=\"${ settings.screens[idx] }\"`\n      }\n      tab += `><span class=\"icon\"></span><label>${ settings.labels[idx] }</label></button>`\n      return tab\n    }\n    /* Create tab bar. */\n    let tabbarTmpl = document.createElement('ui-tabbar')\n    tabbarTmpl.role = \"tabpanel\"\n    if (settings.showIcons) tabbarTmpl.classList.add('showIcons')\n    tabbarTmpl.insertAdjacentHTML('beforeend', androidSelectionIndicator)\n    tabbarTmpl.id = settings.id\n    window.tabbarTmpl = tabbarTmpl\n\n    if (settings.labels.length) {\n      settings.labels.forEach(function (label, idx) {\n        var tab = makeTab(label, settings.icons[idx], idx)\n        tabbarTmpl.appendChild($.h(tab))\n      })\n    }\n\n    /* Append tabbar to page. */\n    $('body').prepend(tabbarTmpl)\n\n    /* Get id of appended tab bar. */\n    const tabbar = $('#' + settings.id)\n    const selectedTabButton = tabbar.find('button.selected')\n\n\n    /* Private variables to manage tab bar. */\n    const __tabbarButtons = tabbar.find('button')\n    const __selectedTabbarButton = __tabbarButtons.eq(settings.selected)\n    const __selectedTabbarScreen = __tabbarScreens.eq(settings.selected)\n\n    /* For Android Material Design. */\n    const androidSelectionBorder = tabbar.find('.androidSelectionBorder')\n    function handleTabSelectionForAndroid(tab) {\n      let width = tab.clientWidth\n      let left = tab.offsetLeft\n      androidSelectionBorder.css({width: width + 'px', left: left + 'px'})\n    }\n    if ($.theme === 'android') {\n      $(function() {\n        console.dir(selectedTabButton)\n        handleTabSelectionForAndroid(selectedTabButton.array[0])\n\n      })\n    }\n\n    this.getSelectedTab = () => {\n      return __selectedTabbarButton\n    }\n\n    this.getSelectedScreen = () => {\n      return __selectedTabbarScreen\n    }\n\n    /* Setup events on tabs. */\n    $(() => {\n\n      const tabbarButtons = tabbar.find('button')\n\n      /* Tap on tab. */\n      tabbar.on('tap', 'button', function () {\n        const tab = this\n        const routes = tab.dataset.chuiRoute.split('/')\n        const fullRoute = $.ChuiRoutes.join('/')\n        let navRoutesFull = tab.dataset.chuiRoute\n        const navRoutes = navRoutesFull.split('/')\n        const rr = $.ChuiRoutes\n\n        /* This tab holds a navigation list. */\n        var currBtn = document.querySelector('ui-tabbar button.selected')\n        currBtn.classList.remove('selected')\n        currBtn.dataset.chuiRoute = fullRoute\n        this.classList.add('selected')\n        if (navRoutes.length > 1) {\n          navRoutesFull = tab.dataset.chuiRoute\n\n          const navRoutes = navRoutesFull.split('/')\n\n          const currScreen = document.querySelector('ui-screen.current')\n          if (currScreen) {\n            currScreen.classList.remove('current')\n            currScreen.classList.add('next')\n          }\n          const prevScreen = document.querySelector('ui-screen.previous')\n          if (prevScreen) {\n            prevScreen.classList.remove('previous')\n            prevScreen.classList.add('next')\n          }\n\n          navRoutes.forEach( (route, idx) => {\n            const routing = route.split(':')\n            let whichRoute = routing[0]\n            let screen = document.getElementById(whichRoute)\n            if (idx !== routes.length - 1) {\n              screen.classList.remove('next')\n              screen.classList.add('previous')\n              screen.setAttribute('aria-hidden', true)\n            } else {\n              screen.classList.remove('next')\n              screen.classList.add('current')\n              screen.setAttribute('aria-hidden', false)\n            }\n          })\n\n          /* Take care of routes. */\n          $.ChuiRoutes = routes\n          Router.dispatch(routes[routes.length - 1])\n\n          /* Handle Android ripple effect. */\n          if ($.theme === 'android') {\n            handleTabSelectionForAndroid(tab)\n          }\n\n          /* This tab has a single screen. */\n        } else {\n          const screen = $('ui-screen').eq($(tab).index())\n\n          /* Deal with previously selected tab and screen. */\n          const currScreen =  document.querySelector('ui-screen.current')\n          if (currScreen) {\n            currScreen.classList.remove('current')\n            currScreen.classList.add('next')\n            currScreen.setAttribute('aria-hidden', true)\n          }\n          const prevScreen = document.querySelector('ui-screen.previous')\n\n          if (prevScreen) {\n            prevScreen.classList.remove('previous')\n            prevScreen.classList.add('next')\n            prevScreen.setAttribute('aria-hidden', true)\n          }\n\n          /* Set this tab to `selected`. */\n          tab.classList.add('selected')\n          if ($.theme === 'android') {\n            handleTabSelectionForAndroid(tab)\n          }\n\n          routes.forEach( (route, idx) => {\n            const routing = route.split(':')\n            const whichRoute = routing[0]\n            const wr = document.getElementById(whichRoute)\n            if (idx !== routes.length - 1) {\n              wr.classList.remove('next')\n              wr.classList.add('previous')\n              wr.setAttribute('aria-hidden', true)\n\n            } else {\n              if (wr) {\n                wr.classList.remove('next')\n                wr.classList.add('current')\n                wr.setAttribute('aria-hidden', false)\n              } else {\n              }\n            }\n          })\n\n          /* Take care of routes. */\n          $.ChuiRoutes = routes\n          Router.dispatch(fullRoute)\n        }\n      })\n\n      $('ui-screen').eq(settings.selected).array[0].classList.remove('next')\n      $('ui-screen').eq(settings.selected).array[0].classList.add('current')\n    })\n\n  }\n}\n\n\n\n// const UITabbar = (() => {\n//   /* Creates a Tab Bar for Toggling Articles. */\n//   function _tabBar(options) {\n//     /**\n//     var options = {\n//       id: 'mySpecialTabbar',\n//       labels: [\"Refresh\", \"Add\", \"Info\", \"Downloads\", \"Favorite\"],\n//       icons: [\"refresh\", \"add\", \"info\", \"downloads\", \"favorite\"],\n//       screens: [],\n//       selected: 2,\n//       showIcons: false // set to true to show icons for Android\n//     }\n//     */\n//     if (!options) return\n//     let id = $.uuid()\n//     let settings = {\n//       selected: 0\n//     }\n//     $.extend(settings, options)\n//     if (!settings.icons.length) {\n//       settings.icons = settings.labels\n//     }\n//     if (!settings.id) {\n//       settings.id = id\n//     } else {\n//       id = settings.id\n//     }\n\n//     /* Private variable to keep track of screens. */\n//     let __tabbarScreens = new Stack()\n\n//     let screens = new Stack()\n//     const screenPrefix = '#'\n\n//     if (settings.screens) {\n//       settings.screens.forEach(function (screen, idx) {\n//         if (!/screenPrefix/img.test(screen)) {\n//           __tabbarScreens.push(document.getElementById(screen))\n//           __tabbarScreens.array[idx].classList.add('tabScreen')\n//         } else {\n//           __tabbarScreens.concat($(ui-screen))\n//           $(screen).array[0].classList.add('tabScreen')\n//         }\n//       })\n//     } else {\n//       settings.labels.forEach(function (screen, idx) {\n//         __tabbarScreens.push(screens.eq(idx))\n//       })\n//     }\n//     let selectedScreen\n//     let androidSelectionIndicator = ''\n//     if ($.theme === 'android') {\n//       androidSelectionIndicator = '<span class=\"androidSelectionBorder\"></span>'\n//     }\n//     const showIcons = settings.showIcons ? ' class=\"showIcons\" ' : ''\n\n//     /* Create tabs. */\n//     const makeTab = (label, icon, idx) => {\n//       let tab = '<button role=\"tab\" class=\"' + icon\n//       if (settings.selected === idx) {\n//         tab += ' selected'\n//         $.ChuiRoutes = [settings.screens[idx]]\n//       }\n//       tab += '\"'\n//       if (settings.screens && settings.screens.length) {\n//         tab += ` data-id=\"${ settings.screens[idx] }\" data-chui-route=\"${ settings.screens[idx] }\"`\n//       }\n//       tab += `><span class=\"icon\"></span><label>${ settings.labels[idx] }</label></button>`\n//       return tab\n//     }\n//     /* Create tab bar. */\n//     let tabbarTmpl = document.createElement('ui-tabbar')\n//     tabbarTmpl.role = \"tabpanel\"\n//     if (settings.showIcons) tabbarTmpl.classList.add('showIcons')\n//     tabbarTmpl.insertAdjacentHTML('beforeend', androidSelectionIndicator)\n//     tabbarTmpl.id = settings.id\n//     window.tabbarTmpl = tabbarTmpl\n\n//     if (settings.labels.length) {\n//       settings.labels.forEach(function (label, idx) {\n//         var tab = makeTab(label, settings.icons[idx], idx)\n//         tabbarTmpl.appendChild($.h(tab))\n//       })\n//     }\n\n//     /* Append tabbar to page. */\n//     $('body').prepend(tabbarTmpl)\n\n//     /* Get id of appended tab bar. */\n//     const tabbar = $('#' + settings.id)\n//     const selectedTabButton = tabbar.find('button.selected')\n\n\n//     /* Private variables to manage tab bar. */\n//     const __tabbarButtons = tabbar.find('button')\n//     const __selectedTabbarButton = __tabbarButtons.eq(settings.selected)\n//     const __selectedTabbarScreen = __tabbarScreens.eq(settings.selected)\n\n//     /* For Android Material Design. */\n//     const androidSelectionBorder = tabbar.find('.androidSelectionBorder')\n//     function handleTabSelectionForAndroid(tab) {\n//       let width = tab.clientWidth\n//       let left = tab.offsetLeft\n//       androidSelectionBorder.css({width: width + 'px', left: left + 'px'})\n//     }\n//     if ($.theme === 'android') {\n//       $(function() {\n//         console.dir(selectedTabButton)\n//         handleTabSelectionForAndroid(selectedTabButton.array[0])\n\n//       })\n//     }\n\n//     this.getSelectedTab = () => {\n//       return __selectedTabbarButton\n//     }\n\n//     this.getSelectedScreen = () => {\n//       return __selectedTabbarScreen\n//     }\n\n//     /* Setup events on tabs. */\n//     $(() => {\n\n//       const tabbarButtons = tabbar.find('button')\n\n//       /* Tap on tab. */\n//       tabbar.on('tap', 'button', function () {\n//         const tab = this\n//         const routes = tab.dataset.chuiRoute.split('/')\n//         const fullRoute = $.ChuiRoutes.join('/')\n//         let navRoutesFull = tab.dataset.chuiRoute\n//         const navRoutes = navRoutesFull.split('/')\n//         const rr = $.ChuiRoutes\n\n//         /* This tab holds a navigation list. */\n//         var currBtn = document.querySelector('ui-tabbar button.selected')\n//         currBtn.classList.remove('selected')\n//         currBtn.dataset.chuiRoute = fullRoute\n//         this.classList.add('selected')\n//         if (navRoutes.length > 1) {\n//           navRoutesFull = tab.dataset.chuiRoute\n\n//           const navRoutes = navRoutesFull.split('/')\n\n//           const currScreen = document.querySelector('ui-screen.current')\n//           if (currScreen) {\n//             currScreen.classList.remove('current')\n//             currScreen.classList.add('next')\n//           }\n//           const prevScreen = document.querySelector('ui-screen.previous')\n//           if (prevScreen) {\n//             prevScreen.classList.remove('previous')\n//             prevScreen.classList.add('next')\n//           }\n\n//           navRoutes.forEach( function(route, idx) {\n//             const routing = route.split(':')\n//             let whichRoute = routing[0]\n//             let screen = document.getElementById(whichRoute)\n//             if (idx !== routes.length - 1) {\n//               screen.classList.remove('next')\n//               screen.classList.add('previous')\n//               screen.setAttribute('aria-hidden', true)\n//             } else {\n//               screen.classList.remove('next')\n//               screen.classList.add('current')\n//               screen.setAttribute('aria-hidden', false)\n//             }\n//           })\n\n//           /* Take care of routes. */\n//           $.ChuiRoutes = routes\n//           Router.dispatch(routes[routes.length - 1])\n\n//           /* Handle Android ripple effect. */\n//           if ($.theme === 'android') {\n//             handleTabSelectionForAndroid(tab)\n//           }\n\n//           /* This tab has a single screen. */\n//         } else {\n//           const screen = $('ui-screen').eq($(tab).index())\n\n//           /* Deal with previously selected tab and screen. */\n//           const currScreen =  document.querySelector('ui-screen.current')\n//           if (currScreen) {\n//             currScreen.classList.remove('current')\n//             currScreen.classList.add('next')\n//             currScreen.setAttribute('aria-hidden', true)\n//           }\n//           const prevScreen = document.querySelector('ui-screen.previous')\n\n//           if (prevScreen) {\n//             prevScreen.classList.remove('previous')\n//             prevScreen.classList.add('next')\n//             prevScreen.setAttribute('aria-hidden', true)\n//           }\n\n//           /* Set this tab to `selected`. */\n//           tab.classList.add('selected')\n//           if ($.theme === 'android') {\n//             handleTabSelectionForAndroid(tab)\n//           }\n\n//           routes.forEach(function (route, idx) {\n//             const routing = route.split(':')\n//             const whichRoute = routing[0]\n//             const wr = document.getElementById(whichRoute)\n//             if (idx !== routes.length - 1) {\n//               wr.classList.remove('next')\n//               wr.classList.add('previous')\n//               wr.setAttribute('aria-hidden', true)\n\n//             } else {\n//               if (wr) {\n//                 wr.classList.remove('next')\n//                 wr.classList.add('current')\n//                 wr.setAttribute('aria-hidden', false)\n//               } else {\n//               }\n//             }\n//           })\n\n//           /* Take care of routes. */\n//           $.ChuiRoutes = routes\n//           Router.dispatch(fullRoute)\n//         }\n//       })\n\n//       $('ui-screen').eq(settings.selected).array[0].classList.remove('next')\n//       $('ui-screen').eq(settings.selected).array[0].classList.add('current')\n//     })\n//   }\n\n//   return _tabBar\n// })()\n"]}