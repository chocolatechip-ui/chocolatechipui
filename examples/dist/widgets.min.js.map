{"version":3,"sources":["widgets.min.js"],"names":["UIColor","color","_this","this","ok","charAt","substr","toLowerCase","colorRegex","re","bits","parseInt","process","processor","i","channels","b","r","isNaN","g","toHex","toString","length","toRGB","$","extend","getBrightness","type","lightenColor","Math","percent","R","num","slice","G","round","amt","B","darkenColor","calculateBrightness","kolor","hasAttribute","theme","on","eventStart","e","target","classList","contains","w","d","min","offsetWidth","offsetHeight","max","h","offset","y","isAndroid","getBoundingClientRect","navBkColor","touches","pageX","left","backgroundColor","pageY","top","ripple","nodeName","createElement","closest","css","brightness","rippleColor","dataset","rippleWave","style","append","setTimeout","height","remove","x","block","opacity","document","querySelector","screen","setAttribute","display","add","unblock","UIBusy","removeAttribute","settings","options","element","spinner","iOSBusy","tmpLeft","uuid","busy","parent","parentWidth","position","id","parentHeight","array","width","clientWidth","innerHeight","window","size","isNativeAndroid","find","tmpTop","clientHeight","ReorderList","list","ariaRole","tabIndex","focus","items","attachedBodyHandlerHack","FixForChrome","test","navigator","userAgent","testElementStyle","transformJSPropertyName","transformCSSPropertyName","hwLayerMagicStyle","hwTopLayerMagicStyle","prototype","setState","bind","states","idle","onTouchEnd","state","onMouseUp","onMouseLeave","usingTouch","onSelection","mouseHandlersAttached","onContainerFocus","startPosition","onEventStart","latestPosition","onEventMove","previousPosition","canPreventScrolling","insertBefore","willChange","detail","getTransform","node","allowTextSelection","transform","value","undecided","transitionJSPropertyName","original","move","getAbsoluteMovement","accessibility","parentNode","getComputedStyle","globalInstances","leaveState","clearTimeout","onMove","removeMouseHandlers","onEnd","reorder","reorderStateInit","holdTimer","nodes","childNodes","mouseOutsideTimer","nodeType","otherNodes","baseTransform","pos","t","zero","zIndex","onLeave","updateScrolling","dispatch","originalTarget","o","getTotalMovement","forEach","off","originalIndex","index","offsetTop","call","push","userSelectJSPropertyName","spliceIndex","addEventListener","onTouchCancel","setChildNodesAriaRoles","eventMove","attach","detach","noop","newStateCtor","prevState","nextState","ctor","targetNode","unSetChildNodesAriaRoles","Array","self","isRelated","findTargetNode","preventDefault","addMouseHandlers","documentElement","iOS","time","timeStamp","button","setTarget","scrollContainer","relatedTarget","origScrollHeight","origScrollTop","startAtPosition","clientX","clientY","updatePosition","isTouchEnabled","body","scrollTop","scrollOffset","directionX","directionY","scrollable","targetRect","bottomOffset","triggerOffset","topOffset","event","createEvent","initCustomEvent","dispatchEvent","animateToZero","containerRect","bottom","maxScrollTop","editLabel","cancelLabel","eventName","data","callback","deletionIndicator","deletable","reorderable","stateProp","initEvent","moveHandle","__data","__editMade","moveUpIndicator","UIEditList","moveDownIndicator","deleteLabel","elm","undefined","temp","html","_templateObject","deleteButton","textContent","_templateObject2","_templateObject3","reorderList","boundComponents","dir","editButton","isArray","map","item","render","empty","editBtn","$this","li","prepend","val","backBtn","deleteListItem","el","listItem","getAttribute","direction","selectedItems","cancelBtn","movedItems","dataStore","found","__newarray","nav","hide","text","UIMultiSelectList","doneLabel","selection","selectionIndicator","liData","listItems","selected","indexOf","idx","show","splice","apply","chuiBackButtonSVG","decorateBackButton","isNavigating","getScreen","join","makeScreenPrevious","querySelectorAll","select","makeScreenNext","name","currentScreen","destinationScreen","regex","destination","checked","dataObj","makeScreenCurrent","Router","GoBack","arguments","ChuiRoutes","unique","fn","route","trim","buttonText","handleNavigationEvent","goto","globalNav","split","pagingControls","pop","chunks","disabled","currPage","nextPage","GoBackTo","findIndex","dest","previousElementSibling","className","getElementById","is","UIPopover","GoTo","title","popoverID","chunk","calcTop","po","calcLeft","offsetLeft","nextElementSibling","clientLeft","innerWidth","closePopover","popover","_classCallCheck","content","message","continueButton","popup","closePopup","trigger","positionPopover","triggerEl","ClosePopup","open","UIRange","_range","input","newPlace","newPoint","UIPopup","ranges","cancelButton","range","_$$css","-webkit-justify-content","-webkit-align-items","_defineProperty","close","subscribe","publish","isChrome","getFullRoute","UISegmented","createSegmentedButton","androidSelectionIndicator","__segmented","labels","background-size","androidSelectionBorder","ctx","_len","_key","settingsData","segmented","eq","selectedButton","siblings","sib","btn","UISheet","background","UISelectList","handle","slideFrom","slideDown","sheet","populate","UISlideOut","slideoutID","buttonID","slideout","slideOutBtn","toggle","menuItems","shownScreen","screenToShow","appendChild","key","template","disabledDecrease","disabledIncrease","defaultValue","slideOut","decreaseButton","slideOutButton","dataVal","increaseStepperValue","currentValue","newValue","UISwitch","__el","__element","swipeOn","swipeOff","checkState","__switch","UIStepper","checkbox","stepper","label","increaseButton","JSON","stringify","parse","UITabbar","__stepper","icons","decreaseStepperValue","__tabbarScreens","Stack","screens","screenPrefix","selectedScreen","makeTab","tab","tabbarTmpl","showIcons","insertAdjacentHTML","tabbar","selectedTabButton","handleTabSelectionForAndroid","console","getSelectedTab","__selectedTabbarButton","getSelectedScreen","__selectedTabbarScreen","navRoutesFull","rr","currBtn","chuiRoute","currScreen","prevScreen","routes","navRoutes","icon","__tabbarButtons","wr","fullRoute","routing","whichRoute"],"mappings":"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","file":"widgets.min.js","sourcesContent":["\n\n/**\n * Create a color object from provided color value.\n * Handles three values:\n * rgb(255,0,0) -- with or without spaces\n * #ff0000\n * #f00\n * The returned object has two methods:\n * myColor.toHex()\n * myColor.toRGB()\n *\n * @constructor - Must use new keyword\n * @param {string} color - A hex or rgb value.\n * @return {object} UIColor\n */\nconst UIColor = function(color) {\n  this.ok = false\n  /**\n   * Check for hex color value.\n   * String \"#\" if found.\n   */\n  if (color.charAt(0) == '#') {\n    color = color.substr(1,6)\n  }\n  color = color.toLowerCase()\n\n\n  /**\n   * Array of color format regex patterns.\n   * These will identify the format of the color provided above.\n   * The process function converts hex color values into decimal (rgb).\n   */\n  const colorRegex = [\n    {\n      /* Example: ['rgb(123, 234, 45)', 'rgb(255, 234, 245)'] */\n      re: /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/,\n      process: function(bits) {\n        return [\n          parseInt(bits[1]),\n          parseInt(bits[2]),\n          parseInt(bits[3])\n        ]\n      }\n    },\n    {\n      /* Example: ['#00ff00', '336699'] */\n      re: /^(\\w{2})(\\w{2})(\\w{2})$/,\n      process: function(bits) {\n        return [\n          parseInt(bits[1], 16),\n          parseInt(bits[2], 16),\n          parseInt(bits[3], 16)\n        ]\n      }\n    },\n    {\n      /**\n       * Example: ['#fb0', 'f0f']\n       */\n      re: /^(\\w{1})(\\w{1})(\\w{1})$/,\n      process: function(bits) {\n        return [\n          parseInt(bits[1] + bits[1], 16),\n          parseInt(bits[2] + bits[2], 16),\n          parseInt(bits[3] + bits[3], 16)\n        ]\n      }\n    }\n  ]\n\n  /**\n   * Check for a match using each regex.\n   */\n  for (let i = 0; i < 3; i++) {\n    const re = colorRegex[i].re\n    const processor = colorRegex[i].process\n    const bits = re.exec(color)\n    if (bits) {\n      const channels = processor(bits)\n      this.r = channels[0]\n      this.g = channels[1]\n      this.b = channels[2]\n      this.ok = true\n    }\n  }\n\n  /**\n   * Validate/cleanup values.\n   */\n  this.r = (this.r < 0 || isNaN(this.r)) ? 0 : ((this.r > 255) ? 255 : this.r)\n  this.g = (this.g < 0 || isNaN(this.g)) ? 0 : ((this.g > 255) ? 255 : this.g)\n  this.b = (this.b < 0 || isNaN(this.b)) ? 0 : ((this.b > 255) ? 255 : this.b)\n\n  this.toHex = () => {\n    let r = this.r.toString(16)\n    let g = this.g.toString(16)\n    let b = this.b.toString(16)\n    if (r.length == 1) r = '0' + r\n    if (g.length == 1) g = '0' + g\n    if (b.length == 1) b = '0' + b\n    return '#' + r + g + b\n  }\n\n  this.toRGB = function() {\n    return 'rgb(' + this.r +',' + this.g + ',' + this.b + ')'\n  }\n}\n\n$.extend({\n\n  /**\n   * Make global method to get brightness of provided color.\n   * This is based on the values of YIQ color formula.\n   * This method expects a color object created by UIColor.\n   */\n  getBrightness: (color) => {\n    if ($.type(color) === 'string') color = UIColor(color)\n    return (color.r * .299) + (color.g * .587) + (color.b * .114)\n  },\n\n  /**\n   * Function to light a color.\n   * Expects a hex value as string and an integer as percent:\n   */\n  lightenColor: (color, percent) => {\n    const num = parseInt(color.slice(1), 16)\n    const amt = Math.round(2.55 * percent)\n    let R = (num >> 16) + amt\n    let G = (num >> 8 & 0x00FF) + amt\n    let B = (num & 0x0000FF) + amt\n    return \"#\" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1)\n  },\n\n  /**\n   * Function to darken a color.\n   * Expects a hex value as string and an integer as percent:\n   */\n  darkenColor: (color, percent) => {\n    const num = parseInt(color.slice(1), 16)\n    const amt = Math.round(2.55 * percent)\n    let R = (num >> 16) - amt\n    let G = (num >> 8 & 0x00FF) - amt\n    let B = (num & 0x0000FF) - amt\n    return \"#\" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1)\n  },\n\n  /**\n   * Method to calculate color contrast.\n   * It expects a hex or rgb value:\n   */\n  calculateBrightness: (color) => {\n    if ($.type(color) === 'object') color = color.toHex()\n    const kolor = new UIColor(color)\n    return $.getBrightness(kolor)\n  }\n})\n\n\n$(function() {\n  if ($.theme === 'android') {\n    $('body').on($.eventStart, 'button, ul.editing > li, li[data-show], li[data-select], li[data-goto], ui-sheet-handle, ui-switch, .ui-popover li', function(e) {\n      let target = this\n      if (target.hasAttribute(\"disabled\") || target.classList.contains(\"disabled\")) {\n        return\n      }\n\n      let w = Math.min(this.offsetWidth, 160)\n      let h = Math.min(this.offsetHeight, 160)\n      const d = Math.max(w, h)\n      w = d\n      h = d\n\n      const offset = this.getBoundingClientRect()\n\n      const x = $.isAndroid ? e.touches[0].pageX - offset.left : e.pageX - offset.left\n      const y = $.isAndroid ? e.touches[0].pageY - offset.top :  e.pageY - offset.top\n\n      let navBkColor\n      let backgroundColor\n\n      const ripple = document.createElement('ripple-sheath')\n      $(target).append(ripple)\n\n      if (target.nodeName === 'BUTTON' && target.classList.contains('slide-out-button')) {\n        let navBkColor = $('ui-screen > nav').eq(0).css('background-color')\n        backgroundColor = new UIColor(navBkColor).toHex()\n      } else if ((target.nodeName === 'BUTTON' && $(target).closest('nav')[0])) {\n        navBkColor = $(target).closest('nav').css('background-color')\n        backgroundColor = new UIColor(navBkColor).toHex()\n\n      } else if ((target.nodeName === 'BUTTON' && $(target).closest('toolbar')[0])) {\n        navBkColor = $(target).closest('toolbar').css('background-color')\n        backgroundColor = new UIColor(navBkColor).toHex()\n\n      } else {\n        backgroundColor = $(this).css('background-color')\n        if (!backgroundColor || backgroundColor === 'rgba(0, 0, 0, 0)') {\n          backgroundColor = '#fff'\n        }\n      }\n\n      let rippleColor = '#fff'\n      const brightness = $.calculateBrightness(backgroundColor)\n      if (brightness > 195) {\n        rippleColor = '#aaa'\n      } else {\n        rippleColor = '#fff'\n      }\n\n      if (target.dataset.rippleColor) {\n        rippleColor = target.dataset.rippleColor\n      }\n\n      const rippleWave = document.createElement('ripple-wave')\n      rippleWave.style.backgroundColor = rippleColor\n      rippleWave.style.width = `${h}px`\n      rippleWave.style.height = `${h}px`\n      rippleWave.style.left = `${x - (h/2)}px`\n      rippleWave.style.top = `${y - (h/2)}px`\n\n      ripple.append(rippleWave)\n      setTimeout(function() {\n        $(ripple).remove()\n      }, 1000)\n    })\n  }\n})\n\n\n$.extend({\n\n  /**\n   * Cover screen:\n   */\n  block: opacity => {\n    if (document.querySelector('ui-mask')) return\n    $('body').append(`<ui-mask></ui-mask>`)\n    document.querySelector('ui-mask').style.display = 'block'\n    setTimeout(function() {\n      document.querySelector('ui-mask').classList.add('opened')\n      if (opacity) $('ui-mask').css({opacity: opacity})\n    })\n    const screen = document.querySelector('ui-screen.current')\n    if (screen) screen.setAttribute('aria-hidden', true)\n  },\n\n  /**\n   * Uncover screen:\n   */\n  unblock: () => {\n    $('ui-mask').remove()\n    const screen = document.querySelector('ui-screen.current')\n    if (screen) screen.removeAttribute('aria-hidden')\n  }\n})\n\n\nclass UIBusy {\n  constructor(options) {\n    if (!options) return\n    let settings = {\n      size: 40,\n      color: '#666',\n    }\n    $.extend(settings, options)\n    const element = $(settings.element)\n\n    let spinner\n    /**\n     * For iOS:\n     */\n    const iOSBusy = () => {\n      let small\n      /**\n       * Smaller busy indicator (less tines):\n       */\n      if (parseInt(settings.size, 10) < 30) {\n        spinner = `<svg class='chui-busy small' width='${ settings.size }px' height='${ settings.size }px' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' preserveAspectRatio='xMidYMid'>\n        <g x='0' y='0' width='100' height='100' fill='none' class='bk'>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(0 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(45 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(90 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(135 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(180 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(225 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(270 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(315 50 50) translate(0 -30)'></rect>\n        </g>\n      </svg>`\n        element.append(spinner)\n      /**\n       * Larger busy indicator (more tines)\n       */\n      } else {\n        spinner = `<svg class='chui-busy' width='${ settings.size }px' height='${ settings.size }px' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' preserveAspectRatio='xMidYMid' class='uil-default'>\n        <g x='0' y='0' width='100' height='100' fill='none'>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(0 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(30 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(60 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(90 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(120 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(150 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(180 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(210 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(240 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(270 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(300 50 50) translate(0 -30)'></rect>\n          <rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='${ settings.color }' transform='rotate(330 50 50) translate(0 -30)'></rect>\n        </g>\n      </svg>`\n        element.append(spinner)\n      }\n    }\n\n    /**\n     * For Android:\n     */\n    const androidBusy = () => {\n      settings.id = $.uuid()\n      let androidActivityIndicator = null\n      if ($.isNativeAndroid) {\n        androidActivityIndicator = `<svg class=\"chui-busy\" version=\"1.1\" id=\"${ settings.id }\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\" enable-background=\"new 0 0 100 100\" xml:space=\"preserve\">\n        <g>\n          <path fill=\"none\" stroke=\"${ settings.color }\" stroke-width=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M74.2,65c2.7-4.4,4.3-9.5,4.3-15c0-15.7-12.8-28.5-28.5-28.5S21.5,34.3,21.5,50c0,5.5,1.6,10.6,4.3,15\"/>\n        </g>\n        <polyline fill=\"none\" stroke=\"${ settings.color }\" stroke-width=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"89.4,56.1 74.3,65 65.4,49.9 \"/>\n      </svg>`\n\n        element.append(androidActivityIndicator)\n        return\n      } else {\n        androidActivityIndicator = `<svg id=\"${ settings.id }\" class=\"chui-busy\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\"><circle stroke=\"url(#SVGID_1_)\" cx=\"50\" cy=\"50\" r=\"28.5\"/></svg>`\n        element.append(androidActivityIndicator)\n        element.array[0].classList.add('hasActivityIndicator')\n        if (options.color) {\n          $('#' + settings.id).find('circle').css('stroke', options.color)\n        }\n      }\n      $('#' + settings.id).css({\n        'height': settings.size + 'px',\n        'width': settings.size + 'px'\n      })\n    }\n\n    /**\n     * Create Busy control for appropriate OS:\n     */\n    if ($.theme === 'android') {\n      androidBusy(options)\n    } else if ($.theme === 'ios') {\n      iOSBusy(options)\n    }\n\n    this.center = function(position) {\n      if (!element) return\n      const busy = element.find('.chui-busy')\n      const parent = element.array[0]\n      if (position) {\n        busy.css('position', position)\n      } else {\n        position = busy.css('position')\n      }\n      let height\n      let width\n      let parentHeight\n      let parentWidth\n      if (position === 'absolute') {\n        busy.css('position', 'absolute')\n        height = busy.array[0].clientHeight\n        width = busy.array[0].clientWidth\n        parentHeight = parent.clientHeight\n        parentWidth = parent.clientWidth\n      } else {\n        height = parseInt(busy.css('height'), 10)\n        width = parseInt(busy.css('width'), 10)\n        parentHeight = parseInt($(parent).css('height'), 10)\n        parentWidth = parseInt(($(parent)).css('width'), 10)\n        $(busy).css({\n          'margin-left': 'auto',\n          'margin-right': 'auto'\n        })\n      }\n      let tmpTop\n      let tmpLeft\n      if (parent.nodeName === 'body') {\n        tmpTop = ((window.innerHeight / 2) + window.pageYOffset) - height / 2 + 'px'\n        tmpLeft = ((window.innerWidth / 2) - (width / 2) + 'px')\n      } else {\n        tmpTop = (parentHeight / 2) - (height / 2) + 'px'\n        tmpLeft = (parentWidth / 2) - (width / 2) + 'px'\n      }\n      if (position !== 'absolute') tmpLeft = 0\n      busy.css({\n        left: tmpLeft,\n        top: tmpTop\n      })\n      return busy\n    }\n\n  }\n}\n\n\n/**\n * Class to enable reording list items.\n */\nconst ReorderList = (function() {\n  'use strict'\n\n  const accessibility = {\n    list: {\n      ariaRole: \"listbox\",\n      tabIndex: 0,\n      focus: false\n    },\n    items: {\n      ariaRole: \"option\",\n      tabIndex: -1,\n      focus: false\n    },\n  }\n\n  let FixForChrome = /Chrome\\/[3-5]/.test(navigator.userAgent)\n  let testElementStyle = document.createElement('div').style\n  const transitionJSPropertyName = \"transition\" in testElementStyle ? \"transition\" : \"webkitTransition\"\n  const transformJSPropertyName = \"transform\" in testElementStyle ? \"transform\" : \"webkitTransform\"\n  const transformCSSPropertyName = transformJSPropertyName === \"webkitTransform\" ? \"-webkit-transform\" : \"transform\"\n  const userSelectJSPropertyName = \"userSelect\" in testElementStyle ? \"userSelect\" : \"webkitUserSelect\"\n  let hwLayerMagicStyle = testElementStyle[transformJSPropertyName] ? 'translateZ(0) ' : ''\n  let hwTopLayerMagicStyle = testElementStyle[transformJSPropertyName] ? 'translateZ(1px) ' : ''\n  testElementStyle = null\n\n  let globalInstances = 0\n  let attachedBodyHandlerHack = false\n\n  function ReorderList(list, options) {\n    list = document.querySelector(list)\n    if (!this || this === window) return new ReorderList(list, options)\n    this.options = options = options || {}\n    this.onTouchCancel = this.setState.bind(this, this.states.idle)\n    this.onTouchEnd = this.onTouchEnd.bind(this)\n    this.onMouseUp = this.onMouseUp.bind(this)\n    this.onMouseLeave = this.onMouseLeave.bind(this)\n    this.onSelection = this.onSelection.bind(this)\n    this.onContainerFocus = this.onContainerFocus.bind(this)\n    this.onEventStart = this.onEventStart.bind(this)\n    this.onEventMove = this.onEventMove.bind(this)\n    this.setState(this.states.idle)\n    this.attach(list)\n\n    $(list).on('reorder:reorder', function(e) {\n      if (!this.classList.contains('showIndicators')) {\n        return\n      }\n      e.target.parentNode.insertBefore(e.target, e.detail.insertBefore)\n      return false\n    }, false)\n  }\n\n  function getTransform(node) {\n    const transform = node.style[transformJSPropertyName]\n    if (transform) {\n      return {\n        value:transform,\n        original:transform,\n      }\n    }\n    if (window.getComputedStyle) {\n      let style = window.getComputedStyle(node).getPropertyValue(transformCSSPropertyName)\n      if (style && style !== 'none') return {value:style, original:''}\n    }\n    return {value:'', original:''}\n  }\n\n  ReorderList.prototype = {\n\n    list: null,\n    options: {},\n    state: null,\n    target: null,\n    usingTouch: false,\n    mouseHandlersAttached: false,\n    startPosition: null,\n    latestPosition: null,\n    previousPosition: null,\n    canPreventScrolling: false,\n    states: {\n      idle: function idleStateInit() {\n        // if(this.list && !this.list.classList.contains('showIndicators')) return\n        this.removeMouseHandlers()\n        if (this.target) {\n          this.target.node.style.willChange = ''\n          this.target = null\n        }\n        this.usingTouch = false\n\n        return {\n          allowTextSelection: true,\n        }\n      },\n\n      undecided: function undecidedStateInit() {\n        // if(!this.list.classList.contains('showIndicators')) return\n        this.target.height = this.target.node.offsetHeight\n        this.target.node.style.willChange = transformCSSPropertyName\n        this.target.node.style[transitionJSPropertyName] = ''\n\n        let holdTimer = setTimeout(function() {\n          const move = this.getAbsoluteMovement()\n          if (this.canPreventScrolling && move.x < 15 && move.y < 25) {\n            this.setState(this.states.reorder)\n          }\n        }.bind(this), 300)\n\n        return {\n          leaveState: function() {\n            clearTimeout(holdTimer)\n          },\n\n          onMove: function() {\n            const move = this.getAbsoluteMovement()\n            if (move.x > 20 && move.y < Math.max(100, this.target.height)) {\n              this.setState(this.states.idle)\n            }\n            if (move.y > 20) {\n              this.setState(this.states.idle)\n            }\n            if (move.x > move.y*1.2) return false\n          },\n\n          onLeave: function() {\n            this.setState(this.states.idle)\n          },\n\n          onEnd: function() {\n            const allowDefault = this.dispatch(this.target.originalTarget, 'tap')\n            this.setState(this.states.idle)\n            return allowDefault\n          },\n        }\n      },\n\n      reorder: function reorderStateInit() {\n        if (this.target.node.focus && accessibility.items.focus) {\n          this.target.node.focus()\n        }\n        this.target.height = this.target.node.offsetHeight\n        const nodes = this.list.childNodes\n        let originalIndex = $(this.target).index()\n        let mouseOutsideTimer\n        const zero = this.target.node.offsetTop + this.target.height/2\n        const otherNodes = []\n        for(let i = 0; i < nodes.length; i++) {\n          if (nodes[i].nodeType != 1 || nodes[i] === this.target.node) continue\n          const t = nodes[i].offsetTop\n          nodes[i].style[transitionJSPropertyName] = transformCSSPropertyName + ' 0.2s ease-in-out'\n          otherNodes.push({\n            node: nodes[i],\n            baseTransform: getTransform(nodes[i]),\n            pos: t + (t < zero ? nodes[i].offsetHeight : 0) - zero,\n          })\n        }\n\n        this.target.node.classList.add('reordering-list-item')\n        this.target.node.style.zIndex = '99999'\n        this.target.node.style[userSelectJSPropertyName] = 'none'\n        if (FixForChrome) {\n          this.list.style.webkitTransformStyle = 'preserve-3d'\n        }\n\n        function onMove() {\n          this.updateScrolling()\n          if (mouseOutsideTimer) {\n            clearTimeout(mouseOutsideTimer)\n            mouseOutsideTimer = null\n          }\n          const move = this.getTotalMovement()\n          this.target.node.style[transformJSPropertyName] = 'translate(0,' + move.y + 'px) ' + hwTopLayerMagicStyle + this.target.baseTransform.value\n          const height = this.target.height\n          otherNodes.forEach(function(o) {\n            let off = 0\n            if (o.pos < 0 && move.y < 0 && o.pos > move.y) {\n              off = height\n            }\n            else if (o.pos > 0 && move.y > 0 && o.pos < move.y) {\n              off = -height\n            }\n            o.node.style[transformJSPropertyName] = off ? 'translate(0,'+off+'px) ' + hwLayerMagicStyle + o.baseTransform.value : o.baseTransform.original\n          })\n\n\n          return false\n        }\n\n        onMove.call(this)\n\n        return {\n          leaveState: function() {\n            if (mouseOutsideTimer) clearTimeout(mouseOutsideTimer)\n            if (FixForChrome) {\n              this.list.style.webkitTransformStyle = ''\n            }\n            if (this.list.focus && accessibility.list.focus) {\n              this.list.focus()\n            }\n            this.target.node.classList.remove('reordering-list-item')\n            this.target.node.style[userSelectJSPropertyName] = ''\n            this.animateToZero(function(target) {\n              target.node.style.zIndex = ''\n            })\n            otherNodes.forEach(function(o) {\n              o.node.style[transformJSPropertyName] = o.baseTransform.original\n              o.node.style[transitionJSPropertyName] = ''\n            })\n          },\n\n          onMove: onMove,\n\n          onLeave: function() {\n            if (mouseOutsideTimer) clearTimeout(mouseOutsideTimer)\n            mouseOutsideTimer = setTimeout(function() {\n              mouseOutsideTimer = null\n              this.onTouchCancel()\n            }.bind(this), 700)\n          },\n\n          onEnd: function() {\n            const move = this.getTotalMovement()\n            let i\n            let spliceIndex\n            if (move.y < 0) {\n              for (i = 0; i < otherNodes.length; i++) {\n                if (otherNodes[i].pos > move.y) {\n                  break\n                }\n              }\n              spliceIndex = i\n            } else {\n              for (i = otherNodes.length-1; i >= 0; i--) {\n                if (otherNodes[i].pos < move.y) {\n                  break\n                }\n              }\n              spliceIndex = i+1\n            }\n\n            this.dispatch(this.target.node, 'reorder', {spliceIndex:spliceIndex, insertBefore:otherNodes[spliceIndex] ? otherNodes[spliceIndex].node : null, originalIndex: originalIndex})\n            this.setState(this.states.idle)\n            return false\n          },\n        }\n      },\n    },\n\n    attach: function(list) {\n      globalInstances++\n      if (this.list) this.detach()\n      if (!attachedBodyHandlerHack && FixForChrome) {\n        attachedBodyHandlerHack = true\n        document.body.addEventListener('touchstart', $.noop, false)\n      }\n\n      this.list = list\n\n      if (false !== accessibility.list.tabIndex) {\n        this.list.tabIndex = accessibility.list.tabIndex\n      }\n      if (accessibility.list.ariaRole) {\n        this.list.setAttribute('aria-role', accessibility.list.ariaRole)\n      }\n      this.setChildNodesAriaRoles()\n      this.list.addEventListener('focus', this.onContainerFocus, false)\n      this.otherNodes = []\n\n      $(document).on(\"selectionchange\", this.onSelection, false)\n      $(this.list).on('touchcancel', this.onTouchCancel, false)\n      $(this.list).on('touchend', this.onTouchEnd, false)\n      $(this.list).on($.eventStart, this.onEventStart, false)\n      $(this.list).on($.eventMove, this.onEventMove, false)\n    },\n\n    detach: function() {\n      this.onTouchCancel()\n      $(document).off(\"selectionchange\", this.onSelection, false)\n      $(this.list).off('touchcancel', this.onTouchCancel, false)\n      $(this.list).off('touchend', this.onTouchEnd, false)\n      $(this.list).off($.eventMove, this.onEventMove, false)\n\n      if (false !== accessibility.list.tabIndex) {\n        this.list.removeAttribute('tabIndex')\n      }\n      if (accessibility.list.ariaRole) {\n        this.list.removeAttribute('aria-role')\n      }\n      this.unSetChildNodesAriaRoles()\n\n      globalInstances--\n      if (!globalInstances && attachedBodyHandlerHack) {\n        attachedBodyHandlerHack = false\n        $('body').off('touchstart', $.noop, false)\n      }\n    },\n\n    setState: function(newStateCtor) {\n      if(this.list && !this.list.classList.contains('showIndicators')) return\n\n      if (this.state) {\n        if (this.state.ctor === newStateCtor) return\n        if (this.state.leaveState) this.state.leaveState.call(this)\n      }\n      let prevState = this.state\n      let nextState = newStateCtor.call(this)\n      if (this.state === prevState) {\n        nextState.ctor = newStateCtor\n        this.state = nextState\n      }\n    },\n\n    findTargetNode: function(targetNode) {\n      while(targetNode && targetNode.parentNode !== this.list) {\n        targetNode = targetNode.parentNode\n      }\n      return targetNode\n    },\n\n    onContainerFocus: function(e) {\n      if(!this.list.classList.contains('showIndicators')) return\n      this.list.style.outline = 'none'\n      this.setChildNodesAriaRoles()\n    },\n\n    setChildNodesAriaRoles: function() {\n      const self = this\n      const nodes = Array.prototype.slice.call(self.list.childNodes)\n      for(let i = 0; i < nodes.length; i++) {\n        if (nodes[i].nodeType != 1) continue\n        if (accessibility.items.ariaRole) {\n          nodes[i].setAttribute('aria-role', accessibility.items.ariaRole)\n        }\n        if (false !== accessibility.items.tabIndex) {\n          nodes[i].tabIndex = accessibility.items.tabIndex\n        }\n      }\n    },\n\n    unSetChildNodesAriaRoles: function() {\n      const nodes = Array.prototype.slice.call(self.list.childNodes)\n      for(let i = 0; i < nodes.length; i++) {\n        if (nodes[i].nodeType != 1) continue\n        if (accessibility.items.ariaRole) {\n          nodes[i].removeAttribute('aria-role')\n        }\n        if (false !== accessibility.items.tabIndex) {\n          nodes[i].removeAttribute('tabIndex')\n        }\n      }\n    },\n    onSelection: function(e) {\n      const isRelated = e.target === document || this.findTargetNode(e)\n      const iOS = /(iPhone|iPad|iPod)/i.test(navigator.userAgent) && !/(Android|Windows)/i.test(navigator.userAgent)\n      if (!isRelated) return\n\n      if (iOS) {\n        this.setState(this.states.idle)\n      } else {\n        if (!this.state.allowTextSelection) {\n          e.preventDefault()\n        }\n      }\n    },\n\n    addMouseHandlers: function() {\n      if (!this.mouseHandlersAttached) {\n        this.mouseHandlersAttached = true\n        $(document).on('mouseleave', this.onMouseLeave, false)\n        $(document).on('mouseup', this.onMouseUp, true)\n        $(document).on('blur', this.onTouchCancel, false)\n      }\n    },\n\n    removeMouseHandlers: function() {\n      if (this.mouseHandlersAttached) {\n        this.mouseHandlersAttached = false\n        $(document).off('mouseleave', this.onMouseLeave, false)\n        $(document).off('mouseup', this.onMouseUp, true)\n        $(document).off('blur', this.onTouchCancel, false)\n      }\n    },\n\n    onMouseLeave: function(e) {\n      if (this.usingTouch) return\n      if (e.target === document.documentElement || e.relatedTarget === document.documentElement) {\n        if (this.state.onLeave) {\n          this.state.onLeave.call(this)\n        }\n      }\n    },\n\n    onEventStart: function(e) {\n      if ($.isTouchEnabled) {\n        this.usingTouch = true\n        this.canPreventScrolling = true\n        if (e.touches.length > 1) {\n          this.setState(this.states.idle)\n          return\n        }\n        if (!this.setTarget(e)) return\n        this.startAtPosition({\n          x: e.touches[0].clientX,\n          y: e.touches[0].clientY,\n          time: e.timeStamp\n        })\n      } else {\n        if (this.usingTouch || e.button != 0 || !this.setTarget(e)) return\n        this.addMouseHandlers()\n        this.canPreventScrolling = true\n        this.startAtPosition({\n          x: e.clientX,\n          y: e.clientY,\n          time: e.timeStamp\n        })\n      }\n    },\n\n    setTarget: function(e) {\n      const targetNode = this.findTargetNode(e.target)\n      if (!targetNode) {\n        this.setState(this.states.idle)\n        return false\n      }\n      let scrollContainer = targetNode.parentNode\n      while (scrollContainer) {\n        if (scrollContainer == document.body) break\n        if (scrollContainer.scrollHeight > scrollContainer.clientHeight && window.getComputedStyle(scrollContainer)['overflow-y'] != 'visible') break\n        scrollContainer = scrollContainer.parentNode\n      }\n      scrollContainer = scrollContainer || document.body\n\n      this.target = {\n        originalTarget: e.target,\n        node: targetNode,\n        scrollContainer: scrollContainer,\n        origScrollTop: scrollContainer.scrollTop,\n        origScrollHeight: scrollContainer.scrollHeight,\n        baseTransform: getTransform(targetNode)\n      }\n      return true\n    },\n\n    startAtPosition: function(pos) {\n      this.startPosition = this.previousPosition = this.latestPosition = pos\n      this.setState(this.states.undecided)\n    },\n\n    updatePosition: function(e, pos) {\n      if (this.target == null) {\n        return\n      }\n      this.latestPosition = pos\n\n      if (this.state.onMove) {\n        if (this.state.onMove.call(this) === false) {\n          e.preventDefault()\n        }\n      }\n      if (this.latestPosition.time - this.previousPosition.time > 100) {\n        this.previousPosition = this.latestPosition\n      }\n    },\n\n    onEventMove: function(e) {\n      if ($.isTouchEnabled) {\n        this.updatePosition(e, {\n          x: e.touches[0].clientX,\n          y: e.touches[0].clientY,\n          time: e.timeStamp\n        })\n        this.canPreventScrolling = false\n      } else {\n        this.updatePosition(e, {\n          x: e.clientX,\n          y: e.clientY,\n          time: e.timeStamp\n        })\n      }\n    },\n\n    onMouseUp: function(e) {\n      if (this.usingTouch || e.button !== 0) return\n\n      if (this.state.onEnd && false === this.state.onEnd.call(this)) {\n        e.preventDefault()\n      }\n    },\n\n    onTouchEnd: function(e) {\n      if (e.touches.length > 1) {\n        this.onTouchCancel()\n      } else if (this.state.onEnd && false === this.state.onEnd.call(this)) {\n        e.preventDefault()\n      }\n    },\n\n    getTotalMovement: function() {\n      const scrollOffset = this.target.scrollContainer.scrollTop - this.target.origScrollTop\n      return {\n        x: this.latestPosition.x - this.startPosition.x,\n        y: this.latestPosition.y - this.startPosition.y + scrollOffset,\n        time: this.latestPosition.time - this.startPosition.time,\n      }\n    },\n\n    getAbsoluteMovement: function() {\n      const move = this.getTotalMovement()\n      return {\n        x: Math.abs(move.x),\n        y: Math.abs(move.y),\n        time: move.time,\n        directionX: move.x < 0 ? 'left' : 'right',\n        directionY: move.y < 0 ? 'up' : 'down'\n      }\n    },\n\n    updateScrolling: function() {\n      const triggerOffset = 40\n      let offset = 0\n\n      const scrollable = this.target.scrollContainer,\n        containerRect = scrollable.getBoundingClientRect(),\n        targetRect = this.target.node.getBoundingClientRect(),\n        bottomOffset = Math.min(containerRect.bottom, window.innerHeight) - targetRect.bottom,\n        topOffset = targetRect.top - Math.max(containerRect.top, 0),\n        maxScrollTop = this.target.origScrollHeight - Math.min(scrollable.clientHeight, window.innerHeight)\n\n      if (bottomOffset < triggerOffset) {\n        offset = Math.min(triggerOffset, triggerOffset - bottomOffset)\n      }\n      else if (topOffset < triggerOffset) {\n        offset = Math.max(-triggerOffset, topOffset - triggerOffset)\n      }\n      scrollable.scrollTop = Math.max(0, Math.min(maxScrollTop, scrollable.scrollTop + offset))\n    },\n\n    dispatch: function(targetNode, eventName, data) {\n      let event = document.createEvent('CustomEvent')\n      if (event && event.initCustomEvent) {\n        event.initCustomEvent('reorder:' + eventName, true, true, data)\n      } else {\n        event = document.createEvent('Event')\n        event.initEvent('reorder:' + eventName, true, true)\n        event.data = data\n      }\n      return targetNode.dispatchEvent(event)\n    },\n\n    animateToZero: function(callback, target) {\n      target = target || this.target\n\n      target.node.style[transitionJSPropertyName] = transformCSSPropertyName + ' 0.1s ease-out'\n      target.node.style[transformJSPropertyName] = 'translate(0,0) ' + hwLayerMagicStyle + target.baseTransform.value\n      setTimeout(function() {\n        target.node.style[transitionJSPropertyName] = ''\n        target.node.style[transformJSPropertyName] = target.baseTransform.original\n        if (callback) callback.call(this, target)\n      }.bind(this), 101)\n    }\n  }\n  return ReorderList\n})()\n/**\n * ChocolateChip-UI Widget - Edit List.\n */\nclass UIEditList {\n  constructor(options) {\n    if (!options) return\n    const self = this\n    let settings = {\n      element: undefined,\n      editLabel: 'Edit',\n      doneLabel: 'Done',\n      deleteLabel: 'Delete',\n      cancelLabel: 'Cancel',\n      callback: $.noop,\n      deletable: false,\n      reorderable: false,\n      state: undefined,\n      stateProp: 'id'\n    }\n    $.extend(settings, options)\n\n    let deletionIndicator = html`\n      <aside class=\"deletion-indicator\">\n        <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n          <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <g id=\"deletion-indicator\">\n              <g id=\"ios-indicator\">\n                <circle id=\"ios-circle\" fill=\"#FF0000\" cx=\"10\" cy=\"10\" r=\"10\"></circle>\n                <path d=\"M3.5,10 L16.5,10\" id=\"ios-bar\" stroke=\"#FFFFFF\" stroke-width=\"2\" stroke-linecap=\"square\"></path>\n              </g>\n              <path d=\"M2,13 L9.9294326,16.8406135 L17.1937075,1.90173332\" id=\"checkmark\" stroke=\"#FA0303\" stroke-width=\"2\"></path>\n            </g>\n          </g>\n        </svg>\n      </aside>`\n\n    let deleteButton = html`\n      <button class=\"delete\">\n        <label>${ settings.deleteLabel }</label>\n        <svg width=\"27px\" height=\"30px\" viewBox=\"0 0 27 30\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n          <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <g id=\"delete-icon\" fill=\"#3A3A3A\">\n              <g transform=\"translate(3.000000, 1.000000)\">\n                <path d=\"M1,6 L20,6 L20,24.9986131 C20,26.6562333 18.6639569,28 16.9998779,28 L4.00012207,28 C2.3432004,28 1,26.6569187 1,24.9986131 L1,6 Z M4,9 L5,9 L5,25 L4,25 L4,9 Z M8,9 L9,9 L9,25 L8,25 L8,9 Z M12,9 L13,9 L13,25 L12,25 L12,9 Z M16,9 L17,9 L17,25 L16,25 L16,9 Z\" id=\"can\"></path><path d=\"M0,4.96611425 L0,1.67759301 L5.1776507,1.7511163 L6.482399,0 L14.5847825,0 L15.8789491,1.7511163 L21,1.7511163 L21,4.9447157 L0,4.96611425 L0,4.96611425 Z\" id=\"lid\"></path>\n              </g>\n            </g>\n          </g>\n        </svg>\n      </button>`\n\n    let moveHandle = html`\n      <svg class='handle' width=\"19px\" height=\"18px\" viewBox=\"0 0 19 18\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" style=\"background: rgba(255,255,255,0.01)\">\n        <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <g id=\"Artboard\" stroke=\"#C7C7CC\">\n            <g id=\"Move-Indicator-iOS\" transform=\"translate(2.000000, 5.000000)\">\n              <path d=\"M0,0.5 L15,0.5\" id=\"Line-1\"></path>\n              <path d=\"M0,3.5 L15,3.5\" id=\"Line-2\"></path>\n              <path d=\"M0,6.5 L15,6.5\" id=\"Line-3\"></path>\n            </g>\n          </g>\n        </g>\n      </svg>`\n\n    let __data = []\n    let __editMade = false\n    this.callback = settings.callback || $.noop\n\n    if (!settings.deletable && !settings.reorderable) {\n      return\n    }\n\n    if (options) $.extend(settings, options)\n\n    // let editButton\n    let button\n    let dispelDeletable = 'swiperight'\n    let enableDeletable = 'swipeleft'\n    let moveUpIndicator\n    let moveDownIndicator\n    let element = settings.element\n    let deleteLabel\n    this.elm = $(settings.element)\n\n    if (settings.deletable) {\n      document.querySelector(settings.element).classList.add('deletable')\n    }\n    if (settings.reorderable) {\n      document.querySelector(settings.element).classList.add('reorderable')\n    }\n\n    if (options.state) options.state.boundComponents.push(this)\n\n    this.render = function(data) {\n      let temp = ''\n      if (!settings.element) {\n        return\n      }\n\n      if (!data && settings.state) {\n        data = settings.state.dataStore\n      }\n\n      if (Array.isArray(data)) {\n        data.map(function(item) {\n          temp += settings.render(item)\n        })\n      } else {\n        return\n      }\n\n      this.elm.textContent = ''\n      let elm = $(settings.element)\n      elm.empty()\n      elm.append(temp)\n      elm.find('li').array.map(li => {\n        if (settings.deletable) {\n          $(li).prepend(deletionIndicator)\n          $(li).append(deleteButton)\n        }\n        if (settings.reorderable) {\n          $(li).append(moveHandle)\n        }\n      })\n    }\n\n    this.val = () => options.state.dataStore\n\n    $(() => {\n\n      /**\n       * Handle deletion of list item.\n       */\n      function deleteListItem(el) {\n        let elm = $(settings.element)\n        let $this = this\n        __editMade = true\n        let listItem = $($this).closest('li')\n\n        /**\n         * Mark list as edited:\n         */\n        elm[0].dataset.listEdit = 'true'\n        let direction = '-1200%'\n        if (document.querySelector('html').getAttribute('dir') === 'rtl') direction = '1000%'\n        $($this).siblings().css({\n          '-webkit-transform': 'translate3d(' + direction + ',0,0)',\n          '-webkit-transition': 'all 1s ease-out',\n          'transform': 'translate3d(' + direction + ',0,0)',\n          'transition': 'all 1s ease-out'\n        })\n        setTimeout(function () {\n          listItem.remove()\n        }, 500)\n\n      }\n      /**\n       * Handle moving list item.\n       */\n      if (settings.reorderable) {\n        let reorderList =  new ReorderList(settings.element)\n      }\n\n      $(settings.element).on('tap', '.delete', deleteListItem)\n    })\n\n    let dir = document.dir\n    dir = dir ? dir.toLowerCase() : ''\n    if (dir === 'rtl') {\n      dispelDeletable = 'swipeleft'\n      enableDeletable = 'swiperight'\n    }\n\n\n    let editButton = `<button class=\"edit\">${ settings.editLabel }</button>`\n    let screen = $(settings.element).closest('ui-screen')\n    let nav = screen.find('nav')\n    // console.dir(settings.element)\n    // console.dir('ui-screen')\n    nav.append(editButton)\n    nav.find('.back').hide()\n    nav.prepend(`<button class=\"cancel\">${ settings.cancelLabel }</button>`)\n    nav.find('.cancel').hide()\n    let editBtn = $(settings.element).closest('ui-screen').find('nav .edit')\n    let cancelBtn = $(settings.element).closest('ui-screen').find('nav .cancel')\n    $(settings.element).on('tap', '.deletion-indicator', function() {\n      this.parentNode.classList.toggle('selected')\n    })\n    editBtn.on('tap', function () {\n      let $this = this\n      /**\n       * When button is in \"Edit\" state:\n       */\n      let cancelBtn = $this.parentNode.querySelector('.cancel')\n      if (this.classList.contains('edit')) {\n        setTimeout(function () {\n          $this.classList.remove('edit')\n          $this.classList.add('done')\n          $($this).text(settings.doneLabel)\n          document.querySelector(settings.element).classList.add('showIndicators')\n          let backBtn = $this.parentNode.querySelector('.back')\n          $(backBtn).hide()\n          $(cancelBtn).css('display', 'block')\n\n        })\n\n        /**\n         * When button is in \"Done\" state:\n         */\n      } else if (this.classList.contains('done')) {\n        /**\n         * Execute callback if edit was performed:\n         */\n        setTimeout(function () {\n          $this.classList.remove('done')\n          $this.classList.add('edit')\n          $($this).text(settings.editLabel)\n          let list = document.querySelector(settings.element)\n          list.classList.remove('showIndicators')\n          let selectedItems = $(settings.element + ' li.selected')\n          selectedItems.forEach(function(li) {\n            li.classList.remove('selected')\n          })\n          $(cancelBtn).css('display', 'none')\n        })\n\n        if (!__editMade) return\n        let movedItems = []\n\n        /**\n         * Reorder model based on user choice:\n         */\n        if (settings.state) {\n          // (function () {\n            let __data = settings.state.dataStore\n            let __newarray = []\n            let liData = $(settings.element).find('li')\n            let temp = []\n            liData.array.map(item => {\n              temp.push(item.dataset.id)\n            })\n            temp.forEach(item => {\n              let found = __data.find(li => {\n                return li.uuid === item\n              })\n              __newarray.push(found)\n            })\n            settings.state.purge()\n            settings.state.replace(__newarray)\n            __newarray = []\n          // })()\n\n          self.callback.call(self, self.callback)\n        }\n      }\n    })\n    cancelBtn.on('tap', function() {\n      let $this = this\n      let editBtn = $(settings.element).closest('ui-screen').find('nav .done')\n      editBtn.text(settings.editLabel)\n      editBtn.array[0].classList.remove('done')\n      editBtn.array[0].classList.add('edit')\n      setTimeout(function () {\n        document.querySelector(settings.element).classList.remove('showIndicators')\n        let backBtn = $this.parentNode.querySelector('.back')\n        $(backBtn).show()\n        $($this).css('display', 'none')\n      })\n    })\n  }\n}\n\n\nclass UIMultiSelectList {\n  constructor(options) {\n    if (!options || !options.element) return\n    const self = this\n    let settings = {\n      element: undefined,\n      selected: [],\n      name: $.uuid() + '[]',\n      callback: $.noop,\n      state: undefined\n    }\n    this.selection = []\n    $.extend(settings, options)\n    let selections = settings.selected\n    const name = settings.name\n    const list = $(settings.element)\n    const selectionIndicator = function(value) {\n      return`<aside>\n        <span class=\"multi-selection-indicator\">\n          <svg width=\"30px\" height=\"30px\" viewBox=\"0 0 30 30\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"multi-select-icon\" stroke=\"#979797\">\n              <g id=\"multi-select-circle-+-multi-select-checkmark\" transform=\"translate(2.000000, 2.000000)\">\n                <circle id=\"multi-select-circle\" cx=\"13\" cy=\"13\" r=\"13\"></circle>\n                <path d=\"M4.71521456,15.9877529 L13.0000002,20.7028494 L19.977049,5.70284941\" id=\"multi-select-checkmark\"></path>\n                </g>\n              </g>\n            </g>\n          </svg>\n        </span>\n      </aside>`\n    }\n    if (settings.state) {\n      settings.state.boundComponents.push(this)\n    }\n\n    // this.val = () => __selection\n\n\n    this.render = function(data, append) {\n      var temp = ''\n      if (!settings.element) {\n        return\n      }\n\n      if (!data && settings.state) {\n        data = settings.state.dataStore\n      }\n\n      if (Array.isArray(data)) {\n        data.map(function(item, idx) {\n          temp += settings.render(item)\n        }).join('')\n      } else {\n        return\n      }\n\n      var elm = $(settings.element)\n      elm.array[0].classList.add('multi-select-list')\n      elm.empty()\n      elm.append(temp)\n      setTimeout(function() {\n        var data = settings.state.dataStore\n        var listItems = Array.prototype.slice.apply(elm[0].querySelectorAll('li'))\n        listItems.map((item, idx) => {\n          item.dataset.select = data[idx].value\n          if (settings.selected && settings.selected.length) {\n            if (settings.selected.indexOf(idx) > -1) {\n              item.classList.add('selected')\n\n              self.selection.push({\n                index: idx,\n                value: data[idx].value\n              })\n              $(item).append(`<input type=\"checkbox\" checked name=\"${ name }\" value=\"${ data[idx].value }\">`)\n            } else {\n              $(item).append(`<input type=\"checkbox\" name=\"${ name }\" value=\"${ data[idx].value }\">`)\n            }\n          } \n          $(item).prepend(selectionIndicator(data[idx][settings.value]))\n          \n        })\n      })\n    }\n\n    list.on('tap', 'li', function() {\n      const item = this\n      if (item.classList.contains('selected')) {\n        item.classList.remove('selected')\n        item.removeAttribute('aria-checked')\n        item.querySelector('input').checked = false\n        let dataObj = {\n          index: $(item).index(),\n          value: item.dataset.select\n        }\n        let pos\n        self.selection.forEach(function(item, idx) {\n          if (item.value === dataObj.value) {\n            pos = idx\n          }\n        })\n\n        self.selection.splice(pos, 1)\n        settings.callback.apply(this, arguments)\n\n      } else {\n        self.selection.push({\n          index: $(item).index(),\n          value: item.dataset.select\n        })\n        self.selection.unique()\n        item.classList.add('selected')\n        item.setAttribute('aria-checked', true)\n        item.querySelector('input').checked = true\n        settings.callback.apply(this, arguments)\n      }\n    })\n  }\n}\n\n\n$(() => {\n  const chuiBackButtonSVG = `<svg id=\"chui-back-button-svg\" width=\"100px\" height=\"100px\" viewBox=\"0 0 100 100\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n      <g id=\"chui-back-arrow\" stroke=\"#979797\">\n        <path d=\"M50.7822487,4.05872022 L5.60302012,49.1913445 L50.4625593,94.6779982\" id=\"back-arrow-bracket\"></path>\n        <path d=\"M6,49.368351 L95.8300018,49.368351\" id=\"back-arrow-shaft\"></path>\n      </g>\n    </g>\n  </svg>`\n\n  $.fn.extend({\n    decorateBackButton: function() {\n      this.forEach(button => {\n        if (button.classList.contains('back') || button.classList.contains('backTo')) {\n          const buttonText = button.textContent.trim()\n          button.innerHTML = `<span>${ buttonText }</span>`\n          $(button).prepend(chuiBackButtonSVG)\n        }\n      })\n    }\n  })\n  $(function () {\n    $('.back').decorateBackButton()\n    $('.backTo').decorateBackButton()\n  })\n\n  let isNavigating = false\n  const getScreen = screen => $('#' + screen).array[0]\n\n  const makeScreenCurrent = screen => {\n    if (!screen) return\n    screen.classList.add('current')\n    screen.classList.remove('previous')\n    screen.classList.remove('next')\n  }\n  const makeScreenPrevious = screen => {\n    if (!screen) return\n    screen.classList.remove('current')\n    screen.classList.remove('next')\n    screen.classList.add('previous')\n  }\n  const makeScreenNext = screen => {\n    if (!screen) return\n    screen.classList.remove('current')\n    screen.classList.remove('previous')\n    screen.classList.add('next')\n  }\n\n  $.extend({\n\n    /**\n     * Navigate to Specific Article\n     */\n    GoTo: destination => {\n      if ($.isNavigating) return\n      $.isNavigating = true\n      setTimeout(function () {\n        $.isNavigating = false\n      }, 500)\n      $.ChuiRoutes.push(destination)\n      const currentScreen = $('ui-screen.current').array[0]\n      const destinationScreen = function () {\n        let temp\n        const regex = /:/img\n        temp = regex.test(destination) ? destination.split(':')[0] : destination\n        return getScreen(temp)\n      }()\n      if (currentScreen) currentScreen.scrollTop = 0\n      if (destinationScreen) destinationScreen.scrollTop = 0\n      makeScreenPrevious(currentScreen)\n      makeScreenCurrent(destinationScreen)\n      Router.dispatch(destination)\n    },\n\n    /**\n     * Navigate Back to Previous Article\n     */\n    GoBack: () => {\n      if ($.isNavigating) return\n      $.isNavigating = true\n      const currentScreen = $('ui-screen.current').array[0]\n      $.ChuiRoutes.pop()\n      const destination = $.ChuiRoutes[$.ChuiRoutes.length - 1]\n      const destinationScreen = function () {\n        let temp\n        const regex = /:/img\n        temp = regex.test(destination) ? destination.split(':')[0] : destination\n        return getScreen(temp)\n      }()\n      if (currentScreen[0]) currentScreen[0].scrollTop = 0\n      if (destinationScreen[0]) destinationScreen[0].scrollTop = 0\n      makeScreenNext(currentScreen)\n      makeScreenCurrent(destinationScreen)\n      Router.dispatch(destination)\n      setTimeout(function () {\n        $.isNavigating = false\n      }, 500)\n    },\n\n    isNavigating: false,\n\n    /**\n     * Navigate Back to Non-linear Article\n     */\n    GoBackTo: destination => {\n      const position = $.ChuiRoutes.findIndex(function(dest) {\n        return dest = destination\n      })\n      const destinationScreen = getScreen(destination)\n      while ($.ChuiRoutes.length > position + 1) {\n        let route = $.ChuiRoutes.pop()\n        route = route.split(':')[0]\n        let screen = getScreen(route)\n        makeScreenNext(screen)\n      }\n      makeScreenCurrent(destinationScreen)\n      Router.dispatch(destination)\n    }\n  })\n\n  /**\n   * Initialize Back Buttons:\n   */\n  $('body').on('tap', '.back', function () {\n    if (this.hasAttribute('disabled')) return\n    $.GoBack()\n  })\n\n  /**\n   * Handle navigation events:\n   */\n  const handleNavigationEvent = element => {\n    if ($.isNavigating) return\n    if (!element.dataset.goto) return\n    if ($(element).closest('ul').is('.deletable')) return\n    let destination = element.dataset.goto\n    // console.log(destination)\n    if (!destination) return\n    element.classList.add('selected')\n    setTimeout(() => element.classList.remove('selected'), 1000)\n    /**\n     * Handle navigation:\n     */\n    $.GoTo(destination)\n  }\n\n  $('body').on('tap', 'li', function () {\n    handleNavigationEvent(this)\n  })\n  \n  $('body').on('doubletap', 'li', function () {\n    if (!$.isNavigating) {\n      handleNavigationEvent(this)\n    }\n  })\n  const globalNav = html`<nav id='global-nav'></nav>`\n  $('body').prepend(globalNav)\n})\n\n\n/**\n * Paging control.\n * const options = {\n *   element: selector,\n *   screen: '#main',\n *   data: collection[],\n *   size: 3\n * }\n */\nclass UIPaging {\n  constructor(options) {\n    if (!options) return\n    const pagingControls = `\n      <div class=\"pager\" id='paging-controls'>\n        <button class=\"previous\" id='paging-previous' disabled>\n          <svg width=\"24px\" height=\"36px\" viewBox=\"0 0 24 36\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"pagination-icons\" stroke=\"#979797\"><path d=\"M19.7729197,3 L4.25431067,17.8699971 L19.7729196,32.9558941\" id=\"page-previous\"></path></g></g></svg>\n        </button>\n        <button class=\"next\" id='paging-next'>\n          <svg width=\"24px\" height=\"36px\" viewBox=\"0 0 24 36\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g id=\"pagination-icons\" stroke=\"#979797\"><path d=\"M4.08862955,3.06871359 L20.0261609,18.0528447 L4.08862956,32.9999994\" id=\"page-next\"></path></g></g></svg>\n        </button>\n      </div>`;\n    const settings = {}\n    $.extend(settings, options)\n    var screen = $(settings.screen);\n    screen.find('nav').append(pagingControls)\n    var chunks = $.chunk(settings.data, settings.size)\n\n    /**\n     * Setup buttons for paging.\n     */\n    $(() => {\n      $('#paging-next').on($.eventStart, function() {\n        if (this.disabled) return\n        var currPage = document.querySelector('article.current')\n        if (!currPage) return\n        var nextPage = currPage.nextElementSibling\n        if (nextPage && nextPage.className === 'next') {\n          currPage.classList.add('previous')\n          currPage.classList.remove('current')\n          nextPage.classList.add('current')\n          nextPage.classList.remove('next')\n          document.getElementById('paging-previous').removeAttribute('disabled')\n          if (!nextPage.nextElementSibling || !nextPage.nextElementSibling.classList.contains('next')) {\n            this.disabled = true\n          }\n        }\n      })\n      $('#paging-previous').on($.eventStart, function() {\n        if (this.disabled) return\n        var currPage = document.querySelector('article.current')\n        if (!currPage) return\n        var nextPage = currPage.previousElementSibling\n        if (nextPage && nextPage.className === 'previous') {\n          currPage.classList.add('next')\n          currPage.classList.remove('current')\n          nextPage.classList.add('current')\n          nextPage.classList.remove('previous')\n          document.getElementById('paging-next').removeAttribute('disabled')\n          if (!nextPage.previousElementSibling || !nextPage.previousElementSibling.classList.contains('previous')) {\n            this.disabled = true\n          }\n        }\n      })\n\n    })\n\n    this.render = function() {\n      var temp = ''\n      if (Array.isArray(chunks)) {\n\n        temp = settings.render(chunks)\n\n      } else {\n        return\n      }\n      var elm = $(settings.screen).find('section')\n      elm.empty()\n      elm.append(temp)\n    }\n\n  }\n}\n\n\nclass UIPopover {\n  constructor(options) {\n    if (!options) return\n    /**\n      id: myUniqueID,\n      title: 'Great',\n      callback: myCallback,\n    */\n    options = options || {}\n    let settings = {\n      id: $.uuid(),\n      callback: $.noop,\n      title: '',\n    }\n    $.extend(settings, options)\n    if (options && options.content) {\n      settings.content = options.content\n    } else {\n      settings.content = ''\n    }\n    const header = `<header><h1>${ settings.title }</h1></header>`\n    const popover = `<ui-popover id=\"${ settings.id }\">${ header }<section></section></ui-popover>`\n    const popoverID = '#' + settings.id\n\n    var side = document.dir === 'rtl' ? 'right' : 'left'\n\n    this.open = function() {\n      $.block('.5')\n      if (document.body.classList.contains('themeIsAndroid')) {\n        document.getElementById(settings.id).style.display = 'block'\n        setTimeout(() => {\n          document.getElementById(settings.id).classList.add('opened')\n          $.positionPopover(settings.trigger)\n        })\n      } else {\n        document.getElementById(settings.id).style.display = 'block'\n        document.getElementById(settings.id).classList.add('opened')\n        $.positionPopover(settings.trigger)\n      }\n    }\n\n    $('body').append(popover)\n    $(popoverID)[0].dataset.triggerEl = settings.trigger\n    $(popoverID).find('section').append(settings.content)\n    settings.callback.call(settings.callback, settings.trigger)\n\n  }\n}\n\n$.extend({\n  positionPopover: element => {\n    const el = document.querySelector(element)\n    let left = el.offsetLeft\n    let calcLeft\n    let calcTop\n    let po = $('ui-popover.opened')\n    calcLeft = po.array[0].offsetLeft\n    calcTop = el.offsetTop + el.clientHeight\n\n    if (document.dir === 'rtl') {\n      if ((po.array[0].clientWidth + el.offsetLeft) > window.innerWidth) {\n        po.css({\n          left: (po.array[0].clientLeft - 20) + 'px',\n          'top': (calcTop) + 25 + 'px'\n        })\n      } else {\n        if (el.offsetLeft < 250) {\n          po.css({\n            left: 20 + 'px',\n            'top': (calcTop + 25) + 'px'\n          })\n        } else {\n          po.css({\n            left: (left - 20) + 'px',\n            'top': (calcTop + 25) + 'px'\n          })\n        }\n      }\n    } else {\n      if ((po.array[0].clientWidth + el.offsetLeft) > window.innerWidth) {\n        po.css({\n          left: (window.innerWidth - po.array[0].clientWidth - 20) + 'px',\n          'top': (calcTop) + 25 + 'px'\n        })\n      } else {\n        po.css({\n          left: left + 'px',\n          'top': (calcTop + 25) + 'px'\n        })\n      }\n    }\n  },\n\n  closePopover: () => {\n    var popover = document.querySelector('ui-popover.opened')\n    if (!popover) return\n    $.unblock()\n    popover.classList.remove('opened')\n    popover.style.display = 'none'\n  }\n})\n$(() => {\n  window.onresize = () => {\n    const popover = document.querySelector('ui-popover.opened')\n    if (popover) {\n      const trigger = document.querySelector('ui-popover.opened').dataset.triggerEl\n      $.positionPopover(trigger)\n    }\n  }\n  $('body').on($.eventStart, 'ui-mask', e => {\n    $.closePopover()\n  })\n})\n\n\nclass UIPopup {\n  constructor(options) {\n\n    if (!options) return\n    let settings = {}\n    settings.id = $.uuid()\n    settings.content = true\n    $.extend(settings, options)\n    let width = ''\n    if (settings.width) {\n      width = `style=\"width:${settings.width}px\"`\n    }\n\n    const id = settings.id\n    const title = settings.title ? `<header><h1>${settings.title}</h1></header>` : ''\n    const message = settings.message ? `<p role=\"note\">${options.message}</p>` : ''\n    const cancelButton = options.cancelButton ? `<button class=\"cancel\" role=\"button\">${settings.cancelButton}</button>` : ''\n    const continueButton = settings.continueButton ? `<button class=\"continue\" role=\"button\">${settings.continueButton}</button>` : ''\n    const callback = settings.callback || $.noop\n    let popup\n    if (settings.empty) {\n      popup = `<div id=\"${id}\" class=\"popup\"><div ${width} class=\"dialog\" role=\"alertdialog\"></div></div>`\n    } else {\n      popup = `<div class=\"popup\" id=\"${id}\"><div class=\"dialog\" role=\"alertdialog\"><div class=\"panel\">${title}${message}</div><footer>${cancelButton}${continueButton}</footer></div></div>`\n    }\n    function closePopup(popup) {\n      popup.classList.remove('opened')\n    }\n    $('body').append(popup)\n    if (settings.empty) {\n      $('.dialog').css({\n        \"display\": \"-webkit-flex\",\n        \"-webkit-justify-content\": \"center\",\n        \"-webkit-align-items\": \"center\",\n        \"display\": \"flex\",\n        \"justify-content\": \"center\",\n        \"align-items\": \"center\"\n      })\n    }\n    this.close = function() {\n      const popup = document.getElementById(settings.id)\n      if (popup) popup.classList.remove('opened')\n    }\n    if (callback && continueButton) {\n      $('#' + id).find('.continue').on('tap', function () {\n        const self = this\n        if ($.isAndroid || $.isChrome) {\n          self.classList.add('selected')\n          setTimeout(function () {\n            self.classList.remove('selected')\n            $('.popup').ClosePopup()\n            callback.call(callback)\n          }, 300)\n        } else {\n          closePopup($(this).closest('.popup').array[0])\n          callback.call(callback)\n        }\n      })\n    }\n    $('#' + id).find('.cancel').on('tap', function () {\n      const popup = $(this).closest('.popup').array[0]\n      const self = this\n      if ($.isAndroid || $.isChrome) {\n        self.classList.remove('selected')\n        setTimeout(function () {\n          self.classList.remove('selected')\n          closePopup(popup)\n        }, 300)\n      } else {\n          closePopup(popup)\n      }\n    })\n\n    $(function() {\n      $('.popup').on('tap', function (e) {\n        this.classList.remove('opened')\n      })\n    })\n\n    this.open = () => {\n      const popup = document.getElementById(settings.id)\n      if (popup) {\n        popup.classList.remove('forPopup')\n        popup.classList.add('opened')\n      }\n    }\n  }\n}\n\n\nclass UIRange {\n  constructor(range) {\n    function _range(input) {\n      if (!input || input.nodeName !== 'INPUT') return\n      let newPlace\n      const width = input.clientWidth\n      const newPoint = (input.value - input.getAttribute(\"min\")) / (input.getAttribute(\"max\") - input.getAttribute(\"min\"))\n      let offset = -1.3\n      if (newPoint < 0) {\n        newPlace = 0\n      } else if (newPoint > 1) {\n        newPlace = width\n      } else {\n        newPlace = width * newPoint + offset\n        offset -= newPoint\n      }\n      if ($.theme  && $.theme === 'android') {\n        $(input).css({\n          'background-size': Math.round(newPlace) + 'px 3px, 100% 3px'\n        })\n      } else {\n        $(input).css({\n          'background-size': Math.round(newPlace) + 'px 10px'\n        })\n      }\n    }\n    setTimeout(() => {\n      const ranges = $('input[type=range]')\n      if (ranges.array.length) {\n        ranges.array.forEach(ctx => {\n          _range(ctx)\n        })\n      }\n    })\n    $('body').on('input', 'input[type=range]', function() {\n      _range(this)\n    })\n    if (range) {\n      $(() => {\n        _range(range)\n      })\n    }\n  }\n}\n\n\n$.extend({\n  ChuiRoutes: []\n})\nclass Router {\n  constructor() {}\n\n  addRoute(...options) {\n    options.forEach(item => $.subscribe(item.route, item.callback));\n  }\n  static dispatch(route) {\n    if (!route) return\n    let temp\n    let id\n    if (route.match(/\\:/)) {\n      temp = route.split(':')\n      id = temp[1]\n      route = temp[0]\n    }\n    $.publish(route, id)\n  }\n}\n\n$.extend($.ChuiRoutes, {\n  getFullRoute: function getFullRoute() {\n    return this.join('/')\n  }\n})\n\n$(() => {\n  if ($('ui-screen').array.length && !$.ChuiRoutes.length) {\n    $.ChuiRoutes.push($('ui-screen').array[0].id)\n  }\n})\n\n\nclass UISegmented {\n  constructor(options) {\n    if (!options || !options.element) return\n    const self = this\n    let settings = {\n      selected: 0,\n      callback: $.noop\n    }\n    $.extend(settings, options)\n\n    this.button\n    let segmented\n    const labels = (settings.labels) ? settings.labels : []\n    this.index\n    this.element = settings.element\n\n    function createSegmentedButton() {\n      let androidSelectionIndicator = ''\n      if ($.theme = 'android') {\n        androidSelectionIndicator = '<span class=\"androidSelectionBorder\"></span>'\n      }\n      let __segmented = ['<ui-segmented>']\n      labels.forEach(function(ctx, idx) {\n        if (settings.selected === idx) {\n          __segmented.push('<button role=\"radio\" aria-checked=\"true\" class=\"selected\">')\n          self.index = idx\n        } else {\n          __segmented.push('<button role=\"radio\">')\n        }\n\n        __segmented.push(ctx)\n        __segmented.push('</button>')\n      })\n      __segmented.push(androidSelectionIndicator + '</ui-segmented>')\n      segmented = __segmented.join('')\n      $(settings.element).append(segmented)\n      self.button = $(settings.element).find('button').eq(settings.selected).array[0]\n\n\n\n    }\n    createSegmentedButton()\n\n    /**\n     * For Android Material Design:\n     */\n    let androidSelectionBorder\n    if ($.theme === 'android') {\n      androidSelectionBorder = $(this.element).find('.androidSelectionBorder')\n      let selectedButton = $(this.element).find('button').eq(settings.selected)\n      let width = selectedButton.array[0].clientWidth\n      let left = selectedButton.array[0].offsetLeft\n      androidSelectionBorder.css({width: width + 'px', left: left + 'px'})\n    }\n\n    const callback = settings.callback\n    $(this.element).on('tap', 'ui-segmented > button', function(e) {\n      if (this.parentNode.classList.contains('paging')) return\n      $(this).siblings('button').array.map(btn => btn.classList.remove('selected'))\n      $(this).siblings('button').array.map(btn => btn.removeAttribute('aria-checked'))\n      this.classList.add('selected')\n      self.index = $(this).index()\n      self.button = this\n      this.setAttribute('aria-checked', true)\n      callback.call(this, e)\n\n      /**\n       * For Android Material Design:\n       */\n      if ($.theme === 'android') {\n        let width = this.clientWidth\n        let left = this.offsetLeft\n        if (document.dir === 'rtl') {\n          left = this.offsetLeft\n        }\n        androidSelectionBorder.css({width: width + 'px', left: left + 'px'})\n      }\n    })\n  }\n}\n\n\nclass UISelectList {\n  constructor(options) {\n    if (!options || !options.element) return\n    var self = this\n    let settings = {\n      element: undefined,\n      selected: undefined,\n      name: $.uuid(),\n      callback: $.noop,\n      state: undefined,\n      render: undefined,\n      value: undefined,\n    }\n    $.extend(settings, options)\n    this.value = settings.value\n    this.index = settings.selected\n    const name = settings.name\n    this.elm = $(settings.element)\n\n    const selectionIndicator = function(value) {\n      return `\n        <input type='radio' value='${value}' name='${settings.name}'><aside>\n        <span class=\"selection-indicator\">\n          <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <g id=\"selection-indicator\">\n                <path d=\"M2,13 L9.9294326,16.8406135 L17.1937075,1.90173332\" id=\"checkmark\" stroke=\"#007AFF\" stroke-width=\"2\"></path>\n                <circle id=\"outer-circle\" stroke=\"#007AFF\" stroke-width=\"2\" cx=\"10\" cy=\"10\" r=\"9\"></circle><circle id=\"inner-circle\" fill=\"#007AFF\" cx=\"10\" cy=\"10\" r=\"5\"></circle>\n              </g>\n            </g>\n          </svg>\n        </span>\n      </aside>\n      `\n    }\n    if (settings.state) {\n      settings.state.boundComponents.push(this)\n    }\n    let settingsData\n    if (settings.state) settingsData = settings.state.dataStore\n    this.value = settingsData ? settingsData[settings.selected].value : ''\n    this.index = settings.selected\n\n    this.render = function(data, append) {\n      var temp = ''\n      if (!settings.element) {\n        return\n      }\n\n      if (!data && settings.state) {\n        data = settings.state.dataStore\n      }\n\n      if (Array.isArray(data)) {\n        data.map(function(item) {\n          temp += settings.render(item)\n        }).join('')\n      } else {\n        return\n      }\n\n      this.elm.textContent = ''\n      var elm = $(settings.element)\n      elm.empty()\n      elm.append(temp)\n      setTimeout(function() {\n        var data = settings.state.dataStore\n        var listItems = Array.prototype.slice.apply(elm[0].querySelectorAll('li'))\n        listItems.map((item, idx) => {\n          $(item).append(selectionIndicator(data[idx].value, idx))\n          if (idx == settings.selected) {\n            item.classList.add('selected')\n            $(item).find('input')[0].checked = true\n          }\n        })\n      })\n    }\n\n    $(settings.element).on('tap', 'li', function() {\n      const item = $(this)\n      self.value = this.querySelector('input').value\n      self.index = item.index()\n\n      var siblings = item.siblings('li')\n      siblings.forEach(function(sib) {\n        sib.removeAttribute('aria-checked')\n        sib.classList.remove('selected')\n        sib.querySelector('input').checked = false\n      })\n      this.classList.add('selected')\n      this.setAttribute('aria-checked', true)\n      this.querySelector('input').checked = true\n      settings.callback.apply(this, arguments)\n    })\n  }\n}\n\n\nclass UISheet {\n  constructor(options) {\n    if (!options) return\n    /**\n      var options {\n        id : 'starTrek',\n        background: 'transparent',\n        handle: false,\n        slideDown: false // default is slideUp\n      }\n    */\n    if (!options) return\n    let settings = {\n      id: $.uuid(),\n      background: '',\n      handle: true,\n      slideFrom: ''\n    }\n\n    $.extend(settings, options)\n\n    if (settings.background) settings.background = ' style=\"background-color:' + settings.background + '\" '\n    if (settings.slideFrom === 'top') {\n      settings.slideDown = ` class=\"slideDown\" `\n    } else {\n      settings.slideFrom = ' '\n    }\n    if (settings.handle === false) settings.handle = ''\n    else settings.handle =\n      `<ui-sheet-handle>\n        <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 76 27\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:butt;stroke-linejoin:butt;stroke-miterlimit:1.41421;\">\n          <g id=\"sheet-handle\" transform=\"matrix(1,0,0,1,-29.7966,-15.7797)\">\n            <path id=\"sheet-handle-path\" d=\"M36.25,26.242L67.645,34.215L98.176,25.789\" style=\"fill:none;\"/>\n          </g>\n        </svg>\n      </ui-sheet-handle>`\n\n    const sheet = `<ui-sheet id=\"${ settings.id }\" ${ settings.slideDown } ${ settings.background }>${ settings.handle }<section></section></ui-sheet>`\n\n    $('body').append(sheet)\n\n    $('#' + settings.id).find('ui-sheet-handle').on($.eventStart, () => {\n      $('#' + settings.id).array[0].classList.remove('opened')\n      document.querySelector('ui-screen.current').classList.remove('blurred')\n    })\n\n    this.show = () => {\n      let sheet = document.getElementById(settings.id)\n      document.querySelector('ui-screen.current').classList.add('blurred')\n      sheet.classList.add('opened')\n      if ($.isAndroid || $.isChrome) {\n        sheet.style.display = 'block'\n        setTimeout(function() {\n          sheet.classList.add('opened')\n        }, 20)\n      } else {\n        sheet.classList.add('opened')\n      }\n    }\n\n    this.hide = () => {\n      $('#' + settings.id).array[0].classList.remove('opened')\n      document.querySelector('ui-screen.current').classList.remove('blurred')\n    }\n\n    this.populate = (template) => $('#' + settings.id).find('section').append(template)\n  }\n}\n\n\nclass UISlideOut {\n  constructor(id) {\n    const slideoutID = id || $.uuid()\n    this.id = slideoutID\n    const buttonID = 'slideoutBtnID1234'\n    const slideOutButton = `<button id=\"${ buttonID }\" class=\"slide-out-button\"></button>`\n    const slideOut = `<ui-slideout id=\"${ slideoutID }\"><section></section></ui-slideout>`\n    $('body').prepend(slideOut)\n    $('body').append(slideOutButton)\n    /**\n     * Get Slide Out & Slide Out button:\n     */\n    let slideout = document.getElementById(slideoutID)\n    let slideOutBtn = document.getElementById(buttonID)\n\n    /**\n     * Set up state for Slide Out and screens:\n     */\n    slideout.setAttribute('aria-hidden', true)\n    $('ui-screen').forEach(screen => {\n      screen.setAttribute('aria-hidden', true)\n    })\n    document.querySelector('ui-screen').classList.add('show')\n    document.querySelector('ui-screen').setAttribute('aria-hidden', \"false\")\n\n\n    /**\n     * Handle Slide Out button events:\n     */\n    $('#'+buttonID).on('tap', function() {\n      this.classList.toggle('focused')\n      slideout.classList.toggle('open')\n      if (slideout.classList.contains('open')) {\n        $.block('.5')\n      } else {\n        $.unblock()\n      }\n    })\n\n    $(slideout).on('tap', 'li', function() {\n      let menuItems = $(slideout).find('li[data-show]')\n      slideout.setAttribute('aria-hidden', 'true')\n      $.unblock()\n\n      /**\n       * Toggle Slide Out button:\n       */\n      slideOutBtn.classList.toggle('focused')\n      while ($.ChuiRoutes.length > 1) {\n        $.GoBack()\n      }\n\n      /**\n       * This list item shows a single screen:\n       */\n      menuItems.forEach(item => {\n        if (item.classList.contains('selected')) {\n          item.classList.remove('selected')\n        }\n      })\n      const shownScreen = document.querySelector('ui-screen.show')\n      shownScreen.classList.remove('show')\n      shownScreen.setAttribute('aria-hidden', true)\n      const screenToShow = '#' + this.dataset.show.split(':')[0]\n      /**\n       * Account for presence of navigation list state:\n       */\n      setTimeout(function() {\n        document.querySelector(screenToShow).classList.remove('next')\n      }, 200)\n      document.querySelector(screenToShow).classList.add('show')\n      // console.log()\n      Router.dispatch(this.dataset.show)\n      /**\n       * Close slide out:\n       */\n      slideout.classList.remove('open')\n    })\n  }\n\n  populate(options) {\n    if (!options) return\n    const slideout = document.getElementById(this.id)\n    if (!options) {\n      return\n    } else {\n      slideout.querySelector('section').appendChild($.h('<ul class=\"list\"></ul>'))\n      let list = slideout.querySelector('ul')\n      options.forEach(ctx => {\n        for (let key in ctx) {\n          if (key === 'header') {\n            $(list).append('<li class=\"menu-header\"><h2>' + ctx[key] + '</h2></li>')\n          } else {\n            $(list).append('<li data-show=\"' + key + '\"><h3>' + ctx[key] + '</h3></li>')\n          }\n        }\n      })\n    }\n  }\n}\n\n\nclass UIStepper {\n  constructor(options) {\n    if (!options || !options.element || !options.min || !options.max) return\n    var self = this\n    this.stepper = $(options.element)\n    const min = options.min\n    const max = options.max\n    const defaultValue = options.defaultValue ? options.defaultValue : options.min\n    let increaseSymbol = '+'\n    let decreaseSymbol = '-'\n    let disabledDecrease = ''\n    let disabledIncrease = ''\n    this.value\n    if (min === defaultValue) {\n      disabledDecrease = ' disabled '\n    } else if (max === defaultValue) {\n      disabledIncrease = ' disabled '\n    }\n    const decreaseButton = '<button ' + disabledDecrease + ' class=\"decrease\"><span>-</span></button>'\n    const label = `<label>${ defaultValue }</label><input type=\"text\" value=\"${ defaultValue }\">`\n    const increaseButton = '<button ' + disabledIncrease + '  class=\"increase\"><span>+</span></button>'\n    $(options.element).append(decreaseButton + label + increaseButton)\n    var dataVal = {\n      min: min,\n      max: max,\n      defaultValue: defaultValue\n    }\n    $(options.element).array[0].dataset.value = JSON.stringify(dataVal)\n\n    const increaseStepperValue = function() {\n      const currentValue = $(options.element).find('input').array[0].value\n      const value = JSON.parse($(options.element).array[0].dataset.value)\n      const max = value.max\n      let newValue\n      newValue = parseInt(currentValue, 10) + 1\n      $(options.element).find('button:first-of-type').array[0].removeAttribute('disabled')\n      $(options.element).find('label').text(newValue)\n      $(options.element).find('input').array[0].value = newValue\n      self.value = newValue\n      if (newValue == max) {\n        this.setAttribute('disabled', 'disabled')\n      }\n    }\n\n    const decreaseStepperValue = function() {\n      const currentValue = $(options.element).find('input').array[0].value\n      const value = JSON.parse($(options.element).array[0].dataset.value)\n      let newValue\n      newValue = parseInt(currentValue, 10) - 1\n      $(options.element).find('button:last-of-type').array[0].removeAttribute('disabled')\n      $(options.element).find('label').text(newValue)\n      $(options.element).find('input').array[0].value = newValue\n      self.value = newValue\n      if (newValue === min) {\n        this.setAttribute('disabled', 'disabled')\n      }\n    }\n\n    $(options.element).find('button:last-of-type').on($.eventStart, function() {\n      increaseStepperValue.call(this, this.__stepper)\n    })\n\n    $(options.element).find('button:first-of-type').on($.eventStart, function() {\n      decreaseStepperValue.call(this, this.__stepper)\n    })\n  }\n}\n\n\nclass UISwitch {\n  constructor(options) {\n    if (!options || !options.element) return\n    this.checked = false\n    this.value = undefined\n    const self = this\n    let settings = {\n      element: undefined,\n      name: undefined,\n      value: undefined,\n      checked: false,\n      on: $.noop,\n      off: $.noop\n    }\n    $.extend(settings, options)\n    this.checked = settings.checked\n    this.value = settings.value\n    let __element = $(settings.element)\n    let __el = __element.array[0]\n    /**\n     * Abrstract swipe for left-to-right and right-to-left:\n     */\n    let swipeOn = \"swiperight\"\n    let swipeOff = \"swipeleft\"\n    if (document.documentElement.dir === \"rtl\") {\n      swipeOn = \"swipeleft\"\n      swipeOff = \"swiperight\"\n    }\n\n    let checkState = settings.checked ? ' checked' : ''\n    const __switch = `<em></em><input type=\"checkbox\" name=\"${ settings.name }\" ${ checkState } value=\"${ settings.value }\">`\n\n    __element.append(__switch)\n    __el.value =  settings.value\n    __el.setAttribute('name', settings.name)\n\n    if (this.checked) {\n      __el.classList.add('checked')\n      __el.setAttribute('role', 'checkbox')\n      __el.checked = true\n    }\n\n\n\n    __element.on('tap', function() {\n      const checkbox = this.querySelector('input')\n      if (this.classList.contains('checked')) {\n        this.classList.remove('checked')\n        this.setAttribute('aria-checked', false)\n        checkbox.removeAttribute('checked')\n        this.checked = false\n        self.checked = false\n        __el.checked = false\n        if (settings.off) {\n          settings.off.call(this)\n        }\n      } else {\n        this.classList.add('checked')\n        checkbox.setAttribute('checked', 'checked')\n        __el.checked = true\n        this.setAttribute('aria-checked', true)\n        this.checked = true\n        self.checked = true\n        if (settings.on) {\n          settings.on.call(this)\n        }\n\n      }\n    })\n    __element.on(swipeOn, function() {\n      const checkbox = this.querySelector('input')\n      if (this.classList.contains('checked')) {\n        this.classList.remove('checked')\n        this.setAttribute('aria-checked', false)\n        __el.checked = false\n        checkbox.removeAttribute('checked')\n        this.checked = true\n        self.checked = true\n        if (settings.on) {\n          settings.on.call(this)\n        }\n      }\n    })\n    __element.on(swipeOff, function() {\n      const checkbox = this.querySelector('input')\n      if (!this.classList.contains('checked')) {\n        this.classList.add('checked')\n        checkbox.setAttribute('checked', 'checked')\n        this.setAttribute('aria-checked', true)\n        __el.checked = true\n        this.checked = false\n        self.checked = false\n        if (settings.off) {\n          settings.off.call(this)\n        }\n      }\n    })\n  }\n}\n\n\nclass UITabbar {\n  constructor(options) {\n    if (!options) return\n    let id = $.uuid()\n    let settings = {\n      selected: 0\n    }\n    $.extend(settings, options)\n    if (!settings.icons.length) {\n      settings.icons = settings.labels\n    }\n    if (!settings.id) {\n      settings.id = id\n    } else {\n      id = settings.id\n    }\n\n    /* Private variable to keep track of screens. */\n    let __tabbarScreens = new Stack()\n\n    let screens = new Stack()\n    const screenPrefix = '#'\n\n    if (settings.screens) {\n      settings.screens.forEach(function (screen, idx) {\n        if (!/screenPrefix/img.test(screen)) {\n          __tabbarScreens.push(document.getElementById(screen))\n          __tabbarScreens.array[idx].classList.add('tabScreen')\n        } else {\n          __tabbarScreens.concat($(ui-screen))\n          $(screen).array[0].classList.add('tabScreen')\n        }\n      })\n    } else {\n      settings.labels.forEach(function (screen, idx) {\n        __tabbarScreens.push(screens.eq(idx))\n      })\n    }\n    let selectedScreen\n    let androidSelectionIndicator = ''\n    if ($.theme === 'android') {\n      androidSelectionIndicator = '<span class=\"androidSelectionBorder\"></span>'\n    }\n    const showIcons = settings.showIcons ? ' class=\"showIcons\" ' : ''\n\n    /* Create tabs. */\n    const makeTab = (label, icon, idx) => {\n      let tab = '<button role=\"tab\" class=\"' + icon\n      if (settings.selected === idx) {\n        tab += ' selected'\n        $.ChuiRoutes = [settings.screens[idx]]\n      }\n      tab += '\"'\n      if (settings.screens && settings.screens.length) {\n        tab += ` data-id=\"${ settings.screens[idx] }\" data-chui-route=\"${ settings.screens[idx] }\"`\n      }\n      tab += `><span class=\"icon\"></span><label>${ settings.labels[idx] }</label></button>`\n      return tab\n    }\n    /* Create tab bar. */\n    let tabbarTmpl = document.createElement('ui-tabbar')\n    tabbarTmpl.role = \"tabpanel\"\n    if (settings.showIcons) tabbarTmpl.classList.add('showIcons')\n    tabbarTmpl.insertAdjacentHTML('beforeend', androidSelectionIndicator)\n    tabbarTmpl.id = settings.id\n    window.tabbarTmpl = tabbarTmpl\n\n    if (settings.labels.length) {\n      settings.labels.forEach(function (label, idx) {\n        var tab = makeTab(label, settings.icons[idx], idx)\n        tabbarTmpl.appendChild($.h(tab))\n      })\n    }\n\n    /* Append tabbar to page. */\n    $('body').prepend(tabbarTmpl)\n\n    /* Get id of appended tab bar. */\n    const tabbar = $('#' + settings.id)\n    const selectedTabButton = tabbar.find('button.selected')\n\n\n    /* Private variables to manage tab bar. */\n    const __tabbarButtons = tabbar.find('button')\n    const __selectedTabbarButton = __tabbarButtons.eq(settings.selected)\n    const __selectedTabbarScreen = __tabbarScreens.eq(settings.selected)\n\n    /* For Android Material Design. */\n    const androidSelectionBorder = tabbar.find('.androidSelectionBorder')\n    function handleTabSelectionForAndroid(tab) {\n      let width = tab.clientWidth\n      let left = tab.offsetLeft\n      androidSelectionBorder.css({width: width + 'px', left: left + 'px'})\n    }\n    if ($.theme === 'android') {\n      $(function() {\n        console.dir(selectedTabButton)\n        handleTabSelectionForAndroid(selectedTabButton.array[0])\n\n      })\n    }\n\n    this.getSelectedTab = () => {\n      return __selectedTabbarButton\n    }\n\n    this.getSelectedScreen = () => {\n      return __selectedTabbarScreen\n    }\n\n    /* Setup events on tabs. */\n    $(() => {\n\n      const tabbarButtons = tabbar.find('button')\n\n      /* Tap on tab. */\n      tabbar.on('tap', 'button', function () {\n        const tab = this\n        const routes = tab.dataset.chuiRoute.split('/')\n        const fullRoute = $.ChuiRoutes.join('/')\n        let navRoutesFull = tab.dataset.chuiRoute\n        const navRoutes = navRoutesFull.split('/')\n        const rr = $.ChuiRoutes\n\n        /* This tab holds a navigation list. */\n        var currBtn = document.querySelector('ui-tabbar button.selected')\n        currBtn.classList.remove('selected')\n        currBtn.dataset.chuiRoute = fullRoute\n        this.classList.add('selected')\n        if (navRoutes.length > 1) {\n          navRoutesFull = tab.dataset.chuiRoute\n\n          const navRoutes = navRoutesFull.split('/')\n\n          const currScreen = document.querySelector('ui-screen.current')\n          if (currScreen) {\n            currScreen.classList.remove('current')\n            currScreen.classList.add('next')\n          }\n          const prevScreen = document.querySelector('ui-screen.previous')\n          if (prevScreen) {\n            prevScreen.classList.remove('previous')\n            prevScreen.classList.add('next')\n          }\n\n          navRoutes.forEach( (route, idx) => {\n            const routing = route.split(':')\n            let whichRoute = routing[0]\n            let screen = document.getElementById(whichRoute)\n            if (idx !== routes.length - 1) {\n              screen.classList.remove('next')\n              screen.classList.add('previous')\n              screen.setAttribute('aria-hidden', true)\n            } else {\n              screen.classList.remove('next')\n              screen.classList.add('current')\n              screen.setAttribute('aria-hidden', false)\n            }\n          })\n\n          /* Take care of routes. */\n          $.ChuiRoutes = routes\n          Router.dispatch(routes[routes.length - 1])\n\n          /* Handle Android ripple effect. */\n          if ($.theme === 'android') {\n            handleTabSelectionForAndroid(tab)\n          }\n\n          /* This tab has a single screen. */\n        } else {\n          const screen = $('ui-screen').eq($(tab).index())\n\n          /* Deal with previously selected tab and screen. */\n          const currScreen =  document.querySelector('ui-screen.current')\n          if (currScreen) {\n            currScreen.classList.remove('current')\n            currScreen.classList.add('next')\n            currScreen.setAttribute('aria-hidden', true)\n          }\n          const prevScreen = document.querySelector('ui-screen.previous')\n\n          if (prevScreen) {\n            prevScreen.classList.remove('previous')\n            prevScreen.classList.add('next')\n            prevScreen.setAttribute('aria-hidden', true)\n          }\n\n          /* Set this tab to `selected`. */\n          tab.classList.add('selected')\n          if ($.theme === 'android') {\n            handleTabSelectionForAndroid(tab)\n          }\n\n          routes.forEach( (route, idx) => {\n            const routing = route.split(':')\n            const whichRoute = routing[0]\n            const wr = document.getElementById(whichRoute)\n            if (idx !== routes.length - 1) {\n              wr.classList.remove('next')\n              wr.classList.add('previous')\n              wr.setAttribute('aria-hidden', true)\n\n            } else {\n              if (wr) {\n                wr.classList.remove('next')\n                wr.classList.add('current')\n                wr.setAttribute('aria-hidden', false)\n              } else {\n              }\n            }\n          })\n\n          /* Take care of routes. */\n          $.ChuiRoutes = routes\n          Router.dispatch(fullRoute)\n        }\n      })\n\n      $('ui-screen').eq(settings.selected).array[0].classList.remove('next')\n      $('ui-screen').eq(settings.selected).array[0].classList.add('current')\n    })\n\n  }\n}\n\n\n\n// const UITabbar = (() => {\n//   /* Creates a Tab Bar for Toggling Articles. */\n//   function _tabBar(options) {\n//     /**\n//     var options = {\n//       id: 'mySpecialTabbar',\n//       labels: [\"Refresh\", \"Add\", \"Info\", \"Downloads\", \"Favorite\"],\n//       icons: [\"refresh\", \"add\", \"info\", \"downloads\", \"favorite\"],\n//       screens: [],\n//       selected: 2,\n//       showIcons: false // set to true to show icons for Android\n//     }\n//     */\n//     if (!options) return\n//     let id = $.uuid()\n//     let settings = {\n//       selected: 0\n//     }\n//     $.extend(settings, options)\n//     if (!settings.icons.length) {\n//       settings.icons = settings.labels\n//     }\n//     if (!settings.id) {\n//       settings.id = id\n//     } else {\n//       id = settings.id\n//     }\n\n//     /* Private variable to keep track of screens. */\n//     let __tabbarScreens = new Stack()\n\n//     let screens = new Stack()\n//     const screenPrefix = '#'\n\n//     if (settings.screens) {\n//       settings.screens.forEach(function (screen, idx) {\n//         if (!/screenPrefix/img.test(screen)) {\n//           __tabbarScreens.push(document.getElementById(screen))\n//           __tabbarScreens.array[idx].classList.add('tabScreen')\n//         } else {\n//           __tabbarScreens.concat($(ui-screen))\n//           $(screen).array[0].classList.add('tabScreen')\n//         }\n//       })\n//     } else {\n//       settings.labels.forEach(function (screen, idx) {\n//         __tabbarScreens.push(screens.eq(idx))\n//       })\n//     }\n//     let selectedScreen\n//     let androidSelectionIndicator = ''\n//     if ($.theme === 'android') {\n//       androidSelectionIndicator = '<span class=\"androidSelectionBorder\"></span>'\n//     }\n//     const showIcons = settings.showIcons ? ' class=\"showIcons\" ' : ''\n\n//     /* Create tabs. */\n//     const makeTab = (label, icon, idx) => {\n//       let tab = '<button role=\"tab\" class=\"' + icon\n//       if (settings.selected === idx) {\n//         tab += ' selected'\n//         $.ChuiRoutes = [settings.screens[idx]]\n//       }\n//       tab += '\"'\n//       if (settings.screens && settings.screens.length) {\n//         tab += ` data-id=\"${ settings.screens[idx] }\" data-chui-route=\"${ settings.screens[idx] }\"`\n//       }\n//       tab += `><span class=\"icon\"></span><label>${ settings.labels[idx] }</label></button>`\n//       return tab\n//     }\n//     /* Create tab bar. */\n//     let tabbarTmpl = document.createElement('ui-tabbar')\n//     tabbarTmpl.role = \"tabpanel\"\n//     if (settings.showIcons) tabbarTmpl.classList.add('showIcons')\n//     tabbarTmpl.insertAdjacentHTML('beforeend', androidSelectionIndicator)\n//     tabbarTmpl.id = settings.id\n//     window.tabbarTmpl = tabbarTmpl\n\n//     if (settings.labels.length) {\n//       settings.labels.forEach(function (label, idx) {\n//         var tab = makeTab(label, settings.icons[idx], idx)\n//         tabbarTmpl.appendChild($.h(tab))\n//       })\n//     }\n\n//     /* Append tabbar to page. */\n//     $('body').prepend(tabbarTmpl)\n\n//     /* Get id of appended tab bar. */\n//     const tabbar = $('#' + settings.id)\n//     const selectedTabButton = tabbar.find('button.selected')\n\n\n//     /* Private variables to manage tab bar. */\n//     const __tabbarButtons = tabbar.find('button')\n//     const __selectedTabbarButton = __tabbarButtons.eq(settings.selected)\n//     const __selectedTabbarScreen = __tabbarScreens.eq(settings.selected)\n\n//     /* For Android Material Design. */\n//     const androidSelectionBorder = tabbar.find('.androidSelectionBorder')\n//     function handleTabSelectionForAndroid(tab) {\n//       let width = tab.clientWidth\n//       let left = tab.offsetLeft\n//       androidSelectionBorder.css({width: width + 'px', left: left + 'px'})\n//     }\n//     if ($.theme === 'android') {\n//       $(function() {\n//         console.dir(selectedTabButton)\n//         handleTabSelectionForAndroid(selectedTabButton.array[0])\n\n//       })\n//     }\n\n//     this.getSelectedTab = () => {\n//       return __selectedTabbarButton\n//     }\n\n//     this.getSelectedScreen = () => {\n//       return __selectedTabbarScreen\n//     }\n\n//     /* Setup events on tabs. */\n//     $(() => {\n\n//       const tabbarButtons = tabbar.find('button')\n\n//       /* Tap on tab. */\n//       tabbar.on('tap', 'button', function () {\n//         const tab = this\n//         const routes = tab.dataset.chuiRoute.split('/')\n//         const fullRoute = $.ChuiRoutes.join('/')\n//         let navRoutesFull = tab.dataset.chuiRoute\n//         const navRoutes = navRoutesFull.split('/')\n//         const rr = $.ChuiRoutes\n\n//         /* This tab holds a navigation list. */\n//         var currBtn = document.querySelector('ui-tabbar button.selected')\n//         currBtn.classList.remove('selected')\n//         currBtn.dataset.chuiRoute = fullRoute\n//         this.classList.add('selected')\n//         if (navRoutes.length > 1) {\n//           navRoutesFull = tab.dataset.chuiRoute\n\n//           const navRoutes = navRoutesFull.split('/')\n\n//           const currScreen = document.querySelector('ui-screen.current')\n//           if (currScreen) {\n//             currScreen.classList.remove('current')\n//             currScreen.classList.add('next')\n//           }\n//           const prevScreen = document.querySelector('ui-screen.previous')\n//           if (prevScreen) {\n//             prevScreen.classList.remove('previous')\n//             prevScreen.classList.add('next')\n//           }\n\n//           navRoutes.forEach( function(route, idx) {\n//             const routing = route.split(':')\n//             let whichRoute = routing[0]\n//             let screen = document.getElementById(whichRoute)\n//             if (idx !== routes.length - 1) {\n//               screen.classList.remove('next')\n//               screen.classList.add('previous')\n//               screen.setAttribute('aria-hidden', true)\n//             } else {\n//               screen.classList.remove('next')\n//               screen.classList.add('current')\n//               screen.setAttribute('aria-hidden', false)\n//             }\n//           })\n\n//           /* Take care of routes. */\n//           $.ChuiRoutes = routes\n//           Router.dispatch(routes[routes.length - 1])\n\n//           /* Handle Android ripple effect. */\n//           if ($.theme === 'android') {\n//             handleTabSelectionForAndroid(tab)\n//           }\n\n//           /* This tab has a single screen. */\n//         } else {\n//           const screen = $('ui-screen').eq($(tab).index())\n\n//           /* Deal with previously selected tab and screen. */\n//           const currScreen =  document.querySelector('ui-screen.current')\n//           if (currScreen) {\n//             currScreen.classList.remove('current')\n//             currScreen.classList.add('next')\n//             currScreen.setAttribute('aria-hidden', true)\n//           }\n//           const prevScreen = document.querySelector('ui-screen.previous')\n\n//           if (prevScreen) {\n//             prevScreen.classList.remove('previous')\n//             prevScreen.classList.add('next')\n//             prevScreen.setAttribute('aria-hidden', true)\n//           }\n\n//           /* Set this tab to `selected`. */\n//           tab.classList.add('selected')\n//           if ($.theme === 'android') {\n//             handleTabSelectionForAndroid(tab)\n//           }\n\n//           routes.forEach(function (route, idx) {\n//             const routing = route.split(':')\n//             const whichRoute = routing[0]\n//             const wr = document.getElementById(whichRoute)\n//             if (idx !== routes.length - 1) {\n//               wr.classList.remove('next')\n//               wr.classList.add('previous')\n//               wr.setAttribute('aria-hidden', true)\n\n//             } else {\n//               if (wr) {\n//                 wr.classList.remove('next')\n//                 wr.classList.add('current')\n//                 wr.setAttribute('aria-hidden', false)\n//               } else {\n//               }\n//             }\n//           })\n\n//           /* Take care of routes. */\n//           $.ChuiRoutes = routes\n//           Router.dispatch(fullRoute)\n//         }\n//       })\n\n//       $('ui-screen').eq(settings.selected).array[0].classList.remove('next')\n//       $('ui-screen').eq(settings.selected).array[0].classList.add('current')\n//     })\n//   }\n\n//   return _tabBar\n// })()\n"]}